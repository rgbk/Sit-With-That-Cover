function $U(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Ud(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var E1={exports:{}},Pg={};var XA;function jU(){if(XA)return Pg;XA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var u in r)u!=="key"&&(a[u]=r[u])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return Pg.Fragment=e,Pg.jsx=t,Pg.jsxs=t,Pg}var qA;function XU(){return qA||(qA=1,E1.exports=jU()),E1.exports}var je=XU(),w1={exports:{}},xn={};var YA;function qU(){if(YA)return xn;YA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function b(Y){return Y===null||typeof Y!="object"?null:(Y=_&&Y[_]||Y["@@iterator"],typeof Y=="function"?Y:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,w={};function E(Y,pe,we){this.props=Y,this.context=pe,this.refs=w,this.updater=we||S}E.prototype.isReactComponent={},E.prototype.setState=function(Y,pe){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,pe,"setState")},E.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function R(){}R.prototype=E.prototype;function D(Y,pe,we){this.props=Y,this.context=pe,this.refs=w,this.updater=we||S}var I=D.prototype=new R;I.constructor=D,A(I,E.prototype),I.isPureReactComponent=!0;var L=Array.isArray;function N(){}var F={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function P(Y,pe,we){var ke=we.ref;return{$$typeof:n,type:Y,key:pe,ref:ke!==void 0?ke:null,props:we}}function U(Y,pe){return P(Y.type,pe,Y.props)}function W(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function Q(Y){var pe={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(we){return pe[we]})}var K=/\/+/g;function ne(Y,pe){return typeof Y=="object"&&Y!==null&&Y.key!=null?Q(""+Y.key):pe.toString(36)}function re(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(N,N):(Y.status="pending",Y.then(function(pe){Y.status==="pending"&&(Y.status="fulfilled",Y.value=pe)},function(pe){Y.status==="pending"&&(Y.status="rejected",Y.reason=pe)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function X(Y,pe,we,ke,pt){var ge=typeof Y;(ge==="undefined"||ge==="boolean")&&(Y=null);var Re=!1;if(Y===null)Re=!0;else switch(ge){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(Y.$$typeof){case n:case e:Re=!0;break;case g:return Re=Y._init,X(Re(Y._payload),pe,we,ke,pt)}}if(Re)return pt=pt(Y),Re=ke===""?"."+ne(Y,0):ke,L(pt)?(we="",Re!=null&&(we=Re.replace(K,"$&/")+"/"),X(pt,pe,we,"",function(Rt){return Rt})):pt!=null&&(W(pt)&&(pt=U(pt,we+(pt.key==null||Y&&Y.key===pt.key?"":(""+pt.key).replace(K,"$&/")+"/")+Re)),pe.push(pt)),1;Re=0;var tt=ke===""?".":ke+":";if(L(Y))for(var yt=0;yt<Y.length;yt++)ke=Y[yt],ge=tt+ne(ke,yt),Re+=X(ke,pe,we,ge,pt);else if(yt=b(Y),typeof yt=="function")for(Y=yt.call(Y),yt=0;!(ke=Y.next()).done;)ke=ke.value,ge=tt+ne(ke,yt++),Re+=X(ke,pe,we,ge,pt);else if(ge==="object"){if(typeof Y.then=="function")return X(re(Y),pe,we,ke,pt);throw pe=String(Y),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return Re}function J(Y,pe,we){if(Y==null)return Y;var ke=[],pt=0;return X(Y,ke,"","",function(ge){return pe.call(we,ge,pt++)}),ke}function ae(Y){if(Y._status===-1){var pe=Y._result;pe=pe(),pe.then(function(we){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=we)},function(we){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=we)}),Y._status===-1&&(Y._status=0,Y._result=pe)}if(Y._status===1)return Y._result.default;throw Y._result}var Me=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},Se={map:J,forEach:function(Y,pe,we){J(Y,function(){pe.apply(this,arguments)},we)},count:function(Y){var pe=0;return J(Y,function(){pe++}),pe},toArray:function(Y){return J(Y,function(pe){return pe})||[]},only:function(Y){if(!W(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return xn.Activity=y,xn.Children=Se,xn.Component=E,xn.Fragment=t,xn.Profiler=r,xn.PureComponent=D,xn.StrictMode=i,xn.Suspense=h,xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,xn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return F.H.useMemoCache(Y)}},xn.cache=function(Y){return function(){return Y.apply(null,arguments)}},xn.cacheSignal=function(){return null},xn.cloneElement=function(Y,pe,we){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var ke=A({},Y.props),pt=Y.key;if(pe!=null)for(ge in pe.key!==void 0&&(pt=""+pe.key),pe)!V.call(pe,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&pe.ref===void 0||(ke[ge]=pe[ge]);var ge=arguments.length-2;if(ge===1)ke.children=we;else if(1<ge){for(var Re=Array(ge),tt=0;tt<ge;tt++)Re[tt]=arguments[tt+2];ke.children=Re}return P(Y.type,pt,ke)},xn.createContext=function(Y){return Y={$$typeof:l,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:a,_context:Y},Y},xn.createElement=function(Y,pe,we){var ke,pt={},ge=null;if(pe!=null)for(ke in pe.key!==void 0&&(ge=""+pe.key),pe)V.call(pe,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(pt[ke]=pe[ke]);var Re=arguments.length-2;if(Re===1)pt.children=we;else if(1<Re){for(var tt=Array(Re),yt=0;yt<Re;yt++)tt[yt]=arguments[yt+2];pt.children=tt}if(Y&&Y.defaultProps)for(ke in Re=Y.defaultProps,Re)pt[ke]===void 0&&(pt[ke]=Re[ke]);return P(Y,ge,pt)},xn.createRef=function(){return{current:null}},xn.forwardRef=function(Y){return{$$typeof:u,render:Y}},xn.isValidElement=W,xn.lazy=function(Y){return{$$typeof:g,_payload:{_status:-1,_result:Y},_init:ae}},xn.memo=function(Y,pe){return{$$typeof:p,type:Y,compare:pe===void 0?null:pe}},xn.startTransition=function(Y){var pe=F.T,we={};F.T=we;try{var ke=Y(),pt=F.S;pt!==null&&pt(we,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(N,Me)}catch(ge){Me(ge)}finally{pe!==null&&we.types!==null&&(pe.types=we.types),F.T=pe}},xn.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},xn.use=function(Y){return F.H.use(Y)},xn.useActionState=function(Y,pe,we){return F.H.useActionState(Y,pe,we)},xn.useCallback=function(Y,pe){return F.H.useCallback(Y,pe)},xn.useContext=function(Y){return F.H.useContext(Y)},xn.useDebugValue=function(){},xn.useDeferredValue=function(Y,pe){return F.H.useDeferredValue(Y,pe)},xn.useEffect=function(Y,pe){return F.H.useEffect(Y,pe)},xn.useEffectEvent=function(Y){return F.H.useEffectEvent(Y)},xn.useId=function(){return F.H.useId()},xn.useImperativeHandle=function(Y,pe,we){return F.H.useImperativeHandle(Y,pe,we)},xn.useInsertionEffect=function(Y,pe){return F.H.useInsertionEffect(Y,pe)},xn.useLayoutEffect=function(Y,pe){return F.H.useLayoutEffect(Y,pe)},xn.useMemo=function(Y,pe){return F.H.useMemo(Y,pe)},xn.useOptimistic=function(Y,pe){return F.H.useOptimistic(Y,pe)},xn.useReducer=function(Y,pe,we){return F.H.useReducer(Y,pe,we)},xn.useRef=function(Y){return F.H.useRef(Y)},xn.useState=function(Y){return F.H.useState(Y)},xn.useSyncExternalStore=function(Y,pe,we){return F.H.useSyncExternalStore(Y,pe,we)},xn.useTransition=function(){return F.H.useTransition()},xn.version="19.2.3",xn}var ZA;function J0(){return ZA||(ZA=1,w1.exports=qU()),w1.exports}var B=J0();const ce=Ud(B),bw=$U({__proto__:null,default:ce},[B]);var T1={exports:{}},Ng={},A1={exports:{}},C1={};var KA;function YU(){return KA||(KA=1,(function(n){function e(X,J){var ae=X.length;X.push(J);e:for(;0<ae;){var Me=ae-1>>>1,Se=X[Me];if(0<r(Se,J))X[Me]=J,X[ae]=Se,ae=Me;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var J=X[0],ae=X.pop();if(ae!==J){X[0]=ae;e:for(var Me=0,Se=X.length,Y=Se>>>1;Me<Y;){var pe=2*(Me+1)-1,we=X[pe],ke=pe+1,pt=X[ke];if(0>r(we,ae))ke<Se&&0>r(pt,we)?(X[Me]=pt,X[ke]=ae,Me=ke):(X[Me]=we,X[pe]=ae,Me=pe);else if(ke<Se&&0>r(pt,ae))X[Me]=pt,X[ke]=ae,Me=ke;else break e}}return J}function r(X,J){var ae=X.sortIndex-J.sortIndex;return ae!==0?ae:X.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],p=[],g=1,y=null,_=3,b=!1,S=!1,A=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function I(X){for(var J=t(p);J!==null;){if(J.callback===null)i(p);else if(J.startTime<=X)i(p),J.sortIndex=J.expirationTime,e(h,J);else break;J=t(p)}}function L(X){if(A=!1,I(X),!S)if(t(h)!==null)S=!0,N||(N=!0,Q());else{var J=t(p);J!==null&&re(L,J.startTime-X)}}var N=!1,F=-1,V=5,P=-1;function U(){return w?!0:!(n.unstable_now()-P<V)}function W(){if(w=!1,N){var X=n.unstable_now();P=X;var J=!0;try{e:{S=!1,A&&(A=!1,R(F),F=-1),b=!0;var ae=_;try{t:{for(I(X),y=t(h);y!==null&&!(y.expirationTime>X&&U());){var Me=y.callback;if(typeof Me=="function"){y.callback=null,_=y.priorityLevel;var Se=Me(y.expirationTime<=X);if(X=n.unstable_now(),typeof Se=="function"){y.callback=Se,I(X),J=!0;break t}y===t(h)&&i(h),I(X)}else i(h);y=t(h)}if(y!==null)J=!0;else{var Y=t(p);Y!==null&&re(L,Y.startTime-X),J=!1}}break e}finally{y=null,_=ae,b=!1}J=void 0}}finally{J?Q():N=!1}}}var Q;if(typeof D=="function")Q=function(){D(W)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ne=K.port2;K.port1.onmessage=W,Q=function(){ne.postMessage(null)}}else Q=function(){E(W,0)};function re(X,J){F=E(function(){X(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(X){switch(_){case 1:case 2:case 3:var J=3;break;default:J=_}var ae=_;_=J;try{return X()}finally{_=ae}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(X,J){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ae=_;_=X;try{return J()}finally{_=ae}},n.unstable_scheduleCallback=function(X,J,ae){var Me=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Me+ae:Me):ae=Me,X){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ae+Se,X={id:g++,callback:J,priorityLevel:X,startTime:ae,expirationTime:Se,sortIndex:-1},ae>Me?(X.sortIndex=ae,e(p,X),t(h)===null&&X===t(p)&&(A?(R(F),F=-1):A=!0,re(L,ae-Me))):(X.sortIndex=Se,e(h,X),S||b||(S=!0,N||(N=!0,Q()))),X},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(X){var J=_;return function(){var ae=_;_=J;try{return X.apply(this,arguments)}finally{_=ae}}}})(C1)),C1}var QA;function JD(){return QA||(QA=1,A1.exports=YU()),A1.exports}var R1={exports:{}},gs={};var JA;function ZU(){if(JA)return gs;JA=1;var n=J0();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:p,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,gs.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(h,p,null,g)},gs.flushSync=function(h){var p=l.T,g=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=p,i.p=g,i.d.f()}},gs.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(h,p))},gs.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},gs.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):g==="script"&&i.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},gs.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);i.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(h)},gs.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin);i.d.L(h,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},gs.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=u(p.as,p.crossOrigin);i.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(h)},gs.requestFormReset=function(h){i.d.r(h)},gs.unstable_batchedUpdates=function(h,p){return h(p)},gs.useFormState=function(h,p,g){return l.H.useFormState(h,p,g)},gs.useFormStatus=function(){return l.H.useHostTransitionStatus()},gs.version="19.2.3",gs}var eC;function eO(){if(eC)return R1.exports;eC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),R1.exports=ZU(),R1.exports}var tC;function KU(){if(tC)return Ng;tC=1;var n=JD(),e=J0(),t=eO();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,d=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(d=o.return),s=o.return;while(s)}return o.tag===3?d:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function u(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(i(188))}function p(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var d=s,m=o;;){var M=d.return;if(M===null)break;var T=M.alternate;if(T===null){if(m=M.return,m!==null){d=m;continue}break}if(M.child===T.child){for(T=M.child;T;){if(T===d)return h(M),s;if(T===m)return h(M),o;T=T.sibling}throw Error(i(188))}if(d.return!==m.return)d=M,m=T;else{for(var z=!1,q=M.child;q;){if(q===d){z=!0,d=M,m=T;break}if(q===m){z=!0,m=M,d=T;break}q=q.sibling}if(!z){for(q=T.child;q;){if(q===d){z=!0,d=T,m=M;break}if(q===m){z=!0,m=T,d=M;break}q=q.sibling}if(!z)throw Error(i(189))}}if(d.alternate!==m)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?s:o}function g(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=g(s),o!==null)return o;s=s.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var K=Symbol.for("react.client.reference");function ne(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===K?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case L:return"Suspense";case N:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case D:return s.displayName||"Context";case R:return(s._context.displayName||"Context")+".Consumer";case I:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return o=s.displayName||null,o!==null?o:ne(s.type)||"Memo";case V:o=s._payload,s=s._init;try{return ne(s(o))}catch{}}return null}var re=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Me=[],Se=-1;function Y(s){return{current:s}}function pe(s){0>Se||(s.current=Me[Se],Me[Se]=null,Se--)}function we(s,o){Se++,Me[Se]=s.current,s.current=o}var ke=Y(null),pt=Y(null),ge=Y(null),Re=Y(null);function tt(s,o){switch(we(ge,o),we(pt,s),we(ke,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?gA(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=gA(o),s=vA(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}pe(ke),we(ke,s)}function yt(){pe(ke),pe(pt),pe(ge)}function Rt(s){s.memoizedState!==null&&we(Re,s);var o=ke.current,d=vA(o,s.type);o!==d&&(we(pt,s),we(ke,d))}function nn(s){pt.current===s&&(pe(ke),pe(pt)),Re.current===s&&(pe(Re),Rg._currentValue=ae)}var cn,zt;function Ve(s){if(cn===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);cn=o&&o[1]||"",zt=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cn+s+zt}var Je=!1;function He(s,o){if(!s||Je)return"";Je=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(ze){var Pe=ze}Reflect.construct(s,[],Qe)}else{try{Qe.call()}catch(ze){Pe=ze}s.call(Qe.prototype)}}else{try{throw Error()}catch(ze){Pe=ze}(Qe=s())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(ze){if(ze&&Pe&&typeof ze.stack=="string")return[ze.stack,Pe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),z=T[0],q=T[1];if(z&&q){var le=z.split(`
`),De=q.split(`
`);for(M=m=0;m<le.length&&!le[m].includes("DetermineComponentFrameRoot");)m++;for(;M<De.length&&!De[M].includes("DetermineComponentFrameRoot");)M++;if(m===le.length||M===De.length)for(m=le.length-1,M=De.length-1;1<=m&&0<=M&&le[m]!==De[M];)M--;for(;1<=m&&0<=M;m--,M--)if(le[m]!==De[M]){if(m!==1||M!==1)do if(m--,M--,0>M||le[m]!==De[M]){var Ge=`
`+le[m].replace(" at new "," at ");return s.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",s.displayName)),Ge}while(1<=m&&0<=M);break}}}finally{Je=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?Ve(d):""}function mt(s,o){switch(s.tag){case 26:case 27:case 5:return Ve(s.type);case 16:return Ve("Lazy");case 13:return s.child!==o&&o!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return He(s.type,!1);case 11:return He(s.type.render,!1);case 1:return He(s.type,!0);case 31:return Ve("Activity");default:return""}}function te(s){try{var o="",d=null;do o+=mt(s,d),d=s,s=s.return;while(s);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var kt=Object.prototype.hasOwnProperty,Et=n.unstable_scheduleCallback,Vt=n.unstable_cancelCallback,lt=n.unstable_shouldYield,G=n.unstable_requestPaint,k=n.unstable_now,de=n.unstable_getCurrentPriorityLevel,Ae=n.unstable_ImmediatePriority,Be=n.unstable_UserBlockingPriority,Ie=n.unstable_NormalPriority,wt=n.unstable_LowPriority,ft=n.unstable_IdlePriority,Pt=n.log,jt=n.unstable_setDisableYieldValue,Ze=null,Ke=null;function At(s){if(typeof Pt=="function"&&jt(s),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Ze,s)}catch{}}var ie=Math.clz32?Math.clz32:oe,_e=Math.log,nt=Math.LN2;function oe(s){return s>>>=0,s===0?32:31-(_e(s)/nt|0)|0}var Ee=256,et=262144,Mt=4194304;function it(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function We(s,o,d){var m=s.pendingLanes;if(m===0)return 0;var M=0,T=s.suspendedLanes,z=s.pingedLanes;s=s.warmLanes;var q=m&134217727;return q!==0?(m=q&~T,m!==0?M=it(m):(z&=q,z!==0?M=it(z):d||(d=q&~s,d!==0&&(M=it(d))))):(q=m&~T,q!==0?M=it(q):z!==0?M=it(z):d||(d=m&~s,d!==0&&(M=it(d)))),M===0?0:o!==0&&o!==M&&(o&T)===0&&(T=M&-M,d=o&-o,T>=d||T===32&&(d&4194048)!==0)?o:M}function ct(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Xt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mn(){var s=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),s}function yn(s){for(var o=[],d=0;31>d;d++)o.push(s);return o}function _i(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Wi(s,o,d,m,M,T){var z=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var q=s.entanglements,le=s.expirationTimes,De=s.hiddenUpdates;for(d=z&~d;0<d;){var Ge=31-ie(d),Qe=1<<Ge;q[Ge]=0,le[Ge]=-1;var Pe=De[Ge];if(Pe!==null)for(De[Ge]=null,Ge=0;Ge<Pe.length;Ge++){var ze=Pe[Ge];ze!==null&&(ze.lane&=-536870913)}d&=~Qe}m!==0&&Ia(s,m,0),T!==0&&M===0&&s.tag!==0&&(s.suspendedLanes|=T&~(z&~o))}function Ia(s,o,d){s.pendingLanes|=o,s.suspendedLanes&=~o;var m=31-ie(o);s.entangledLanes|=o,s.entanglements[m]=s.entanglements[m]|1073741824|d&261930}function Pa(s,o){var d=s.entangledLanes|=o;for(s=s.entanglements;d;){var m=31-ie(d),M=1<<m;M&o|s[m]&o&&(s[m]|=o),d&=~M}}function Xs(s,o){var d=o&-o;return d=(d&42)!==0?1:Na(d),(d&(s.suspendedLanes|o))!==0?0:d}function Na(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function jr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ws(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:kA(s.type))}function en(s,o){var d=J.p;try{return J.p=s,o()}finally{J.p=d}}var zr=Math.random().toString(36).slice(2),bi="__reactFiber$"+zr,H="__reactProps$"+zr,Z="__reactContainer$"+zr,ue="__reactEvents$"+zr,Te="__reactListeners$"+zr,Ue="__reactHandles$"+zr,Fe="__reactResources$"+zr,at="__reactMarker$"+zr;function rt(s){delete s[bi],delete s[H],delete s[ue],delete s[Te],delete s[Ue]}function _t(s){var o=s[bi];if(o)return o;for(var d=s.parentNode;d;){if(o=d[Z]||d[bi]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(s=EA(s);s!==null;){if(d=s[bi])return d;s=EA(s)}return o}s=d,d=s.parentNode}return null}function gt(s){if(s=s[bi]||s[Z]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function St(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function ht(s){var o=s[Fe];return o||(o=s[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function $(s){s[at]=!0}var se=new Set,ve={};function ye(s,o){he(s,o),he(s+"Capture",o)}function he(s,o){for(ve[s]=o,s=0;s<o.length;s++)se.add(o[s])}var $e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},Xe={};function Ct(s){return kt.call(Xe,s)?!0:kt.call(ot,s)?!1:$e.test(s)?Xe[s]=!0:(ot[s]=!0,!1)}function vt(s,o,d){if(Ct(o))if(d===null)s.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+d)}}function Ht(s,o,d){if(d===null)s.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+d)}}function xt(s,o,d,m){if(m===null)s.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(o,d,""+m)}}function Ft(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function gn(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Yn(s,o,d){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var M=m.get,T=m.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return M.call(this)},set:function(z){d=""+z,T.call(this,z)}}),Object.defineProperty(s,o,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(z){d=""+z},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function En(s){if(!s._valueTracker){var o=gn(s)?"checked":"value";s._valueTracker=Yn(s,o,""+s[o])}}function Lt(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var d=o.getValue(),m="";return s&&(m=gn(s)?s.checked?"true":"false":s.value),s=m,s!==d?(o.setValue(s),!0):!1}function dt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var qt=/[\n"\\]/g;function Dt(s){return s.replace(qt,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function jn(s,o,d,m,M,T,z,q){s.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?s.type=z:s.removeAttribute("type"),o!=null?z==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Ft(o)):s.value!==""+Ft(o)&&(s.value=""+Ft(o)):z!=="submit"&&z!=="reset"||s.removeAttribute("value"),o!=null?On(s,z,Ft(o)):d!=null?On(s,z,Ft(d)):m!=null&&s.removeAttribute("value"),M==null&&T!=null&&(s.defaultChecked=!!T),M!=null&&(s.checked=M&&typeof M!="function"&&typeof M!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.name=""+Ft(q):s.removeAttribute("name")}function cr(s,o,d,m,M,T,z,q){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),o!=null||d!=null){if(!(T!=="submit"&&T!=="reset"||o!=null)){En(s);return}d=d!=null?""+Ft(d):"",o=o!=null?""+Ft(o):d,q||o===s.value||(s.value=o),s.defaultValue=o}m=m??M,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=q?s.checked:!!m,s.defaultChecked=!!m,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(s.name=z),En(s)}function On(s,o,d){o==="number"&&dt(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function Mi(s,o,d,m){if(s=s.options,o){o={};for(var M=0;M<d.length;M++)o["$"+d[M]]=!0;for(d=0;d<s.length;d++)M=o.hasOwnProperty("$"+s[d].value),s[d].selected!==M&&(s[d].selected=M),M&&m&&(s[d].defaultSelected=!0)}else{for(d=""+Ft(d),o=null,M=0;M<s.length;M++){if(s[M].value===d){s[M].selected=!0,m&&(s[M].defaultSelected=!0);return}o!==null||s[M].disabled||(o=s[M])}o!==null&&(o.selected=!0)}}function Kn(s,o,d){if(o!=null&&(o=""+Ft(o),o!==s.value&&(s.value=o),d==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=d!=null?""+Ft(d):""}function ur(s,o,d,m){if(o==null){if(m!=null){if(d!=null)throw Error(i(92));if(re(m)){if(1<m.length)throw Error(i(93));m=m[0]}d=m}d==null&&(d=""),o=d}d=Ft(o),s.defaultValue=d,m=s.textContent,m===d&&m!==""&&m!==null&&(s.value=m),En(s)}function er(s,o){if(o){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=o;return}}s.textContent=o}var br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xr(s,o,d){var m=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":m?s.setProperty(o,d):typeof d!="number"||d===0||br.has(o)?o==="float"?s.cssFloat=d:s[o]=(""+d).trim():s[o]=d+"px"}function jl(s,o,d){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var M in o)m=o[M],o.hasOwnProperty(M)&&d[M]!==m&&xr(s,M,m)}else for(var T in o)o.hasOwnProperty(T)&&xr(s,T,o[T])}function qs(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Av=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ff(s){return cm.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function vo(){}var Gd=null;function Wd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xl=null,Jo=null;function um(s){var o=gt(s);if(o&&(s=o.stateNode)){var d=s[H]||null;e:switch(s=o.stateNode,o.type){case"input":if(jn(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Dt(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var m=d[o];if(m!==s&&m.form===s.form){var M=m[H]||null;if(!M)throw Error(i(90));jn(m,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(o=0;o<d.length;o++)m=d[o],m.form===s.form&&Lt(m)}break e;case"textarea":Kn(s,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&Mi(s,!!d.multiple,o,!1)}}}var $d=!1;function fm(s,o,d){if($d)return s(o,d);$d=!0;try{var m=s(o);return m}finally{if($d=!1,(Xl!==null||Jo!==null)&&(Sa(),Xl&&(o=Xl,s=Jo,Jo=Xl=null,um(o),s)))for(o=0;o<s.length;o++)um(s[o])}}function Xc(s,o){var d=s.stateNode;if(d===null)return null;var m=d[H]||null;if(m===null)return null;d=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(i(231,o,typeof d));return d}var La=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dm=!1;if(La)try{var qc={};Object.defineProperty(qc,"passive",{get:function(){dm=!0}}),window.addEventListener("test",qc,qc),window.removeEventListener("test",qc,qc)}catch{dm=!1}var Ts=null,jd=null,ql=null;function df(){if(ql)return ql;var s,o=jd,d=o.length,m,M="value"in Ts?Ts.value:Ts.textContent,T=M.length;for(s=0;s<d&&o[s]===M[s];s++);var z=d-s;for(m=1;m<=z&&o[d-m]===M[T-m];m++);return ql=M.slice(s,1<m?1-m:void 0)}function hf(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Yc(){return!0}function Cv(){return!1}function Xr(s){function o(d,m,M,T,z){this._reactName=d,this._targetInst=M,this.type=m,this.nativeEvent=T,this.target=z,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(d=s[q],this[q]=d?d(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Yc:Cv,this.isPropagationStopped=Cv,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Yc)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Yc)},persist:function(){},isPersistent:Yc}),o}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pf=Xr(el),Zc=y({},el,{view:0,detail:0}),Rv=Xr(Zc),mf,Xd,Kc,Qc=y({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Kc&&(Kc&&s.type==="mousemove"?(mf=s.screenX-Kc.screenX,Xd=s.screenY-Kc.screenY):Xd=mf=0,Kc=s),mf)},movementY:function(s){return"movementY"in s?s.movementY:Xd}}),hm=Xr(Qc),Dv=y({},Qc,{dataTransfer:0}),Ov=Xr(Dv),pm=y({},Zc,{relatedTarget:0}),qd=Xr(pm),Iv=y({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),WS=Xr(Iv),$S=y({},el,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Pv=Xr($S),gf=y({},el,{data:0}),Yd=Xr(gf),Zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mm(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Lv[s])?!!o[s]:!1}function Kd(){return mm}var Uv=y({},Zc,{key:function(s){if(s.key){var o=Zd[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=hf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nv[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kd,charCode:function(s){return s.type==="keypress"?hf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?hf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Yl=Xr(Uv),Qd=y({},Qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gm=Xr(Qd),vm=y({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kd}),zv=Xr(vm),Fv=y({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),jS=Xr(Fv),Dr=y({},Qc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Bv=Xr(Dr),kv=y({},el,{newState:0,oldState:0}),Vv=Xr(kv),Hv=[9,13,27,32],Zl=La&&"CompositionEvent"in window,Jc=null;La&&"documentMode"in document&&(Jc=document.documentMode);var Jd=La&&"TextEvent"in window&&!Jc,ym=La&&(!Zl||Jc&&8<Jc&&11>=Jc),Gv=" ",vf=!1;function eh(s,o){switch(s){case"keyup":return Hv.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _m(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Kl=!1;function Wv(s,o){switch(s){case"compositionend":return _m(o);case"keypress":return o.which!==32?null:(vf=!0,Gv);case"textInput":return s=o.data,s===Gv&&vf?null:s;default:return null}}function bm(s,o){if(Kl)return s==="compositionend"||!Zl&&eh(s,o)?(s=df(),ql=jd=Ts=null,Kl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ym&&o.locale!=="ko"?null:o.data;default:return null}}var xm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sm(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!xm[s.type]:o==="textarea"}function th(s,o,d,m){Xl?Jo?Jo.push(m):Jo=[m]:Xl=m,o=Yy(o,"onChange"),0<o.length&&(d=new pf("onChange","change",null,d,m),s.push({event:d,listeners:o}))}var tl=null,Ql=null;function $v(s){uA(s,0)}function eu(s){var o=St(s);if(Lt(o))return s}function Mm(s,o){if(s==="change")return o}var Ua=!1;if(La){var yf;if(La){var Em="oninput"in document;if(!Em){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),Em=typeof wm.oninput=="function"}yf=Em}else yf=!1;Ua=yf&&(!document.documentMode||9<document.documentMode)}function Ys(){tl&&(tl.detachEvent("onpropertychange",_f),Ql=tl=null)}function _f(s){if(s.propertyName==="value"&&eu(Ql)){var o=[];th(o,Ql,s,Wd(s)),fm($v,o)}}function jv(s,o,d){s==="focusin"?(Ys(),tl=o,Ql=d,tl.attachEvent("onpropertychange",_f)):s==="focusout"&&Ys()}function Tm(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return eu(Ql)}function Xv(s,o){if(s==="click")return eu(o)}function qv(s,o){if(s==="input"||s==="change")return eu(o)}function Am(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var qr=typeof Object.is=="function"?Object.is:Am;function tu(s,o){if(qr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var d=Object.keys(s),m=Object.keys(o);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var M=d[m];if(!kt.call(o,M)||!qr(s[M],o[M]))return!1}return!0}function bf(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function nu(s,o){var d=bf(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=o&&m>=o)return{node:d,offset:o-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=bf(d)}}function ui(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?ui(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Yv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=dt(s.document);o instanceof s.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)s=o.contentWindow;else break;o=dt(s.document)}return o}function Cm(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var Zv=La&&"documentMode"in document&&11>=document.documentMode,za=null,Fa=null,iu=null,nh=!1;function ru(s,o,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;nh||za==null||za!==dt(m)||(m=za,"selectionStart"in m&&Cm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),iu&&tu(iu,m)||(iu=m,m=Yy(Fa,"onSelect"),0<m.length&&(o=new pf("onSelect","select",null,o,d),s.push({event:o,listeners:m}),o.target=za)))}function Fr(s,o){var d={};return d[s.toLowerCase()]=o.toLowerCase(),d["Webkit"+s]="webkit"+o,d["Moz"+s]="moz"+o,d}var Jl={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},xf={},Rm={};La&&(Rm=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function yo(s){if(xf[s])return xf[s];if(!Jl[s])return s;var o=Jl[s],d;for(d in o)if(o.hasOwnProperty(d)&&d in Rm)return xf[s]=o[d];return s}var ih=yo("animationend"),Sf=yo("animationiteration"),Dm=yo("animationstart"),Kv=yo("transitionrun"),XS=yo("transitionstart"),Qv=yo("transitioncancel"),Om=yo("transitionend"),Zs=new Map,Mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mf.push("scrollEnd");function Ks(s,o){Zs.set(s,o),ye(o,[s])}var Ef=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Qs=[],_o=0,Sr=0;function wf(){for(var s=_o,o=Sr=_o=0;o<s;){var d=Qs[o];Qs[o++]=null;var m=Qs[o];Qs[o++]=null;var M=Qs[o];Qs[o++]=null;var T=Qs[o];if(Qs[o++]=null,m!==null&&M!==null){var z=m.pending;z===null?M.next=M:(M.next=z.next,z.next=M),m.pending=M}T!==0&&nl(d,M,T)}}function Mr(s,o,d,m){Qs[_o++]=s,Qs[_o++]=o,Qs[_o++]=d,Qs[_o++]=m,Sr|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function rh(s,o,d,m){return Mr(s,o,d,m),Js(s)}function Yr(s,o){return Mr(s,null,null,o),Js(s)}function nl(s,o,d){s.lanes|=d;var m=s.alternate;m!==null&&(m.lanes|=d);for(var M=!1,T=s.return;T!==null;)T.childLanes|=d,m=T.alternate,m!==null&&(m.childLanes|=d),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(M=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,M&&o!==null&&(M=31-ie(d),s=T.hiddenUpdates,m=s[M],m===null?s[M]=[o]:m.push(o),o.lane=d|536870912),T):null}function Js(s){if(50<xl)throw xl=0,yc=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var il={};function Im(s,o,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ri(s,o,d,m){return new Im(s,o,d,m)}function sh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function as(s,o){var d=s.alternate;return d===null?(d=Ri(s.tag,o,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=o,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,o=s.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function su(s,o){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,o=d.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Ba(s,o,d,m,M,T){var z=0;if(m=s,typeof s=="function")sh(s)&&(z=1);else if(typeof s=="string")z=PU(s,d,ke.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Ri(31,d,o,M),s.elementType=P,s.lanes=T,s;case A:return rl(d.children,M,T,o);case w:z=8,M|=24;break;case E:return s=Ri(12,d,o,M|2),s.elementType=E,s.lanes=T,s;case L:return s=Ri(13,d,o,M),s.elementType=L,s.lanes=T,s;case N:return s=Ri(19,d,o,M),s.elementType=N,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:z=10;break e;case R:z=9;break e;case I:z=11;break e;case F:z=14;break e;case V:z=16,m=null;break e}z=29,d=Error(i(130,s===null?"null":typeof s,"")),m=null}return o=Ri(z,d,o,M),o.elementType=s,o.type=m,o.lanes=T,o}function rl(s,o,d,m){return s=Ri(7,s,m,o),s.lanes=d,s}function ah(s,o,d){return s=Ri(6,s,null,o),s.lanes=d,s}function au(s){var o=Ri(18,null,null,0);return o.stateNode=s,o}function oh(s,o,d){return o=Ri(4,s.children!==null?s.children:[],s.key,o),o.lanes=d,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Tf=new WeakMap;function As(s,o){if(typeof s=="object"&&s!==null){var d=Tf.get(s);return d!==void 0?d:(o={value:s,source:o,stack:te(o)},Tf.set(s,o),o)}return{value:s,source:o,stack:te(o)}}var sl=[],al=0,ou=null,lu=0,os=[],Ei=0,bo=null,Di=1,ya="";function ka(s,o){sl[al++]=lu,sl[al++]=ou,ou=s,lu=o}function Jv(s,o,d){os[Ei++]=Di,os[Ei++]=ya,os[Ei++]=bo,bo=s;var m=Di;s=ya;var M=32-ie(m)-1;m&=~(1<<M),d+=1;var T=32-ie(o)+M;if(30<T){var z=M-M%5;T=(m&(1<<z)-1).toString(32),m>>=z,M-=z,Di=1<<32-ie(o)+M|d<<M|m,ya=T+s}else Di=1<<T|d<<M|m,ya=s}function Va(s){s.return!==null&&(ka(s,1),Jv(s,1,0))}function lh(s){for(;s===ou;)ou=sl[--al],sl[al]=null,lu=sl[--al],sl[al]=null;for(;s===bo;)bo=os[--Ei],os[Ei]=null,ya=os[--Ei],os[Ei]=null,Di=os[--Ei],os[Ei]=null}function ch(s,o){os[Ei++]=Di,os[Ei++]=ya,os[Ei++]=bo,Di=o.id,ya=o.overflow,bo=s}var zi=null,fi=null,Bn=!1,xo=null,Cs=!1,cu=Error(i(519));function Ha(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ga(As(o,s)),cu}function ey(s){var o=s.stateNode,d=s.type,m=s.memoizedProps;switch(o[bi]=s,o[H]=m,d){case"dialog":Hn("cancel",o),Hn("close",o);break;case"iframe":case"object":case"embed":Hn("load",o);break;case"video":case"audio":for(d=0;d<da.length;d++)Hn(da[d],o);break;case"source":Hn("error",o);break;case"img":case"image":case"link":Hn("error",o),Hn("load",o);break;case"details":Hn("toggle",o);break;case"input":Hn("invalid",o),cr(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Hn("invalid",o);break;case"textarea":Hn("invalid",o),ur(o,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||m.suppressHydrationWarning===!0||pA(o.textContent,d)?(m.popover!=null&&(Hn("beforetoggle",o),Hn("toggle",o)),m.onScroll!=null&&Hn("scroll",o),m.onScrollEnd!=null&&Hn("scrollend",o),m.onClick!=null&&(o.onclick=vo),o=!0):o=!1,o||Ha(s,!0)}function ty(s){for(zi=s.return;zi;)switch(zi.tag){case 5:case 31:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:zi=zi.return}}function uu(s){if(s!==zi)return!1;if(!Bn)return ty(s),Bn=!0,!1;var o=s.tag,d;if((d=o!==3&&o!==27)&&((d=o===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||c1(s.type,s.memoizedProps)),d=!d),d&&fi&&Ha(s),ty(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));fi=MA(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));fi=MA(s)}else o===27?(o=fi,Du(s.type)?(s=p1,p1=null,fi=s):fi=o):fi=zi?io(s.stateNode.nextSibling):null;return!0}function ol(){fi=zi=null,Bn=!1}function uh(){var s=xo;return s!==null&&(Bi===null?Bi=s:Bi.push.apply(Bi,s),xo=null),s}function Ga(s){xo===null?xo=[s]:xo.push(s)}var fu=Y(null),ll=null,Wa=null;function So(s,o,d){we(fu,o._currentValue),o._currentValue=d}function $a(s){s._currentValue=fu.current,pe(fu)}function fh(s,o,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===d)break;s=s.return}}function dh(s,o,d,m){var M=s.child;for(M!==null&&(M.return=s);M!==null;){var T=M.dependencies;if(T!==null){var z=M.child;T=T.firstContext;e:for(;T!==null;){var q=T;T=M;for(var le=0;le<o.length;le++)if(q.context===o[le]){T.lanes|=d,q=T.alternate,q!==null&&(q.lanes|=d),fh(T.return,d,s),m||(z=null);break e}T=q.next}}else if(M.tag===18){if(z=M.return,z===null)throw Error(i(341));z.lanes|=d,T=z.alternate,T!==null&&(T.lanes|=d),fh(z,d,s),z=null}else z=M.child;if(z!==null)z.return=M;else for(z=M;z!==null;){if(z===s){z=null;break}if(M=z.sibling,M!==null){M.return=z.return,z=M;break}z=z.return}M=z}}function ja(s,o,d,m){s=null;for(var M=o,T=!1;M!==null;){if(!T){if((M.flags&524288)!==0)T=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var z=M.alternate;if(z===null)throw Error(i(387));if(z=z.memoizedProps,z!==null){var q=M.type;qr(M.pendingProps.value,z.value)||(s!==null?s.push(q):s=[q])}}else if(M===Re.current){if(z=M.alternate,z===null)throw Error(i(387));z.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(s!==null?s.push(Rg):s=[Rg])}M=M.return}s!==null&&dh(o,s,d,m),o.flags|=262144}function Af(s){for(s=s.firstContext;s!==null;){if(!qr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function cl(s){ll=s,Wa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ln(s){return ny(ll,s)}function du(s,o){return ll===null&&cl(s),ny(s,o)}function ny(s,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},Wa===null){if(s===null)throw Error(i(308));Wa=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Wa=Wa.next=o;return d}var iy=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(d,m){s.push(m)}};this.abort=function(){o.aborted=!0,s.forEach(function(d){return d()})}},qS=n.unstable_scheduleCallback,YS=n.unstable_NormalPriority,tr={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pm(){return{controller:new iy,data:new Map,refCount:0}}function ec(s){s.refCount--,s.refCount===0&&qS(YS,function(){s.controller.abort()})}var Rs=null,hh=0,Mo=0,ea=null;function Nm(s,o){if(Rs===null){var d=Rs=[];hh=0,Mo=Ne(),ea={status:"pending",value:void 0,then:function(m){d.push(m)}}}return hh++,o.then(Lm,Lm),o}function Lm(){if(--hh===0&&Rs!==null){ea!==null&&(ea.status="fulfilled");var s=Rs;Rs=null,Mo=0,ea=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function Um(s,o){var d=[],m={status:"pending",value:null,reason:null,then:function(M){d.push(M)}};return s.then(function(){m.status="fulfilled",m.value=o;for(var M=0;M<d.length;M++)(0,d[M])(o)},function(M){for(m.status="rejected",m.reason=M,M=0;M<d.length;M++)(0,d[M])(void 0)}),m}var ry=X.S;X.S=function(s,o){Mg=k(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Nm(s,o),ry!==null&&ry(s,o)};var ul=Y(null);function ph(){var s=ul.current;return s!==null?s:dn.pooledCache}function Cf(s,o){o===null?we(ul,ul.current):we(ul,o.pool)}function zm(){var s=ph();return s===null?null:{parent:tr._currentValue,pool:s}}var tc=Error(i(460)),Rf=Error(i(474)),An=Error(i(542)),mh={then:function(){}};function ls(s){return s=s.status,s==="fulfilled"||s==="rejected"}function gh(s,o,d){switch(d=s[d],d===void 0?s.push(o):d!==o&&(o.then(vo,vo),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,rc(s),s;default:if(typeof o.status=="string")o.then(vo,vo);else{if(s=dn,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(m){if(o.status==="pending"){var M=o;M.status="fulfilled",M.value=m}},function(m){if(o.status==="pending"){var M=o;M.status="rejected",M.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,rc(s),s}throw Xa=o,tc}}function nc(s){try{var o=s._init;return o(s._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Xa=d,tc):d}}var Xa=null;function ic(){if(Xa===null)throw Error(i(459));var s=Xa;return Xa=null,s}function rc(s){if(s===tc||s===An)throw Error(i(483))}var sc=null,ac=0;function Df(s){var o=ac;return ac+=1,sc===null&&(sc=[]),gh(sc,s,o)}function ta(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function hu(s,o){throw o.$$typeof===_?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function vh(s){function o(be,me){if(s){var Ce=be.deletions;Ce===null?(be.deletions=[me],be.flags|=16):Ce.push(me)}}function d(be,me){if(!s)return null;for(;me!==null;)o(be,me),me=me.sibling;return null}function m(be){for(var me=new Map;be!==null;)be.key!==null?me.set(be.key,be):me.set(be.index,be),be=be.sibling;return me}function M(be,me){return be=as(be,me),be.index=0,be.sibling=null,be}function T(be,me,Ce){return be.index=Ce,s?(Ce=be.alternate,Ce!==null?(Ce=Ce.index,Ce<me?(be.flags|=67108866,me):Ce):(be.flags|=67108866,me)):(be.flags|=1048576,me)}function z(be){return s&&be.alternate===null&&(be.flags|=67108866),be}function q(be,me,Ce,qe){return me===null||me.tag!==6?(me=ah(Ce,be.mode,qe),me.return=be,me):(me=M(me,Ce),me.return=be,me)}function le(be,me,Ce,qe){var Jt=Ce.type;return Jt===A?Ge(be,me,Ce.props.children,qe,Ce.key):me!==null&&(me.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===V&&nc(Jt)===me.type)?(me=M(me,Ce.props),ta(me,Ce),me.return=be,me):(me=Ba(Ce.type,Ce.key,Ce.props,null,be.mode,qe),ta(me,Ce),me.return=be,me)}function De(be,me,Ce,qe){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ce.containerInfo||me.stateNode.implementation!==Ce.implementation?(me=oh(Ce,be.mode,qe),me.return=be,me):(me=M(me,Ce.children||[]),me.return=be,me)}function Ge(be,me,Ce,qe,Jt){return me===null||me.tag!==7?(me=rl(Ce,be.mode,qe,Jt),me.return=be,me):(me=M(me,Ce),me.return=be,me)}function Qe(be,me,Ce){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=ah(""+me,be.mode,Ce),me.return=be,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case b:return Ce=Ba(me.type,me.key,me.props,null,be.mode,Ce),ta(Ce,me),Ce.return=be,Ce;case S:return me=oh(me,be.mode,Ce),me.return=be,me;case V:return me=nc(me),Qe(be,me,Ce)}if(re(me)||Q(me))return me=rl(me,be.mode,Ce,null),me.return=be,me;if(typeof me.then=="function")return Qe(be,Df(me),Ce);if(me.$$typeof===D)return Qe(be,du(be,me),Ce);hu(be,me)}return null}function Pe(be,me,Ce,qe){var Jt=me!==null?me.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Jt!==null?null:q(be,me,""+Ce,qe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case b:return Ce.key===Jt?le(be,me,Ce,qe):null;case S:return Ce.key===Jt?De(be,me,Ce,qe):null;case V:return Ce=nc(Ce),Pe(be,me,Ce,qe)}if(re(Ce)||Q(Ce))return Jt!==null?null:Ge(be,me,Ce,qe,null);if(typeof Ce.then=="function")return Pe(be,me,Df(Ce),qe);if(Ce.$$typeof===D)return Pe(be,me,du(be,Ce),qe);hu(be,Ce)}return null}function ze(be,me,Ce,qe,Jt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return be=be.get(Ce)||null,q(me,be,""+qe,Jt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case b:return be=be.get(qe.key===null?Ce:qe.key)||null,le(me,be,qe,Jt);case S:return be=be.get(qe.key===null?Ce:qe.key)||null,De(me,be,qe,Jt);case V:return qe=nc(qe),ze(be,me,Ce,qe,Jt)}if(re(qe)||Q(qe))return be=be.get(Ce)||null,Ge(me,be,qe,Jt,null);if(typeof qe.then=="function")return ze(be,me,Ce,Df(qe),Jt);if(qe.$$typeof===D)return ze(be,me,Ce,du(me,qe),Jt);hu(me,qe)}return null}function Wt(be,me,Ce,qe){for(var Jt=null,ti=null,Yt=me,In=me=0,Wn=null;Yt!==null&&In<Ce.length;In++){Yt.index>In?(Wn=Yt,Yt=null):Wn=Yt.sibling;var ni=Pe(be,Yt,Ce[In],qe);if(ni===null){Yt===null&&(Yt=Wn);break}s&&Yt&&ni.alternate===null&&o(be,Yt),me=T(ni,me,In),ti===null?Jt=ni:ti.sibling=ni,ti=ni,Yt=Wn}if(In===Ce.length)return d(be,Yt),Bn&&ka(be,In),Jt;if(Yt===null){for(;In<Ce.length;In++)Yt=Qe(be,Ce[In],qe),Yt!==null&&(me=T(Yt,me,In),ti===null?Jt=Yt:ti.sibling=Yt,ti=Yt);return Bn&&ka(be,In),Jt}for(Yt=m(Yt);In<Ce.length;In++)Wn=ze(Yt,be,In,Ce[In],qe),Wn!==null&&(s&&Wn.alternate!==null&&Yt.delete(Wn.key===null?In:Wn.key),me=T(Wn,me,In),ti===null?Jt=Wn:ti.sibling=Wn,ti=Wn);return s&&Yt.forEach(function(Lu){return o(be,Lu)}),Bn&&ka(be,In),Jt}function on(be,me,Ce,qe){if(Ce==null)throw Error(i(151));for(var Jt=null,ti=null,Yt=me,In=me=0,Wn=null,ni=Ce.next();Yt!==null&&!ni.done;In++,ni=Ce.next()){Yt.index>In?(Wn=Yt,Yt=null):Wn=Yt.sibling;var Lu=Pe(be,Yt,ni.value,qe);if(Lu===null){Yt===null&&(Yt=Wn);break}s&&Yt&&Lu.alternate===null&&o(be,Yt),me=T(Lu,me,In),ti===null?Jt=Lu:ti.sibling=Lu,ti=Lu,Yt=Wn}if(ni.done)return d(be,Yt),Bn&&ka(be,In),Jt;if(Yt===null){for(;!ni.done;In++,ni=Ce.next())ni=Qe(be,ni.value,qe),ni!==null&&(me=T(ni,me,In),ti===null?Jt=ni:ti.sibling=ni,ti=ni);return Bn&&ka(be,In),Jt}for(Yt=m(Yt);!ni.done;In++,ni=Ce.next())ni=ze(Yt,be,In,ni.value,qe),ni!==null&&(s&&ni.alternate!==null&&Yt.delete(ni.key===null?In:ni.key),me=T(ni,me,In),ti===null?Jt=ni:ti.sibling=ni,ti=ni);return s&&Yt.forEach(function(WU){return o(be,WU)}),Bn&&ka(be,In),Jt}function pi(be,me,Ce,qe){if(typeof Ce=="object"&&Ce!==null&&Ce.type===A&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case b:e:{for(var Jt=Ce.key;me!==null;){if(me.key===Jt){if(Jt=Ce.type,Jt===A){if(me.tag===7){d(be,me.sibling),qe=M(me,Ce.props.children),qe.return=be,be=qe;break e}}else if(me.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===V&&nc(Jt)===me.type){d(be,me.sibling),qe=M(me,Ce.props),ta(qe,Ce),qe.return=be,be=qe;break e}d(be,me);break}else o(be,me);me=me.sibling}Ce.type===A?(qe=rl(Ce.props.children,be.mode,qe,Ce.key),qe.return=be,be=qe):(qe=Ba(Ce.type,Ce.key,Ce.props,null,be.mode,qe),ta(qe,Ce),qe.return=be,be=qe)}return z(be);case S:e:{for(Jt=Ce.key;me!==null;){if(me.key===Jt)if(me.tag===4&&me.stateNode.containerInfo===Ce.containerInfo&&me.stateNode.implementation===Ce.implementation){d(be,me.sibling),qe=M(me,Ce.children||[]),qe.return=be,be=qe;break e}else{d(be,me);break}else o(be,me);me=me.sibling}qe=oh(Ce,be.mode,qe),qe.return=be,be=qe}return z(be);case V:return Ce=nc(Ce),pi(be,me,Ce,qe)}if(re(Ce))return Wt(be,me,Ce,qe);if(Q(Ce)){if(Jt=Q(Ce),typeof Jt!="function")throw Error(i(150));return Ce=Jt.call(Ce),on(be,me,Ce,qe)}if(typeof Ce.then=="function")return pi(be,me,Df(Ce),qe);if(Ce.$$typeof===D)return pi(be,me,du(be,Ce),qe);hu(be,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,me!==null&&me.tag===6?(d(be,me.sibling),qe=M(me,Ce),qe.return=be,be=qe):(d(be,me),qe=ah(Ce,be.mode,qe),qe.return=be,be=qe),z(be)):d(be,me)}return function(be,me,Ce,qe){try{ac=0;var Jt=pi(be,me,Ce,qe);return sc=null,Jt}catch(Yt){if(Yt===tc||Yt===An)throw Yt;var ti=Ri(29,Yt,null,be.mode);return ti.lanes=qe,ti.return=be,ti}}}var Eo=vh(!0),yh=vh(!1),Zr=!1;function Of(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fm(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function wo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function fl(s,o,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Zt&2)!==0){var M=m.pending;return M===null?o.next=o:(o.next=M.next,M.next=o),m.pending=o,o=Js(s),nl(s,null,d),o}return Mr(s,m,o,d),Js(s)}function dl(s,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194048)!==0)){var m=o.lanes;m&=s.pendingLanes,d|=m,o.lanes=d,Pa(s,d)}}function Qt(s,o){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var M=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var z={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};T===null?M=T=z:T=T.next=z,d=d.next}while(d!==null);T===null?M=T=o:T=T.next=o}else M=T=o;d={baseState:m.baseState,firstBaseUpdate:M,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=o:s.next=o,d.lastBaseUpdate=o}var Bm=!1;function If(){if(Bm){var s=ea;if(s!==null)throw s}}function pu(s,o,d,m){Bm=!1;var M=s.updateQueue;Zr=!1;var T=M.firstBaseUpdate,z=M.lastBaseUpdate,q=M.shared.pending;if(q!==null){M.shared.pending=null;var le=q,De=le.next;le.next=null,z===null?T=De:z.next=De,z=le;var Ge=s.alternate;Ge!==null&&(Ge=Ge.updateQueue,q=Ge.lastBaseUpdate,q!==z&&(q===null?Ge.firstBaseUpdate=De:q.next=De,Ge.lastBaseUpdate=le))}if(T!==null){var Qe=M.baseState;z=0,Ge=De=le=null,q=T;do{var Pe=q.lane&-536870913,ze=Pe!==q.lane;if(ze?(wn&Pe)===Pe:(m&Pe)===Pe){Pe!==0&&Pe===Mo&&(Bm=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Wt=s,on=q;Pe=o;var pi=d;switch(on.tag){case 1:if(Wt=on.payload,typeof Wt=="function"){Qe=Wt.call(pi,Qe,Pe);break e}Qe=Wt;break e;case 3:Wt.flags=Wt.flags&-65537|128;case 0:if(Wt=on.payload,Pe=typeof Wt=="function"?Wt.call(pi,Qe,Pe):Wt,Pe==null)break e;Qe=y({},Qe,Pe);break e;case 2:Zr=!0}}Pe=q.callback,Pe!==null&&(s.flags|=64,ze&&(s.flags|=8192),ze=M.callbacks,ze===null?M.callbacks=[Pe]:ze.push(Pe))}else ze={lane:Pe,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ge===null?(De=Ge=ze,le=Qe):Ge=Ge.next=ze,z|=Pe;if(q=q.next,q===null){if(q=M.shared.pending,q===null)break;ze=q,q=ze.next,ze.next=null,M.lastBaseUpdate=ze,M.shared.pending=null}}while(!0);Ge===null&&(le=Qe),M.baseState=le,M.firstBaseUpdate=De,M.lastBaseUpdate=Ge,T===null&&(M.shared.lanes=0),eo|=z,s.lanes=z,s.memoizedState=Qe}}function mu(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function sy(s,o){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)mu(d[s],o)}var gu=Y(null),_h=Y(0);function ay(s,o){s=Ps,we(_h,s),we(gu,o),Ps=s|o.baseLanes}function km(){we(_h,Ps),we(gu,gu.current)}function Pf(){Ps=_h.current,pe(gu),pe(_h)}var cs=Y(null),Kr=null;function To(s){var o=s.alternate;we(kn,kn.current&1),we(cs,s),Kr===null&&(o===null||gu.current!==null||o.memoizedState!==null)&&(Kr=s)}function Vm(s){we(kn,kn.current),we(cs,s),Kr===null&&(Kr=s)}function oy(s){s.tag===22?(we(kn,kn.current),we(cs,s),Kr===null&&(Kr=s)):us()}function us(){we(kn,kn.current),we(cs,cs.current)}function $i(s){pe(cs),Kr===s&&(Kr=null),pe(kn)}var kn=Y(0);function Ds(s){for(var o=s;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d1(d)||h1(d)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var wi=0,_n=null,ai=null,Un=null,na=!1,vu=!1,oc=!1,bh=0,Nf=0,yu=null,Hm=0;function Oi(){throw Error(i(321))}function Gm(s,o){if(o===null)return!1;for(var d=0;d<o.length&&d<s.length;d++)if(!qr(s[d],o[d]))return!1;return!0}function xh(s,o,d,m,M,T){return wi=T,_n=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,X.H=s===null||s.memoizedState===null?By:cg,oc=!1,T=d(m,M),oc=!1,vu&&(T=lc(o,d,m,M)),ly(s),T}function ly(s){X.H=_u;var o=ai!==null&&ai.next!==null;if(wi=0,Un=ai=_n=null,na=!1,Nf=0,yu=null,o)throw Error(i(300));s===null||nr||(s=s.dependencies,s!==null&&Af(s)&&(nr=!0))}function lc(s,o,d,m){_n=s;var M=0;do{if(vu&&(yu=null),Nf=0,vu=!1,25<=M)throw Error(i(301));if(M+=1,Un=ai=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}X.H=ia,T=o(d,m)}while(vu);return T}function cc(){var s=X.H,o=s.useState()[0];return o=typeof o.then=="function"?Lf(o):o,s=s.useState()[0],(ai!==null?ai.memoizedState:null)!==s&&(_n.flags|=1024),o}function Wm(){var s=bh!==0;return bh=0,s}function $m(s,o,d){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~d}function jm(s){if(na){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}na=!1}wi=0,Un=ai=_n=null,vu=!1,Nf=bh=0,yu=null}function fr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?_n.memoizedState=Un=s:Un=Un.next=s,Un}function ji(){if(ai===null){var s=_n.alternate;s=s!==null?s.memoizedState:null}else s=ai.next;var o=Un===null?_n.memoizedState:Un.next;if(o!==null)Un=o,ai=s;else{if(s===null)throw _n.alternate===null?Error(i(467)):Error(i(310));ai=s,s={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},Un===null?_n.memoizedState=Un=s:Un=Un.next=s}return Un}function Sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lf(s){var o=Nf;return Nf+=1,yu===null&&(yu=[]),s=gh(yu,s,o),o=_n,(Un===null?o.memoizedState:Un.next)===null&&(o=o.alternate,X.H=o===null||o.memoizedState===null?By:cg),s}function hl(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Lf(s);if(s.$$typeof===D)return ln(s)}throw Error(i(438,String(s)))}function Xm(s){var o=null,d=_n.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var m=_n.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(M){return M.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=Sh(),_n.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(s),m=0;m<s;m++)d[m]=U;return o.index++,d}function Ao(s,o){return typeof o=="function"?o(s):o}function Mh(s){var o=ji();return qm(o,ai,s)}function qm(s,o,d){var m=s.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=d;var M=s.baseQueue,T=m.pending;if(T!==null){if(M!==null){var z=M.next;M.next=T.next,T.next=z}o.baseQueue=M=T,m.pending=null}if(T=s.baseState,M===null)s.memoizedState=T;else{o=M.next;var q=z=null,le=null,De=o,Ge=!1;do{var Qe=De.lane&-536870913;if(Qe!==De.lane?(wn&Qe)===Qe:(wi&Qe)===Qe){var Pe=De.revertLane;if(Pe===0)le!==null&&(le=le.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),Qe===Mo&&(Ge=!0);else if((wi&Pe)===Pe){De=De.next,Pe===Mo&&(Ge=!0);continue}else Qe={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},le===null?(q=le=Qe,z=T):le=le.next=Qe,_n.lanes|=Pe,eo|=Pe;Qe=De.action,oc&&d(T,Qe),T=De.hasEagerState?De.eagerState:d(T,Qe)}else Pe={lane:Qe,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},le===null?(q=le=Pe,z=T):le=le.next=Pe,_n.lanes|=Qe,eo|=Qe;De=De.next}while(De!==null&&De!==o);if(le===null?z=T:le.next=q,!qr(T,s.memoizedState)&&(nr=!0,Ge&&(d=ea,d!==null)))throw d;s.memoizedState=T,s.baseState=z,s.baseQueue=le,m.lastRenderedState=T}return M===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function Ym(s){var o=ji(),d=o.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=s;var m=d.dispatch,M=d.pending,T=o.memoizedState;if(M!==null){d.pending=null;var z=M=M.next;do T=s(T,z.action),z=z.next;while(z!==M);qr(T,o.memoizedState)||(nr=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),d.lastRenderedState=T}return[T,m]}function cy(s,o,d){var m=_n,M=ji(),T=Bn;if(T){if(d===void 0)throw Error(i(407));d=d()}else d=o();var z=!qr((ai||M).memoizedState,d);if(z&&(M.memoizedState=d,nr=!0),M=M.queue,ig(dy.bind(null,m,M,s),[s]),M.getSnapshot!==o||z||Un!==null&&Un.memoizedState.tag&1){if(m.flags|=2048,pl(9,{destroy:void 0},fy.bind(null,m,M,d,o),null),dn===null)throw Error(i(349));T||(wi&127)!==0||uy(m,o,d)}return d}function uy(s,o,d){s.flags|=16384,s={getSnapshot:o,value:d},o=_n.updateQueue,o===null?(o=Sh(),_n.updateQueue=o,o.stores=[s]):(d=o.stores,d===null?o.stores=[s]:d.push(s))}function fy(s,o,d,m){o.value=d,o.getSnapshot=m,hy(o)&&py(s)}function dy(s,o,d){return d(function(){hy(o)&&py(s)})}function hy(s){var o=s.getSnapshot;s=s.value;try{var d=o();return!qr(s,d)}catch{return!0}}function py(s){var o=Yr(s,2);o!==null&&Rn(o,s,2)}function Zm(s){var o=fr();if(typeof s=="function"){var d=s;if(s=d(),oc){At(!0);try{d()}finally{At(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:s},o}function Km(s,o,d,m){return s.baseState=d,qm(s,ai,typeof m=="function"?m:Ao)}function ZS(s,o,d,m,M){if(Ah(s))throw Error(i(485));if(s=o.action,s!==null){var T={payload:M,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){T.listeners.push(z)}};X.T!==null?d(!0):T.isTransition=!1,m(T),d=o.pending,d===null?(T.next=o.pending=T,my(o,T)):(T.next=d.next,o.pending=d.next=T)}}function my(s,o){var d=o.action,m=o.payload,M=s.state;if(o.isTransition){var T=X.T,z={};X.T=z;try{var q=d(M,m),le=X.S;le!==null&&le(z,q),gy(s,o,q)}catch(De){Qm(s,o,De)}finally{T!==null&&z.types!==null&&(T.types=z.types),X.T=T}}else try{T=d(M,m),gy(s,o,T)}catch(De){Qm(s,o,De)}}function gy(s,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){vy(s,o,m)},function(m){return Qm(s,o,m)}):vy(s,o,d)}function vy(s,o,d){o.status="fulfilled",o.value=d,yy(o),s.state=d,o=s.pending,o!==null&&(d=o.next,d===o?s.pending=null:(d=d.next,o.next=d,my(s,d)))}function Qm(s,o,d){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=d,yy(o),o=o.next;while(o!==m)}s.action=null}function yy(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Jm(s,o){return o}function eg(s,o){if(Bn){var d=dn.formState;if(d!==null){e:{var m=_n;if(Bn){if(fi){t:{for(var M=fi,T=Cs;M.nodeType!==8;){if(!T){M=null;break t}if(M=io(M.nextSibling),M===null){M=null;break t}}T=M.data,M=T==="F!"||T==="F"?M:null}if(M){fi=io(M.nextSibling),m=M.data==="F!";break e}}Ha(m)}m=!1}m&&(o=d[0])}}return d=fr(),d.memoizedState=d.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jm,lastRenderedState:o},d.queue=m,d=Uy.bind(null,_n,m),m.dispatch=d,m=Zm(!1),T=lg.bind(null,_n,!1,m.queue),m=fr(),M={state:o,dispatch:null,action:s,pending:null},m.queue=M,d=ZS.bind(null,_n,M,T,d),M.dispatch=d,m.memoizedState=s,[o,d,!1]}function _y(s){var o=ji();return tg(o,ai,s)}function tg(s,o,d){if(o=qm(s,o,Jm)[0],s=Mh(Ao)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Lf(o)}catch(z){throw z===tc?An:z}else m=o;o=ji();var M=o.queue,T=M.dispatch;return d!==o.memoizedState&&(_n.flags|=2048,pl(9,{destroy:void 0},by.bind(null,M,d),null)),[m,T,s]}function by(s,o){s.action=o}function ng(s){var o=ji(),d=ai;if(d!==null)return tg(o,d,s);ji(),o=o.memoizedState,d=ji();var m=d.queue.dispatch;return d.memoizedState=s,[o,m,!1]}function pl(s,o,d,m){return s={tag:s,create:d,deps:m,inst:o,next:null},o=_n.updateQueue,o===null&&(o=Sh(),_n.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,o.lastEffect=s),s}function Eh(){return ji().memoizedState}function wh(s,o,d,m){var M=fr();_n.flags|=s,M.memoizedState=pl(1|o,{destroy:void 0},d,m===void 0?null:m)}function Th(s,o,d,m){var M=ji();m=m===void 0?null:m;var T=M.memoizedState.inst;ai!==null&&m!==null&&Gm(m,ai.memoizedState.deps)?M.memoizedState=pl(o,T,d,m):(_n.flags|=s,M.memoizedState=pl(1|o,T,d,m))}function xy(s,o){wh(8390656,8,s,o)}function ig(s,o){Th(2048,8,s,o)}function Sy(s){_n.flags|=4;var o=_n.updateQueue;if(o===null)o=Sh(),_n.updateQueue=o,o.events=[s];else{var d=o.events;d===null?o.events=[s]:d.push(s)}}function My(s){var o=ji().memoizedState;return Sy({ref:o,nextImpl:s}),function(){if((Zt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Ey(s,o){return Th(4,2,s,o)}function wy(s,o){return Th(4,4,s,o)}function Ty(s,o){if(typeof o=="function"){s=s();var d=o(s);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Ay(s,o,d){d=d!=null?d.concat([s]):null,Th(4,4,Ty.bind(null,o,s),d)}function rg(){}function Cy(s,o){var d=ji();o=o===void 0?null:o;var m=d.memoizedState;return o!==null&&Gm(o,m[1])?m[0]:(d.memoizedState=[s,o],s)}function Ry(s,o){var d=ji();o=o===void 0?null:o;var m=d.memoizedState;if(o!==null&&Gm(o,m[1]))return m[0];if(m=s(),oc){At(!0);try{s()}finally{At(!1)}}return d.memoizedState=[m,o],m}function sg(s,o,d){return d===void 0||(wi&1073741824)!==0&&(wn&261930)===0?s.memoizedState=o:(s.memoizedState=d,s=Nn(),_n.lanes|=s,eo|=s,d)}function Dy(s,o,d,m){return qr(d,o)?d:gu.current!==null?(s=sg(s,d,m),qr(s,o)||(nr=!0),s):(wi&42)===0||(wi&1073741824)!==0&&(wn&261930)===0?(nr=!0,s.memoizedState=d):(s=Nn(),_n.lanes|=s,eo|=s,o)}function Oy(s,o,d,m,M){var T=J.p;J.p=T!==0&&8>T?T:8;var z=X.T,q={};X.T=q,lg(s,!1,o,d);try{var le=M(),De=X.S;if(De!==null&&De(q,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var Ge=Um(le,m);Uf(s,o,Ge,Ls(s))}else Uf(s,o,m,Ls(s))}catch(Qe){Uf(s,o,{then:function(){},status:"rejected",reason:Qe},Ls())}finally{J.p=T,z!==null&&q.types!==null&&(z.types=q.types),X.T=z}}function KS(){}function ag(s,o,d,m){if(s.tag!==5)throw Error(i(476));var M=Iy(s).queue;Oy(s,M,o,ae,d===null?KS:function(){return Py(s),d(m)})}function Iy(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:ae},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:d},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function Py(s){var o=Iy(s);o.next===null&&(o=s.alternate.memoizedState),Uf(s,o.next.queue,{},Ls())}function og(){return ln(Rg)}function Ny(){return ji().memoizedState}function Ly(){return ji().memoizedState}function QS(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var d=Ls();s=wo(d);var m=fl(o,s,d);m!==null&&(Rn(m,o,d),dl(m,o,d)),o={cache:Pm()},s.payload=o;return}o=o.return}}function JS(s,o,d){var m=Ls();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ah(s)?zy(o,d):(d=rh(s,o,d,m),d!==null&&(Rn(d,s,m),Fy(d,o,m)))}function Uy(s,o,d){var m=Ls();Uf(s,o,d,m)}function Uf(s,o,d,m){var M={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(Ah(s))zy(o,M);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var z=o.lastRenderedState,q=T(z,d);if(M.hasEagerState=!0,M.eagerState=q,qr(q,z))return Mr(s,o,M,0),dn===null&&wf(),!1}catch{}if(d=rh(s,o,M,m),d!==null)return Rn(d,s,m),Fy(d,o,m),!0}return!1}function lg(s,o,d,m){if(m={lane:2,revertLane:Ne(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Ah(s)){if(o)throw Error(i(479))}else o=rh(s,d,m,2),o!==null&&Rn(o,s,2)}function Ah(s){var o=s.alternate;return s===_n||o!==null&&o===_n}function zy(s,o){vu=na=!0;var d=s.pending;d===null?o.next=o:(o.next=d.next,d.next=o),s.pending=o}function Fy(s,o,d){if((d&4194048)!==0){var m=o.lanes;m&=s.pendingLanes,d|=m,o.lanes=d,Pa(s,d)}}var _u={readContext:ln,use:hl,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useLayoutEffect:Oi,useInsertionEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useSyncExternalStore:Oi,useId:Oi,useHostTransitionStatus:Oi,useFormState:Oi,useActionState:Oi,useOptimistic:Oi,useMemoCache:Oi,useCacheRefresh:Oi};_u.useEffectEvent=Oi;var By={readContext:ln,use:hl,useCallback:function(s,o){return fr().memoizedState=[s,o===void 0?null:o],s},useContext:ln,useEffect:xy,useImperativeHandle:function(s,o,d){d=d!=null?d.concat([s]):null,wh(4194308,4,Ty.bind(null,o,s),d)},useLayoutEffect:function(s,o){return wh(4194308,4,s,o)},useInsertionEffect:function(s,o){wh(4,2,s,o)},useMemo:function(s,o){var d=fr();o=o===void 0?null:o;var m=s();if(oc){At(!0);try{s()}finally{At(!1)}}return d.memoizedState=[m,o],m},useReducer:function(s,o,d){var m=fr();if(d!==void 0){var M=d(o);if(oc){At(!0);try{d(o)}finally{At(!1)}}}else M=o;return m.memoizedState=m.baseState=M,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:M},m.queue=s,s=s.dispatch=JS.bind(null,_n,s),[m.memoizedState,s]},useRef:function(s){var o=fr();return s={current:s},o.memoizedState=s},useState:function(s){s=Zm(s);var o=s.queue,d=Uy.bind(null,_n,o);return o.dispatch=d,[s.memoizedState,d]},useDebugValue:rg,useDeferredValue:function(s,o){var d=fr();return sg(d,s,o)},useTransition:function(){var s=Zm(!1);return s=Oy.bind(null,_n,s.queue,!0,!1),fr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,d){var m=_n,M=fr();if(Bn){if(d===void 0)throw Error(i(407));d=d()}else{if(d=o(),dn===null)throw Error(i(349));(wn&127)!==0||uy(m,o,d)}M.memoizedState=d;var T={value:d,getSnapshot:o};return M.queue=T,xy(dy.bind(null,m,T,s),[s]),m.flags|=2048,pl(9,{destroy:void 0},fy.bind(null,m,T,d,o),null),d},useId:function(){var s=fr(),o=dn.identifierPrefix;if(Bn){var d=ya,m=Di;d=(m&~(1<<32-ie(m)-1)).toString(32)+d,o="_"+o+"R_"+d,d=bh++,0<d&&(o+="H"+d.toString(32)),o+="_"}else d=Hm++,o="_"+o+"r_"+d.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:og,useFormState:eg,useActionState:eg,useOptimistic:function(s){var o=fr();o.memoizedState=o.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=lg.bind(null,_n,!0,d),d.dispatch=o,[s,o]},useMemoCache:Xm,useCacheRefresh:function(){return fr().memoizedState=QS.bind(null,_n)},useEffectEvent:function(s){var o=fr(),d={impl:s};return o.memoizedState=d,function(){if((Zt&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}},cg={readContext:ln,use:hl,useCallback:Cy,useContext:ln,useEffect:ig,useImperativeHandle:Ay,useInsertionEffect:Ey,useLayoutEffect:wy,useMemo:Ry,useReducer:Mh,useRef:Eh,useState:function(){return Mh(Ao)},useDebugValue:rg,useDeferredValue:function(s,o){var d=ji();return Dy(d,ai.memoizedState,s,o)},useTransition:function(){var s=Mh(Ao)[0],o=ji().memoizedState;return[typeof s=="boolean"?s:Lf(s),o]},useSyncExternalStore:cy,useId:Ny,useHostTransitionStatus:og,useFormState:_y,useActionState:_y,useOptimistic:function(s,o){var d=ji();return Km(d,ai,s,o)},useMemoCache:Xm,useCacheRefresh:Ly};cg.useEffectEvent=My;var ia={readContext:ln,use:hl,useCallback:Cy,useContext:ln,useEffect:ig,useImperativeHandle:Ay,useInsertionEffect:Ey,useLayoutEffect:wy,useMemo:Ry,useReducer:Ym,useRef:Eh,useState:function(){return Ym(Ao)},useDebugValue:rg,useDeferredValue:function(s,o){var d=ji();return ai===null?sg(d,s,o):Dy(d,ai.memoizedState,s,o)},useTransition:function(){var s=Ym(Ao)[0],o=ji().memoizedState;return[typeof s=="boolean"?s:Lf(s),o]},useSyncExternalStore:cy,useId:Ny,useHostTransitionStatus:og,useFormState:ng,useActionState:ng,useOptimistic:function(s,o){var d=ji();return ai!==null?Km(d,ai,s,o):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:Xm,useCacheRefresh:Ly};ia.useEffectEvent=My;function Ch(s,o,d,m){o=s.memoizedState,d=d(m,o),d=d==null?o:y({},o,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var zf={enqueueSetState:function(s,o,d){s=s._reactInternals;var m=Ls(),M=wo(m);M.payload=o,d!=null&&(M.callback=d),o=fl(s,M,m),o!==null&&(Rn(o,s,m),dl(o,s,m))},enqueueReplaceState:function(s,o,d){s=s._reactInternals;var m=Ls(),M=wo(m);M.tag=1,M.payload=o,d!=null&&(M.callback=d),o=fl(s,M,m),o!==null&&(Rn(o,s,m),dl(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var d=Ls(),m=wo(d);m.tag=2,o!=null&&(m.callback=o),o=fl(s,m,d),o!==null&&(Rn(o,s,d),dl(o,s,d))}};function ug(s,o,d,m,M,T,z){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,T,z):o.prototype&&o.prototype.isPureReactComponent?!tu(d,m)||!tu(M,T):!0}function fg(s,o,d,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,m),o.state!==s&&zf.enqueueReplaceState(o,o.state,null)}function ml(s,o){var d=o;if("ref"in o){d={};for(var m in o)m!=="ref"&&(d[m]=o[m])}if(s=s.defaultProps){d===o&&(d=y({},d));for(var M in s)d[M]===void 0&&(d[M]=s[M])}return d}function ky(s){Ef(s)}function dg(s){console.error(s)}function hg(s){Ef(s)}function Rh(s,o){try{var d=s.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Vy(s,o,d){try{var m=s.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function pg(s,o,d){return d=wo(d),d.tag=3,d.payload={element:null},d.callback=function(){Rh(s,o)},d}function mg(s){return s=wo(s),s.tag=3,s}function Hy(s,o,d,m){var M=d.type.getDerivedStateFromError;if(typeof M=="function"){var T=m.value;s.payload=function(){return M(T)},s.callback=function(){Vy(o,d,m)}}var z=d.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(s.callback=function(){Vy(o,d,m),typeof M!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var q=m.stack;this.componentDidCatch(m.value,{componentStack:q!==null?q:""})})}function dr(s,o,d,m,M){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=d.alternate,o!==null&&ja(o,d,M,!0),d=cs.current,d!==null){switch(d.tag){case 31:case 13:return Kr===null?Tu():d.alternate===null&&Ii===0&&(Ii=3),d.flags&=-257,d.flags|=65536,d.lanes=M,m===mh?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([m]):o.add(m),Yf(s,m,M)),!1;case 22:return d.flags|=65536,m===mh?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([m]):d.add(m)),Yf(s,m,M)),!1}throw Error(i(435,d.tag))}return Yf(s,m,M),Tu(),!1}if(Bn)return o=cs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=M,m!==cu&&(s=Error(i(422),{cause:m}),Ga(As(s,d)))):(m!==cu&&(o=Error(i(423),{cause:m}),Ga(As(o,d))),s=s.current.alternate,s.flags|=65536,M&=-M,s.lanes|=M,m=As(m,d),M=pg(s.stateNode,m,M),Qt(s,M),Ii!==4&&(Ii=2)),!1;var T=Error(i(520),{cause:m});if(T=As(T,d),vc===null?vc=[T]:vc.push(T),Ii!==4&&(Ii=2),o===null)return!0;m=As(m,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,s=M&-M,d.lanes|=s,s=pg(d.stateNode,m,s),Qt(d,s),!1;case 1:if(o=d.type,T=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Yi===null||!Yi.has(T))))return d.flags|=65536,M&=-M,d.lanes|=M,M=mg(M),Hy(M,s,d,m),Qt(d,M),!1}d=d.return}while(d!==null);return!1}var Dh=Error(i(461)),nr=!1;function Er(s,o,d,m){o.child=s===null?yh(o,null,d,m):Eo(o,s.child,d,m)}function gg(s,o,d,m,M){d=d.render;var T=o.ref;if("ref"in m){var z={};for(var q in m)q!=="ref"&&(z[q]=m[q])}else z=m;return cl(o),m=xh(s,o,d,z,T,M),q=Wm(),s!==null&&!nr?($m(s,o,M),Xi(s,o,M)):(Bn&&q&&Va(o),o.flags|=1,Er(s,o,m,M),o.child)}function uc(s,o,d,m,M){if(s===null){var T=d.type;return typeof T=="function"&&!sh(T)&&T.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=T,Oh(s,o,T,m,M)):(s=Ba(d.type,null,m,o,o.mode,M),s.ref=o.ref,s.return=o,o.child=s)}if(T=s.child,!zh(s,M)){var z=T.memoizedProps;if(d=d.compare,d=d!==null?d:tu,d(z,m)&&s.ref===o.ref)return Xi(s,o,M)}return o.flags|=1,s=as(T,m),s.ref=o.ref,s.return=o,o.child=s}function Oh(s,o,d,m,M){if(s!==null){var T=s.memoizedProps;if(tu(T,m)&&s.ref===o.ref)if(nr=!1,o.pendingProps=m=T,zh(s,M))(s.flags&131072)!==0&&(nr=!0);else return o.lanes=s.lanes,Xi(s,o,M)}return bu(s,o,d,m,M)}function fc(s,o,d,m){var M=m.children,T=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(T=T!==null?T.baseLanes|d:d,s!==null){for(m=o.child=s.child,M=0;m!==null;)M=M|m.lanes|m.childLanes,m=m.sibling;m=M&~T}else m=0,o.child=null;return fs(s,o,T,d,m)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Cf(o,T!==null?T.cachePool:null),T!==null?ay(o,T):km(),oy(o);else return m=o.lanes=536870912,fs(s,o,T!==null?T.baseLanes|d:d,d,m)}else T!==null?(Cf(o,T.cachePool),ay(o,T),us(),o.memoizedState=null):(s!==null&&Cf(o,null),km(),us());return Er(s,o,M,d),o.child}function qa(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function fs(s,o,d,m,M){var T=ph();return T=T===null?null:{parent:tr._currentValue,pool:T},o.memoizedState={baseLanes:d,cachePool:T},s!==null&&Cf(o,null),km(),oy(o),s!==null&&ja(s,o,m,!0),o.childLanes=M,null}function Ih(s,o){return o=Uh({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function Gy(s,o,d){return Eo(o,s.child,null,d),s=Ih(o,o.pendingProps),s.flags|=2,$i(o),o.memoizedState=null,s}function Ph(s,o,d){var m=o.pendingProps,M=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Bn){if(m.mode==="hidden")return s=Ih(o,m),o.lanes=536870912,qa(null,s);if(Vm(o),(s=fi)?(s=SA(s,Cs),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:bo!==null?{id:Di,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},d=au(s),d.return=o,o.child=d,zi=o,fi=null)):s=null,s===null)throw Ha(o);return o.lanes=536870912,null}return Ih(o,m)}var T=s.memoizedState;if(T!==null){var z=T.dehydrated;if(Vm(o),M)if(o.flags&256)o.flags&=-257,o=Gy(s,o,d);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(nr||ja(s,o,d,!1),M=(d&s.childLanes)!==0,nr||M){if(m=dn,m!==null&&(z=Xs(m,d),z!==0&&z!==T.retryLane))throw T.retryLane=z,Yr(s,z),Rn(m,s,z),Dh;Tu(),o=Gy(s,o,d)}else s=T.treeContext,fi=io(z.nextSibling),zi=o,Bn=!0,xo=null,Cs=!1,s!==null&&ch(o,s),o=Ih(o,m),o.flags|=4096;return o}return s=as(s.child,{mode:m.mode,children:m.children}),s.ref=o.ref,o.child=s,s.return=o,s}function dc(s,o){var d=o.ref;if(d===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(s===null||s.ref!==d)&&(o.flags|=4194816)}}function bu(s,o,d,m,M){return cl(o),d=xh(s,o,d,m,void 0,M),m=Wm(),s!==null&&!nr?($m(s,o,M),Xi(s,o,M)):(Bn&&m&&Va(o),o.flags|=1,Er(s,o,d,M),o.child)}function Ff(s,o,d,m,M,T){return cl(o),o.updateQueue=null,d=lc(o,m,d,M),ly(s),m=Wm(),s!==null&&!nr?($m(s,o,T),Xi(s,o,T)):(Bn&&m&&Va(o),o.flags|=1,Er(s,o,d,T),o.child)}function Nh(s,o,d,m,M){if(cl(o),o.stateNode===null){var T=il,z=d.contextType;typeof z=="object"&&z!==null&&(T=ln(z)),T=new d(m,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=zf,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=m,T.state=o.memoizedState,T.refs={},Of(o),z=d.contextType,T.context=typeof z=="object"&&z!==null?ln(z):il,T.state=o.memoizedState,z=d.getDerivedStateFromProps,typeof z=="function"&&(Ch(o,d,z,m),T.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(z=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),z!==T.state&&zf.enqueueReplaceState(T,T.state,null),pu(o,m,T,M),If(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(s===null){T=o.stateNode;var q=o.memoizedProps,le=ml(d,q);T.props=le;var De=T.context,Ge=d.contextType;z=il,typeof Ge=="object"&&Ge!==null&&(z=ln(Ge));var Qe=d.getDerivedStateFromProps;Ge=typeof Qe=="function"||typeof T.getSnapshotBeforeUpdate=="function",q=o.pendingProps!==q,Ge||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(q||De!==z)&&fg(o,T,m,z),Zr=!1;var Pe=o.memoizedState;T.state=Pe,pu(o,m,T,M),If(),De=o.memoizedState,q||Pe!==De||Zr?(typeof Qe=="function"&&(Ch(o,d,Qe,m),De=o.memoizedState),(le=Zr||ug(o,d,le,m,Pe,De,z))?(Ge||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=De),T.props=m,T.state=De,T.context=z,m=le):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{T=o.stateNode,Fm(s,o),z=o.memoizedProps,Ge=ml(d,z),T.props=Ge,Qe=o.pendingProps,Pe=T.context,De=d.contextType,le=il,typeof De=="object"&&De!==null&&(le=ln(De)),q=d.getDerivedStateFromProps,(De=typeof q=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(z!==Qe||Pe!==le)&&fg(o,T,m,le),Zr=!1,Pe=o.memoizedState,T.state=Pe,pu(o,m,T,M),If();var ze=o.memoizedState;z!==Qe||Pe!==ze||Zr||s!==null&&s.dependencies!==null&&Af(s.dependencies)?(typeof q=="function"&&(Ch(o,d,q,m),ze=o.memoizedState),(Ge=Zr||ug(o,d,Ge,m,Pe,ze,le)||s!==null&&s.dependencies!==null&&Af(s.dependencies))?(De||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,ze,le),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,ze,le)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||z===s.memoizedProps&&Pe===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&Pe===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ze),T.props=m,T.state=ze,T.context=le,m=Ge):(typeof T.componentDidUpdate!="function"||z===s.memoizedProps&&Pe===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&Pe===s.memoizedState||(o.flags|=1024),m=!1)}return T=m,dc(s,o),m=(o.flags&128)!==0,T||m?(T=o.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,s!==null&&m?(o.child=Eo(o,s.child,null,M),o.child=Eo(o,null,d,M)):Er(s,o,d,M),o.memoizedState=T.state,s=o.child):s=Xi(s,o,M),s}function Wy(s,o,d,m){return ol(),o.flags|=256,Er(s,o,d,m),o.child}var vg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Br(s){return{baseLanes:s,cachePool:zm()}}function Lh(s,o,d){return s=s!==null?s.childLanes&~d:0,o&&(s|=es),s}function $y(s,o,d){var m=o.pendingProps,M=!1,T=(o.flags&128)!==0,z;if((z=T)||(z=s!==null&&s.memoizedState===null?!1:(kn.current&2)!==0),z&&(M=!0,o.flags&=-129),z=(o.flags&32)!==0,o.flags&=-33,s===null){if(Bn){if(M?To(o):us(),(s=fi)?(s=SA(s,Cs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:bo!==null?{id:Di,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},d=au(s),d.return=o,o.child=d,zi=o,fi=null)):s=null,s===null)throw Ha(o);return h1(s)?o.lanes=32:o.lanes=536870912,null}var q=m.children;return m=m.fallback,M?(us(),M=o.mode,q=Uh({mode:"hidden",children:q},M),m=rl(m,M,d,null),q.return=o,m.return=o,q.sibling=m,o.child=q,m=o.child,m.memoizedState=Br(d),m.childLanes=Lh(s,z,d),o.memoizedState=vg,qa(null,m)):(To(o),Bf(o,q))}var le=s.memoizedState;if(le!==null&&(q=le.dehydrated,q!==null)){if(T)o.flags&256?(To(o),o.flags&=-257,o=yg(s,o,d)):o.memoizedState!==null?(us(),o.child=s.child,o.flags|=128,o=null):(us(),q=m.fallback,M=o.mode,m=Uh({mode:"visible",children:m.children},M),q=rl(q,M,d,null),q.flags|=2,m.return=o,q.return=o,m.sibling=q,o.child=m,Eo(o,s.child,null,d),m=o.child,m.memoizedState=Br(d),m.childLanes=Lh(s,z,d),o.memoizedState=vg,o=qa(null,m));else if(To(o),h1(q)){if(z=q.nextSibling&&q.nextSibling.dataset,z)var De=z.dgst;z=De,m=Error(i(419)),m.stack="",m.digest=z,Ga({value:m,source:null,stack:null}),o=yg(s,o,d)}else if(nr||ja(s,o,d,!1),z=(d&s.childLanes)!==0,nr||z){if(z=dn,z!==null&&(m=Xs(z,d),m!==0&&m!==le.retryLane))throw le.retryLane=m,Yr(s,m),Rn(z,s,m),Dh;d1(q)||Tu(),o=yg(s,o,d)}else d1(q)?(o.flags|=192,o.child=s.child,o=null):(s=le.treeContext,fi=io(q.nextSibling),zi=o,Bn=!0,xo=null,Cs=!1,s!==null&&ch(o,s),o=Bf(o,m.children),o.flags|=4096);return o}return M?(us(),q=m.fallback,M=o.mode,le=s.child,De=le.sibling,m=as(le,{mode:"hidden",children:m.children}),m.subtreeFlags=le.subtreeFlags&65011712,De!==null?q=as(De,q):(q=rl(q,M,d,null),q.flags|=2),q.return=o,m.return=o,m.sibling=q,o.child=m,qa(null,m),m=o.child,q=s.child.memoizedState,q===null?q=Br(d):(M=q.cachePool,M!==null?(le=tr._currentValue,M=M.parent!==le?{parent:le,pool:le}:M):M=zm(),q={baseLanes:q.baseLanes|d,cachePool:M}),m.memoizedState=q,m.childLanes=Lh(s,z,d),o.memoizedState=vg,qa(s.child,m)):(To(o),d=s.child,s=d.sibling,d=as(d,{mode:"visible",children:m.children}),d.return=o,d.sibling=null,s!==null&&(z=o.deletions,z===null?(o.deletions=[s],o.flags|=16):z.push(s)),o.child=d,o.memoizedState=null,d)}function Bf(s,o){return o=Uh({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Uh(s,o){return s=Ri(22,s,null,o),s.lanes=0,s}function yg(s,o,d){return Eo(o,s.child,null,d),s=Bf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function jy(s,o,d){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),fh(s.return,o,d)}function hc(s,o,d,m,M,T){var z=s.memoizedState;z===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:M,treeForkCount:T}:(z.isBackwards=o,z.rendering=null,z.renderingStartTime=0,z.last=m,z.tail=d,z.tailMode=M,z.treeForkCount=T)}function ds(s,o,d){var m=o.pendingProps,M=m.revealOrder,T=m.tail;m=m.children;var z=kn.current,q=(z&2)!==0;if(q?(z=z&1|2,o.flags|=128):z&=1,we(kn,z),Er(s,o,m,d),m=Bn?lu:0,!q&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&jy(s,d,o);else if(s.tag===19)jy(s,d,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(M){case"forwards":for(d=o.child,M=null;d!==null;)s=d.alternate,s!==null&&Ds(s)===null&&(M=d),d=d.sibling;d=M,d===null?(M=o.child,o.child=null):(M=d.sibling,d.sibling=null),hc(o,!1,M,d,T,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,M=o.child,o.child=null;M!==null;){if(s=M.alternate,s!==null&&Ds(s)===null){o.child=M;break}s=M.sibling,M.sibling=d,d=M,M=s}hc(o,!0,d,null,T,m);break;case"together":hc(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function Xi(s,o,d){if(s!==null&&(o.dependencies=s.dependencies),eo|=o.lanes,(d&o.childLanes)===0)if(s!==null){if(ja(s,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,d=as(s,s.pendingProps),o.child=d,d.return=o;s.sibling!==null;)s=s.sibling,d=d.sibling=as(s,s.pendingProps),d.return=o;d.sibling=null}return o.child}function zh(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Af(s)))}function e1(s,o,d){switch(o.tag){case 3:tt(o,o.stateNode.containerInfo),So(o,tr,s.memoizedState.cache),ol();break;case 27:case 5:Rt(o);break;case 4:tt(o,o.stateNode.containerInfo);break;case 10:So(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Vm(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(To(o),o.flags|=128,null):(d&o.child.childLanes)!==0?$y(s,o,d):(To(o),s=Xi(s,o,d),s!==null?s.sibling:null);To(o);break;case 19:var M=(s.flags&128)!==0;if(m=(d&o.childLanes)!==0,m||(ja(s,o,d,!1),m=(d&o.childLanes)!==0),M){if(m)return ds(s,o,d);o.flags|=128}if(M=o.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),we(kn,kn.current),m)break;return null;case 22:return o.lanes=0,fc(s,o,d,o.pendingProps);case 24:So(o,tr,s.memoizedState.cache)}return Xi(s,o,d)}function Fh(s,o,d){if(s!==null)if(s.memoizedProps!==o.pendingProps)nr=!0;else{if(!zh(s,d)&&(o.flags&128)===0)return nr=!1,e1(s,o,d);nr=(s.flags&131072)!==0}else nr=!1,Bn&&(o.flags&1048576)!==0&&Jv(o,lu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(s=nc(o.elementType),o.type=s,typeof s=="function")sh(s)?(m=ml(s,m),o.tag=1,o=Nh(null,o,s,m,d)):(o.tag=0,o=bu(null,o,s,m,d));else{if(s!=null){var M=s.$$typeof;if(M===I){o.tag=11,o=gg(null,o,s,m,d);break e}else if(M===F){o.tag=14,o=uc(null,o,s,m,d);break e}}throw o=ne(s)||s,Error(i(306,o,""))}}return o;case 0:return bu(s,o,o.type,o.pendingProps,d);case 1:return m=o.type,M=ml(m,o.pendingProps),Nh(s,o,m,M,d);case 3:e:{if(tt(o,o.stateNode.containerInfo),s===null)throw Error(i(387));m=o.pendingProps;var T=o.memoizedState;M=T.element,Fm(s,o),pu(o,m,null,d);var z=o.memoizedState;if(m=z.cache,So(o,tr,m),m!==T.cache&&dh(o,[tr],d,!0),If(),m=z.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:z.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=Wy(s,o,m,d);break e}else if(m!==M){M=As(Error(i(424)),o),Ga(M),o=Wy(s,o,m,d);break e}else for(s=o.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,fi=io(s.firstChild),zi=o,Bn=!0,xo=null,Cs=!0,d=yh(o,null,m,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(ol(),m===M){o=Xi(s,o,d);break e}Er(s,o,m,d)}o=o.child}return o;case 26:return dc(s,o),s===null?(d=CA(o.type,null,o.pendingProps,null))?o.memoizedState=d:Bn||(d=o.type,s=o.pendingProps,m=Zy(ge.current).createElement(d),m[bi]=o,m[H]=s,ns(m,d,s),$(m),o.stateNode=m):o.memoizedState=CA(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Rt(o),s===null&&Bn&&(m=o.stateNode=wA(o.type,o.pendingProps,ge.current),zi=o,Cs=!0,M=fi,Du(o.type)?(p1=M,fi=io(m.firstChild)):fi=M),Er(s,o,o.pendingProps.children,d),dc(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Bn&&((M=m=fi)&&(m=bU(m,o.type,o.pendingProps,Cs),m!==null?(o.stateNode=m,zi=o,fi=io(m.firstChild),Cs=!1,M=!0):M=!1),M||Ha(o)),Rt(o),M=o.type,T=o.pendingProps,z=s!==null?s.memoizedProps:null,m=T.children,c1(M,T)?m=null:z!==null&&c1(M,z)&&(o.flags|=32),o.memoizedState!==null&&(M=xh(s,o,cc,null,null,d),Rg._currentValue=M),dc(s,o),Er(s,o,m,d),o.child;case 6:return s===null&&Bn&&((s=d=fi)&&(d=xU(d,o.pendingProps,Cs),d!==null?(o.stateNode=d,zi=o,fi=null,s=!0):s=!1),s||Ha(o)),null;case 13:return $y(s,o,d);case 4:return tt(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=Eo(o,null,m,d):Er(s,o,m,d),o.child;case 11:return gg(s,o,o.type,o.pendingProps,d);case 7:return Er(s,o,o.pendingProps,d),o.child;case 8:return Er(s,o,o.pendingProps.children,d),o.child;case 12:return Er(s,o,o.pendingProps.children,d),o.child;case 10:return m=o.pendingProps,So(o,o.type,m.value),Er(s,o,m.children,d),o.child;case 9:return M=o.type._context,m=o.pendingProps.children,cl(o),M=ln(M),m=m(M),o.flags|=1,Er(s,o,m,d),o.child;case 14:return uc(s,o,o.type,o.pendingProps,d);case 15:return Oh(s,o,o.type,o.pendingProps,d);case 19:return ds(s,o,d);case 31:return Ph(s,o,d);case 22:return fc(s,o,d,o.pendingProps);case 24:return cl(o),m=ln(tr),s===null?(M=ph(),M===null&&(M=dn,T=Pm(),M.pooledCache=T,T.refCount++,T!==null&&(M.pooledCacheLanes|=d),M=T),o.memoizedState={parent:m,cache:M},Of(o),So(o,tr,M)):((s.lanes&d)!==0&&(Fm(s,o),pu(o,null,null,d),If()),M=s.memoizedState,T=o.memoizedState,M.parent!==m?(M={parent:m,cache:m},o.memoizedState=M,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=M),So(o,tr,m)):(m=T.cache,So(o,tr,m),m!==M.cache&&dh(o,[tr],d,!0))),Er(s,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Ya(s){s.flags|=4}function kf(s,o,d,m,M){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(M&335544128)===M)if(s.stateNode.complete)s.flags|=8192;else if(Ni())s.flags|=8192;else throw Xa=mh,Rf}else s.flags&=-16777217}function _g(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!PA(o))if(Ni())s.flags|=8192;else throw Xa=mh,Rf}function Co(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?mn():536870912,s.lanes|=o,xi|=o)}function Za(s,o){if(!Bn)switch(s.tailMode){case"hidden":o=s.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function oi(s){var o=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(o)for(var M=s.child;M!==null;)d|=M.lanes|M.childLanes,m|=M.subtreeFlags&65011712,m|=M.flags&65011712,M.return=s,M=M.sibling;else for(M=s.child;M!==null;)d|=M.lanes|M.childLanes,m|=M.subtreeFlags,m|=M.flags,M.return=s,M=M.sibling;return s.subtreeFlags|=m,s.childLanes=d,o}function Vf(s,o,d){var m=o.pendingProps;switch(lh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(o),null;case 1:return oi(o),null;case 3:return d=o.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),$a(tr),yt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(uu(o)?Ya(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,uh())),oi(o),null;case 26:var M=o.type,T=o.memoizedState;return s===null?(Ya(o),T!==null?(oi(o),_g(o,T)):(oi(o),kf(o,M,null,m,d))):T?T!==s.memoizedState?(Ya(o),oi(o),_g(o,T)):(oi(o),o.flags&=-16777217):(s=s.memoizedProps,s!==m&&Ya(o),oi(o),kf(o,M,s,m,d)),null;case 27:if(nn(o),d=ge.current,M=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Ya(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return oi(o),null}s=ke.current,uu(o)?ey(o):(s=wA(M,m,d),o.stateNode=s,Ya(o))}return oi(o),null;case 5:if(nn(o),M=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Ya(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return oi(o),null}if(T=ke.current,uu(o))ey(o);else{var z=Zy(ge.current);switch(T){case 1:T=z.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:T=z.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":T=z.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":T=z.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":T=z.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof m.is=="string"?z.createElement("select",{is:m.is}):z.createElement("select"),m.multiple?T.multiple=!0:m.size&&(T.size=m.size);break;default:T=typeof m.is=="string"?z.createElement(M,{is:m.is}):z.createElement(M)}}T[bi]=o,T[H]=m;e:for(z=o.child;z!==null;){if(z.tag===5||z.tag===6)T.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===o)break e;for(;z.sibling===null;){if(z.return===null||z.return===o)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}o.stateNode=T;e:switch(ns(T,M,m),M){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Ya(o)}}return oi(o),kf(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,d),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==m&&Ya(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(i(166));if(s=ge.current,uu(o)){if(s=o.stateNode,d=o.memoizedProps,m=null,M=zi,M!==null)switch(M.tag){case 27:case 5:m=M.memoizedProps}s[bi]=o,s=!!(s.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||pA(s.nodeValue,d)),s||Ha(o,!0)}else s=Zy(s).createTextNode(m),s[bi]=o,o.stateNode=s}return oi(o),null;case 31:if(d=o.memoizedState,s===null||s.memoizedState!==null){if(m=uu(o),d!==null){if(s===null){if(!m)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[bi]=o}else ol(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;oi(o),s=!1}else d=uh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),s=!0;if(!s)return o.flags&256?($i(o),o):($i(o),null);if((o.flags&128)!==0)throw Error(i(558))}return oi(o),null;case 13:if(m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(M=uu(o),m!==null&&m.dehydrated!==null){if(s===null){if(!M)throw Error(i(318));if(M=o.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(i(317));M[bi]=o}else ol(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;oi(o),M=!1}else M=uh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=M),M=!0;if(!M)return o.flags&256?($i(o),o):($i(o),null)}return $i(o),(o.flags&128)!==0?(o.lanes=d,o):(d=m!==null,s=s!==null&&s.memoizedState!==null,d&&(m=o.child,M=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(M=m.alternate.memoizedState.cachePool.pool),T=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==M&&(m.flags|=2048)),d!==s&&d&&(o.child.flags|=8192),Co(o,o.updateQueue),oi(o),null);case 4:return yt(),s===null&&r1(o.stateNode.containerInfo),oi(o),null;case 10:return $a(o.type),oi(o),null;case 19:if(pe(kn),m=o.memoizedState,m===null)return oi(o),null;if(M=(o.flags&128)!==0,T=m.rendering,T===null)if(M)Za(m,!1);else{if(Ii!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(T=Ds(s),T!==null){for(o.flags|=128,Za(m,!1),s=T.updateQueue,o.updateQueue=s,Co(o,s),o.subtreeFlags=0,s=d,d=o.child;d!==null;)su(d,s),d=d.sibling;return we(kn,kn.current&1|2),Bn&&ka(o,m.treeForkCount),o.child}s=s.sibling}m.tail!==null&&k()>qi&&(o.flags|=128,M=!0,Za(m,!1),o.lanes=4194304)}else{if(!M)if(s=Ds(T),s!==null){if(o.flags|=128,M=!0,s=s.updateQueue,o.updateQueue=s,Co(o,s),Za(m,!0),m.tail===null&&m.tailMode==="hidden"&&!T.alternate&&!Bn)return oi(o),null}else 2*k()-m.renderingStartTime>qi&&d!==536870912&&(o.flags|=128,M=!0,Za(m,!1),o.lanes=4194304);m.isBackwards?(T.sibling=o.child,o.child=T):(s=m.last,s!==null?s.sibling=T:o.child=T,m.last=T)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=k(),s.sibling=null,d=kn.current,we(kn,M?d&1|2:d&1),Bn&&ka(o,m.treeForkCount),s):(oi(o),null);case 22:case 23:return $i(o),Pf(),m=o.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(d&536870912)!==0&&(o.flags&128)===0&&(oi(o),o.subtreeFlags&6&&(o.flags|=8192)):oi(o),d=o.updateQueue,d!==null&&Co(o,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==d&&(o.flags|=2048),s!==null&&pe(ul),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),$a(tr),oi(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function ra(s,o){switch(lh(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return $a(tr),yt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return nn(o),null;case 31:if(o.memoizedState!==null){if($i(o),o.alternate===null)throw Error(i(340));ol()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if($i(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));ol()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return pe(kn),null;case 4:return yt(),null;case 10:return $a(o.type),null;case 22:case 23:return $i(o),Pf(),s!==null&&pe(ul),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return $a(tr),null;case 25:return null;default:return null}}function Os(s,o){switch(lh(o),o.tag){case 3:$a(tr),yt();break;case 26:case 27:case 5:nn(o);break;case 4:yt();break;case 31:o.memoizedState!==null&&$i(o);break;case 13:$i(o);break;case 19:pe(kn);break;case 10:$a(o.type);break;case 22:case 23:$i(o),Pf(),s!==null&&pe(ul);break;case 24:$a(tr)}}function sa(s,o){try{var d=o.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var M=m.next;d=M;do{if((d.tag&s)===s){m=void 0;var T=d.create,z=d.inst;m=T(),z.destroy=m}d=d.next}while(d!==M)}}catch(q){Xn(o,o.return,q)}}function Or(s,o,d){try{var m=o.updateQueue,M=m!==null?m.lastEffect:null;if(M!==null){var T=M.next;m=T;do{if((m.tag&s)===s){var z=m.inst,q=z.destroy;if(q!==void 0){z.destroy=void 0,M=o;var le=d,De=q;try{De()}catch(Ge){Xn(M,le,Ge)}}}m=m.next}while(m!==T)}}catch(Ge){Xn(o,o.return,Ge)}}function _a(s){var o=s.updateQueue;if(o!==null){var d=s.stateNode;try{sy(o,d)}catch(m){Xn(s,s.return,m)}}}function wr(s,o,d){d.props=ml(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(m){Xn(s,o,m)}}function Ro(s,o){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof d=="function"?s.refCleanup=d(m):d.current=m}}catch(M){Xn(s,o,M)}}function Ir(s,o){var d=s.ref,m=s.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(M){Xn(s,o,M)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(M){Xn(s,o,M)}else d.current=null}function Hf(s){var o=s.type,d=s.memoizedProps,m=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(M){Xn(s,s.return,M)}}function hr(s,o,d){try{var m=s.stateNode;pU(m,s.type,d,o),m[H]=o}catch(M){Xn(s,s.return,M)}}function Ti(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Du(s.type)||s.tag===4}function zn(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ti(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Du(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ka(s,o,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,o):(o=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,o.appendChild(s),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=vo));else if(m!==4&&(m===27&&Du(s.type)&&(d=s.stateNode,o=null),s=s.child,s!==null))for(Ka(s,o,d),s=s.sibling;s!==null;)Ka(s,o,d),s=s.sibling}function Qr(s,o,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?d.insertBefore(s,o):d.appendChild(s);else if(m!==4&&(m===27&&Du(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Qr(s,o,d),s=s.sibling;s!==null;)Qr(s,o,d),s=s.sibling}function Bh(s){var o=s.stateNode,d=s.memoizedProps;try{for(var m=s.type,M=o.attributes;M.length;)o.removeAttributeNode(M[0]);ns(o,m,d),o[bi]=s,o[H]=d}catch(T){Xn(s,s.return,T)}}var aa=!1,di=!1,ba=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,Tr=null;function t1(s,o){if(s=s.containerInfo,o1=i_,s=Yv(s),Cm(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var M=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var z=0,q=-1,le=-1,De=0,Ge=0,Qe=s,Pe=null;t:for(;;){for(var ze;Qe!==d||M!==0&&Qe.nodeType!==3||(q=z+M),Qe!==T||m!==0&&Qe.nodeType!==3||(le=z+m),Qe.nodeType===3&&(z+=Qe.nodeValue.length),(ze=Qe.firstChild)!==null;)Pe=Qe,Qe=ze;for(;;){if(Qe===s)break t;if(Pe===d&&++De===M&&(q=z),Pe===T&&++Ge===m&&(le=z),(ze=Qe.nextSibling)!==null)break;Qe=Pe,Pe=Qe.parentNode}Qe=ze}d=q===-1||le===-1?null:{start:q,end:le}}else d=null}d=d||{start:0,end:0}}else d=null;for(l1={focusedElem:s,selectionRange:d},i_=!1,Tr=o;Tr!==null;)if(o=Tr,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Tr=s;else for(;Tr!==null;){switch(o=Tr,T=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(d=0;d<s.length;d++)M=s[d],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,d=o,M=T.memoizedProps,T=T.memoizedState,m=d.stateNode;try{var Wt=ml(d.type,M);s=m.getSnapshotBeforeUpdate(Wt,T),m.__reactInternalSnapshotBeforeUpdate=s}catch(on){Xn(d,d.return,on)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,d=s.nodeType,d===9)f1(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":f1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Tr=s;break}Tr=o.return}}function Ai(s,o,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:ca(s,d),m&4&&sa(5,d);break;case 1:if(ca(s,d),m&4)if(s=d.stateNode,o===null)try{s.componentDidMount()}catch(z){Xn(d,d.return,z)}else{var M=ml(d.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(M,o,s.__reactInternalSnapshotBeforeUpdate)}catch(z){Xn(d,d.return,z)}}m&64&&_a(d),m&512&&Ro(d,d.return);break;case 3:if(ca(s,d),m&64&&(s=d.updateQueue,s!==null)){if(o=null,d.child!==null)switch(d.child.tag){case 27:case 5:o=d.child.stateNode;break;case 1:o=d.child.stateNode}try{sy(s,o)}catch(z){Xn(d,d.return,z)}}break;case 27:o===null&&m&4&&Bh(d);case 26:case 5:ca(s,d),o===null&&m&4&&Hf(d),m&512&&Ro(d,d.return);break;case 12:ca(s,d);break;case 31:ca(s,d),m&4&&gl(s,d);break;case 13:ca(s,d),m&4&&xu(s,d),m&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=v.bind(null,d),SU(s,d))));break;case 22:if(m=d.memoizedState!==null||aa,!m){o=o!==null&&o.memoizedState!==null||di,M=aa;var T=di;aa=m,(di=o)&&!T?Jr(s,d,(d.subtreeFlags&8772)!==0):ca(s,d),aa=M,di=T}break;case 30:break;default:ca(s,d)}}function Gf(s){var o=s.alternate;o!==null&&(s.alternate=null,Gf(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&rt(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ii=null,kr=!1;function oa(s,o,d){for(d=d.child;d!==null;)kh(s,o,d),d=d.sibling}function kh(s,o,d){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Ze,d)}catch{}switch(d.tag){case 26:di||Ir(d,o),oa(s,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:di||Ir(d,o);var m=ii,M=kr;Du(d.type)&&(ii=d.stateNode,kr=!1),oa(s,o,d),Tg(d.stateNode),ii=m,kr=M;break;case 5:di||Ir(d,o);case 6:if(m=ii,M=kr,ii=null,oa(s,o,d),ii=m,kr=M,ii!==null)if(kr)try{(ii.nodeType===9?ii.body:ii.nodeName==="HTML"?ii.ownerDocument.body:ii).removeChild(d.stateNode)}catch(T){Xn(d,o,T)}else try{ii.removeChild(d.stateNode)}catch(T){Xn(d,o,T)}break;case 18:ii!==null&&(kr?(s=ii,bA(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),qh(s)):bA(ii,d.stateNode));break;case 4:m=ii,M=kr,ii=d.stateNode.containerInfo,kr=!0,oa(s,o,d),ii=m,kr=M;break;case 0:case 11:case 14:case 15:Or(2,d,o),di||Or(4,d,o),oa(s,o,d);break;case 1:di||(Ir(d,o),m=d.stateNode,typeof m.componentWillUnmount=="function"&&wr(d,o,m)),oa(s,o,d);break;case 21:oa(s,o,d);break;case 22:di=(m=di)||d.memoizedState!==null,oa(s,o,d),di=m;break;default:oa(s,o,d)}}function gl(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{qh(s)}catch(d){Xn(o,o.return,d)}}}function xu(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{qh(s)}catch(d){Xn(o,o.return,d)}}function bg(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new Xy),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new Xy),o;default:throw Error(i(435,s.tag))}}function Do(s,o){var d=bg(s);o.forEach(function(m){if(!d.has(m)){d.add(m);var M=x.bind(null,s,m);m.then(M,M)}})}function pr(s,o){var d=o.deletions;if(d!==null)for(var m=0;m<d.length;m++){var M=d[m],T=s,z=o,q=z;e:for(;q!==null;){switch(q.tag){case 27:if(Du(q.type)){ii=q.stateNode,kr=!1;break e}break;case 5:ii=q.stateNode,kr=!1;break e;case 3:case 4:ii=q.stateNode.containerInfo,kr=!0;break e}q=q.return}if(ii===null)throw Error(i(160));kh(T,z,M),ii=null,kr=!1,T=M.alternate,T!==null&&(T.return=null),M.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)vl(o,s),o=o.sibling}var la=null;function vl(s,o){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:pr(o,s),mr(s),m&4&&(Or(3,s,s.return),sa(3,s),Or(5,s,s.return));break;case 1:pr(o,s),mr(s),m&512&&(di||d===null||Ir(d,d.return)),m&64&&aa&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var M=la;if(pr(o,s),mr(s),m&512&&(di||d===null||Ir(d,d.return)),m&4){var T=d!==null?d.memoizedState:null;if(m=s.memoizedState,d===null)if(m===null)if(s.stateNode===null){e:{m=s.type,d=s.memoizedProps,M=M.ownerDocument||M;t:switch(m){case"title":T=M.getElementsByTagName("title")[0],(!T||T[at]||T[bi]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=M.createElement(m),M.head.insertBefore(T,M.querySelector("head > title"))),ns(T,m,d),T[bi]=s,$(T),m=T;break e;case"link":var z=OA("link","href",M).get(m+(d.href||""));if(z){for(var q=0;q<z.length;q++)if(T=z[q],T.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&T.getAttribute("rel")===(d.rel==null?null:d.rel)&&T.getAttribute("title")===(d.title==null?null:d.title)&&T.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){z.splice(q,1);break t}}T=M.createElement(m),ns(T,m,d),M.head.appendChild(T);break;case"meta":if(z=OA("meta","content",M).get(m+(d.content||""))){for(q=0;q<z.length;q++)if(T=z[q],T.getAttribute("content")===(d.content==null?null:""+d.content)&&T.getAttribute("name")===(d.name==null?null:d.name)&&T.getAttribute("property")===(d.property==null?null:d.property)&&T.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&T.getAttribute("charset")===(d.charSet==null?null:d.charSet)){z.splice(q,1);break t}}T=M.createElement(m),ns(T,m,d),M.head.appendChild(T);break;default:throw Error(i(468,m))}T[bi]=s,$(T),m=T}s.stateNode=m}else IA(M,s.type,s.stateNode);else s.stateNode=DA(M,m,s.memoizedProps);else T!==m?(T===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):T.count--,m===null?IA(M,s.type,s.stateNode):DA(M,m,s.memoizedProps)):m===null&&s.stateNode!==null&&hr(s,s.memoizedProps,d.memoizedProps)}break;case 27:pr(o,s),mr(s),m&512&&(di||d===null||Ir(d,d.return)),d!==null&&m&4&&hr(s,s.memoizedProps,d.memoizedProps);break;case 5:if(pr(o,s),mr(s),m&512&&(di||d===null||Ir(d,d.return)),s.flags&32){M=s.stateNode;try{er(M,"")}catch(Wt){Xn(s,s.return,Wt)}}m&4&&s.stateNode!=null&&(M=s.memoizedProps,hr(s,M,d!==null?d.memoizedProps:M)),m&1024&&(ba=!0);break;case 6:if(pr(o,s),mr(s),m&4){if(s.stateNode===null)throw Error(i(162));m=s.memoizedProps,d=s.stateNode;try{d.nodeValue=m}catch(Wt){Xn(s,s.return,Wt)}}break;case 3:if(Jy=null,M=la,la=Ky(o.containerInfo),pr(o,s),la=M,mr(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{qh(o.containerInfo)}catch(Wt){Xn(s,s.return,Wt)}ba&&(ba=!1,Vh(s));break;case 4:m=la,la=Ky(s.stateNode.containerInfo),pr(o,s),mr(s),la=m;break;case 12:pr(o,s),mr(s);break;case 31:pr(o,s),mr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Do(s,m)));break;case 13:pr(o,s),mr(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Su=k()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Do(s,m)));break;case 22:M=s.memoizedState!==null;var le=d!==null&&d.memoizedState!==null,De=aa,Ge=di;if(aa=De||M,di=Ge||le,pr(o,s),di=Ge,aa=De,mr(s),m&8192)e:for(o=s.stateNode,o._visibility=M?o._visibility&-2:o._visibility|1,M&&(d===null||le||aa||di||Qa(s)),d=null,o=s;;){if(o.tag===5||o.tag===26){if(d===null){le=d=o;try{if(T=le.stateNode,M)z=T.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{q=le.stateNode;var Qe=le.memoizedProps.style,Pe=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;q.style.display=Pe==null||typeof Pe=="boolean"?"":(""+Pe).trim()}}catch(Wt){Xn(le,le.return,Wt)}}}else if(o.tag===6){if(d===null){le=o;try{le.stateNode.nodeValue=M?"":le.memoizedProps}catch(Wt){Xn(le,le.return,Wt)}}}else if(o.tag===18){if(d===null){le=o;try{var ze=le.stateNode;M?xA(ze,!0):xA(le.stateNode,!1)}catch(Wt){Xn(le,le.return,Wt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=s.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Do(s,d))));break;case 19:pr(o,s),mr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Do(s,m)));break;case 30:break;case 21:break;default:pr(o,s),mr(s)}}function mr(s){var o=s.flags;if(o&2){try{for(var d,m=s.return;m!==null;){if(Ti(m)){d=m;break}m=m.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var M=d.stateNode,T=zn(s);Qr(s,T,M);break;case 5:var z=d.stateNode;d.flags&32&&(er(z,""),d.flags&=-33);var q=zn(s);Qr(s,q,z);break;case 3:case 4:var le=d.stateNode.containerInfo,De=zn(s);Ka(s,De,le);break;default:throw Error(i(161))}}catch(Ge){Xn(s,s.return,Ge)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Vh(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Vh(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function ca(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Ai(s,o.alternate,o),o=o.sibling}function Qa(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Or(4,o,o.return),Qa(o);break;case 1:Ir(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&wr(o,o.return,d),Qa(o);break;case 27:Tg(o.stateNode);case 26:case 5:Ir(o,o.return),Qa(o);break;case 22:o.memoizedState===null&&Qa(o);break;case 30:Qa(o);break;default:Qa(o)}s=s.sibling}}function Jr(s,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,M=s,T=o,z=T.flags;switch(T.tag){case 0:case 11:case 15:Jr(M,T,d),sa(4,T);break;case 1:if(Jr(M,T,d),m=T,M=m.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(De){Xn(m,m.return,De)}if(m=T,M=m.updateQueue,M!==null){var q=m.stateNode;try{var le=M.shared.hiddenCallbacks;if(le!==null)for(M.shared.hiddenCallbacks=null,M=0;M<le.length;M++)mu(le[M],q)}catch(De){Xn(m,m.return,De)}}d&&z&64&&_a(T),Ro(T,T.return);break;case 27:Bh(T);case 26:case 5:Jr(M,T,d),d&&m===null&&z&4&&Hf(T),Ro(T,T.return);break;case 12:Jr(M,T,d);break;case 31:Jr(M,T,d),d&&z&4&&gl(M,T);break;case 13:Jr(M,T,d),d&&z&4&&xu(M,T);break;case 22:T.memoizedState===null&&Jr(M,T,d),Ro(T,T.return);break;case 30:break;default:Jr(M,T,d)}o=o.sibling}}function yl(s,o){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&ec(d))}function pc(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ec(s))}function Pr(s,o,d,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)xg(s,o,d,m),o=o.sibling}function xg(s,o,d,m){var M=o.flags;switch(o.tag){case 0:case 11:case 15:Pr(s,o,d,m),M&2048&&sa(9,o);break;case 1:Pr(s,o,d,m);break;case 3:Pr(s,o,d,m),M&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ec(s)));break;case 12:if(M&2048){Pr(s,o,d,m),s=o.stateNode;try{var T=o.memoizedProps,z=T.id,q=T.onPostCommit;typeof q=="function"&&q(z,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(le){Xn(o,o.return,le)}}else Pr(s,o,d,m);break;case 31:Pr(s,o,d,m);break;case 13:Pr(s,o,d,m);break;case 23:break;case 22:T=o.stateNode,z=o.alternate,o.memoizedState!==null?T._visibility&2?Pr(s,o,d,m):Ja(s,o):T._visibility&2?Pr(s,o,d,m):(T._visibility|=2,Nr(s,o,d,m,(o.subtreeFlags&10256)!==0||!1)),M&2048&&yl(z,o);break;case 24:Pr(s,o,d,m),M&2048&&pc(o.alternate,o);break;default:Pr(s,o,d,m)}}function Nr(s,o,d,m,M){for(M=M&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var T=s,z=o,q=d,le=m,De=z.flags;switch(z.tag){case 0:case 11:case 15:Nr(T,z,q,le,M),sa(8,z);break;case 23:break;case 22:var Ge=z.stateNode;z.memoizedState!==null?Ge._visibility&2?Nr(T,z,q,le,M):Ja(T,z):(Ge._visibility|=2,Nr(T,z,q,le,M)),M&&De&2048&&yl(z.alternate,z);break;case 24:Nr(T,z,q,le,M),M&&De&2048&&pc(z.alternate,z);break;default:Nr(T,z,q,le,M)}o=o.sibling}}function Ja(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=s,m=o,M=m.flags;switch(m.tag){case 22:Ja(d,m),M&2048&&yl(m.alternate,m);break;case 24:Ja(d,m),M&2048&&pc(m.alternate,m);break;default:Ja(d,m)}o=o.sibling}}var mc=8192;function Is(s,o,d){if(s.subtreeFlags&mc)for(s=s.child;s!==null;)Hh(s,o,d),s=s.sibling}function Hh(s,o,d){switch(s.tag){case 26:Is(s,o,d),s.flags&mc&&s.memoizedState!==null&&NU(d,la,s.memoizedState,s.memoizedProps);break;case 5:Is(s,o,d);break;case 3:case 4:var m=la;la=Ky(s.stateNode.containerInfo),Is(s,o,d),la=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=mc,mc=16777216,Is(s,o,d),mc=m):Is(s,o,d));break;default:Is(s,o,d)}}function gc(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function _l(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var m=o[d];Tr=m,Fi(m,s)}gc(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)hs(s),s=s.sibling}function hs(s){switch(s.tag){case 0:case 11:case 15:_l(s),s.flags&2048&&Or(9,s,s.return);break;case 3:_l(s);break;case 12:_l(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,ps(s)):_l(s);break;default:_l(s)}}function ps(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var m=o[d];Tr=m,Fi(m,s)}gc(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Or(8,o,o.return),ps(o);break;case 22:d=o.stateNode,d._visibility&2&&(d._visibility&=-3,ps(o));break;default:ps(o)}s=s.sibling}}function Fi(s,o){for(;Tr!==null;){var d=Tr;switch(d.tag){case 0:case 11:case 15:Or(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ec(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Tr=m;else e:for(d=s;Tr!==null;){m=Tr;var M=m.sibling,T=m.return;if(Gf(m),m===d){Tr=null;break e}if(M!==null){M.return=T,Tr=M;break e}Tr=T}}}var Oo={getCacheForType:function(s){var o=ln(tr),d=o.data.get(s);return d===void 0&&(d=s(),o.data.set(s,d)),d},cacheSignal:function(){return ln(tr).controller.signal}},bn=typeof WeakMap=="function"?WeakMap:Map,Zt=0,dn=null,Cn=null,wn=0,Vn=0,Vr=null,ua=!1,xa=!1,Sg=!1,Ps=0,Ii=0,eo=0,bl=0,Wf=0,es=0,xi=0,vc=null,Bi=null,ki=!1,Su=0,Mg=0,qi=1/0,Pi=null,Yi=null,ri=0,Ns=null,Mu=null,fa=0,Eu=0,wu=null,$f=null,xl=0,yc=null;function Ls(){return(Zt&2)!==0&&wn!==0?wn&-wn:X.T!==null?Ne():ws()}function Nn(){if(es===0)if((wn&536870912)===0||Bn){var s=et;et<<=1,(et&3932160)===0&&(et=262144),es=s}else es=536870912;return s=cs.current,s!==null&&(s.flags|=32),es}function Rn(s,o,d){(s===dn&&(Vn===2||Vn===9)||s.cancelPendingCommit!==null)&&(Ml(s,0),ir(s,wn,es,!1)),_i(s,d),((Zt&2)===0||s!==dn)&&(s===dn&&((Zt&2)===0&&(bl|=d),Ii===4&&ir(s,wn,es,!1)),ut(s))}function Ln(s,o,d){if((Zt&6)!==0)throw Error(i(327));var m=!d&&(o&127)===0&&(o&s.expiredLanes)===0||ct(s,o),M=m?jf(s,o):ts(s,o,!0),T=m;do{if(M===0){xa&&!m&&ir(s,o,0,!1);break}else{if(d=s.current.alternate,T&&!si(d)){M=ts(s,o,!1),T=!1;continue}if(M===2){if(T=o,s.errorRecoveryDisabledLanes&T)var z=0;else z=s.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){o=z;e:{var q=s;M=vc;var le=q.current.memoizedState.isDehydrated;if(le&&(Ml(q,z).flags|=256),z=ts(q,z,!1),z!==2){if(Sg&&!le){q.errorRecoveryDisabledLanes|=T,bl|=T,M=4;break e}T=Bi,Bi=M,T!==null&&(Bi===null?Bi=T:Bi.push.apply(Bi,T))}M=z}if(T=!1,M!==2)continue}}if(M===1){Ml(s,0),ir(s,o,0,!0);break}e:{switch(m=s,T=M,T){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ir(m,o,es,!ua);break e;case 2:Bi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(M=Su+300-k(),10<M)){if(ir(m,o,es,!ua),We(m,0,!0)!==0)break e;fa=o,m.timeoutHandle=yA(Fn.bind(null,m,d,Bi,Pi,ki,o,es,bl,xi,ua,T,"Throttled",-0,0),M);break e}Fn(m,d,Bi,Pi,ki,o,es,bl,xi,ua,T,null,-0,0)}}break}while(!0);ut(s)}function Fn(s,o,d,m,M,T,z,q,le,De,Ge,Qe,Pe,ze){if(s.timeoutHandle=-1,Qe=o.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vo},Hh(o,T,Qe);var Wt=(T&62914560)===T?Su-k():(T&4194048)===T?Mg-k():0;if(Wt=LU(Qe,Wt),Wt!==null){fa=T,s.cancelPendingCommit=Wt(Po.bind(null,s,o,T,d,m,M,z,q,le,Ge,Qe,null,Pe,ze)),ir(s,T,z,!De);return}}Po(s,o,T,d,m,M,z,q,le)}function si(s){for(var o=s;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var M=d[m],T=M.getSnapshot;M=M.value;try{if(!qr(T(),M))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ir(s,o,d,m){o&=~Wf,o&=~bl,s.suspendedLanes|=o,s.pingedLanes&=~o,m&&(s.warmLanes|=o),m=s.expirationTimes;for(var M=o;0<M;){var T=31-ie(M),z=1<<T;m[T]=-1,M&=~z}d!==0&&Ia(s,d,o)}function Sa(){return(Zt&6)===0?(Ut(0),!1):!0}function Sl(){if(Cn!==null){if(Vn===0)var s=Cn.return;else s=Cn,Wa=ll=null,jm(s),sc=null,ac=0,s=Cn;for(;s!==null;)Os(s.alternate,s),s=s.return;Cn=null}}function Ml(s,o){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,vU(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),fa=0,Sl(),dn=s,Cn=d=as(s.current,null),wn=o,Vn=0,Vr=null,ua=!1,xa=ct(s,o),Sg=!1,xi=es=Wf=bl=eo=Ii=0,Bi=vc=null,ki=!1,(o&8)!==0&&(o|=o&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=o;0<m;){var M=31-ie(m),T=1<<M;o|=s[M],m&=~T}return Ps=o,wf(),d}function to(s,o){_n=null,X.H=_u,o===tc||o===An?(o=ic(),Vn=3):o===Rf?(o=ic(),Vn=4):Vn=o===Dh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Vr=o,Cn===null&&(Ii=1,Rh(s,As(o,s.current)))}function Ni(){var s=cs.current;return s===null?!0:(wn&4194048)===wn?Kr===null:(wn&62914560)===wn||(wn&536870912)!==0?s===Kr:!1}function Io(){var s=X.H;return X.H=_u,s===null?_u:s}function El(){var s=X.A;return X.A=Oo,s}function Tu(){Ii=4,ua||(wn&4194048)!==wn&&cs.current!==null||(xa=!0),(eo&134217727)===0&&(bl&134217727)===0||dn===null||ir(dn,wn,es,!1)}function ts(s,o,d){var m=Zt;Zt|=2;var M=Io(),T=El();(dn!==s||wn!==o)&&(Pi=null,Ml(s,o)),o=!1;var z=Ii;e:do try{if(Vn!==0&&Cn!==null){var q=Cn,le=Vr;switch(Vn){case 8:Sl(),z=6;break e;case 3:case 2:case 9:case 6:cs.current===null&&(o=!0);var De=Vn;if(Vn=0,Vr=null,_c(s,q,le,De),d&&xa){z=0;break e}break;default:De=Vn,Vn=0,Vr=null,_c(s,q,le,De)}}Au(),z=Ii;break}catch(Ge){to(s,Ge)}while(!0);return o&&s.shellSuspendCounter++,Wa=ll=null,Zt=m,X.H=M,X.A=T,Cn===null&&(dn=null,wn=0,wf()),z}function Au(){for(;Cn!==null;)Gh(Cn)}function jf(s,o){var d=Zt;Zt|=2;var m=Io(),M=El();dn!==s||wn!==o?(Pi=null,qi=k()+500,Ml(s,o)):xa=ct(s,o);e:do try{if(Vn!==0&&Cn!==null){o=Cn;var T=Vr;t:switch(Vn){case 1:Vn=0,Vr=null,_c(s,o,T,1);break;case 2:case 9:if(ls(T)){Vn=0,Vr=null,Xf(o);break}o=function(){Vn!==2&&Vn!==9||dn!==s||(Vn=7),ut(s)},T.then(o,o);break e;case 3:Vn=7;break e;case 4:Vn=5;break e;case 7:ls(T)?(Vn=0,Vr=null,Xf(o)):(Vn=0,Vr=null,_c(s,o,T,7));break;case 5:var z=null;switch(Cn.tag){case 26:z=Cn.memoizedState;case 5:case 27:var q=Cn;if(z?PA(z):q.stateNode.complete){Vn=0,Vr=null;var le=q.sibling;if(le!==null)Cn=le;else{var De=q.return;De!==null?(Cn=De,wl(De)):Cn=null}break t}}Vn=0,Vr=null,_c(s,o,T,5);break;case 6:Vn=0,Vr=null,_c(s,o,T,6);break;case 8:Sl(),Ii=6;break e;default:throw Error(i(462))}}ms();break}catch(Ge){to(s,Ge)}while(!0);return Wa=ll=null,X.H=m,X.A=M,Zt=d,Cn!==null?0:(dn=null,wn=0,wf(),Ii)}function ms(){for(;Cn!==null&&!lt();)Gh(Cn)}function Gh(s){var o=Fh(s.alternate,s,Ps);s.memoizedProps=s.pendingProps,o===null?wl(s):Cn=o}function Xf(s){var o=s,d=o.alternate;switch(o.tag){case 15:case 0:o=Ff(d,o,o.pendingProps,o.type,void 0,wn);break;case 11:o=Ff(d,o,o.pendingProps,o.type.render,o.ref,wn);break;case 5:jm(o);default:Os(d,o),o=Cn=su(o,Ps),o=Fh(d,o,Ps)}s.memoizedProps=s.pendingProps,o===null?wl(s):Cn=o}function _c(s,o,d,m){Wa=ll=null,jm(o),sc=null,ac=0;var M=o.return;try{if(dr(s,M,o,d,wn)){Ii=1,Rh(s,As(d,s.current)),Cn=null;return}}catch(T){if(M!==null)throw Cn=M,T;Ii=1,Rh(s,As(d,s.current)),Cn=null;return}o.flags&32768?(Bn||m===1?s=!0:xa||(wn&536870912)!==0?s=!1:(ua=s=!0,(m===2||m===9||m===3||m===6)&&(m=cs.current,m!==null&&m.tag===13&&(m.flags|=16384))),qf(o,s)):wl(o)}function wl(s){var o=s;do{if((o.flags&32768)!==0){qf(o,ua);return}s=o.return;var d=Vf(o.alternate,o,Ps);if(d!==null){Cn=d;return}if(o=o.sibling,o!==null){Cn=o;return}Cn=o=s}while(o!==null);Ii===0&&(Ii=5)}function qf(s,o){do{var d=ra(s.alternate,s);if(d!==null){d.flags&=32767,Cn=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(s=s.sibling,s!==null)){Cn=s;return}Cn=s=d}while(s!==null);Ii=6,Cn=null}function Po(s,o,d,m,M,T,z,q,le){s.cancelPendingCommit=null;do Cu();while(ri!==0);if((Zt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(T=o.lanes|o.childLanes,T|=Sr,Wi(s,d,T,z,q,le),s===dn&&(Cn=dn=null,wn=0),Mu=o,Ns=s,fa=d,Eu=T,wu=M,$f=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,C(Ie,function(){return Wh(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=X.T,X.T=null,M=J.p,J.p=2,z=Zt,Zt|=4;try{t1(s,o,d)}finally{Zt=z,J.p=M,X.T=m}}ri=1,rr(),No(),bc()}}function rr(){if(ri===1){ri=0;var s=Ns,o=Mu,d=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||d){d=X.T,X.T=null;var m=J.p;J.p=2;var M=Zt;Zt|=4;try{vl(o,s);var T=l1,z=Yv(s.containerInfo),q=T.focusedElem,le=T.selectionRange;if(z!==q&&q&&q.ownerDocument&&ui(q.ownerDocument.documentElement,q)){if(le!==null&&Cm(q)){var De=le.start,Ge=le.end;if(Ge===void 0&&(Ge=De),"selectionStart"in q)q.selectionStart=De,q.selectionEnd=Math.min(Ge,q.value.length);else{var Qe=q.ownerDocument||document,Pe=Qe&&Qe.defaultView||window;if(Pe.getSelection){var ze=Pe.getSelection(),Wt=q.textContent.length,on=Math.min(le.start,Wt),pi=le.end===void 0?on:Math.min(le.end,Wt);!ze.extend&&on>pi&&(z=pi,pi=on,on=z);var be=nu(q,on),me=nu(q,pi);if(be&&me&&(ze.rangeCount!==1||ze.anchorNode!==be.node||ze.anchorOffset!==be.offset||ze.focusNode!==me.node||ze.focusOffset!==me.offset)){var Ce=Qe.createRange();Ce.setStart(be.node,be.offset),ze.removeAllRanges(),on>pi?(ze.addRange(Ce),ze.extend(me.node,me.offset)):(Ce.setEnd(me.node,me.offset),ze.addRange(Ce))}}}}for(Qe=[],ze=q;ze=ze.parentNode;)ze.nodeType===1&&Qe.push({element:ze,left:ze.scrollLeft,top:ze.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Qe.length;q++){var qe=Qe[q];qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}i_=!!o1,l1=o1=null}finally{Zt=M,J.p=m,X.T=d}}s.current=o,ri=2}}function No(){if(ri===2){ri=0;var s=Ns,o=Mu,d=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||d){d=X.T,X.T=null;var m=J.p;J.p=2;var M=Zt;Zt|=4;try{Ai(s,o.alternate,o)}finally{Zt=M,J.p=m,X.T=d}}ri=3}}function bc(){if(ri===4||ri===3){ri=0,G();var s=Ns,o=Mu,d=fa,m=$f;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ri=5:(ri=0,Mu=Ns=null,no(s,s.pendingLanes));var M=s.pendingLanes;if(M===0&&(Yi=null),jr(d),o=o.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Ze,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=X.T,M=J.p,J.p=2,X.T=null;try{for(var T=s.onRecoverableError,z=0;z<m.length;z++){var q=m[z];T(q.value,{componentStack:q.stack})}}finally{X.T=o,J.p=M}}(fa&3)!==0&&Cu(),ut(s),M=s.pendingLanes,(d&261930)!==0&&(M&42)!==0?s===yc?xl++:(xl=0,yc=s):xl=0,Ut(0)}}function no(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,ec(o)))}function Cu(){return rr(),No(),bc(),Wh()}function Wh(){if(ri!==5)return!1;var s=Ns,o=Eu;Eu=0;var d=jr(fa),m=X.T,M=J.p;try{J.p=32>d?32:d,X.T=null,d=wu,wu=null;var T=Ns,z=fa;if(ri=0,Mu=Ns=null,fa=0,(Zt&6)!==0)throw Error(i(331));var q=Zt;if(Zt|=4,hs(T.current),xg(T,T.current,z,d),Zt=q,Ut(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Ze,T)}catch{}return!0}finally{J.p=M,X.T=m,no(s,o)}}function Eg(s,o,d){o=As(d,o),o=pg(s.stateNode,o,2),s=fl(s,o,2),s!==null&&(_i(s,2),ut(s))}function Xn(s,o,d){if(s.tag===3)Eg(s,s,d);else for(;o!==null;){if(o.tag===3){Eg(o,s,d);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Yi===null||!Yi.has(m))){s=As(d,s),d=mg(2),m=fl(o,d,2),m!==null&&(Hy(d,m,o,s),_i(m,2),ut(m));break}}o=o.return}}function Yf(s,o,d){var m=s.pingCache;if(m===null){m=s.pingCache=new bn;var M=new Set;m.set(o,M)}else M=m.get(o),M===void 0&&(M=new Set,m.set(o,M));M.has(d)||(Sg=!0,M.add(d),s=c.bind(null,s,o,d),o.then(s,s))}function c(s,o,d){var m=s.pingCache;m!==null&&m.delete(o),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,dn===s&&(wn&d)===d&&(Ii===4||Ii===3&&(wn&62914560)===wn&&300>k()-Su?(Zt&2)===0&&Ml(s,0):Wf|=d,xi===wn&&(xi=0)),ut(s)}function f(s,o){o===0&&(o=mn()),s=Yr(s,o),s!==null&&(_i(s,o),ut(s))}function v(s){var o=s.memoizedState,d=0;o!==null&&(d=o.retryLane),f(s,d)}function x(s,o){var d=0;switch(s.tag){case 31:case 13:var m=s.stateNode,M=s.memoizedState;M!==null&&(d=M.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(o),f(s,d)}function C(s,o){return Et(s,o)}var O=null,j=null,fe=!1,Le=!1,st=!1,Tt=0;function ut(s){s!==j&&s.next===null&&(j===null?O=j=s:j=j.next=s),Le=!0,fe||(fe=!0,xe())}function Ut(s,o){if(!st&&Le){st=!0;do for(var d=!1,m=O;m!==null;){if(s!==0){var M=m.pendingLanes;if(M===0)var T=0;else{var z=m.suspendedLanes,q=m.pingedLanes;T=(1<<31-ie(42|s)+1)-1,T&=M&~(z&~q),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(d=!0,Oe(m,T))}else T=wn,T=We(m,m===dn?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||ct(m,T)||(d=!0,Oe(m,T));m=m.next}while(d);st=!1}}function vn(){Zi()}function Zi(){Le=fe=!1;var s=0;Tt!==0&&gU()&&(s=Tt);for(var o=k(),d=null,m=O;m!==null;){var M=m.next,T=Ru(m,o);T===0?(m.next=null,d===null?O=M:d.next=M,M===null&&(j=d)):(d=m,(s!==0||(T&3)!==0)&&(Le=!0)),m=M}ri!==0&&ri!==5||Ut(s),Tt!==0&&(Tt=0)}function Ru(s,o){for(var d=s.suspendedLanes,m=s.pingedLanes,M=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var z=31-ie(T),q=1<<z,le=M[z];le===-1?((q&d)===0||(q&m)!==0)&&(M[z]=Xt(q,o)):le<=o&&(s.expiredLanes|=q),T&=~q}if(o=dn,d=wn,d=We(s,s===o?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,d===0||s===o&&(Vn===2||Vn===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Vt(m),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||ct(s,d)){if(o=d&-d,o===s.callbackPriority)return o;switch(m!==null&&Vt(m),jr(d)){case 2:case 8:d=Be;break;case 32:d=Ie;break;case 268435456:d=ft;break;default:d=Ie}return m=Tl.bind(null,s),d=Et(d,m),s.callbackPriority=o,s.callbackNode=d,o}return m!==null&&m!==null&&Vt(m),s.callbackPriority=2,s.callbackNode=null,2}function Tl(s,o){if(ri!==0&&ri!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(Cu()&&s.callbackNode!==d)return null;var m=wn;return m=We(s,s===dn?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(Ln(s,m,o),Ru(s,k()),s.callbackNode!=null&&s.callbackNode===d?Tl.bind(null,s):null)}function Oe(s,o){if(Cu())return null;Ln(s,o,!0)}function xe(){yU(function(){(Zt&6)!==0?Et(Ae,vn):Zi()})}function Ne(){if(Tt===0){var s=Mo;s===0&&(s=Ee,Ee<<=1,(Ee&261888)===0&&(Ee=256)),Tt=s}return Tt}function bt(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ff(""+s)}function tn(s,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,s.id&&d.setAttribute("form",s.id),o.parentNode.insertBefore(d,o),s=new FormData(s),d.parentNode.removeChild(d),s}function Li(s,o,d,m,M){if(o==="submit"&&d&&d.stateNode===M){var T=bt((M[H]||null).action),z=m.submitter;z&&(o=(o=z[H]||null)?bt(o.formAction):z.getAttribute("formAction"),o!==null&&(T=o,z=null));var q=new pf("action","action",null,m,M);s.push({event:q,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Tt!==0){var le=z?tn(M,z):new FormData(M);ag(d,{pending:!0,data:le,method:M.method,action:T},null,le)}}else typeof T=="function"&&(q.preventDefault(),le=z?tn(M,z):new FormData(M),ag(d,{pending:!0,data:le,method:M.method,action:T},T,le))},currentTarget:M}]})}}for(var rn=0;rn<Mf.length;rn++){var Gn=Mf[rn],Ar=Gn.toLowerCase(),Zn=Gn[0].toUpperCase()+Gn.slice(1);Ks(Ar,"on"+Zn)}Ks(ih,"onAnimationEnd"),Ks(Sf,"onAnimationIteration"),Ks(Dm,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks(Kv,"onTransitionRun"),Ks(XS,"onTransitionStart"),Ks(Qv,"onTransitionCancel"),Ks(Om,"onTransitionEnd"),he("onMouseEnter",["mouseout","mouseover"]),he("onMouseLeave",["mouseout","mouseover"]),he("onPointerEnter",["pointerout","pointerover"]),he("onPointerLeave",["pointerout","pointerover"]),ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(da));function uA(s,o){o=(o&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],M=m.event;m=m.listeners;e:{var T=void 0;if(o)for(var z=m.length-1;0<=z;z--){var q=m[z],le=q.instance,De=q.currentTarget;if(q=q.listener,le!==T&&M.isPropagationStopped())break e;T=q,M.currentTarget=De;try{T(M)}catch(Ge){Ef(Ge)}M.currentTarget=null,T=le}else for(z=0;z<m.length;z++){if(q=m[z],le=q.instance,De=q.currentTarget,q=q.listener,le!==T&&M.isPropagationStopped())break e;T=q,M.currentTarget=De;try{T(M)}catch(Ge){Ef(Ge)}M.currentTarget=null,T=le}}}}function Hn(s,o){var d=o[ue];d===void 0&&(d=o[ue]=new Set);var m=s+"__bubble";d.has(m)||(fA(o,s,2,!1),d.add(m))}function i1(s,o,d){var m=0;o&&(m|=4),fA(d,s,m,o)}var qy="_reactListening"+Math.random().toString(36).slice(2);function r1(s){if(!s[qy]){s[qy]=!0,se.forEach(function(d){d!=="selectionchange"&&(n1.has(d)||i1(d,!1,s),i1(d,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[qy]||(o[qy]=!0,i1("selectionchange",!1,o))}}function fA(s,o,d,m){switch(kA(o)){case 2:var M=FU;break;case 8:M=BU;break;default:M=_1}d=M.bind(null,o,d,s),M=void 0,!dm||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(M=!0),m?M!==void 0?s.addEventListener(o,d,{capture:!0,passive:M}):s.addEventListener(o,d,!0):M!==void 0?s.addEventListener(o,d,{passive:M}):s.addEventListener(o,d,!1)}function s1(s,o,d,m,M){var T=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var z=m.tag;if(z===3||z===4){var q=m.stateNode.containerInfo;if(q===M)break;if(z===4)for(z=m.return;z!==null;){var le=z.tag;if((le===3||le===4)&&z.stateNode.containerInfo===M)return;z=z.return}for(;q!==null;){if(z=_t(q),z===null)return;if(le=z.tag,le===5||le===6||le===26||le===27){m=T=z;continue e}q=q.parentNode}}m=m.return}fm(function(){var De=T,Ge=Wd(d),Qe=[];e:{var Pe=Zs.get(s);if(Pe!==void 0){var ze=pf,Wt=s;switch(s){case"keypress":if(hf(d)===0)break e;case"keydown":case"keyup":ze=Yl;break;case"focusin":Wt="focus",ze=qd;break;case"focusout":Wt="blur",ze=qd;break;case"beforeblur":case"afterblur":ze=qd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=Ov;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=zv;break;case ih:case Sf:case Dm:ze=WS;break;case Om:ze=jS;break;case"scroll":case"scrollend":ze=Rv;break;case"wheel":ze=Bv;break;case"copy":case"cut":case"paste":ze=Pv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=gm;break;case"toggle":case"beforetoggle":ze=Vv}var on=(o&4)!==0,pi=!on&&(s==="scroll"||s==="scrollend"),be=on?Pe!==null?Pe+"Capture":null:Pe;on=[];for(var me=De,Ce;me!==null;){var qe=me;if(Ce=qe.stateNode,qe=qe.tag,qe!==5&&qe!==26&&qe!==27||Ce===null||be===null||(qe=Xc(me,be),qe!=null&&on.push(wg(me,qe,Ce))),pi)break;me=me.return}0<on.length&&(Pe=new ze(Pe,Wt,null,d,Ge),Qe.push({event:Pe,listeners:on}))}}if((o&7)===0){e:{if(Pe=s==="mouseover"||s==="pointerover",ze=s==="mouseout"||s==="pointerout",Pe&&d!==Gd&&(Wt=d.relatedTarget||d.fromElement)&&(_t(Wt)||Wt[Z]))break e;if((ze||Pe)&&(Pe=Ge.window===Ge?Ge:(Pe=Ge.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,ze?(Wt=d.relatedTarget||d.toElement,ze=De,Wt=Wt?_t(Wt):null,Wt!==null&&(pi=a(Wt),on=Wt.tag,Wt!==pi||on!==5&&on!==27&&on!==6)&&(Wt=null)):(ze=null,Wt=De),ze!==Wt)){if(on=hm,qe="onMouseLeave",be="onMouseEnter",me="mouse",(s==="pointerout"||s==="pointerover")&&(on=gm,qe="onPointerLeave",be="onPointerEnter",me="pointer"),pi=ze==null?Pe:St(ze),Ce=Wt==null?Pe:St(Wt),Pe=new on(qe,me+"leave",ze,d,Ge),Pe.target=pi,Pe.relatedTarget=Ce,qe=null,_t(Ge)===De&&(on=new on(be,me+"enter",Wt,d,Ge),on.target=Ce,on.relatedTarget=pi,qe=on),pi=qe,ze&&Wt)t:{for(on=fU,be=ze,me=Wt,Ce=0,qe=be;qe;qe=on(qe))Ce++;qe=0;for(var Jt=me;Jt;Jt=on(Jt))qe++;for(;0<Ce-qe;)be=on(be),Ce--;for(;0<qe-Ce;)me=on(me),qe--;for(;Ce--;){if(be===me||me!==null&&be===me.alternate){on=be;break t}be=on(be),me=on(me)}on=null}else on=null;ze!==null&&dA(Qe,Pe,ze,on,!1),Wt!==null&&pi!==null&&dA(Qe,pi,Wt,on,!0)}}e:{if(Pe=De?St(De):window,ze=Pe.nodeName&&Pe.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Pe.type==="file")var ti=Mm;else if(Sm(Pe))if(Ua)ti=qv;else{ti=Tm;var Yt=jv}else ze=Pe.nodeName,!ze||ze.toLowerCase()!=="input"||Pe.type!=="checkbox"&&Pe.type!=="radio"?De&&qs(De.elementType)&&(ti=Mm):ti=Xv;if(ti&&(ti=ti(s,De))){th(Qe,ti,d,Ge);break e}Yt&&Yt(s,Pe,De),s==="focusout"&&De&&Pe.type==="number"&&De.memoizedProps.value!=null&&On(Pe,"number",Pe.value)}switch(Yt=De?St(De):window,s){case"focusin":(Sm(Yt)||Yt.contentEditable==="true")&&(za=Yt,Fa=De,iu=null);break;case"focusout":iu=Fa=za=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,ru(Qe,d,Ge);break;case"selectionchange":if(Zv)break;case"keydown":case"keyup":ru(Qe,d,Ge)}var In;if(Zl)e:{switch(s){case"compositionstart":var Wn="onCompositionStart";break e;case"compositionend":Wn="onCompositionEnd";break e;case"compositionupdate":Wn="onCompositionUpdate";break e}Wn=void 0}else Kl?eh(s,d)&&(Wn="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Wn="onCompositionStart");Wn&&(ym&&d.locale!=="ko"&&(Kl||Wn!=="onCompositionStart"?Wn==="onCompositionEnd"&&Kl&&(In=df()):(Ts=Ge,jd="value"in Ts?Ts.value:Ts.textContent,Kl=!0)),Yt=Yy(De,Wn),0<Yt.length&&(Wn=new Yd(Wn,s,null,d,Ge),Qe.push({event:Wn,listeners:Yt}),In?Wn.data=In:(In=_m(d),In!==null&&(Wn.data=In)))),(In=Jd?Wv(s,d):bm(s,d))&&(Wn=Yy(De,"onBeforeInput"),0<Wn.length&&(Yt=new Yd("onBeforeInput","beforeinput",null,d,Ge),Qe.push({event:Yt,listeners:Wn}),Yt.data=In)),Li(Qe,s,De,d,Ge)}uA(Qe,o)})}function wg(s,o,d){return{instance:s,listener:o,currentTarget:d}}function Yy(s,o){for(var d=o+"Capture",m=[];s!==null;){var M=s,T=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||T===null||(M=Xc(s,d),M!=null&&m.unshift(wg(s,M,T)),M=Xc(s,o),M!=null&&m.push(wg(s,M,T))),s.tag===3)return m;s=s.return}return[]}function fU(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function dA(s,o,d,m,M){for(var T=o._reactName,z=[];d!==null&&d!==m;){var q=d,le=q.alternate,De=q.stateNode;if(q=q.tag,le!==null&&le===m)break;q!==5&&q!==26&&q!==27||De===null||(le=De,M?(De=Xc(d,T),De!=null&&z.unshift(wg(d,De,le))):M||(De=Xc(d,T),De!=null&&z.push(wg(d,De,le)))),d=d.return}z.length!==0&&s.push({event:o,listeners:z})}var dU=/\r\n?/g,hU=/\u0000|\uFFFD/g;function hA(s){return(typeof s=="string"?s:""+s).replace(dU,`
`).replace(hU,"")}function pA(s,o){return o=hA(o),hA(s)===o}function hi(s,o,d,m,M,T){switch(d){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||er(s,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&er(s,""+m);break;case"className":Ht(s,"class",m);break;case"tabIndex":Ht(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ht(s,d,m);break;case"style":jl(s,m,T);break;case"data":if(o!=="object"){Ht(s,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||d!=="href")){s.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=ff(""+m),s.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(d==="formAction"?(o!=="input"&&hi(s,o,"name",M.name,M,null),hi(s,o,"formEncType",M.formEncType,M,null),hi(s,o,"formMethod",M.formMethod,M,null),hi(s,o,"formTarget",M.formTarget,M,null)):(hi(s,o,"encType",M.encType,M,null),hi(s,o,"method",M.method,M,null),hi(s,o,"target",M.target,M,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=ff(""+m),s.setAttribute(d,m);break;case"onClick":m!=null&&(s.onclick=vo);break;case"onScroll":m!=null&&Hn("scroll",s);break;case"onScrollEnd":m!=null&&Hn("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(d=m.__html,d!=null){if(M.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}d=ff(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""+m):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":m===!0?s.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,m):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(d,m):s.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(d):s.setAttribute(d,m);break;case"popover":Hn("beforetoggle",s),Hn("toggle",s),vt(s,"popover",m);break;case"xlinkActuate":xt(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":xt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":xt(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":xt(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":xt(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":xt(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":xt(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":xt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":xt(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":vt(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Av.get(d)||d,vt(s,d,m))}}function a1(s,o,d,m,M,T){switch(d){case"style":jl(s,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(d=m.__html,d!=null){if(M.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"children":typeof m=="string"?er(s,m):(typeof m=="number"||typeof m=="bigint")&&er(s,""+m);break;case"onScroll":m!=null&&Hn("scroll",s);break;case"onScrollEnd":m!=null&&Hn("scrollend",s);break;case"onClick":m!=null&&(s.onclick=vo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ve.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(M=d.endsWith("Capture"),o=d.slice(2,M?d.length-7:void 0),T=s[H]||null,T=T!=null?T[d]:null,typeof T=="function"&&s.removeEventListener(o,T,M),typeof m=="function")){typeof T!="function"&&T!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(o,m,M);break e}d in s?s[d]=m:m===!0?s.setAttribute(d,""):vt(s,d,m)}}}function ns(s,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hn("error",s),Hn("load",s);var m=!1,M=!1,T;for(T in d)if(d.hasOwnProperty(T)){var z=d[T];if(z!=null)switch(T){case"src":m=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:hi(s,o,T,z,d,null)}}M&&hi(s,o,"srcSet",d.srcSet,d,null),m&&hi(s,o,"src",d.src,d,null);return;case"input":Hn("invalid",s);var q=T=z=M=null,le=null,De=null;for(m in d)if(d.hasOwnProperty(m)){var Ge=d[m];if(Ge!=null)switch(m){case"name":M=Ge;break;case"type":z=Ge;break;case"checked":le=Ge;break;case"defaultChecked":De=Ge;break;case"value":T=Ge;break;case"defaultValue":q=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(i(137,o));break;default:hi(s,o,m,Ge,d,null)}}cr(s,T,q,le,De,z,M,!1);return;case"select":Hn("invalid",s),m=z=T=null;for(M in d)if(d.hasOwnProperty(M)&&(q=d[M],q!=null))switch(M){case"value":T=q;break;case"defaultValue":z=q;break;case"multiple":m=q;default:hi(s,o,M,q,d,null)}o=T,d=z,s.multiple=!!m,o!=null?Mi(s,!!m,o,!1):d!=null&&Mi(s,!!m,d,!0);return;case"textarea":Hn("invalid",s),T=M=m=null;for(z in d)if(d.hasOwnProperty(z)&&(q=d[z],q!=null))switch(z){case"value":m=q;break;case"defaultValue":M=q;break;case"children":T=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(91));break;default:hi(s,o,z,q,d,null)}ur(s,m,M,T);return;case"option":for(le in d)d.hasOwnProperty(le)&&(m=d[le],m!=null)&&(le==="selected"?s.selected=m&&typeof m!="function"&&typeof m!="symbol":hi(s,o,le,m,d,null));return;case"dialog":Hn("beforetoggle",s),Hn("toggle",s),Hn("cancel",s),Hn("close",s);break;case"iframe":case"object":Hn("load",s);break;case"video":case"audio":for(m=0;m<da.length;m++)Hn(da[m],s);break;case"image":Hn("error",s),Hn("load",s);break;case"details":Hn("toggle",s);break;case"embed":case"source":case"link":Hn("error",s),Hn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in d)if(d.hasOwnProperty(De)&&(m=d[De],m!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:hi(s,o,De,m,d,null)}return;default:if(qs(o)){for(Ge in d)d.hasOwnProperty(Ge)&&(m=d[Ge],m!==void 0&&a1(s,o,Ge,m,d,void 0));return}}for(q in d)d.hasOwnProperty(q)&&(m=d[q],m!=null&&hi(s,o,q,m,d,null))}function pU(s,o,d,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,T=null,z=null,q=null,le=null,De=null,Ge=null;for(ze in d){var Qe=d[ze];if(d.hasOwnProperty(ze)&&Qe!=null)switch(ze){case"checked":break;case"value":break;case"defaultValue":le=Qe;default:m.hasOwnProperty(ze)||hi(s,o,ze,null,m,Qe)}}for(var Pe in m){var ze=m[Pe];if(Qe=d[Pe],m.hasOwnProperty(Pe)&&(ze!=null||Qe!=null))switch(Pe){case"type":T=ze;break;case"name":M=ze;break;case"checked":De=ze;break;case"defaultChecked":Ge=ze;break;case"value":z=ze;break;case"defaultValue":q=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(i(137,o));break;default:ze!==Qe&&hi(s,o,Pe,ze,m,Qe)}}jn(s,z,q,le,De,Ge,T,M);return;case"select":ze=z=q=Pe=null;for(T in d)if(le=d[T],d.hasOwnProperty(T)&&le!=null)switch(T){case"value":break;case"multiple":ze=le;default:m.hasOwnProperty(T)||hi(s,o,T,null,m,le)}for(M in m)if(T=m[M],le=d[M],m.hasOwnProperty(M)&&(T!=null||le!=null))switch(M){case"value":Pe=T;break;case"defaultValue":q=T;break;case"multiple":z=T;default:T!==le&&hi(s,o,M,T,m,le)}o=q,d=z,m=ze,Pe!=null?Mi(s,!!d,Pe,!1):!!m!=!!d&&(o!=null?Mi(s,!!d,o,!0):Mi(s,!!d,d?[]:"",!1));return;case"textarea":ze=Pe=null;for(q in d)if(M=d[q],d.hasOwnProperty(q)&&M!=null&&!m.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:hi(s,o,q,null,m,M)}for(z in m)if(M=m[z],T=d[z],m.hasOwnProperty(z)&&(M!=null||T!=null))switch(z){case"value":Pe=M;break;case"defaultValue":ze=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:M!==T&&hi(s,o,z,M,m,T)}Kn(s,Pe,ze);return;case"option":for(var Wt in d)Pe=d[Wt],d.hasOwnProperty(Wt)&&Pe!=null&&!m.hasOwnProperty(Wt)&&(Wt==="selected"?s.selected=!1:hi(s,o,Wt,null,m,Pe));for(le in m)Pe=m[le],ze=d[le],m.hasOwnProperty(le)&&Pe!==ze&&(Pe!=null||ze!=null)&&(le==="selected"?s.selected=Pe&&typeof Pe!="function"&&typeof Pe!="symbol":hi(s,o,le,Pe,m,ze));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var on in d)Pe=d[on],d.hasOwnProperty(on)&&Pe!=null&&!m.hasOwnProperty(on)&&hi(s,o,on,null,m,Pe);for(De in m)if(Pe=m[De],ze=d[De],m.hasOwnProperty(De)&&Pe!==ze&&(Pe!=null||ze!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(i(137,o));break;default:hi(s,o,De,Pe,m,ze)}return;default:if(qs(o)){for(var pi in d)Pe=d[pi],d.hasOwnProperty(pi)&&Pe!==void 0&&!m.hasOwnProperty(pi)&&a1(s,o,pi,void 0,m,Pe);for(Ge in m)Pe=m[Ge],ze=d[Ge],!m.hasOwnProperty(Ge)||Pe===ze||Pe===void 0&&ze===void 0||a1(s,o,Ge,Pe,m,ze);return}}for(var be in d)Pe=d[be],d.hasOwnProperty(be)&&Pe!=null&&!m.hasOwnProperty(be)&&hi(s,o,be,null,m,Pe);for(Qe in m)Pe=m[Qe],ze=d[Qe],!m.hasOwnProperty(Qe)||Pe===ze||Pe==null&&ze==null||hi(s,o,Qe,Pe,m,ze)}function mA(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mU(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var M=d[m],T=M.transferSize,z=M.initiatorType,q=M.duration;if(T&&q&&mA(z)){for(z=0,q=M.responseEnd,m+=1;m<d.length;m++){var le=d[m],De=le.startTime;if(De>q)break;var Ge=le.transferSize,Qe=le.initiatorType;Ge&&mA(Qe)&&(le=le.responseEnd,z+=Ge*(le<q?1:(q-De)/(le-De)))}if(--m,o+=8*(T+z)/(M.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var o1=null,l1=null;function Zy(s){return s.nodeType===9?s:s.ownerDocument}function gA(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vA(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function c1(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var u1=null;function gU(){var s=window.event;return s&&s.type==="popstate"?s===u1?!1:(u1=s,!0):(u1=null,!1)}var yA=typeof setTimeout=="function"?setTimeout:void 0,vU=typeof clearTimeout=="function"?clearTimeout:void 0,_A=typeof Promise=="function"?Promise:void 0,yU=typeof queueMicrotask=="function"?queueMicrotask:typeof _A<"u"?function(s){return _A.resolve(null).then(s).catch(_U)}:yA;function _U(s){setTimeout(function(){throw s})}function Du(s){return s==="head"}function bA(s,o){var d=o,m=0;do{var M=d.nextSibling;if(s.removeChild(d),M&&M.nodeType===8)if(d=M.data,d==="/$"||d==="/&"){if(m===0){s.removeChild(M),qh(o);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")Tg(s.ownerDocument.documentElement);else if(d==="head"){d=s.ownerDocument.head,Tg(d);for(var T=d.firstChild;T;){var z=T.nextSibling,q=T.nodeName;T[at]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&T.rel.toLowerCase()==="stylesheet"||d.removeChild(T),T=z}}else d==="body"&&Tg(s.ownerDocument.body);d=M}while(d);qh(o)}function xA(s,o){var d=s;s=0;do{var m=d.nextSibling;if(d.nodeType===1?o?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(o?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(s===0)break;s--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||s++;d=m}while(d)}function f1(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":f1(d),rt(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function bU(s,o,d,m){for(;s.nodeType===1;){var M=d;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[at])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==M.rel||s.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||s.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||s.getAttribute("title")!==(M.title==null?null:M.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(M.src==null?null:M.src)||s.getAttribute("type")!==(M.type==null?null:M.type)||s.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var T=M.name==null?null:""+M.name;if(M.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=io(s.nextSibling),s===null)break}return null}function xU(s,o,d){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=io(s.nextSibling),s===null))return null;return s}function SA(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=io(s.nextSibling),s===null))return null;return s}function d1(s){return s.data==="$?"||s.data==="$~"}function h1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function SU(s,o){var d=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||d.readyState!=="loading")o();else{var m=function(){o(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function io(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var p1=null;function MA(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"||d==="/&"){if(o===0)return io(s.nextSibling);o--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||o++}s=s.nextSibling}return null}function EA(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(o===0)return s;o--}else d!=="/$"&&d!=="/&"||o++}s=s.previousSibling}return null}function wA(s,o,d){switch(o=Zy(d),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Tg(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);rt(s)}var ro=new Map,TA=new Set;function Ky(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var xc=J.d;J.d={f:MU,r:EU,D:wU,C:TU,L:AU,m:CU,X:DU,S:RU,M:OU};function MU(){var s=xc.f(),o=Sa();return s||o}function EU(s){var o=gt(s);o!==null&&o.tag===5&&o.type==="form"?Py(o):xc.r(s)}var $h=typeof document>"u"?null:document;function AA(s,o,d){var m=$h;if(m&&typeof o=="string"&&o){var M=Dt(o);M='link[rel="'+s+'"][href="'+M+'"]',typeof d=="string"&&(M+='[crossorigin="'+d+'"]'),TA.has(M)||(TA.add(M),s={rel:s,crossOrigin:d,href:o},m.querySelector(M)===null&&(o=m.createElement("link"),ns(o,"link",s),$(o),m.head.appendChild(o)))}}function wU(s){xc.D(s),AA("dns-prefetch",s,null)}function TU(s,o){xc.C(s,o),AA("preconnect",s,o)}function AU(s,o,d){xc.L(s,o,d);var m=$h;if(m&&s&&o){var M='link[rel="preload"][as="'+Dt(o)+'"]';o==="image"&&d&&d.imageSrcSet?(M+='[imagesrcset="'+Dt(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(M+='[imagesizes="'+Dt(d.imageSizes)+'"]')):M+='[href="'+Dt(s)+'"]';var T=M;switch(o){case"style":T=jh(s);break;case"script":T=Xh(s)}ro.has(T)||(s=y({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:s,as:o},d),ro.set(T,s),m.querySelector(M)!==null||o==="style"&&m.querySelector(Ag(T))||o==="script"&&m.querySelector(Cg(T))||(o=m.createElement("link"),ns(o,"link",s),$(o),m.head.appendChild(o)))}}function CU(s,o){xc.m(s,o);var d=$h;if(d&&s){var m=o&&typeof o.as=="string"?o.as:"script",M='link[rel="modulepreload"][as="'+Dt(m)+'"][href="'+Dt(s)+'"]',T=M;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Xh(s)}if(!ro.has(T)&&(s=y({rel:"modulepreload",href:s},o),ro.set(T,s),d.querySelector(M)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Cg(T)))return}m=d.createElement("link"),ns(m,"link",s),$(m),d.head.appendChild(m)}}}function RU(s,o,d){xc.S(s,o,d);var m=$h;if(m&&s){var M=ht(m).hoistableStyles,T=jh(s);o=o||"default";var z=M.get(T);if(!z){var q={loading:0,preload:null};if(z=m.querySelector(Ag(T)))q.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":o},d),(d=ro.get(T))&&m1(s,d);var le=z=m.createElement("link");$(le),ns(le,"link",s),le._p=new Promise(function(De,Ge){le.onload=De,le.onerror=Ge}),le.addEventListener("load",function(){q.loading|=1}),le.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Qy(z,o,m)}z={type:"stylesheet",instance:z,count:1,state:q},M.set(T,z)}}}function DU(s,o){xc.X(s,o);var d=$h;if(d&&s){var m=ht(d).hoistableScripts,M=Xh(s),T=m.get(M);T||(T=d.querySelector(Cg(M)),T||(s=y({src:s,async:!0},o),(o=ro.get(M))&&g1(s,o),T=d.createElement("script"),$(T),ns(T,"link",s),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(M,T))}}function OU(s,o){xc.M(s,o);var d=$h;if(d&&s){var m=ht(d).hoistableScripts,M=Xh(s),T=m.get(M);T||(T=d.querySelector(Cg(M)),T||(s=y({src:s,async:!0,type:"module"},o),(o=ro.get(M))&&g1(s,o),T=d.createElement("script"),$(T),ns(T,"link",s),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(M,T))}}function CA(s,o,d,m){var M=(M=ge.current)?Ky(M):null;if(!M)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=jh(d.href),d=ht(M).hoistableStyles,m=d.get(o),m||(m={type:"style",instance:null,count:0,state:null},d.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=jh(d.href);var T=ht(M).hoistableStyles,z=T.get(s);if(z||(M=M.ownerDocument||M,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,z),(T=M.querySelector(Ag(s)))&&!T._p&&(z.instance=T,z.state.loading=5),ro.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ro.set(s,d),T||IU(M,s,d,z.state))),o&&m===null)throw Error(i(528,""));return z}if(o&&m!==null)throw Error(i(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Xh(d),d=ht(M).hoistableScripts,m=d.get(o),m||(m={type:"script",instance:null,count:0,state:null},d.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function jh(s){return'href="'+Dt(s)+'"'}function Ag(s){return'link[rel="stylesheet"]['+s+"]"}function RA(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function IU(s,o,d,m){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=s.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),ns(o,"link",d),$(o),s.head.appendChild(o))}function Xh(s){return'[src="'+Dt(s)+'"]'}function Cg(s){return"script[async]"+s}function DA(s,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var m=s.querySelector('style[data-href~="'+Dt(d.href)+'"]');if(m)return o.instance=m,$(m),m;var M=y({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),$(m),ns(m,"style",M),Qy(m,d.precedence,s),o.instance=m;case"stylesheet":M=jh(d.href);var T=s.querySelector(Ag(M));if(T)return o.state.loading|=4,o.instance=T,$(T),T;m=RA(d),(M=ro.get(M))&&m1(m,M),T=(s.ownerDocument||s).createElement("link"),$(T);var z=T;return z._p=new Promise(function(q,le){z.onload=q,z.onerror=le}),ns(T,"link",m),o.state.loading|=4,Qy(T,d.precedence,s),o.instance=T;case"script":return T=Xh(d.src),(M=s.querySelector(Cg(T)))?(o.instance=M,$(M),M):(m=d,(M=ro.get(T))&&(m=y({},d),g1(m,M)),s=s.ownerDocument||s,M=s.createElement("script"),$(M),ns(M,"link",m),s.head.appendChild(M),o.instance=M);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Qy(m,d.precedence,s));return o.instance}function Qy(s,o,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=m.length?m[m.length-1]:null,T=M,z=0;z<m.length;z++){var q=m[z];if(q.dataset.precedence===o)T=q;else if(T!==M)break}T?T.parentNode.insertBefore(s,T.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(s,o.firstChild))}function m1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function g1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Jy=null;function OA(s,o,d){if(Jy===null){var m=new Map,M=Jy=new Map;M.set(d,m)}else M=Jy,m=M.get(d),m||(m=new Map,M.set(d,m));if(m.has(s))return m;for(m.set(s,null),d=d.getElementsByTagName(s),M=0;M<d.length;M++){var T=d[M];if(!(T[at]||T[bi]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var z=T.getAttribute(o)||"";z=s+z;var q=m.get(z);q?q.push(T):m.set(z,[T])}}return m}function IA(s,o,d){s=s.ownerDocument||s,s.head.insertBefore(d,o==="title"?s.querySelector("head > title"):null)}function PU(s,o,d){if(d===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(s=o.disabled,typeof o.precedence=="string"&&s==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function PA(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function NU(s,o,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var M=jh(m.href),T=o.querySelector(Ag(M));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=e_.bind(s),o.then(s,s)),d.state.loading|=4,d.instance=T,$(T);return}T=o.ownerDocument||o,m=RA(m),(M=ro.get(M))&&m1(m,M),T=T.createElement("link"),$(T);var z=T;z._p=new Promise(function(q,le){z.onload=q,z.onerror=le}),ns(T,"link",m),d.instance=T}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(d,o),(o=d.state.preload)&&(d.state.loading&3)===0&&(s.count++,d=e_.bind(s),o.addEventListener("load",d),o.addEventListener("error",d))}}var v1=0;function LU(s,o){return s.stylesheets&&s.count===0&&n_(s,s.stylesheets),0<s.count||0<s.imgCount?function(d){var m=setTimeout(function(){if(s.stylesheets&&n_(s,s.stylesheets),s.unsuspend){var T=s.unsuspend;s.unsuspend=null,T()}},6e4+o);0<s.imgBytes&&v1===0&&(v1=62500*mU());var M=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&n_(s,s.stylesheets),s.unsuspend)){var T=s.unsuspend;s.unsuspend=null,T()}},(s.imgBytes>v1?50:800)+o);return s.unsuspend=d,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(M)}}:null}function e_(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)n_(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var t_=null;function n_(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,t_=new Map,o.forEach(UU,s),t_=null,e_.call(s))}function UU(s,o){if(!(o.state.loading&4)){var d=t_.get(s);if(d)var m=d.get(null);else{d=new Map,t_.set(s,d);for(var M=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<M.length;T++){var z=M[T];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(d.set(z.dataset.precedence,z),m=z)}m&&d.set(null,m)}M=o.instance,z=M.getAttribute("data-precedence"),T=d.get(z)||m,T===m&&d.set(null,M),d.set(z,M),this.count++,m=e_.bind(this),M.addEventListener("load",m),M.addEventListener("error",m),T?T.parentNode.insertBefore(M,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(M,s.firstChild)),o.state.loading|=4}}var Rg={$$typeof:D,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function zU(s,o,d,m,M,T,z,q,le){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.hiddenUpdates=yn(null),this.identifierPrefix=m,this.onUncaughtError=M,this.onCaughtError=T,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=le,this.incompleteTransitions=new Map}function NA(s,o,d,m,M,T,z,q,le,De,Ge,Qe){return s=new zU(s,o,d,z,le,De,Ge,Qe,q),o=1,T===!0&&(o|=24),T=Ri(3,null,null,o),s.current=T,T.stateNode=s,o=Pm(),o.refCount++,s.pooledCache=o,o.refCount++,T.memoizedState={element:m,isDehydrated:d,cache:o},Of(T),s}function LA(s){return s?(s=il,s):il}function UA(s,o,d,m,M,T){M=LA(M),m.context===null?m.context=M:m.pendingContext=M,m=wo(o),m.payload={element:d},T=T===void 0?null:T,T!==null&&(m.callback=T),d=fl(s,m,o),d!==null&&(Rn(d,s,o),dl(d,s,o))}function zA(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<o?d:o}}function y1(s,o){zA(s,o),(s=s.alternate)&&zA(s,o)}function FA(s){if(s.tag===13||s.tag===31){var o=Yr(s,67108864);o!==null&&Rn(o,s,67108864),y1(s,67108864)}}function BA(s){if(s.tag===13||s.tag===31){var o=Ls();o=Na(o);var d=Yr(s,o);d!==null&&Rn(d,s,o),y1(s,o)}}var i_=!0;function FU(s,o,d,m){var M=X.T;X.T=null;var T=J.p;try{J.p=2,_1(s,o,d,m)}finally{J.p=T,X.T=M}}function BU(s,o,d,m){var M=X.T;X.T=null;var T=J.p;try{J.p=8,_1(s,o,d,m)}finally{J.p=T,X.T=M}}function _1(s,o,d,m){if(i_){var M=b1(m);if(M===null)s1(s,o,m,r_,d),VA(s,m);else if(VU(M,s,o,d,m))m.stopPropagation();else if(VA(s,m),o&4&&-1<kU.indexOf(s)){for(;M!==null;){var T=gt(M);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var z=it(T.pendingLanes);if(z!==0){var q=T;for(q.pendingLanes|=2,q.entangledLanes|=2;z;){var le=1<<31-ie(z);q.entanglements[1]|=le,z&=~le}ut(T),(Zt&6)===0&&(qi=k()+500,Ut(0))}}break;case 31:case 13:q=Yr(T,2),q!==null&&Rn(q,T,2),Sa(),y1(T,2)}if(T=b1(m),T===null&&s1(s,o,m,r_,d),T===M)break;M=T}M!==null&&m.stopPropagation()}else s1(s,o,m,null,d)}}function b1(s){return s=Wd(s),x1(s)}var r_=null;function x1(s){if(r_=null,s=_t(s),s!==null){var o=a(s);if(o===null)s=null;else{var d=o.tag;if(d===13){if(s=l(o),s!==null)return s;s=null}else if(d===31){if(s=u(o),s!==null)return s;s=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return r_=s,null}function kA(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case Ae:return 2;case Be:return 8;case Ie:case wt:return 32;case ft:return 268435456;default:return 32}default:return 32}}var S1=!1,Ou=null,Iu=null,Pu=null,Dg=new Map,Og=new Map,Nu=[],kU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VA(s,o){switch(s){case"focusin":case"focusout":Ou=null;break;case"dragenter":case"dragleave":Iu=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":Dg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Og.delete(o.pointerId)}}function Ig(s,o,d,m,M,T){return s===null||s.nativeEvent!==T?(s={blockedOn:o,domEventName:d,eventSystemFlags:m,nativeEvent:T,targetContainers:[M]},o!==null&&(o=gt(o),o!==null&&FA(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,M!==null&&o.indexOf(M)===-1&&o.push(M),s)}function VU(s,o,d,m,M){switch(o){case"focusin":return Ou=Ig(Ou,s,o,d,m,M),!0;case"dragenter":return Iu=Ig(Iu,s,o,d,m,M),!0;case"mouseover":return Pu=Ig(Pu,s,o,d,m,M),!0;case"pointerover":var T=M.pointerId;return Dg.set(T,Ig(Dg.get(T)||null,s,o,d,m,M)),!0;case"gotpointercapture":return T=M.pointerId,Og.set(T,Ig(Og.get(T)||null,s,o,d,m,M)),!0}return!1}function HA(s){var o=_t(s.target);if(o!==null){var d=a(o);if(d!==null){if(o=d.tag,o===13){if(o=l(d),o!==null){s.blockedOn=o,en(s.priority,function(){BA(d)});return}}else if(o===31){if(o=u(d),o!==null){s.blockedOn=o,en(s.priority,function(){BA(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function s_(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var d=b1(s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);Gd=m,d.target.dispatchEvent(m),Gd=null}else return o=gt(d),o!==null&&FA(o),s.blockedOn=d,!1;o.shift()}return!0}function GA(s,o,d){s_(s)&&d.delete(o)}function HU(){S1=!1,Ou!==null&&s_(Ou)&&(Ou=null),Iu!==null&&s_(Iu)&&(Iu=null),Pu!==null&&s_(Pu)&&(Pu=null),Dg.forEach(GA),Og.forEach(GA)}function a_(s,o){s.blockedOn===o&&(s.blockedOn=null,S1||(S1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HU)))}var o_=null;function WA(s){o_!==s&&(o_=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){o_===s&&(o_=null);for(var o=0;o<s.length;o+=3){var d=s[o],m=s[o+1],M=s[o+2];if(typeof m!="function"){if(x1(m||d)===null)continue;break}var T=gt(d);T!==null&&(s.splice(o,3),o-=3,ag(T,{pending:!0,data:M,method:d.method,action:m},m,M))}}))}function qh(s){function o(le){return a_(le,s)}Ou!==null&&a_(Ou,s),Iu!==null&&a_(Iu,s),Pu!==null&&a_(Pu,s),Dg.forEach(o),Og.forEach(o);for(var d=0;d<Nu.length;d++){var m=Nu[d];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Nu.length&&(d=Nu[0],d.blockedOn===null);)HA(d),d.blockedOn===null&&Nu.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var M=d[m],T=d[m+1],z=M[H]||null;if(typeof T=="function")z||WA(d);else if(z){var q=null;if(T&&T.hasAttribute("formAction")){if(M=T,z=T[H]||null)q=z.formAction;else if(x1(M)!==null)continue}else q=z.action;typeof q=="function"?d[m+1]=q:(d.splice(m,3),m-=3),WA(d)}}}function $A(){function s(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(z){return M=z})},focusReset:"manual",scroll:"manual"})}function o(){M!==null&&(M(),M=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,M=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),M!==null&&(M(),M=null)}}}function M1(s){this._internalRoot=s}l_.prototype.render=M1.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var d=o.current,m=Ls();UA(d,m,s,o,null,null)},l_.prototype.unmount=M1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;UA(s.current,2,null,s,null,null),Sa(),o[Z]=null}};function l_(s){this._internalRoot=s}l_.prototype.unstable_scheduleHydration=function(s){if(s){var o=ws();s={blockedOn:null,target:s,priority:o};for(var d=0;d<Nu.length&&o!==0&&o<Nu[d].priority;d++);Nu.splice(d,0,s),d===0&&HA(s)}};var jA=e.version;if(jA!=="19.2.3")throw Error(i(527,jA,"19.2.3"));J.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(o),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var GU={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var c_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!c_.isDisabled&&c_.supportsFiber)try{Ze=c_.inject(GU),Ke=c_}catch{}}return Ng.createRoot=function(s,o){if(!r(s))throw Error(i(299));var d=!1,m="",M=ky,T=dg,z=hg;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(M=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(z=o.onRecoverableError)),o=NA(s,1,!1,null,null,d,m,null,M,T,z,$A),s[Z]=o.current,r1(s),new M1(o)},Ng.hydrateRoot=function(s,o,d){if(!r(s))throw Error(i(299));var m=!1,M="",T=ky,z=dg,q=hg,le=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(M=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(z=d.onCaughtError),d.onRecoverableError!==void 0&&(q=d.onRecoverableError),d.formState!==void 0&&(le=d.formState)),o=NA(s,1,!0,o,d??null,m,M,le,T,z,q,$A),o.context=LA(null),d=o.current,m=Ls(),m=Na(m),M=wo(m),M.callback=null,fl(d,M,m),d=m,o.current.lanes=d,_i(o,d),ut(o),s[Z]=o.current,r1(s),new l_(o)},Ng.version="19.2.3",Ng}var nC;function QU(){if(nC)return T1.exports;nC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),T1.exports=KU(),T1.exports}var tO=QU();const ev="182",fd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},dd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nO=0,pE=1,iO=2,JU=3,rO=0,Cp=1,o0=2,gd=3,Fc=0,Ws=1,Vo=2,$o=0,Md=1,mE=2,gE=3,vE=4,sO=5,$u=100,aO=101,oO=102,lO=103,cO=104,uO=200,fO=201,dO=202,hO=203,Sb=204,Mb=205,pO=206,mO=207,gO=208,vO=209,yO=210,_O=211,bO=212,xO=213,SO=214,Eb=0,wb=1,Tb=2,Cd=3,Ab=4,Cb=5,Rb=6,Db=7,tv=0,MO=1,EO=2,ho=0,xw=1,Sw=2,Mw=3,Vx=4,Ew=5,ww=6,Tw=7,yE="attached",wO="detached",Ju=300,jo=301,ef=302,Lp=303,E0=304,Jp=306,Up=1e3,ar=1001,w0=1002,yr=1003,Aw=1004,ez=1004,Ep=1005,tz=1005,qn=1006,l0=1007,nz=1007,Ll=1008,_E=1008,$r=1009,Hx=1010,Gx=1011,zp=1012,nv=1013,Da=1014,Hi=1015,or=1016,Wx=1017,$x=1018,Fp=1020,Cw=35902,Rw=35899,Dw=1021,Ow=1022,_r=1023,kl=1026,ju=1027,iv=1028,rv=1029,Rd=1030,jx=1031,iz=1032,Xx=1033,c0=33776,u0=33777,f0=33778,d0=33779,Ob=35840,Ib=35841,Pb=35842,Nb=35843,Lb=36196,Ub=37492,zb=37496,Fb=37488,Bb=37489,kb=37490,Vb=37491,Hb=37808,Gb=37809,Wb=37810,$b=37811,jb=37812,Xb=37813,qb=37814,Yb=37815,Zb=37816,Kb=37817,Qb=37818,Jb=37819,ex=37820,tx=37821,nx=36492,ix=36494,rx=36495,sx=36283,ax=36284,ox=36285,lx=36286,TO=2200,AO=2201,CO=2202,T0=2300,cx=2301,mb=2302,vd=2400,yd=2401,A0=2402,qx=2500,Iw=2501,rz=0,sz=1,az=2,RO=3200,oz=3201,lz=3202,cz=3203,lf=0,DO=1,Ic="",Wr="srgb",Xo="srgb-linear",C0="linear",li="srgb",uz="",fz="rg",dz="ga",hz=0,hd=7680,pz=7681,mz=7682,gz=7683,vz=34055,yz=34056,_z=5386,bz=512,xz=513,Sz=514,Mz=515,Ez=516,wz=517,Tz=518,bE=519,OO=512,IO=513,PO=514,Yx=515,NO=516,LO=517,Zx=518,UO=519,R0=35044,Az=35048,Cz=35040,Rz=35045,Dz=35049,Oz=35041,Iz=35046,Pz=35050,Nz=35042,Lz="100",xE="300 es",Ta=2e3,Bp=2001,Uz={COMPUTE:"compute",RENDER:"render"},zz={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Fz={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function zO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Bz={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function wp(n,e){return new Bz[n](e)}function FO(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function D0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function BO(){const n=D0("canvas");return n.style.display="block",n}const iC={};let tf=null;function kz(n){tf=n}function Vz(){return tf}function O0(...n){const e="THREE."+n.shift();tf?tf("log",e,...n):console.log(e,...n)}function It(...n){const e="THREE."+n.shift();tf?tf("warn",e,...n):console.warn(e,...n)}function Kt(...n){const e="THREE."+n.shift();tf?tf("error",e,...n):console.error(e,...n)}function kp(...n){const e=n.join(" ");e in iC||(iC[e]=!0,It(...n))}function Hz(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}let Gl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,l=r.length;a<l;a++)r[a].call(this,e);e.target=null}}};const vs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rC=1234567;const Ed=Math.PI/180,Vp=180/Math.PI;function Aa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(vs[n&255]+vs[n>>8&255]+vs[n>>16&255]+vs[n>>24&255]+"-"+vs[e&255]+vs[e>>8&255]+"-"+vs[e>>16&15|64]+vs[e>>24&255]+"-"+vs[t&63|128]+vs[t>>8&255]+"-"+vs[t>>16&255]+vs[t>>24&255]+vs[i&255]+vs[i>>8&255]+vs[i>>16&255]+vs[i>>24&255]).toLowerCase()}function fn(n,e,t){return Math.max(e,Math.min(t,n))}function Pw(n,e){return(n%e+e)%e}function Gz(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Wz(n,e,t){return n!==e?(t-n)/(e-n):0}function h0(n,e,t){return(1-t)*n+t*e}function $z(n,e,t,i){return h0(n,e,1-Math.exp(-t*i))}function jz(n,e=1){return e-Math.abs(Pw(n,e*2)-e)}function Xz(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function qz(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Yz(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Zz(n,e){return n+Math.random()*(e-n)}function Kz(n){return n*(.5-Math.random())}function Qz(n){n!==void 0&&(rC=n);let e=rC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Jz(n){return n*Ed}function e4(n){return n*Vp}function t4(n){return(n&n-1)===0&&n!==0}function n4(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function i4(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function r4(n,e,t,i,r){const a=Math.cos,l=Math.sin,u=a(t/2),h=l(t/2),p=a((e+i)/2),g=l((e+i)/2),y=a((e-i)/2),_=l((e-i)/2),b=a((i-e)/2),S=l((i-e)/2);switch(r){case"XYX":n.set(u*g,h*y,h*_,u*p);break;case"YZY":n.set(h*_,u*g,h*y,u*p);break;case"ZXZ":n.set(h*y,h*_,u*g,u*p);break;case"XZX":n.set(u*g,h*S,h*b,u*p);break;case"YXY":n.set(h*b,u*g,h*S,u*p);break;case"ZYZ":n.set(h*S,h*b,u*g,u*p);break;default:It("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Hs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Dn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const s4={DEG2RAD:Ed,RAD2DEG:Vp,generateUUID:Aa,clamp:fn,euclideanModulo:Pw,mapLinear:Gz,inverseLerp:Wz,lerp:h0,damp:$z,pingpong:jz,smoothstep:Xz,smootherstep:qz,randInt:Yz,randFloat:Zz,randFloatSpread:Kz,seededRandom:Qz,degToRad:Jz,radToDeg:e4,isPowerOfTwo:t4,ceilPowerOfTwo:n4,floorPowerOfTwo:i4,setQuaternionFromProperEuler:r4,normalize:Dn,denormalize:Hs};class Ye{constructor(e=0,t=0){Ye.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*i-l*r+e.x,this.y=a*r+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xs{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,l,u){let h=i[r+0],p=i[r+1],g=i[r+2],y=i[r+3],_=a[l+0],b=a[l+1],S=a[l+2],A=a[l+3];if(u<=0){e[t+0]=h,e[t+1]=p,e[t+2]=g,e[t+3]=y;return}if(u>=1){e[t+0]=_,e[t+1]=b,e[t+2]=S,e[t+3]=A;return}if(y!==A||h!==_||p!==b||g!==S){let w=h*_+p*b+g*S+y*A;w<0&&(_=-_,b=-b,S=-S,A=-A,w=-w);let E=1-u;if(w<.9995){const R=Math.acos(w),D=Math.sin(R);E=Math.sin(E*R)/D,u=Math.sin(u*R)/D,h=h*E+_*u,p=p*E+b*u,g=g*E+S*u,y=y*E+A*u}else{h=h*E+_*u,p=p*E+b*u,g=g*E+S*u,y=y*E+A*u;const R=1/Math.sqrt(h*h+p*p+g*g+y*y);h*=R,p*=R,g*=R,y*=R}}e[t]=h,e[t+1]=p,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,i,r,a,l){const u=i[r],h=i[r+1],p=i[r+2],g=i[r+3],y=a[l],_=a[l+1],b=a[l+2],S=a[l+3];return e[t]=u*S+g*y+h*b-p*_,e[t+1]=h*S+g*_+p*y-u*b,e[t+2]=p*S+g*b+u*_-h*y,e[t+3]=g*S-u*y-h*_-p*b,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,l=e._order,u=Math.cos,h=Math.sin,p=u(i/2),g=u(r/2),y=u(a/2),_=h(i/2),b=h(r/2),S=h(a/2);switch(l){case"XYZ":this._x=_*g*y+p*b*S,this._y=p*b*y-_*g*S,this._z=p*g*S+_*b*y,this._w=p*g*y-_*b*S;break;case"YXZ":this._x=_*g*y+p*b*S,this._y=p*b*y-_*g*S,this._z=p*g*S-_*b*y,this._w=p*g*y+_*b*S;break;case"ZXY":this._x=_*g*y-p*b*S,this._y=p*b*y+_*g*S,this._z=p*g*S+_*b*y,this._w=p*g*y-_*b*S;break;case"ZYX":this._x=_*g*y-p*b*S,this._y=p*b*y+_*g*S,this._z=p*g*S-_*b*y,this._w=p*g*y+_*b*S;break;case"YZX":this._x=_*g*y+p*b*S,this._y=p*b*y+_*g*S,this._z=p*g*S-_*b*y,this._w=p*g*y-_*b*S;break;case"XZY":this._x=_*g*y-p*b*S,this._y=p*b*y-_*g*S,this._z=p*g*S+_*b*y,this._w=p*g*y+_*b*S;break;default:It("Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],l=t[1],u=t[5],h=t[9],p=t[2],g=t[6],y=t[10],_=i+u+y;if(_>0){const b=.5/Math.sqrt(_+1);this._w=.25/b,this._x=(g-h)*b,this._y=(a-p)*b,this._z=(l-r)*b}else if(i>u&&i>y){const b=2*Math.sqrt(1+i-u-y);this._w=(g-h)/b,this._x=.25*b,this._y=(r+l)/b,this._z=(a+p)/b}else if(u>y){const b=2*Math.sqrt(1+u-i-y);this._w=(a-p)/b,this._x=(r+l)/b,this._y=.25*b,this._z=(h+g)/b}else{const b=2*Math.sqrt(1+y-i-u);this._w=(l-r)/b,this._x=(a+p)/b,this._y=(h+g)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,l=e._w,u=t._x,h=t._y,p=t._z,g=t._w;return this._x=i*g+l*u+r*p-a*h,this._y=r*g+l*h+a*u-i*p,this._z=a*g+l*p+i*h-r*u,this._w=l*g-i*u-r*h-a*p,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,a=e._z,l=e._w,u=this.dot(e);u<0&&(i=-i,r=-r,a=-a,l=-l,u=-u);let h=1-t;if(u<.9995){const p=Math.acos(u),g=Math.sin(p);h=Math.sin(h*p)/g,t=Math.sin(t*p)/g,this._x=this._x*h+i*t,this._y=this._y*h+r*t,this._z=this._z*h+a*t,this._w=this._w*h+l*t,this._onChangeCallback()}else this._x=this._x*h+i*t,this._y=this._y*h+r*t,this._z=this._z*h+a*t,this._w=this._w*h+l*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ee{constructor(e=0,t=0,i=0){ee.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(sC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,l=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*l,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*l,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,l=e.y,u=e.z,h=e.w,p=2*(l*r-u*i),g=2*(u*t-a*r),y=2*(a*i-l*t);return this.x=t+h*p+l*y-u*g,this.y=i+h*g+u*p-a*y,this.z=r+h*y+a*g-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,l=t.x,u=t.y,h=t.z;return this.x=r*h-a*u,this.y=a*l-i*h,this.z=i*u-r*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return D1.copy(this).projectOnVector(e),this.sub(D1)}reflect(e){return this.sub(D1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const D1=new ee,sC=new xs;class Tn{constructor(e,t,i,r,a,l,u,h,p){Tn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,l,u,h,p)}set(e,t,i,r,a,l,u,h,p){const g=this.elements;return g[0]=e,g[1]=r,g[2]=u,g[3]=t,g[4]=a,g[5]=h,g[6]=i,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,l=i[0],u=i[3],h=i[6],p=i[1],g=i[4],y=i[7],_=i[2],b=i[5],S=i[8],A=r[0],w=r[3],E=r[6],R=r[1],D=r[4],I=r[7],L=r[2],N=r[5],F=r[8];return a[0]=l*A+u*R+h*L,a[3]=l*w+u*D+h*N,a[6]=l*E+u*I+h*F,a[1]=p*A+g*R+y*L,a[4]=p*w+g*D+y*N,a[7]=p*E+g*I+y*F,a[2]=_*A+b*R+S*L,a[5]=_*w+b*D+S*N,a[8]=_*E+b*I+S*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],l=e[4],u=e[5],h=e[6],p=e[7],g=e[8];return t*l*g-t*u*p-i*a*g+i*u*h+r*a*p-r*l*h}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],l=e[4],u=e[5],h=e[6],p=e[7],g=e[8],y=g*l-u*p,_=u*h-g*a,b=p*a-l*h,S=t*y+i*_+r*b;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/S;return e[0]=y*A,e[1]=(r*p-g*i)*A,e[2]=(u*i-r*l)*A,e[3]=_*A,e[4]=(g*t-r*h)*A,e[5]=(r*a-u*t)*A,e[6]=b*A,e[7]=(i*h-p*t)*A,e[8]=(l*t-i*a)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,l,u){const h=Math.cos(a),p=Math.sin(a);return this.set(i*h,i*p,-i*(h*l+p*u)+l+e,-r*p,r*h,-r*(-p*l+h*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(O1.makeScale(e,t)),this}rotate(e){return this.premultiply(O1.makeRotation(-e)),this}translate(e,t){return this.premultiply(O1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const O1=new Tn,aC=new Tn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),oC=new Tn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function a4(){const n={enabled:!0,workingColorSpace:Xo,spaces:{},convert:function(r,a,l){return this.enabled===!1||a===l||!a||!l||(this.spaces[a].transfer===li&&(r.r=Lc(r.r),r.g=Lc(r.g),r.b=Lc(r.b)),this.spaces[a].primaries!==this.spaces[l].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===li&&(r.r=Rp(r.r),r.g=Rp(r.g),r.b=Rp(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ic?C0:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,l){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return kp("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return kp("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Xo]:{primaries:e,whitePoint:i,transfer:C0,toXYZ:aC,fromXYZ:oC,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Wr},outputColorSpaceConfig:{drawingBufferColorSpace:Wr}},[Wr]:{primaries:e,whitePoint:i,transfer:li,toXYZ:aC,fromXYZ:oC,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Wr}}}),n}const $n=a4();function Lc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Rp(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Yh;class kO{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Yh===void 0&&(Yh=D0("canvas")),Yh.width=e.width,Yh.height=e.height;const r=Yh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Yh}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=D0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let l=0;l<a.length;l++)a[l]=Lc(a[l]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Lc(t[i]/255)*255):t[i]=Lc(t[i]);return{data:t,width:e.width,height:e.height}}else return It("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let o4=0;class Xu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:o4++}),this.uuid=Aa(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let l=0,u=r.length;l<u;l++)r[l].isDataTexture?a.push(I1(r[l].image)):a.push(I1(r[l]))}else a=I1(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function I1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?kO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(It("Texture: Unable to serialize Texture."),{})}let l4=0;const P1=new ee;class gi extends Gl{constructor(e=gi.DEFAULT_IMAGE,t=gi.DEFAULT_MAPPING,i=ar,r=ar,a=qn,l=Ll,u=_r,h=$r,p=gi.DEFAULT_ANISOTROPY,g=Ic){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:l4++}),this.uuid=Aa(),this.name="",this.source=new Xu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(P1).x}get height(){return this.source.getSize(P1).y}get depth(){return this.source.getSize(P1).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){It(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){It(`Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ju)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Up:e.x=e.x-Math.floor(e.x);break;case ar:e.x=e.x<0?0:1;break;case w0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Up:e.y=e.y-Math.floor(e.y);break;case ar:e.y=e.y<0?0:1;break;case w0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}gi.DEFAULT_IMAGE=null;gi.DEFAULT_MAPPING=Ju;gi.DEFAULT_ANISOTROPY=1;class Si{constructor(e=0,t=0,i=0,r=1){Si.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*r+l[12]*a,this.y=l[1]*t+l[5]*i+l[9]*r+l[13]*a,this.z=l[2]*t+l[6]*i+l[10]*r+l[14]*a,this.w=l[3]*t+l[7]*i+l[11]*r+l[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const h=e.elements,p=h[0],g=h[4],y=h[8],_=h[1],b=h[5],S=h[9],A=h[2],w=h[6],E=h[10];if(Math.abs(g-_)<.01&&Math.abs(y-A)<.01&&Math.abs(S-w)<.01){if(Math.abs(g+_)<.1&&Math.abs(y+A)<.1&&Math.abs(S+w)<.1&&Math.abs(p+b+E-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(p+1)/2,I=(b+1)/2,L=(E+1)/2,N=(g+_)/4,F=(y+A)/4,V=(S+w)/4;return D>I&&D>L?D<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(D),r=N/i,a=F/i):I>L?I<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(I),i=N/r,a=V/r):L<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(L),i=F/a,r=V/a),this.set(i,r,a,t),this}let R=Math.sqrt((w-S)*(w-S)+(y-A)*(y-A)+(_-g)*(_-g));return Math.abs(R)<.001&&(R=1),this.x=(w-S)/R,this.y=(y-A)/R,this.z=(_-g)/R,this.w=Math.acos((p+b+E-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=fn(this.x,e.x,t.x),this.y=fn(this.y,e.y,t.y),this.z=fn(this.z,e.z,t.z),this.w=fn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=fn(this.x,e,t),this.y=fn(this.y,e,t),this.z=fn(this.z,e,t),this.w=fn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(fn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Nw extends Gl{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:qn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Si(0,0,e,t),this.scissorTest=!1,this.viewport=new Si(0,0,e,t);const r={width:e,height:t,depth:i.depth},a=new gi(r);this.textures=[];const l=i.count;for(let u=0;u<l;u++)this.textures[u]=a.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:qn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Xu(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class is extends Nw{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Kx extends gi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=yr,this.minFilter=yr,this.wrapR=ar,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class c4 extends is{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Kx(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Qx extends gi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=yr,this.minFilter=yr,this.wrapR=ar,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class u4 extends is{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Qx(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Ss{constructor(e=new ee(1/0,1/0,1/0),t=new ee(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Lo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Lo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Lo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=a.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,Lo):Lo.fromBufferAttribute(a,l),Lo.applyMatrix4(e.matrixWorld),this.expandByPoint(Lo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),u_.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),u_.copy(i.boundingBox)),u_.applyMatrix4(e.matrixWorld),this.union(u_)}const r=e.children;for(let a=0,l=r.length;a<l;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Lo),Lo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Lg),f_.subVectors(this.max,Lg),Zh.subVectors(e.a,Lg),Kh.subVectors(e.b,Lg),Qh.subVectors(e.c,Lg),Uu.subVectors(Kh,Zh),zu.subVectors(Qh,Kh),Zf.subVectors(Zh,Qh);let t=[0,-Uu.z,Uu.y,0,-zu.z,zu.y,0,-Zf.z,Zf.y,Uu.z,0,-Uu.x,zu.z,0,-zu.x,Zf.z,0,-Zf.x,-Uu.y,Uu.x,0,-zu.y,zu.x,0,-Zf.y,Zf.x,0];return!N1(t,Zh,Kh,Qh,f_)||(t=[1,0,0,0,1,0,0,0,1],!N1(t,Zh,Kh,Qh,f_))?!1:(d_.crossVectors(Uu,zu),t=[d_.x,d_.y,d_.z],N1(t,Zh,Kh,Qh,f_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Lo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Lo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Sc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Sc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Sc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Sc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Sc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Sc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Sc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Sc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Sc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Sc=[new ee,new ee,new ee,new ee,new ee,new ee,new ee,new ee],Lo=new ee,u_=new Ss,Zh=new ee,Kh=new ee,Qh=new ee,Uu=new ee,zu=new ee,Zf=new ee,Lg=new ee,f_=new ee,d_=new ee,Kf=new ee;function N1(n,e,t,i,r){for(let a=0,l=n.length-3;a<=l;a+=3){Kf.fromArray(n,a);const u=r.x*Math.abs(Kf.x)+r.y*Math.abs(Kf.y)+r.z*Math.abs(Kf.z),h=e.dot(Kf),p=t.dot(Kf),g=i.dot(Kf);if(Math.max(-Math.max(h,p,g),Math.min(h,p,g))>u)return!1}return!0}const f4=new Ss,Ug=new ee,L1=new ee;class rs{constructor(e=new ee,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):f4.setFromPoints(e).getCenter(i);let r=0;for(let a=0,l=e.length;a<l;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ug.subVectors(e,this.center);const t=Ug.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Ug,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(L1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ug.copy(e.center).add(L1)),this.expandByPoint(Ug.copy(e.center).sub(L1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Mc=new ee,U1=new ee,h_=new ee,Fu=new ee,z1=new ee,p_=new ee,F1=new ee;class zd{constructor(e=new ee,t=new ee(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Mc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Mc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Mc.copy(this.origin).addScaledVector(this.direction,t),Mc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){U1.copy(e).add(t).multiplyScalar(.5),h_.copy(t).sub(e).normalize(),Fu.copy(this.origin).sub(U1);const a=e.distanceTo(t)*.5,l=-this.direction.dot(h_),u=Fu.dot(this.direction),h=-Fu.dot(h_),p=Fu.lengthSq(),g=Math.abs(1-l*l);let y,_,b,S;if(g>0)if(y=l*h-u,_=l*u-h,S=a*g,y>=0)if(_>=-S)if(_<=S){const A=1/g;y*=A,_*=A,b=y*(y+l*_+2*u)+_*(l*y+_+2*h)+p}else _=a,y=Math.max(0,-(l*_+u)),b=-y*y+_*(_+2*h)+p;else _=-a,y=Math.max(0,-(l*_+u)),b=-y*y+_*(_+2*h)+p;else _<=-S?(y=Math.max(0,-(-l*a+u)),_=y>0?-a:Math.min(Math.max(-a,-h),a),b=-y*y+_*(_+2*h)+p):_<=S?(y=0,_=Math.min(Math.max(-a,-h),a),b=_*(_+2*h)+p):(y=Math.max(0,-(l*a+u)),_=y>0?a:Math.min(Math.max(-a,-h),a),b=-y*y+_*(_+2*h)+p);else _=l>0?-a:a,y=Math.max(0,-(l*_+u)),b=-y*y+_*(_+2*h)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,y),r&&r.copy(U1).addScaledVector(h_,_),b}intersectSphere(e,t){Mc.subVectors(e.center,this.origin);const i=Mc.dot(this.direction),r=Mc.dot(Mc)-i*i,a=e.radius*e.radius;if(r>a)return null;const l=Math.sqrt(a-r),u=i-l,h=i+l;return h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,l,u,h;const p=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,_=this.origin;return p>=0?(i=(e.min.x-_.x)*p,r=(e.max.x-_.x)*p):(i=(e.max.x-_.x)*p,r=(e.min.x-_.x)*p),g>=0?(a=(e.min.y-_.y)*g,l=(e.max.y-_.y)*g):(a=(e.max.y-_.y)*g,l=(e.min.y-_.y)*g),i>l||a>r||((a>i||isNaN(i))&&(i=a),(l<r||isNaN(r))&&(r=l),y>=0?(u=(e.min.z-_.z)*y,h=(e.max.z-_.z)*y):(u=(e.max.z-_.z)*y,h=(e.min.z-_.z)*y),i>h||u>r)||((u>i||i!==i)&&(i=u),(h<r||r!==r)&&(r=h),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Mc)!==null}intersectTriangle(e,t,i,r,a){z1.subVectors(t,e),p_.subVectors(i,e),F1.crossVectors(z1,p_);let l=this.direction.dot(F1),u;if(l>0){if(r)return null;u=1}else if(l<0)u=-1,l=-l;else return null;Fu.subVectors(this.origin,e);const h=u*this.direction.dot(p_.crossVectors(Fu,p_));if(h<0)return null;const p=u*this.direction.dot(z1.cross(Fu));if(p<0||h+p>l)return null;const g=-u*Fu.dot(F1);return g<0?null:this.at(g/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class hn{constructor(e,t,i,r,a,l,u,h,p,g,y,_,b,S,A,w){hn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,l,u,h,p,g,y,_,b,S,A,w)}set(e,t,i,r,a,l,u,h,p,g,y,_,b,S,A,w){const E=this.elements;return E[0]=e,E[4]=t,E[8]=i,E[12]=r,E[1]=a,E[5]=l,E[9]=u,E[13]=h,E[2]=p,E[6]=g,E[10]=y,E[14]=_,E[3]=b,E[7]=S,E[11]=A,E[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new hn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,r=1/Jh.setFromMatrixColumn(e,0).length(),a=1/Jh.setFromMatrixColumn(e,1).length(),l=1/Jh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,l=Math.cos(i),u=Math.sin(i),h=Math.cos(r),p=Math.sin(r),g=Math.cos(a),y=Math.sin(a);if(e.order==="XYZ"){const _=l*g,b=l*y,S=u*g,A=u*y;t[0]=h*g,t[4]=-h*y,t[8]=p,t[1]=b+S*p,t[5]=_-A*p,t[9]=-u*h,t[2]=A-_*p,t[6]=S+b*p,t[10]=l*h}else if(e.order==="YXZ"){const _=h*g,b=h*y,S=p*g,A=p*y;t[0]=_+A*u,t[4]=S*u-b,t[8]=l*p,t[1]=l*y,t[5]=l*g,t[9]=-u,t[2]=b*u-S,t[6]=A+_*u,t[10]=l*h}else if(e.order==="ZXY"){const _=h*g,b=h*y,S=p*g,A=p*y;t[0]=_-A*u,t[4]=-l*y,t[8]=S+b*u,t[1]=b+S*u,t[5]=l*g,t[9]=A-_*u,t[2]=-l*p,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const _=l*g,b=l*y,S=u*g,A=u*y;t[0]=h*g,t[4]=S*p-b,t[8]=_*p+A,t[1]=h*y,t[5]=A*p+_,t[9]=b*p-S,t[2]=-p,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const _=l*h,b=l*p,S=u*h,A=u*p;t[0]=h*g,t[4]=A-_*y,t[8]=S*y+b,t[1]=y,t[5]=l*g,t[9]=-u*g,t[2]=-p*g,t[6]=b*y+S,t[10]=_-A*y}else if(e.order==="XZY"){const _=l*h,b=l*p,S=u*h,A=u*p;t[0]=h*g,t[4]=-y,t[8]=p*g,t[1]=_*y+A,t[5]=l*g,t[9]=b*y-S,t[2]=S*y-b,t[6]=u*g,t[10]=A*y+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(d4,e,h4)}lookAt(e,t,i){const r=this.elements;return Ma.subVectors(e,t),Ma.lengthSq()===0&&(Ma.z=1),Ma.normalize(),Bu.crossVectors(i,Ma),Bu.lengthSq()===0&&(Math.abs(i.z)===1?Ma.x+=1e-4:Ma.z+=1e-4,Ma.normalize(),Bu.crossVectors(i,Ma)),Bu.normalize(),m_.crossVectors(Ma,Bu),r[0]=Bu.x,r[4]=m_.x,r[8]=Ma.x,r[1]=Bu.y,r[5]=m_.y,r[9]=Ma.y,r[2]=Bu.z,r[6]=m_.z,r[10]=Ma.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,l=i[0],u=i[4],h=i[8],p=i[12],g=i[1],y=i[5],_=i[9],b=i[13],S=i[2],A=i[6],w=i[10],E=i[14],R=i[3],D=i[7],I=i[11],L=i[15],N=r[0],F=r[4],V=r[8],P=r[12],U=r[1],W=r[5],Q=r[9],K=r[13],ne=r[2],re=r[6],X=r[10],J=r[14],ae=r[3],Me=r[7],Se=r[11],Y=r[15];return a[0]=l*N+u*U+h*ne+p*ae,a[4]=l*F+u*W+h*re+p*Me,a[8]=l*V+u*Q+h*X+p*Se,a[12]=l*P+u*K+h*J+p*Y,a[1]=g*N+y*U+_*ne+b*ae,a[5]=g*F+y*W+_*re+b*Me,a[9]=g*V+y*Q+_*X+b*Se,a[13]=g*P+y*K+_*J+b*Y,a[2]=S*N+A*U+w*ne+E*ae,a[6]=S*F+A*W+w*re+E*Me,a[10]=S*V+A*Q+w*X+E*Se,a[14]=S*P+A*K+w*J+E*Y,a[3]=R*N+D*U+I*ne+L*ae,a[7]=R*F+D*W+I*re+L*Me,a[11]=R*V+D*Q+I*X+L*Se,a[15]=R*P+D*K+I*J+L*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],l=e[1],u=e[5],h=e[9],p=e[13],g=e[2],y=e[6],_=e[10],b=e[14],S=e[3],A=e[7],w=e[11],E=e[15],R=h*b-p*_,D=u*b-p*y,I=u*_-h*y,L=l*b-p*g,N=l*_-h*g,F=l*y-u*g;return t*(A*R-w*D+E*I)-i*(S*R-w*L+E*N)+r*(S*D-A*L+E*F)-a*(S*I-A*N+w*F)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],l=e[4],u=e[5],h=e[6],p=e[7],g=e[8],y=e[9],_=e[10],b=e[11],S=e[12],A=e[13],w=e[14],E=e[15],R=y*w*p-A*_*p+A*h*b-u*w*b-y*h*E+u*_*E,D=S*_*p-g*w*p-S*h*b+l*w*b+g*h*E-l*_*E,I=g*A*p-S*y*p+S*u*b-l*A*b-g*u*E+l*y*E,L=S*y*h-g*A*h-S*u*_+l*A*_+g*u*w-l*y*w,N=t*R+i*D+r*I+a*L;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/N;return e[0]=R*F,e[1]=(A*_*a-y*w*a-A*r*b+i*w*b+y*r*E-i*_*E)*F,e[2]=(u*w*a-A*h*a+A*r*p-i*w*p-u*r*E+i*h*E)*F,e[3]=(y*h*a-u*_*a-y*r*p+i*_*p+u*r*b-i*h*b)*F,e[4]=D*F,e[5]=(g*w*a-S*_*a+S*r*b-t*w*b-g*r*E+t*_*E)*F,e[6]=(S*h*a-l*w*a-S*r*p+t*w*p+l*r*E-t*h*E)*F,e[7]=(l*_*a-g*h*a+g*r*p-t*_*p-l*r*b+t*h*b)*F,e[8]=I*F,e[9]=(S*y*a-g*A*a-S*i*b+t*A*b+g*i*E-t*y*E)*F,e[10]=(l*A*a-S*u*a+S*i*p-t*A*p-l*i*E+t*u*E)*F,e[11]=(g*u*a-l*y*a-g*i*p+t*y*p+l*i*b-t*u*b)*F,e[12]=L*F,e[13]=(g*A*r-S*y*r+S*i*_-t*A*_-g*i*w+t*y*w)*F,e[14]=(S*u*r-l*A*r-S*i*h+t*A*h+l*i*w-t*u*w)*F,e[15]=(l*y*r-g*u*r+g*i*h-t*y*h-l*i*_+t*u*_)*F,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,l=e.x,u=e.y,h=e.z,p=a*l,g=a*u;return this.set(p*l+i,p*u-r*h,p*h+r*u,0,p*u+r*h,g*u+i,g*h-r*l,0,p*h-r*u,g*h+r*l,a*h*h+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,l){return this.set(1,i,a,0,e,1,l,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,l=t._y,u=t._z,h=t._w,p=a+a,g=l+l,y=u+u,_=a*p,b=a*g,S=a*y,A=l*g,w=l*y,E=u*y,R=h*p,D=h*g,I=h*y,L=i.x,N=i.y,F=i.z;return r[0]=(1-(A+E))*L,r[1]=(b+I)*L,r[2]=(S-D)*L,r[3]=0,r[4]=(b-I)*N,r[5]=(1-(_+E))*N,r[6]=(w+R)*N,r[7]=0,r[8]=(S+D)*F,r[9]=(w-R)*F,r[10]=(1-(_+A))*F,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let a=Jh.set(r[0],r[1],r[2]).length();const l=Jh.set(r[4],r[5],r[6]).length(),u=Jh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),Uo.copy(this);const p=1/a,g=1/l,y=1/u;return Uo.elements[0]*=p,Uo.elements[1]*=p,Uo.elements[2]*=p,Uo.elements[4]*=g,Uo.elements[5]*=g,Uo.elements[6]*=g,Uo.elements[8]*=y,Uo.elements[9]*=y,Uo.elements[10]*=y,t.setFromRotationMatrix(Uo),i.x=a,i.y=l,i.z=u,this}makePerspective(e,t,i,r,a,l,u=Ta,h=!1){const p=this.elements,g=2*a/(t-e),y=2*a/(i-r),_=(t+e)/(t-e),b=(i+r)/(i-r);let S,A;if(h)S=a/(l-a),A=l*a/(l-a);else if(u===Ta)S=-(l+a)/(l-a),A=-2*l*a/(l-a);else if(u===Bp)S=-l/(l-a),A=-l*a/(l-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return p[0]=g,p[4]=0,p[8]=_,p[12]=0,p[1]=0,p[5]=y,p[9]=b,p[13]=0,p[2]=0,p[6]=0,p[10]=S,p[14]=A,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,i,r,a,l,u=Ta,h=!1){const p=this.elements,g=2/(t-e),y=2/(i-r),_=-(t+e)/(t-e),b=-(i+r)/(i-r);let S,A;if(h)S=1/(l-a),A=l/(l-a);else if(u===Ta)S=-2/(l-a),A=-(l+a)/(l-a);else if(u===Bp)S=-1/(l-a),A=-a/(l-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return p[0]=g,p[4]=0,p[8]=0,p[12]=_,p[1]=0,p[5]=y,p[9]=0,p[13]=b,p[2]=0,p[6]=0,p[10]=S,p[14]=A,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Jh=new ee,Uo=new hn,d4=new ee(0,0,0),h4=new ee(1,1,1),Bu=new ee,m_=new ee,Ma=new ee,lC=new hn,cC=new xs;class Oa{constructor(e=0,t=0,i=0,r=Oa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],l=r[4],u=r[8],h=r[1],p=r[5],g=r[9],y=r[2],_=r[6],b=r[10];switch(t){case"XYZ":this._y=Math.asin(fn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,b),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(_,p),this._z=0);break;case"YXZ":this._x=Math.asin(-fn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,b),this._z=Math.atan2(h,p)):(this._y=Math.atan2(-y,a),this._z=0);break;case"ZXY":this._x=Math.asin(fn(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-y,b),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(h,a));break;case"ZYX":this._y=Math.asin(-fn(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(_,b),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(fn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-y,a)):(this._x=0,this._y=Math.atan2(u,b));break;case"XZY":this._z=Math.asin(-fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(_,p),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-g,b),this._y=0);break;default:It("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return lC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(lC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return cC.setFromEuler(this),this.setFromQuaternion(cC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Oa.DEFAULT_ORDER="XYZ";class Hp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let p4=0;const uC=new ee,ep=new xs,Ec=new hn,g_=new ee,zg=new ee,m4=new ee,g4=new xs,fC=new ee(1,0,0),dC=new ee(0,1,0),hC=new ee(0,0,1),pC={type:"added"},v4={type:"removed"},tp={type:"childadded",child:null},B1={type:"childremoved",child:null};class ei extends Gl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:p4++}),this.uuid=Aa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ei.DEFAULT_UP.clone();const e=new ee,t=new Oa,i=new xs,r=new ee(1,1,1);function a(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new hn},normalMatrix:{value:new Tn}}),this.matrix=new hn,this.matrixWorld=new hn,this.matrixAutoUpdate=ei.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Hp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ep.setFromAxisAngle(e,t),this.quaternion.multiply(ep),this}rotateOnWorldAxis(e,t){return ep.setFromAxisAngle(e,t),this.quaternion.premultiply(ep),this}rotateX(e){return this.rotateOnAxis(fC,e)}rotateY(e){return this.rotateOnAxis(dC,e)}rotateZ(e){return this.rotateOnAxis(hC,e)}translateOnAxis(e,t){return uC.copy(e).applyQuaternion(this.quaternion),this.position.add(uC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(fC,e)}translateY(e){return this.translateOnAxis(dC,e)}translateZ(e){return this.translateOnAxis(hC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ec.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?g_.copy(e):g_.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),zg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ec.lookAt(zg,g_,this.up):Ec.lookAt(g_,zg,this.up),this.quaternion.setFromRotationMatrix(Ec),r&&(Ec.extractRotation(r.matrixWorld),ep.setFromRotationMatrix(Ec),this.quaternion.premultiply(ep.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Kt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(pC),tp.child=e,this.dispatchEvent(tp),tp.child=null):Kt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(v4),B1.child=e,this.dispatchEvent(B1),B1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ec.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ec.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ec),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(pC),tp.child=e,this.dispatchEvent(tp),tp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,l=r.length;a<l;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zg,e,m4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zg,g4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,l=r.length;a<l;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(u=>({...u})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let p=0,g=h.length;p<g;p++){const y=h[p];a(e.shapes,y)}else a(e.shapes,h)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,p=this.material.length;h<p;h++)u.push(a(e.materials,this.material[h]));r.material=u}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let u=0;u<this.children.length;u++)r.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];r.animations.push(a(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),p=l(e.textures),g=l(e.images),y=l(e.shapes),_=l(e.skeletons),b=l(e.animations),S=l(e.nodes);u.length>0&&(i.geometries=u),h.length>0&&(i.materials=h),p.length>0&&(i.textures=p),g.length>0&&(i.images=g),y.length>0&&(i.shapes=y),_.length>0&&(i.skeletons=_),b.length>0&&(i.animations=b),S.length>0&&(i.nodes=S)}return i.object=r,i;function l(u){const h=[];for(const p in u){const g=u[p];delete g.metadata,h.push(g)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}ei.DEFAULT_UP=new ee(0,1,0);ei.DEFAULT_MATRIX_AUTO_UPDATE=!0;ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const zo=new ee,wc=new ee,k1=new ee,Tc=new ee,np=new ee,ip=new ee,mC=new ee,V1=new ee,H1=new ee,G1=new ee,W1=new Si,$1=new Si,j1=new Si;class ga{constructor(e=new ee,t=new ee,i=new ee){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),zo.subVectors(e,t),r.cross(zo);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){zo.subVectors(r,t),wc.subVectors(i,t),k1.subVectors(e,t);const l=zo.dot(zo),u=zo.dot(wc),h=zo.dot(k1),p=wc.dot(wc),g=wc.dot(k1),y=l*p-u*u;if(y===0)return a.set(0,0,0),null;const _=1/y,b=(p*h-u*g)*_,S=(l*g-u*h)*_;return a.set(1-b-S,S,b)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Tc)===null?!1:Tc.x>=0&&Tc.y>=0&&Tc.x+Tc.y<=1}static getInterpolation(e,t,i,r,a,l,u,h){return this.getBarycoord(e,t,i,r,Tc)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(a,Tc.x),h.addScaledVector(l,Tc.y),h.addScaledVector(u,Tc.z),h)}static getInterpolatedAttribute(e,t,i,r,a,l){return W1.setScalar(0),$1.setScalar(0),j1.setScalar(0),W1.fromBufferAttribute(e,t),$1.fromBufferAttribute(e,i),j1.fromBufferAttribute(e,r),l.setScalar(0),l.addScaledVector(W1,a.x),l.addScaledVector($1,a.y),l.addScaledVector(j1,a.z),l}static isFrontFacing(e,t,i,r){return zo.subVectors(i,t),wc.subVectors(e,t),zo.cross(wc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return zo.subVectors(this.c,this.b),wc.subVectors(this.a,this.b),zo.cross(wc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ga.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ga.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return ga.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return ga.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ga.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let l,u;np.subVectors(r,i),ip.subVectors(a,i),V1.subVectors(e,i);const h=np.dot(V1),p=ip.dot(V1);if(h<=0&&p<=0)return t.copy(i);H1.subVectors(e,r);const g=np.dot(H1),y=ip.dot(H1);if(g>=0&&y<=g)return t.copy(r);const _=h*y-g*p;if(_<=0&&h>=0&&g<=0)return l=h/(h-g),t.copy(i).addScaledVector(np,l);G1.subVectors(e,a);const b=np.dot(G1),S=ip.dot(G1);if(S>=0&&b<=S)return t.copy(a);const A=b*p-h*S;if(A<=0&&p>=0&&S<=0)return u=p/(p-S),t.copy(i).addScaledVector(ip,u);const w=g*S-b*y;if(w<=0&&y-g>=0&&b-S>=0)return mC.subVectors(a,r),u=(y-g)/(y-g+(b-S)),t.copy(r).addScaledVector(mC,u);const E=1/(w+A+_);return l=A*E,u=_*E,t.copy(i).addScaledVector(np,l).addScaledVector(ip,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const VO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ku={h:0,s:0,l:0},v_={h:0,s:0,l:0};function X1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Bt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Wr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,$n.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=$n.workingColorSpace){return this.r=e,this.g=t,this.b=i,$n.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=$n.workingColorSpace){if(e=Pw(e,1),t=fn(t,0,1),i=fn(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,l=2*i-a;this.r=X1(l,a,e+1/3),this.g=X1(l,a,e),this.b=X1(l,a,e-1/3)}return $n.colorSpaceToWorking(this,r),this}setStyle(e,t=Wr){function i(a){a!==void 0&&parseFloat(a)<1&&It("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const l=r[1],u=r[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:It("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(a,16),t);It("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Wr){const i=VO[e.toLowerCase()];return i!==void 0?this.setHex(i,t):It("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lc(e.r),this.g=Lc(e.g),this.b=Lc(e.b),this}copyLinearToSRGB(e){return this.r=Rp(e.r),this.g=Rp(e.g),this.b=Rp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Wr){return $n.workingToColorSpace(ys.copy(this),e),Math.round(fn(ys.r*255,0,255))*65536+Math.round(fn(ys.g*255,0,255))*256+Math.round(fn(ys.b*255,0,255))}getHexString(e=Wr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=$n.workingColorSpace){$n.workingToColorSpace(ys.copy(this),t);const i=ys.r,r=ys.g,a=ys.b,l=Math.max(i,r,a),u=Math.min(i,r,a);let h,p;const g=(u+l)/2;if(u===l)h=0,p=0;else{const y=l-u;switch(p=g<=.5?y/(l+u):y/(2-l-u),l){case i:h=(r-a)/y+(r<a?6:0);break;case r:h=(a-i)/y+2;break;case a:h=(i-r)/y+4;break}h/=6}return e.h=h,e.s=p,e.l=g,e}getRGB(e,t=$n.workingColorSpace){return $n.workingToColorSpace(ys.copy(this),t),e.r=ys.r,e.g=ys.g,e.b=ys.b,e}getStyle(e=Wr){$n.workingToColorSpace(ys.copy(this),e);const t=ys.r,i=ys.g,r=ys.b;return e!==Wr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(ku),this.setHSL(ku.h+e,ku.s+t,ku.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ku),e.getHSL(v_);const i=h0(ku.h,v_.h,t),r=h0(ku.s,v_.s,t),a=h0(ku.l,v_.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const ys=new Bt;Bt.NAMES=VO;let y4=0;class Ms extends Gl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:y4++}),this.uuid=Aa(),this.name="",this.type="Material",this.blending=Md,this.side=Fc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Sb,this.blendDst=Mb,this.blendEquation=$u,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=Cd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hd,this.stencilZFail=hd,this.stencilZPass=hd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){It(`Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){It(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Md&&(i.blending=this.blending),this.side!==Fc&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Sb&&(i.blendSrc=this.blendSrc),this.blendDst!==Mb&&(i.blendDst=this.blendDst),this.blendEquation!==$u&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Cd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bE&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==hd&&(i.stencilFail=this.stencilFail),this.stencilZFail!==hd&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==hd&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}if(t){const a=r(e.textures),l=r(e.images);a.length>0&&(i.textures=a),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Gc extends Ms{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.combine=tv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Pc=_4();function _4(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let h=0;h<256;++h){const p=h-127;p<-27?(i[h]=0,i[h|256]=32768,r[h]=24,r[h|256]=24):p<-14?(i[h]=1024>>-p-14,i[h|256]=1024>>-p-14|32768,r[h]=-p-1,r[h|256]=-p-1):p<=15?(i[h]=p+15<<10,i[h|256]=p+15<<10|32768,r[h]=13,r[h|256]=13):p<128?(i[h]=31744,i[h|256]=64512,r[h]=24,r[h|256]=24):(i[h]=31744,i[h|256]=64512,r[h]=13,r[h|256]=13)}const a=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let h=1;h<1024;++h){let p=h<<13,g=0;for(;(p&8388608)===0;)p<<=1,g-=8388608;p&=-8388609,g+=947912704,a[h]=p|g}for(let h=1024;h<2048;++h)a[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)l[h]=h<<23;l[31]=1199570944,l[32]=2147483648;for(let h=33;h<63;++h)l[h]=2147483648+(h-32<<23);l[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(u[h]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:l,offsetTable:u}}function pa(n){Math.abs(n)>65504&&It("DataUtils.toHalfFloat(): Value out of range."),n=fn(n,-65504,65504),Pc.floatView[0]=n;const e=Pc.uint32View[0],t=e>>23&511;return Pc.baseTable[t]+((e&8388607)>>Pc.shiftTable[t])}function n0(n){const e=n>>10;return Pc.uint32View[0]=Pc.mantissaTable[Pc.offsetTable[e]+(n&1023)]+Pc.exponentTable[e],Pc.floatView[0]}class _d{static toHalfFloat(e){return pa(e)}static fromHalfFloat(e){return n0(e)}}const Cr=new ee,y_=new Ye;let b4=0;class vi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:b4++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=R0,this.updateRanges=[],this.gpuType=Hi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)y_.fromBufferAttribute(this,t),y_.applyMatrix3(e),this.setXY(t,y_.x,y_.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Cr.fromBufferAttribute(this,t),Cr.applyMatrix3(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Cr.fromBufferAttribute(this,t),Cr.applyMatrix4(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Cr.fromBufferAttribute(this,t),Cr.applyNormalMatrix(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Cr.fromBufferAttribute(this,t),Cr.transformDirection(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Hs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Dn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Hs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Hs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Hs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Hs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),i=Dn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),i=Dn(i,this.array),r=Dn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),i=Dn(i,this.array),r=Dn(r,this.array),a=Dn(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==R0&&(e.usage=this.usage),e}}class x4 extends vi{constructor(e,t,i){super(new Int8Array(e),t,i)}}class S4 extends vi{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class M4 extends vi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class E4 extends vi{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Lw extends vi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class w4 extends vi{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Uw extends vi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class T4 extends vi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=n0(this.array[e*this.itemSize]);return this.normalized&&(t=Hs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize]=pa(t),this}getY(e){let t=n0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Hs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+1]=pa(t),this}getZ(e){let t=n0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Hs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+2]=pa(t),this}getW(e){let t=n0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Hs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+3]=pa(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),i=Dn(i,this.array)),this.array[e+0]=pa(t),this.array[e+1]=pa(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),i=Dn(i,this.array),r=Dn(r,this.array)),this.array[e+0]=pa(t),this.array[e+1]=pa(i),this.array[e+2]=pa(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),i=Dn(i,this.array),r=Dn(r,this.array),a=Dn(a,this.array)),this.array[e+0]=pa(t),this.array[e+1]=pa(i),this.array[e+2]=pa(r),this.array[e+3]=pa(a),this}}class Gt extends vi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let A4=0;const so=new hn,q1=new ei,rp=new ee,Ea=new Ss,Fg=new Ss,Hr=new ee;class Mn extends Gl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:A4++}),this.uuid=Aa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zO(e)?Uw:Lw)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Tn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return so.makeRotationFromQuaternion(e),this.applyMatrix4(so),this}rotateX(e){return so.makeRotationX(e),this.applyMatrix4(so),this}rotateY(e){return so.makeRotationY(e),this.applyMatrix4(so),this}rotateZ(e){return so.makeRotationZ(e),this.applyMatrix4(so),this}translate(e,t,i){return so.makeTranslation(e,t,i),this.applyMatrix4(so),this}scale(e,t,i){return so.makeScale(e,t,i),this.applyMatrix4(so),this}lookAt(e){return q1.lookAt(e),q1.updateMatrix(),this.applyMatrix4(q1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(rp).negate(),this.translate(rp.x,rp.y,rp.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const l=e[r];i.push(l.x,l.y,l.z||0)}this.setAttribute("position",new Gt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&It("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ss);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Kt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ee(-1/0,-1/0,-1/0),new ee(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];Ea.setFromBufferAttribute(a),this.morphTargetsRelative?(Hr.addVectors(this.boundingBox.min,Ea.min),this.boundingBox.expandByPoint(Hr),Hr.addVectors(this.boundingBox.max,Ea.max),this.boundingBox.expandByPoint(Hr)):(this.boundingBox.expandByPoint(Ea.min),this.boundingBox.expandByPoint(Ea.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Kt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new rs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Kt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ee,1/0);return}if(e){const i=this.boundingSphere.center;if(Ea.setFromBufferAttribute(e),t)for(let a=0,l=t.length;a<l;a++){const u=t[a];Fg.setFromBufferAttribute(u),this.morphTargetsRelative?(Hr.addVectors(Ea.min,Fg.min),Ea.expandByPoint(Hr),Hr.addVectors(Ea.max,Fg.max),Ea.expandByPoint(Hr)):(Ea.expandByPoint(Fg.min),Ea.expandByPoint(Fg.max))}Ea.getCenter(i);let r=0;for(let a=0,l=e.count;a<l;a++)Hr.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(Hr));if(t)for(let a=0,l=t.length;a<l;a++){const u=t[a],h=this.morphTargetsRelative;for(let p=0,g=u.count;p<g;p++)Hr.fromBufferAttribute(u,p),h&&(rp.fromBufferAttribute(e,p),Hr.add(rp)),r=Math.max(r,i.distanceToSquared(Hr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&Kt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Kt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new vi(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),u=[],h=[];for(let V=0;V<i.count;V++)u[V]=new ee,h[V]=new ee;const p=new ee,g=new ee,y=new ee,_=new Ye,b=new Ye,S=new Ye,A=new ee,w=new ee;function E(V,P,U){p.fromBufferAttribute(i,V),g.fromBufferAttribute(i,P),y.fromBufferAttribute(i,U),_.fromBufferAttribute(a,V),b.fromBufferAttribute(a,P),S.fromBufferAttribute(a,U),g.sub(p),y.sub(p),b.sub(_),S.sub(_);const W=1/(b.x*S.y-S.x*b.y);isFinite(W)&&(A.copy(g).multiplyScalar(S.y).addScaledVector(y,-b.y).multiplyScalar(W),w.copy(y).multiplyScalar(b.x).addScaledVector(g,-S.x).multiplyScalar(W),u[V].add(A),u[P].add(A),u[U].add(A),h[V].add(w),h[P].add(w),h[U].add(w))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let V=0,P=R.length;V<P;++V){const U=R[V],W=U.start,Q=U.count;for(let K=W,ne=W+Q;K<ne;K+=3)E(e.getX(K+0),e.getX(K+1),e.getX(K+2))}const D=new ee,I=new ee,L=new ee,N=new ee;function F(V){L.fromBufferAttribute(r,V),N.copy(L);const P=u[V];D.copy(P),D.sub(L.multiplyScalar(L.dot(P))).normalize(),I.crossVectors(N,P);const W=I.dot(h[V])<0?-1:1;l.setXYZW(V,D.x,D.y,D.z,W)}for(let V=0,P=R.length;V<P;++V){const U=R[V],W=U.start,Q=U.count;for(let K=W,ne=W+Q;K<ne;K+=3)F(e.getX(K+0)),F(e.getX(K+1)),F(e.getX(K+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new vi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let _=0,b=i.count;_<b;_++)i.setXYZ(_,0,0,0);const r=new ee,a=new ee,l=new ee,u=new ee,h=new ee,p=new ee,g=new ee,y=new ee;if(e)for(let _=0,b=e.count;_<b;_+=3){const S=e.getX(_+0),A=e.getX(_+1),w=e.getX(_+2);r.fromBufferAttribute(t,S),a.fromBufferAttribute(t,A),l.fromBufferAttribute(t,w),g.subVectors(l,a),y.subVectors(r,a),g.cross(y),u.fromBufferAttribute(i,S),h.fromBufferAttribute(i,A),p.fromBufferAttribute(i,w),u.add(g),h.add(g),p.add(g),i.setXYZ(S,u.x,u.y,u.z),i.setXYZ(A,h.x,h.y,h.z),i.setXYZ(w,p.x,p.y,p.z)}else for(let _=0,b=t.count;_<b;_+=3)r.fromBufferAttribute(t,_+0),a.fromBufferAttribute(t,_+1),l.fromBufferAttribute(t,_+2),g.subVectors(l,a),y.subVectors(r,a),g.cross(y),i.setXYZ(_+0,g.x,g.y,g.z),i.setXYZ(_+1,g.x,g.y,g.z),i.setXYZ(_+2,g.x,g.y,g.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Hr.fromBufferAttribute(e,t),Hr.normalize(),e.setXYZ(t,Hr.x,Hr.y,Hr.z)}toNonIndexed(){function e(u,h){const p=u.array,g=u.itemSize,y=u.normalized,_=new p.constructor(h.length*g);let b=0,S=0;for(let A=0,w=h.length;A<w;A++){u.isInterleavedBufferAttribute?b=h[A]*u.data.stride+u.offset:b=h[A]*g;for(let E=0;E<g;E++)_[S++]=p[b++]}return new vi(_,g,y)}if(this.index===null)return It("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mn,i=this.index.array,r=this.attributes;for(const u in r){const h=r[u],p=e(h,i);t.setAttribute(u,p)}const a=this.morphAttributes;for(const u in a){const h=[],p=a[u];for(let g=0,y=p.length;g<y;g++){const _=p[g],b=e(_,i);h.push(b)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const p in h)h[p]!==void 0&&(e[p]=h[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const h in i){const p=i[h];e.data.attributes[h]=p.toJSON(e.data)}const r={};let a=!1;for(const h in this.morphAttributes){const p=this.morphAttributes[h],g=[];for(let y=0,_=p.length;y<_;y++){const b=p[y];g.push(b.toJSON(e.data))}g.length>0&&(r[h]=g,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere=u.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const p in r){const g=r[p];this.setAttribute(p,g.clone(t))}const a=e.morphAttributes;for(const p in a){const g=[],y=a[p];for(let _=0,b=y.length;_<b;_++)g.push(y[_].clone(t));this.morphAttributes[p]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,g=l.length;p<g;p++){const y=l[p];this.addGroup(y.start,y.count,y.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gC=new hn,Qf=new zd,__=new rs,vC=new ee,b_=new ee,x_=new ee,S_=new ee,Y1=new ee,M_=new ee,yC=new ee,E_=new ee;class Gi extends ei{constructor(e=new Mn,t=new Gc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const u=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const u=this.morphTargetInfluences;if(a&&u){M_.set(0,0,0);for(let h=0,p=a.length;h<p;h++){const g=u[h],y=a[h];g!==0&&(Y1.fromBufferAttribute(y,e),l?M_.addScaledVector(Y1,g):M_.addScaledVector(Y1.sub(t),g))}t.add(M_)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),__.copy(i.boundingSphere),__.applyMatrix4(a),Qf.copy(e.ray).recast(e.near),!(__.containsPoint(Qf.origin)===!1&&(Qf.intersectSphere(__,vC)===null||Qf.origin.distanceToSquared(vC)>(e.far-e.near)**2))&&(gC.copy(a).invert(),Qf.copy(e.ray).applyMatrix4(gC),!(i.boundingBox!==null&&Qf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Qf)))}_computeIntersections(e,t,i){let r;const a=this.geometry,l=this.material,u=a.index,h=a.attributes.position,p=a.attributes.uv,g=a.attributes.uv1,y=a.attributes.normal,_=a.groups,b=a.drawRange;if(u!==null)if(Array.isArray(l))for(let S=0,A=_.length;S<A;S++){const w=_[S],E=l[w.materialIndex],R=Math.max(w.start,b.start),D=Math.min(u.count,Math.min(w.start+w.count,b.start+b.count));for(let I=R,L=D;I<L;I+=3){const N=u.getX(I),F=u.getX(I+1),V=u.getX(I+2);r=w_(this,E,e,i,p,g,y,N,F,V),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const S=Math.max(0,b.start),A=Math.min(u.count,b.start+b.count);for(let w=S,E=A;w<E;w+=3){const R=u.getX(w),D=u.getX(w+1),I=u.getX(w+2);r=w_(this,l,e,i,p,g,y,R,D,I),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(h!==void 0)if(Array.isArray(l))for(let S=0,A=_.length;S<A;S++){const w=_[S],E=l[w.materialIndex],R=Math.max(w.start,b.start),D=Math.min(h.count,Math.min(w.start+w.count,b.start+b.count));for(let I=R,L=D;I<L;I+=3){const N=I,F=I+1,V=I+2;r=w_(this,E,e,i,p,g,y,N,F,V),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const S=Math.max(0,b.start),A=Math.min(h.count,b.start+b.count);for(let w=S,E=A;w<E;w+=3){const R=w,D=w+1,I=w+2;r=w_(this,l,e,i,p,g,y,R,D,I),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function C4(n,e,t,i,r,a,l,u){let h;if(e.side===Ws?h=i.intersectTriangle(l,a,r,!0,u):h=i.intersectTriangle(r,a,l,e.side===Fc,u),h===null)return null;E_.copy(u),E_.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(E_);return p<t.near||p>t.far?null:{distance:p,point:E_.clone(),object:n}}function w_(n,e,t,i,r,a,l,u,h,p){n.getVertexPosition(u,b_),n.getVertexPosition(h,x_),n.getVertexPosition(p,S_);const g=C4(n,e,t,i,b_,x_,S_,yC);if(g){const y=new ee;ga.getBarycoord(yC,b_,x_,S_,y),r&&(g.uv=ga.getInterpolatedAttribute(r,u,h,p,y,new Ye)),a&&(g.uv1=ga.getInterpolatedAttribute(a,u,h,p,y,new Ye)),l&&(g.normal=ga.getInterpolatedAttribute(l,u,h,p,y,new ee),g.normal.dot(i.direction)>0&&g.normal.multiplyScalar(-1));const _={a:u,b:h,c:p,normal:new ee,materialIndex:0};ga.getNormal(b_,x_,S_,_.normal),g.face=_,g.barycoord=y}return g}class Fd extends Mn{constructor(e=1,t=1,i=1,r=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:l};const u=this;r=Math.floor(r),a=Math.floor(a),l=Math.floor(l);const h=[],p=[],g=[],y=[];let _=0,b=0;S("z","y","x",-1,-1,i,t,e,l,a,0),S("z","y","x",1,-1,i,t,-e,l,a,1),S("x","z","y",1,1,e,i,t,r,l,2),S("x","z","y",1,-1,e,i,-t,r,l,3),S("x","y","z",1,-1,e,t,i,r,a,4),S("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(h),this.setAttribute("position",new Gt(p,3)),this.setAttribute("normal",new Gt(g,3)),this.setAttribute("uv",new Gt(y,2));function S(A,w,E,R,D,I,L,N,F,V,P){const U=I/F,W=L/V,Q=I/2,K=L/2,ne=N/2,re=F+1,X=V+1;let J=0,ae=0;const Me=new ee;for(let Se=0;Se<X;Se++){const Y=Se*W-K;for(let pe=0;pe<re;pe++){const we=pe*U-Q;Me[A]=we*R,Me[w]=Y*D,Me[E]=ne,p.push(Me.x,Me.y,Me.z),Me[A]=0,Me[w]=0,Me[E]=N>0?1:-1,g.push(Me.x,Me.y,Me.z),y.push(pe/F),y.push(1-Se/V),J+=1}}for(let Se=0;Se<V;Se++)for(let Y=0;Y<F;Y++){const pe=_+Y+re*Se,we=_+Y+re*(Se+1),ke=_+(Y+1)+re*(Se+1),pt=_+(Y+1)+re*Se;h.push(pe,we,pt),h.push(we,ke,pt),ae+=6}u.addGroup(b,ae,P),b+=ae,_+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Gp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(It("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Fs(n){const e={};for(let t=0;t<n.length;t++){const i=Gp(n[t]);for(const r in i)e[r]=i[r]}return e}function R4(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function HO(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:$n.workingColorSpace}const GO={clone:Gp,merge:Fs};var D4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,O4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ss extends Ms{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=D4,this.fragmentShader=O4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gp(e.uniforms),this.uniformsGroups=R4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const l=this.uniforms[r].value;l&&l.isTexture?t.uniforms[r]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[r]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[r]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[r]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[r]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[r]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[r]={type:"m4",value:l.toArray()}:t.uniforms[r]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Jx extends ei{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hn,this.projectionMatrix=new hn,this.projectionMatrixInverse=new hn,this.coordinateSystem=Ta,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Vu=new ee,_C=new Ye,bC=new Ye;class vr extends Jx{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Vp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ed*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Vp*2*Math.atan(Math.tan(Ed*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Vu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Vu.x,Vu.y).multiplyScalar(-e/Vu.z),Vu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Vu.x,Vu.y).multiplyScalar(-e/Vu.z)}getViewSize(e,t){return this.getViewBounds(e,_C,bC),t.subVectors(bC,_C)}setViewOffset(e,t,i,r,a,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ed*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,p=l.fullHeight;a+=l.offsetX*r/h,t-=l.offsetY*i/p,r*=l.width/h,i*=l.height/p}const u=this.filmOffset;u!==0&&(a+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const sp=-90,ap=1;class WO extends ei{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new vr(sp,ap,e,t);r.layers=this.layers,this.add(r);const a=new vr(sp,ap,e,t);a.layers=this.layers,this.add(a);const l=new vr(sp,ap,e,t);l.layers=this.layers,this.add(l);const u=new vr(sp,ap,e,t);u.layers=this.layers,this.add(u);const h=new vr(sp,ap,e,t);h.layers=this.layers,this.add(h);const p=new vr(sp,ap,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,l,u,h]=t;for(const p of t)this.remove(p);if(e===Ta)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===Bp)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,l,u,h,p,g]=this.children,y=e.getRenderTarget(),_=e.getActiveCubeFace(),b=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,l),e.setRenderTarget(i,2,r),e.render(t,u),e.setRenderTarget(i,3,r),e.render(t,h),e.setRenderTarget(i,4,r),e.render(t,p),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,r),e.render(t,g),e.setRenderTarget(y,_,b),e.xr.enabled=S,i.texture.needsPMREMUpdate=!0}}class sv extends gi{constructor(e=[],t=jo,i,r,a,l,u,h,p,g){super(e,t,i,r,a,l,u,h,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class eS extends is{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new sv(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Fd(5,5,5),a=new ss({name:"CubemapFromEquirect",uniforms:Gp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ws,blending:$o});a.uniforms.tEquirect.value=t;const l=new Gi(r,a),u=t.minFilter;return t.minFilter===Ll&&(t.minFilter=qn),new WO(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,r);e.setRenderTarget(a)}}class Tp extends ei{constructor(){super(),this.isGroup=!0,this.type="Group"}}const I4={type:"move"};class gb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Tp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Tp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ee,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ee),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Tp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ee,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ee),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,l=null;const u=this._targetRay,h=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const A of e.hand.values()){const w=t.getJointPose(A,i),E=this._getHandJoint(p,A);w!==null&&(E.matrix.fromArray(w.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=w.radius),E.visible=w!==null}const g=p.joints["index-finger-tip"],y=p.joints["thumb-tip"],_=g.position.distanceTo(y.position),b=.02,S=.005;p.inputState.pinching&&_>b+S?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&_<=b-S&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(h.matrix.fromArray(a.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,a.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(a.linearVelocity)):h.hasLinearVelocity=!1,a.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(a.angularVelocity)):h.hasAngularVelocity=!1));u!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(I4)))}return u!==null&&(u.visible=r!==null),h!==null&&(h.visible=a!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Tp;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class tS{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Bt(e),this.density=t}clone(){return new tS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class nS{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Bt(e),this.near=t,this.far=i}clone(){return new nS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let av=class extends ei{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Oa,this.environmentIntensity=1,this.environmentRotation=new Oa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class iS{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=R0,this.updateRanges=[],this.version=0,this.uuid=Aa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Aa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Aa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Us=new ee;class Dd{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Us.fromBufferAttribute(this,t),Us.applyMatrix4(e),this.setXYZ(t,Us.x,Us.y,Us.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Us.fromBufferAttribute(this,t),Us.applyNormalMatrix(e),this.setXYZ(t,Us.x,Us.y,Us.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Us.fromBufferAttribute(this,t),Us.transformDirection(e),this.setXYZ(t,Us.x,Us.y,Us.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Hs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Dn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Dn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Hs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Hs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Hs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Hs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dn(t,this.array),i=Dn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dn(t,this.array),i=Dn(i,this.array),r=Dn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dn(t,this.array),i=Dn(i,this.array),r=Dn(r,this.array),a=Dn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){O0("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new vi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Dd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){O0("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class zw extends Ms{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let op;const Bg=new ee,lp=new ee,cp=new ee,up=new Ye,kg=new Ye,$O=new hn,T_=new ee,Vg=new ee,A_=new ee,xC=new Ye,Z1=new Ye,SC=new Ye;class jO extends ei{constructor(e=new zw){if(super(),this.isSprite=!0,this.type="Sprite",op===void 0){op=new Mn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new iS(t,5);op.setIndex([0,1,2,0,2,3]),op.setAttribute("position",new Dd(i,3,0,!1)),op.setAttribute("uv",new Dd(i,2,3,!1))}this.geometry=op,this.material=e,this.center=new Ye(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Kt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),lp.setFromMatrixScale(this.matrixWorld),$O.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),cp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&lp.multiplyScalar(-cp.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const l=this.center;C_(T_.set(-.5,-.5,0),cp,l,lp,r,a),C_(Vg.set(.5,-.5,0),cp,l,lp,r,a),C_(A_.set(.5,.5,0),cp,l,lp,r,a),xC.set(0,0),Z1.set(1,0),SC.set(1,1);let u=e.ray.intersectTriangle(T_,Vg,A_,!1,Bg);if(u===null&&(C_(Vg.set(-.5,.5,0),cp,l,lp,r,a),Z1.set(0,1),u=e.ray.intersectTriangle(T_,A_,Vg,!1,Bg),u===null))return;const h=e.ray.origin.distanceTo(Bg);h<e.near||h>e.far||t.push({distance:h,point:Bg.clone(),uv:ga.getInterpolation(Bg,T_,Vg,A_,xC,Z1,SC,new Ye),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function C_(n,e,t,i,r,a){up.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(kg.x=a*up.x-r*up.y,kg.y=r*up.x+a*up.y):kg.copy(up),n.copy(e),n.x+=kg.x,n.y+=kg.y,n.applyMatrix4($O)}const R_=new ee,MC=new ee;class XO extends ei{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){R_.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(R_);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){R_.setFromMatrixPosition(e.matrixWorld),MC.setFromMatrixPosition(this.matrixWorld);const i=R_.distanceTo(MC)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let l=t[r].distance;if(t[r].object.visible&&(l-=l*t[r].hysteresis),i>=l)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const l=i[r];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const EC=new ee,wC=new Si,TC=new Si,P4=new ee,AC=new hn,D_=new ee,K1=new rs,CC=new hn,Q1=new zd;class qO extends Gi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yE,this.bindMatrix=new hn,this.bindMatrixInverse=new hn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ss),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,D_),this.boundingBox.expandByPoint(D_)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new rs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,D_),this.boundingSphere.expandByPoint(D_)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),K1.copy(this.boundingSphere),K1.applyMatrix4(r),e.ray.intersectsSphere(K1)!==!1&&(CC.copy(r).invert(),Q1.copy(e.ray).applyMatrix4(CC),!(this.boundingBox!==null&&Q1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Q1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Si,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===yE?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===wO?this.bindMatrixInverse.copy(this.bindMatrix).invert():It("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;wC.fromBufferAttribute(r.attributes.skinIndex,e),TC.fromBufferAttribute(r.attributes.skinWeight,e),EC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const l=TC.getComponent(a);if(l!==0){const u=wC.getComponent(a);AC.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(P4.copy(EC).applyMatrix4(AC),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Fw extends ei{constructor(){super(),this.isBone=!0,this.type="Bone"}}class po extends gi{constructor(e=null,t=1,i=1,r,a,l,u,h,p=yr,g=yr,y,_){super(null,l,u,h,p,g,r,a,y,_),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const RC=new hn,N4=new hn;class rS{constructor(e=[],t=[]){this.uuid=Aa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){It("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new hn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new hn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,l=e.length;a<l;a++){const u=e[a]?e[a].matrixWorld:N4;RC.multiplyMatrices(u,t[a]),RC.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new rS(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new po(t,e,e,_r,Hi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let l=t[a];l===void 0&&(It("Skeleton: No bone found with UUID:",a),l=new Fw),this.bones.push(l),this.boneInverses.push(new hn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const l=t[r];e.bones.push(l.uuid);const u=i[r];e.boneInverses.push(u.toArray())}return e}}class Wp extends vi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const fp=new hn,DC=new hn,O_=[],OC=new Ss,L4=new hn,Hg=new Gi,Gg=new rs;class YO extends Gi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Wp(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,L4)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ss),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,fp),OC.copy(e.boundingBox).applyMatrix4(fp),this.boundingBox.union(OC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new rs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,fp),Gg.copy(e.boundingSphere).applyMatrix4(fp),this.boundingSphere.union(Gg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,l=e*a+1;for(let u=0;u<i.length;u++)i[u]=r[l+u]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Hg.geometry=this.geometry,Hg.material=this.material,Hg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gg.copy(this.boundingSphere),Gg.applyMatrix4(i),e.ray.intersectsSphere(Gg)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,fp),DC.multiplyMatrices(i,fp),Hg.matrixWorld=DC,Hg.raycast(e,O_);for(let l=0,u=O_.length;l<u;l++){const h=O_[l];h.instanceId=a,h.object=this,t.push(h)}O_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Wp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new po(new Float32Array(r*this.count),r,this.count,iv,Hi));const a=this.morphTexture.source.data.data;let l=0;for(let p=0;p<i.length;p++)l+=i[p];const u=this.geometry.morphTargetsRelative?1:1-l,h=r*e;a[h]=u,a.set(i,h+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const J1=new ee,U4=new ee,z4=new Tn;class Dc{constructor(e=new ee(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=J1.subVectors(i,t).cross(U4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(J1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||z4.getNormalMatrix(e),r=this.coplanarPoint(J1).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Jf=new rs,F4=new Ye(.5,.5),I_=new ee;class em{constructor(e=new Dc,t=new Dc,i=new Dc,r=new Dc,a=new Dc,l=new Dc){this.planes=[e,t,i,r,a,l]}set(e,t,i,r,a,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(r),u[4].copy(a),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ta,i=!1){const r=this.planes,a=e.elements,l=a[0],u=a[1],h=a[2],p=a[3],g=a[4],y=a[5],_=a[6],b=a[7],S=a[8],A=a[9],w=a[10],E=a[11],R=a[12],D=a[13],I=a[14],L=a[15];if(r[0].setComponents(p-l,b-g,E-S,L-R).normalize(),r[1].setComponents(p+l,b+g,E+S,L+R).normalize(),r[2].setComponents(p+u,b+y,E+A,L+D).normalize(),r[3].setComponents(p-u,b-y,E-A,L-D).normalize(),i)r[4].setComponents(h,_,w,I).normalize(),r[5].setComponents(p-h,b-_,E-w,L-I).normalize();else if(r[4].setComponents(p-h,b-_,E-w,L-I).normalize(),t===Ta)r[5].setComponents(p+h,b+_,E+w,L+I).normalize();else if(t===Bp)r[5].setComponents(h,_,w,I).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Jf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Jf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Jf)}intersectsSprite(e){Jf.center.set(0,0,0);const t=F4.distanceTo(e.center);return Jf.radius=.7071067811865476+t,Jf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Jf)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(I_.x=r.normal.x>0?e.max.x:e.min.x,I_.y=r.normal.y>0?e.max.y:e.min.y,I_.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(I_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Al=new hn,Cl=new em;class sS{constructor(){this.coordinateSystem=Ta}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Al.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Al,r.coordinateSystem,r.reversedDepth),Cl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Al.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Al,r.coordinateSystem,r.reversedDepth),Cl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Al.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Al,r.coordinateSystem,r.reversedDepth),Cl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Al.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Al,r.coordinateSystem,r.reversedDepth),Cl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Al.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Al,r.coordinateSystem,r.reversedDepth),Cl.containsPoint(e))return!0}return!1}clone(){return new sS}}function eM(n,e){return n-e}function B4(n,e){return n.z-e.z}function k4(n,e){return e.z-n.z}class V4{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,l=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const u=a[this.index];l.push(u),this.index++,u.start=e,u.count=t,u.z=i,u.index=r}reset(){this.list.length=0,this.index=0}}const ha=new hn,H4=new Bt(1,1,1),IC=new em,G4=new sS,P_=new Ss,ed=new rs,Wg=new ee,PC=new ee,W4=new ee,tM=new V4,_s=new Gi,N_=[];function $4(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let l=0;l<i;l++)e.setComponent(a+t,l,n.getComponent(a,l))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function td(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class ZO extends Gi{constructor(e,t,i=t*2,r){super(new Mn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new po(t,e,e,_r,Hi);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new po(t,e,e,rv,Da);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new po(t,e,e,_r,Hi);i.colorSpace=$n.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:u,itemSize:h,normalized:p}=l,g=new u.constructor(i*h),y=new vi(g,h,p);t.setAttribute(a,y)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new vi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ss);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,ha),this.getBoundingBoxAt(a,P_).applyMatrix4(ha),e.union(P_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new rs);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,ha),this.getBoundingSphereAt(a,ed).applyMatrix4(ha),e.union(ed)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(eM),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;ha.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const l=this._colorsTexture;return l&&(H4.toArray(l.image.data,r*4),l.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?l.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let h;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(eM),h=this._availableGeometryIds.shift(),a[h]=r):(h=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(h,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,h}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),l=t.getIndex(),u=this._geometryInfo[e];if(r&&l.count>u.reservedIndexCount||t.attributes.position.count>u.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const h=u.vertexStart,p=u.reservedVertexCount;u.vertexCount=t.getAttribute("position").count;for(const g in i.attributes){const y=t.getAttribute(g),_=i.getAttribute(g);$4(y,_,h);const b=y.itemSize;for(let S=y.count,A=p;S<A;S++){const w=h+S;for(let E=0;E<b;E++)_.setComponent(w,E,0)}_.needsUpdate=!0,_.addUpdateRange(h*b,p*b)}if(r){const g=u.indexStart,y=u.reservedIndexCount;u.indexCount=t.getIndex().count;for(let _=0;_<l.count;_++)a.setX(g+_,h+l.getX(_));for(let _=l.count,b=y;_<b;_++)a.setX(g+_,h);a.needsUpdate=!0,a.addUpdateRange(g,u.reservedIndexCount)}return u.start=r?u.indexStart:u.vertexStart,u.count=r?u.indexCount:u.vertexCount,u.boundingBox=null,t.boundingBox!==null&&(u.boundingBox=t.boundingBox.clone()),u.boundingSphere=null,t.boundingSphere!==null&&(u.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((l,u)=>u).sort((l,u)=>i[l].vertexStart-i[u].vertexStart),a=this.geometry;for(let l=0,u=i.length;l<u;l++){const h=r[l],p=i[h];if(p.active!==!1){if(a.index!==null){if(p.indexStart!==t){const{indexStart:g,vertexStart:y,reservedIndexCount:_}=p,b=a.index,S=b.array,A=e-y;for(let w=g;w<g+_;w++)S[w]=S[w]+A;b.array.copyWithin(t,g,g+_),b.addUpdateRange(t,_),b.needsUpdate=!0,p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:g,reservedVertexCount:y}=p,_=a.attributes;for(const b in _){const S=_[b],{array:A,itemSize:w}=S;A.copyWithin(e*w,g*w,(g+y)*w),S.addUpdateRange(e*w,y*w),S.needsUpdate=!0}p.vertexStart=e}e+=p.reservedVertexCount,p.start=a.index?p.indexStart:p.vertexStart,this._nextIndexStart=a.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new Ss,l=i.index,u=i.attributes.position;for(let h=r.start,p=r.start+r.count;h<p;h++){let g=h;l&&(g=l.getX(g)),a.expandByPoint(Wg.fromBufferAttribute(u,g))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new rs;this.getBoundingBoxAt(e,P_),P_.getCenter(a.center);const l=i.index,u=i.attributes.position;let h=0;for(let p=r.start,g=r.start+r.count;p<g;p++){let y=p;l&&(y=l.getX(y)),Wg.fromBufferAttribute(u,y),h=Math.max(h,a.center.distanceToSquared(Wg))}a.radius=Math.sqrt(h),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(eM);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);td(this._multiDrawCounts,r),td(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const l=this._indirectTexture,u=this._matricesTexture,h=this._colorsTexture;l.dispose(),this._initIndirectTexture(),td(l.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),td(u.image.data,this._matricesTexture.image.data),h&&(h.dispose(),this._initColorsTexture(),td(h.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(u=>u.active);if(Math.max(...i.map(u=>u.vertexStart+u.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(h=>h.indexStart+h.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Mn,this._initializeGeometry(a));const l=this.geometry;a.index&&td(a.index.array,l.index.array);for(const u in a.attributes)td(a.attributes[u].array,l.attributes[u].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,l=this.geometry;_s.material=this.material,_s.geometry.index=l.index,_s.geometry.attributes=l.attributes,_s.geometry.boundingBox===null&&(_s.geometry.boundingBox=new Ss),_s.geometry.boundingSphere===null&&(_s.geometry.boundingSphere=new rs);for(let u=0,h=i.length;u<h;u++){if(!i[u].visible||!i[u].active)continue;const p=i[u].geometryIndex,g=r[p];_s.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(u,_s.matrixWorld).premultiply(a),this.getBoundingBoxAt(p,_s.geometry.boundingBox),this.getBoundingSphereAt(p,_s.geometry.boundingSphere),_s.raycast(e,N_);for(let y=0,_=N_.length;y<_;y++){const b=N_[y];b.object=this,b.batchId=u,t.push(b)}N_.length=0}_s.material=null,_s.geometry.index=null,_s.geometry.attributes={},_s.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=r.getIndex(),u=l===null?1:l.array.BYTES_PER_ELEMENT,h=this._instanceInfo,p=this._multiDrawStarts,g=this._multiDrawCounts,y=this._geometryInfo,_=this.perObjectFrustumCulled,b=this._indirectTexture,S=b.image.data,A=i.isArrayCamera?G4:IC;_&&!i.isArrayCamera&&(ha.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),IC.setFromProjectionMatrix(ha,i.coordinateSystem,i.reversedDepth));let w=0;if(this.sortObjects){ha.copy(this.matrixWorld).invert(),Wg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(ha),PC.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(ha);for(let D=0,I=h.length;D<I;D++)if(h[D].visible&&h[D].active){const L=h[D].geometryIndex;this.getMatrixAt(D,ha),this.getBoundingSphereAt(L,ed).applyMatrix4(ha);let N=!1;if(_&&(N=!A.intersectsSphere(ed,i)),!N){const F=y[L],V=W4.subVectors(ed.center,Wg).dot(PC);tM.push(F.start,F.count,V,D)}}const E=tM.list,R=this.customSort;R===null?E.sort(a.transparent?k4:B4):R.call(this,E,i);for(let D=0,I=E.length;D<I;D++){const L=E[D];p[w]=L.start*u,g[w]=L.count,S[w]=L.index,w++}tM.reset()}else for(let E=0,R=h.length;E<R;E++)if(h[E].visible&&h[E].active){const D=h[E].geometryIndex;let I=!1;if(_&&(this.getMatrixAt(E,ha),this.getBoundingSphereAt(D,ed).applyMatrix4(ha),I=!A.intersectsSphere(ed,i)),!I){const L=y[D];p[w]=L.start*u,g[w]=L.count,S[w]=E,w++}}b.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,l){this.onBeforeRender(e,null,r,a,l)}}class $s extends Ms{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ux=new ee,fx=new ee,NC=new hn,$g=new zd,L_=new rs,nM=new ee,LC=new ee;class nf extends ei{constructor(e=new Mn,t=new $s){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)ux.fromBufferAttribute(t,r-1),fx.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=ux.distanceTo(fx);e.setAttribute("lineDistance",new Gt(i,1))}else It("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),L_.copy(i.boundingSphere),L_.applyMatrix4(r),L_.radius+=a,e.ray.intersectsSphere(L_)===!1)return;NC.copy(r).invert(),$g.copy(e.ray).applyMatrix4(NC);const u=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,p=this.isLineSegments?2:1,g=i.index,_=i.attributes.position;if(g!==null){const b=Math.max(0,l.start),S=Math.min(g.count,l.start+l.count);for(let A=b,w=S-1;A<w;A+=p){const E=g.getX(A),R=g.getX(A+1),D=U_(this,e,$g,h,E,R,A);D&&t.push(D)}if(this.isLineLoop){const A=g.getX(S-1),w=g.getX(b),E=U_(this,e,$g,h,A,w,S-1);E&&t.push(E)}}else{const b=Math.max(0,l.start),S=Math.min(_.count,l.start+l.count);for(let A=b,w=S-1;A<w;A+=p){const E=U_(this,e,$g,h,A,A+1,A);E&&t.push(E)}if(this.isLineLoop){const A=U_(this,e,$g,h,S-1,b,S-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const u=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}}function U_(n,e,t,i,r,a,l){const u=n.geometry.attributes.position;if(ux.fromBufferAttribute(u,r),fx.fromBufferAttribute(u,a),t.distanceSqToSegment(ux,fx,nM,LC)>i)return;nM.applyMatrix4(n.matrixWorld);const p=e.ray.origin.distanceTo(nM);if(!(p<e.near||p>e.far))return{distance:p,point:LC.clone().applyMatrix4(n.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:n}}const UC=new ee,zC=new ee;class Wl extends nf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)UC.fromBufferAttribute(t,r),zC.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+UC.distanceTo(zC);e.setAttribute("lineDistance",new Gt(i,1))}else It("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class KO extends nf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Bw extends Ms{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const FC=new hn,SE=new zd,z_=new rs,F_=new ee;class QO extends ei{constructor(e=new Mn,t=new Bw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),z_.copy(i.boundingSphere),z_.applyMatrix4(r),z_.radius+=a,e.ray.intersectsSphere(z_)===!1)return;FC.copy(r).invert(),SE.copy(e.ray).applyMatrix4(FC);const u=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,p=i.index,y=i.attributes.position;if(p!==null){const _=Math.max(0,l.start),b=Math.min(p.count,l.start+l.count);for(let S=_,A=b;S<A;S++){const w=p.getX(S);F_.fromBufferAttribute(y,w),BC(F_,w,h,r,e,t,this)}}else{const _=Math.max(0,l.start),b=Math.min(y.count,l.start+l.count);for(let S=_,A=b;S<A;S++)F_.fromBufferAttribute(y,S),BC(F_,S,h,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const u=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}}function BC(n,e,t,i,r,a,l){const u=SE.distanceSqToPoint(n);if(u<t){const h=new ee;SE.closestPointToPoint(n,h),h.applyMatrix4(i);const p=r.ray.origin.distanceTo(h);if(p<r.near||p>r.far)return;a.push({distance:p,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class JO extends gi{constructor(e,t,i,r,a=qn,l=qn,u,h,p){super(e,t,i,r,a,l,u,h,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const g=this;function y(){g.needsUpdate=!0,g._requestVideoFrameCallbackId=e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(y))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class j4 extends JO{constructor(e,t,i,r,a,l,u,h){super({},e,t,i,r,a,l,u,h),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class X4 extends gi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=yr,this.minFilter=yr,this.generateMipmaps=!1,this.needsUpdate=!0}}class aS extends gi{constructor(e,t,i,r,a,l,u,h,p,g,y,_){super(null,l,u,h,p,g,r,a,y,_),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class q4 extends aS{constructor(e,t,i,r,a,l){super(e,t,i,a,l),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ar,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Y4 extends aS{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,jo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class kw extends gi{constructor(e,t,i,r,a,l,u,h,p){super(e,t,i,r,a,l,u,h,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class $p extends gi{constructor(e,t,i=Da,r,a,l,u=yr,h=yr,p,g=kl,y=1){if(g!==kl&&g!==ju)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const _={width:e,height:t,depth:y};super(_,r,a,l,u,h,g,i,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Xu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class eI extends $p{constructor(e,t=Da,i=jo,r,a,l=yr,u=yr,h,p=kl){const g={width:e,height:e,depth:1},y=[g,g,g,g,g,g];super(e,e,t,i,r,a,l,u,h,p),this.image=y,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class Vw extends gi{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class oS extends Mn{constructor(e=1,t=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const l=[],u=[],h=[],p=[],g=t/2,y=Math.PI/2*e,_=t,b=2*y+_,S=i*2+a,A=r+1,w=new ee,E=new ee;for(let R=0;R<=S;R++){let D=0,I=0,L=0,N=0;if(R<=i){const P=R/i,U=P*Math.PI/2;I=-g-e*Math.cos(U),L=e*Math.sin(U),N=-e*Math.cos(U),D=P*y}else if(R<=i+a){const P=(R-i)/a;I=-g+P*t,L=e,N=0,D=y+P*_}else{const P=(R-i-a)/i,U=P*Math.PI/2;I=g+e*Math.sin(U),L=e*Math.cos(U),N=e*Math.sin(U),D=y+_+P*y}const F=Math.max(0,Math.min(1,D/b));let V=0;R===0?V=.5/r:R===S&&(V=-.5/r);for(let P=0;P<=r;P++){const U=P/r,W=U*Math.PI*2,Q=Math.sin(W),K=Math.cos(W);E.x=-L*K,E.y=I,E.z=L*Q,u.push(E.x,E.y,E.z),w.set(-L*K,N,L*Q),w.normalize(),h.push(w.x,w.y,w.z),p.push(U+V,F)}if(R>0){const P=(R-1)*A;for(let U=0;U<r;U++){const W=P+U,Q=P+U+1,K=R*A+U,ne=R*A+U+1;l.push(W,Q,K),l.push(Q,ne,K)}}}this.setIndex(l),this.setAttribute("position",new Gt(u,3)),this.setAttribute("normal",new Gt(h,3)),this.setAttribute("uv",new Gt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oS(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class lS extends Mn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],l=[],u=[],h=[],p=new ee,g=new Ye;l.push(0,0,0),u.push(0,0,1),h.push(.5,.5);for(let y=0,_=3;y<=t;y++,_+=3){const b=i+y/t*r;p.x=e*Math.cos(b),p.y=e*Math.sin(b),l.push(p.x,p.y,p.z),u.push(0,0,1),g.x=(l[_]/e+1)/2,g.y=(l[_+1]/e+1)/2,h.push(g.x,g.y)}for(let y=1;y<=t;y++)a.push(y,y+1,0);this.setIndex(a),this.setAttribute("position",new Gt(l,3)),this.setAttribute("normal",new Gt(u,3)),this.setAttribute("uv",new Gt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ov extends Mn{constructor(e=1,t=1,i=1,r=32,a=1,l=!1,u=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:l,thetaStart:u,thetaLength:h};const p=this;r=Math.floor(r),a=Math.floor(a);const g=[],y=[],_=[],b=[];let S=0;const A=[],w=i/2;let E=0;R(),l===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(g),this.setAttribute("position",new Gt(y,3)),this.setAttribute("normal",new Gt(_,3)),this.setAttribute("uv",new Gt(b,2));function R(){const I=new ee,L=new ee;let N=0;const F=(t-e)/i;for(let V=0;V<=a;V++){const P=[],U=V/a,W=U*(t-e)+e;for(let Q=0;Q<=r;Q++){const K=Q/r,ne=K*h+u,re=Math.sin(ne),X=Math.cos(ne);L.x=W*re,L.y=-U*i+w,L.z=W*X,y.push(L.x,L.y,L.z),I.set(re,F,X).normalize(),_.push(I.x,I.y,I.z),b.push(K,1-U),P.push(S++)}A.push(P)}for(let V=0;V<r;V++)for(let P=0;P<a;P++){const U=A[P][V],W=A[P+1][V],Q=A[P+1][V+1],K=A[P][V+1];(e>0||P!==0)&&(g.push(U,W,K),N+=3),(t>0||P!==a-1)&&(g.push(W,Q,K),N+=3)}p.addGroup(E,N,0),E+=N}function D(I){const L=S,N=new Ye,F=new ee;let V=0;const P=I===!0?e:t,U=I===!0?1:-1;for(let Q=1;Q<=r;Q++)y.push(0,w*U,0),_.push(0,U,0),b.push(.5,.5),S++;const W=S;for(let Q=0;Q<=r;Q++){const ne=Q/r*h+u,re=Math.cos(ne),X=Math.sin(ne);F.x=P*X,F.y=w*U,F.z=P*re,y.push(F.x,F.y,F.z),_.push(0,U,0),N.x=re*.5+.5,N.y=X*.5*U+.5,b.push(N.x,N.y),S++}for(let Q=0;Q<r;Q++){const K=L+Q,ne=W+Q;I===!0?g.push(ne,ne+1,K):g.push(ne+1,ne,K),V+=3}p.addGroup(E,V,I===!0?1:2),E+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ov(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lv extends ov{constructor(e=1,t=1,i=32,r=1,a=!1,l=0,u=Math.PI*2){super(0,e,t,i,r,a,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:u}}static fromJSON(e){return new lv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class cf extends Mn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],l=[];u(r),p(i),g(),this.setAttribute("position",new Gt(a,3)),this.setAttribute("normal",new Gt(a.slice(),3)),this.setAttribute("uv",new Gt(l,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function u(R){const D=new ee,I=new ee,L=new ee;for(let N=0;N<t.length;N+=3)b(t[N+0],D),b(t[N+1],I),b(t[N+2],L),h(D,I,L,R)}function h(R,D,I,L){const N=L+1,F=[];for(let V=0;V<=N;V++){F[V]=[];const P=R.clone().lerp(I,V/N),U=D.clone().lerp(I,V/N),W=N-V;for(let Q=0;Q<=W;Q++)Q===0&&V===N?F[V][Q]=P:F[V][Q]=P.clone().lerp(U,Q/W)}for(let V=0;V<N;V++)for(let P=0;P<2*(N-V)-1;P++){const U=Math.floor(P/2);P%2===0?(_(F[V][U+1]),_(F[V+1][U]),_(F[V][U])):(_(F[V][U+1]),_(F[V+1][U+1]),_(F[V+1][U]))}}function p(R){const D=new ee;for(let I=0;I<a.length;I+=3)D.x=a[I+0],D.y=a[I+1],D.z=a[I+2],D.normalize().multiplyScalar(R),a[I+0]=D.x,a[I+1]=D.y,a[I+2]=D.z}function g(){const R=new ee;for(let D=0;D<a.length;D+=3){R.x=a[D+0],R.y=a[D+1],R.z=a[D+2];const I=w(R)/2/Math.PI+.5,L=E(R)/Math.PI+.5;l.push(I,1-L)}S(),y()}function y(){for(let R=0;R<l.length;R+=6){const D=l[R+0],I=l[R+2],L=l[R+4],N=Math.max(D,I,L),F=Math.min(D,I,L);N>.9&&F<.1&&(D<.2&&(l[R+0]+=1),I<.2&&(l[R+2]+=1),L<.2&&(l[R+4]+=1))}}function _(R){a.push(R.x,R.y,R.z)}function b(R,D){const I=R*3;D.x=e[I+0],D.y=e[I+1],D.z=e[I+2]}function S(){const R=new ee,D=new ee,I=new ee,L=new ee,N=new Ye,F=new Ye,V=new Ye;for(let P=0,U=0;P<a.length;P+=9,U+=6){R.set(a[P+0],a[P+1],a[P+2]),D.set(a[P+3],a[P+4],a[P+5]),I.set(a[P+6],a[P+7],a[P+8]),N.set(l[U+0],l[U+1]),F.set(l[U+2],l[U+3]),V.set(l[U+4],l[U+5]),L.copy(R).add(D).add(I).divideScalar(3);const W=w(L);A(N,U+0,R,W),A(F,U+2,D,W),A(V,U+4,I,W)}}function A(R,D,I,L){L<0&&R.x===1&&(l[D]=R.x-1),I.x===0&&I.z===0&&(l[D]=L/2/Math.PI+.5)}function w(R){return Math.atan2(R.z,-R.x)}function E(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cf(e.vertices,e.indices,e.radius,e.detail)}}class cS extends cf{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cS(e.radius,e.detail)}}const B_=new ee,k_=new ee,iM=new ee,V_=new ga;class tI extends Mn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(Ed*t),l=e.getIndex(),u=e.getAttribute("position"),h=l?l.count:u.count,p=[0,0,0],g=["a","b","c"],y=new Array(3),_={},b=[];for(let S=0;S<h;S+=3){l?(p[0]=l.getX(S),p[1]=l.getX(S+1),p[2]=l.getX(S+2)):(p[0]=S,p[1]=S+1,p[2]=S+2);const{a:A,b:w,c:E}=V_;if(A.fromBufferAttribute(u,p[0]),w.fromBufferAttribute(u,p[1]),E.fromBufferAttribute(u,p[2]),V_.getNormal(iM),y[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,y[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,y[2]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let R=0;R<3;R++){const D=(R+1)%3,I=y[R],L=y[D],N=V_[g[R]],F=V_[g[D]],V=`${I}_${L}`,P=`${L}_${I}`;P in _&&_[P]?(iM.dot(_[P].normal)<=a&&(b.push(N.x,N.y,N.z),b.push(F.x,F.y,F.z)),_[P]=null):V in _||(_[V]={index0:p[R],index1:p[D],normal:iM.clone()})}}for(const S in _)if(_[S]){const{index0:A,index1:w}=_[S];B_.fromBufferAttribute(u,A),k_.fromBufferAttribute(u,w),b.push(B_.x,B_.y,B_.z),b.push(k_.x,k_.y,k_.z)}this.setAttribute("position",new Gt(b,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ko{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){It("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let l;t?l=t:l=e*i[a-1];let u=0,h=a-1,p;for(;u<=h;)if(r=Math.floor(u+(h-u)/2),p=i[r]-l,p<0)u=r+1;else if(p>0)h=r-1;else{h=r;break}if(r=h,i[r]===l)return r/(a-1);const g=i[r],_=i[r+1]-g,b=(l-g)/_;return(r+b)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const l=this.getPoint(r),u=this.getPoint(a),h=t||(l.isVector2?new Ye:new ee);return h.copy(u).sub(l).normalize(),h}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new ee,r=[],a=[],l=[],u=new ee,h=new hn;for(let b=0;b<=e;b++){const S=b/e;r[b]=this.getTangentAt(S,new ee)}a[0]=new ee,l[0]=new ee;let p=Number.MAX_VALUE;const g=Math.abs(r[0].x),y=Math.abs(r[0].y),_=Math.abs(r[0].z);g<=p&&(p=g,i.set(1,0,0)),y<=p&&(p=y,i.set(0,1,0)),_<=p&&i.set(0,0,1),u.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],u),l[0].crossVectors(r[0],a[0]);for(let b=1;b<=e;b++){if(a[b]=a[b-1].clone(),l[b]=l[b-1].clone(),u.crossVectors(r[b-1],r[b]),u.length()>Number.EPSILON){u.normalize();const S=Math.acos(fn(r[b-1].dot(r[b]),-1,1));a[b].applyMatrix4(h.makeRotationAxis(u,S))}l[b].crossVectors(r[b],a[b])}if(t===!0){let b=Math.acos(fn(a[0].dot(a[e]),-1,1));b/=e,r[0].dot(u.crossVectors(a[0],a[e]))>0&&(b=-b);for(let S=1;S<=e;S++)a[S].applyMatrix4(h.makeRotationAxis(r[S],b*S)),l[S].crossVectors(r[S],a[S])}return{tangents:r,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class uS extends Ko{constructor(e=0,t=0,i=1,r=1,a=0,l=Math.PI*2,u=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=u,this.aRotation=h}getPoint(e,t=new Ye){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(l?a=0:a=r),this.aClockwise===!0&&!l&&(a===r?a=-r:a=a-r);const u=this.aStartAngle+e*a;let h=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const g=Math.cos(this.aRotation),y=Math.sin(this.aRotation),_=h-this.aX,b=p-this.aY;h=_*g-b*y+this.aX,p=_*y+b*g+this.aY}return i.set(h,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class nI extends uS{constructor(e,t,i,r,a,l){super(e,t,i,i,r,a,l),this.isArcCurve=!0,this.type="ArcCurve"}}function Hw(){let n=0,e=0,t=0,i=0;function r(a,l,u,h){n=a,e=u,t=-3*a+3*l-2*u-h,i=2*a-2*l+u+h}return{initCatmullRom:function(a,l,u,h,p){r(l,u,p*(u-a),p*(h-l))},initNonuniformCatmullRom:function(a,l,u,h,p,g,y){let _=(l-a)/p-(u-a)/(p+g)+(u-l)/g,b=(u-l)/g-(h-l)/(g+y)+(h-u)/y;_*=g,b*=g,r(l,u,_,b)},calc:function(a){const l=a*a,u=l*a;return n+e*a+t*l+i*u}}}const H_=new ee,rM=new Hw,sM=new Hw,aM=new Hw;class iI extends Ko{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ee){const i=t,r=this.points,a=r.length,l=(a-(this.closed?0:1))*e;let u=Math.floor(l),h=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:h===0&&u===a-1&&(u=a-2,h=1);let p,g;this.closed||u>0?p=r[(u-1)%a]:(H_.subVectors(r[0],r[1]).add(r[0]),p=H_);const y=r[u%a],_=r[(u+1)%a];if(this.closed||u+2<a?g=r[(u+2)%a]:(H_.subVectors(r[a-1],r[a-2]).add(r[a-1]),g=H_),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let S=Math.pow(p.distanceToSquared(y),b),A=Math.pow(y.distanceToSquared(_),b),w=Math.pow(_.distanceToSquared(g),b);A<1e-4&&(A=1),S<1e-4&&(S=A),w<1e-4&&(w=A),rM.initNonuniformCatmullRom(p.x,y.x,_.x,g.x,S,A,w),sM.initNonuniformCatmullRom(p.y,y.y,_.y,g.y,S,A,w),aM.initNonuniformCatmullRom(p.z,y.z,_.z,g.z,S,A,w)}else this.curveType==="catmullrom"&&(rM.initCatmullRom(p.x,y.x,_.x,g.x,this.tension),sM.initCatmullRom(p.y,y.y,_.y,g.y,this.tension),aM.initCatmullRom(p.z,y.z,_.z,g.z,this.tension));return i.set(rM.calc(h),sM.calc(h),aM.calc(h)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ee().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function kC(n,e,t,i,r){const a=(i-e)*.5,l=(r-t)*.5,u=n*n,h=n*u;return(2*t-2*i+a+l)*h+(-3*t+3*i-2*a-l)*u+a*n+t}function Z4(n,e){const t=1-n;return t*t*e}function K4(n,e){return 2*(1-n)*n*e}function Q4(n,e){return n*n*e}function p0(n,e,t,i){return Z4(n,e)+K4(n,t)+Q4(n,i)}function J4(n,e){const t=1-n;return t*t*t*e}function eF(n,e){const t=1-n;return 3*t*t*n*e}function tF(n,e){return 3*(1-n)*n*n*e}function nF(n,e){return n*n*n*e}function m0(n,e,t,i,r){return J4(n,e)+eF(n,t)+tF(n,i)+nF(n,r)}class Gw extends Ko{constructor(e=new Ye,t=new Ye,i=new Ye,r=new Ye){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ye){const i=t,r=this.v0,a=this.v1,l=this.v2,u=this.v3;return i.set(m0(e,r.x,a.x,l.x,u.x),m0(e,r.y,a.y,l.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rI extends Ko{constructor(e=new ee,t=new ee,i=new ee,r=new ee){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ee){const i=t,r=this.v0,a=this.v1,l=this.v2,u=this.v3;return i.set(m0(e,r.x,a.x,l.x,u.x),m0(e,r.y,a.y,l.y,u.y),m0(e,r.z,a.z,l.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ww extends Ko{constructor(e=new Ye,t=new Ye){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ye){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ye){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sI extends Ko{constructor(e=new ee,t=new ee){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ee){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ee){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $w extends Ko{constructor(e=new Ye,t=new Ye,i=new Ye){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ye){const i=t,r=this.v0,a=this.v1,l=this.v2;return i.set(p0(e,r.x,a.x,l.x),p0(e,r.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jw extends Ko{constructor(e=new ee,t=new ee,i=new ee){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ee){const i=t,r=this.v0,a=this.v1,l=this.v2;return i.set(p0(e,r.x,a.x,l.x),p0(e,r.y,a.y,l.y),p0(e,r.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Xw extends Ko{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ye){const i=t,r=this.points,a=(r.length-1)*e,l=Math.floor(a),u=a-l,h=r[l===0?l:l-1],p=r[l],g=r[l>r.length-2?r.length-1:l+1],y=r[l>r.length-3?r.length-1:l+2];return i.set(kC(u,h.x,p.x,g.x,y.x),kC(u,h.y,p.y,g.y,y.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ye().fromArray(r))}return this}}var dx=Object.freeze({__proto__:null,ArcCurve:nI,CatmullRomCurve3:iI,CubicBezierCurve:Gw,CubicBezierCurve3:rI,EllipseCurve:uS,LineCurve:Ww,LineCurve3:sI,QuadraticBezierCurve:$w,QuadraticBezierCurve3:jw,SplineCurve:Xw});class aI extends Ko{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new dx[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const l=r[a]-i,u=this.curves[a],h=u.getLength(),p=h===0?0:1-l/h;return u.getPointAt(p,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const l=a[r],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,h=l.getPoints(u);for(let p=0;p<h.length;p++){const g=h[p];i&&i.equals(g)||(t.push(g),i=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new dx[r.type]().fromJSON(r))}return this}}class hx extends aI{constructor(e){super(),this.type="Path",this.currentPoint=new Ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Ww(this.currentPoint.clone(),new Ye(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new $w(this.currentPoint.clone(),new Ye(e,t),new Ye(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,l){const u=new Gw(this.currentPoint.clone(),new Ye(e,t),new Ye(i,r),new Ye(a,l));return this.curves.push(u),this.currentPoint.set(a,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Xw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+u,t+h,i,r,a,l),this}absarc(e,t,i,r,a,l){return this.absellipse(e,t,i,i,r,a,l),this}ellipse(e,t,i,r,a,l,u,h){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+p,t+g,i,r,a,l,u,h),this}absellipse(e,t,i,r,a,l,u,h){const p=new uS(e,t,i,r,a,l,u,h);if(this.curves.length>0){const y=p.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(p);const g=p.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class wd extends hx{constructor(e){super(e),this.uuid=Aa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new hx().fromJSON(r))}return this}}function iF(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let a=oI(n,0,r,t,!0);const l=[];if(!a||a.next===a.prev)return l;let u,h,p;if(i&&(a=lF(n,e,a,t)),n.length>80*t){u=n[0],h=n[1];let g=u,y=h;for(let _=t;_<r;_+=t){const b=n[_],S=n[_+1];b<u&&(u=b),S<h&&(h=S),b>g&&(g=b),S>y&&(y=S)}p=Math.max(g-u,y-h),p=p!==0?32767/p:0}return I0(a,l,t,u,h,p,0),l}function oI(n,e,t,i,r){let a;if(r===_F(n,e,t,i)>0)for(let l=e;l<t;l+=i)a=VC(l/i|0,n[l],n[l+1],a);else for(let l=t-i;l>=e;l-=i)a=VC(l/i|0,n[l],n[l+1],a);return a&&jp(a,a.next)&&(N0(a),a=a.next),a}function Od(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(jp(t,t.next)||Qi(t.prev,t,t.next)===0)){if(N0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function I0(n,e,t,i,r,a,l){if(!n)return;!l&&a&&hF(n,i,r,a);let u=n;for(;n.prev!==n.next;){const h=n.prev,p=n.next;if(a?sF(n,i,r,a):rF(n)){e.push(h.i,n.i,p.i),N0(n),n=p.next,u=p.next;continue}if(n=p,n===u){l?l===1?(n=aF(Od(n),e),I0(n,e,t,i,r,a,2)):l===2&&oF(n,e,t,i,r,a):I0(Od(n),e,t,i,r,a,1);break}}}function rF(n){const e=n.prev,t=n,i=n.next;if(Qi(e,t,i)>=0)return!1;const r=e.x,a=t.x,l=i.x,u=e.y,h=t.y,p=i.y,g=Math.min(r,a,l),y=Math.min(u,h,p),_=Math.max(r,a,l),b=Math.max(u,h,p);let S=i.next;for(;S!==e;){if(S.x>=g&&S.x<=_&&S.y>=y&&S.y<=b&&i0(r,u,a,h,l,p,S.x,S.y)&&Qi(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function sF(n,e,t,i){const r=n.prev,a=n,l=n.next;if(Qi(r,a,l)>=0)return!1;const u=r.x,h=a.x,p=l.x,g=r.y,y=a.y,_=l.y,b=Math.min(u,h,p),S=Math.min(g,y,_),A=Math.max(u,h,p),w=Math.max(g,y,_),E=ME(b,S,e,t,i),R=ME(A,w,e,t,i);let D=n.prevZ,I=n.nextZ;for(;D&&D.z>=E&&I&&I.z<=R;){if(D.x>=b&&D.x<=A&&D.y>=S&&D.y<=w&&D!==r&&D!==l&&i0(u,g,h,y,p,_,D.x,D.y)&&Qi(D.prev,D,D.next)>=0||(D=D.prevZ,I.x>=b&&I.x<=A&&I.y>=S&&I.y<=w&&I!==r&&I!==l&&i0(u,g,h,y,p,_,I.x,I.y)&&Qi(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;D&&D.z>=E;){if(D.x>=b&&D.x<=A&&D.y>=S&&D.y<=w&&D!==r&&D!==l&&i0(u,g,h,y,p,_,D.x,D.y)&&Qi(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;I&&I.z<=R;){if(I.x>=b&&I.x<=A&&I.y>=S&&I.y<=w&&I!==r&&I!==l&&i0(u,g,h,y,p,_,I.x,I.y)&&Qi(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function aF(n,e){let t=n;do{const i=t.prev,r=t.next.next;!jp(i,r)&&cI(i,t,t.next,r)&&P0(i,r)&&P0(r,i)&&(e.push(i.i,t.i,r.i),N0(t),N0(t.next),t=n=r),t=t.next}while(t!==n);return Od(t)}function oF(n,e,t,i,r,a){let l=n;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&gF(l,u)){let h=uI(l,u);l=Od(l,l.next),h=Od(h,h.next),I0(l,e,t,i,r,a,0),I0(h,e,t,i,r,a,0);return}u=u.next}l=l.next}while(l!==n)}function lF(n,e,t,i){const r=[];for(let a=0,l=e.length;a<l;a++){const u=e[a]*i,h=a<l-1?e[a+1]*i:n.length,p=oI(n,u,h,i,!1);p===p.next&&(p.steiner=!0),r.push(mF(p))}r.sort(cF);for(let a=0;a<r.length;a++)t=uF(r[a],t);return t}function cF(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function uF(n,e){const t=fF(n,e);if(!t)return e;const i=uI(t,n);return Od(i,i.next),Od(t,t.next)}function fF(n,e){let t=e;const i=n.x,r=n.y;let a=-1/0,l;if(jp(n,t))return t;do{if(jp(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const y=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=i&&y>a&&(a=y,l=t.x<t.next.x?t:t.next,y===i))return l}t=t.next}while(t!==e);if(!l)return null;const u=l,h=l.x,p=l.y;let g=1/0;t=l;do{if(i>=t.x&&t.x>=h&&i!==t.x&&lI(r<p?i:a,r,h,p,r<p?a:i,r,t.x,t.y)){const y=Math.abs(r-t.y)/(i-t.x);P0(t,n)&&(y<g||y===g&&(t.x>l.x||t.x===l.x&&dF(l,t)))&&(l=t,g=y)}t=t.next}while(t!==u);return l}function dF(n,e){return Qi(n.prev,n,e.prev)<0&&Qi(e.next,n,n.next)<0}function hF(n,e,t,i){let r=n;do r.z===0&&(r.z=ME(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,pF(r)}function pF(n){let e,t=1;do{let i=n,r;n=null;let a=null;for(e=0;i;){e++;let l=i,u=0;for(let p=0;p<t&&(u++,l=l.nextZ,!!l);p++);let h=t;for(;u>0||h>0&&l;)u!==0&&(h===0||!l||i.z<=l.z)?(r=i,i=i.nextZ,u--):(r=l,l=l.nextZ,h--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;i=l}a.nextZ=null,t*=2}while(e>1);return n}function ME(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function mF(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function lI(n,e,t,i,r,a,l,u){return(r-l)*(e-u)>=(n-l)*(a-u)&&(n-l)*(i-u)>=(t-l)*(e-u)&&(t-l)*(a-u)>=(r-l)*(i-u)}function i0(n,e,t,i,r,a,l,u){return!(n===l&&e===u)&&lI(n,e,t,i,r,a,l,u)}function gF(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!vF(n,e)&&(P0(n,e)&&P0(e,n)&&yF(n,e)&&(Qi(n.prev,n,e.prev)||Qi(n,e.prev,e))||jp(n,e)&&Qi(n.prev,n,n.next)>0&&Qi(e.prev,e,e.next)>0)}function Qi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function jp(n,e){return n.x===e.x&&n.y===e.y}function cI(n,e,t,i){const r=W_(Qi(n,e,t)),a=W_(Qi(n,e,i)),l=W_(Qi(t,i,n)),u=W_(Qi(t,i,e));return!!(r!==a&&l!==u||r===0&&G_(n,t,e)||a===0&&G_(n,i,e)||l===0&&G_(t,n,i)||u===0&&G_(t,e,i))}function G_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function W_(n){return n>0?1:n<0?-1:0}function vF(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&cI(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function P0(n,e){return Qi(n.prev,n,n.next)<0?Qi(n,e,n.next)>=0&&Qi(n,n.prev,e)>=0:Qi(n,e,n.prev)<0||Qi(n,n.next,e)<0}function yF(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function uI(n,e){const t=EE(n.i,n.x,n.y),i=EE(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function VC(n,e,t,i){const r=EE(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function N0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function EE(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function _F(n,e,t,i){let r=0;for(let a=e,l=t-i;a<t;a+=i)r+=(n[l]-n[a])*(n[a+1]+n[l+1]),l=a;return r}class bF{static triangulate(e,t,i=2){return iF(e,t,i)}}class Go{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Go.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];HC(e),GC(i,e);let l=e.length;t.forEach(HC);for(let h=0;h<t.length;h++)r.push(l),l+=t[h].length,GC(i,t[h]);const u=bF.triangulate(i,r);for(let h=0;h<u.length;h+=3)a.push(u.slice(h,h+3));return a}}function HC(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function GC(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class fS extends Mn{constructor(e=new wd([new Ye(.5,.5),new Ye(-.5,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let u=0,h=e.length;u<h;u++){const p=e[u];l(p)}this.setAttribute("position",new Gt(r,3)),this.setAttribute("uv",new Gt(a,2)),this.computeVertexNormals();function l(u){const h=[],p=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,b=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:b-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const E=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:xF;let D,I=!1,L,N,F,V;if(E){D=E.getSpacedPoints(g),I=!0,_=!1;const Ve=E.isCatmullRomCurve3?E.closed:!1;L=E.computeFrenetFrames(g,Ve),N=new ee,F=new ee,V=new ee}_||(w=0,b=0,S=0,A=0);const P=u.extractPoints(p);let U=P.shape;const W=P.holes;if(!Go.isClockWise(U)){U=U.reverse();for(let Ve=0,Je=W.length;Ve<Je;Ve++){const He=W[Ve];Go.isClockWise(He)&&(W[Ve]=He.reverse())}}function K(Ve){const He=10000000000000001e-36;let mt=Ve[0];for(let te=1;te<=Ve.length;te++){const kt=te%Ve.length,Et=Ve[kt],Vt=Et.x-mt.x,lt=Et.y-mt.y,G=Vt*Vt+lt*lt,k=Math.max(Math.abs(Et.x),Math.abs(Et.y),Math.abs(mt.x),Math.abs(mt.y)),de=He*k*k;if(G<=de){Ve.splice(kt,1),te--;continue}mt=Et}}K(U),W.forEach(K);const ne=W.length,re=U;for(let Ve=0;Ve<ne;Ve++){const Je=W[Ve];U=U.concat(Je)}function X(Ve,Je,He){return Je||Kt("ExtrudeGeometry: vec does not exist"),Ve.clone().addScaledVector(Je,He)}const J=U.length;function ae(Ve,Je,He){let mt,te,kt;const Et=Ve.x-Je.x,Vt=Ve.y-Je.y,lt=He.x-Ve.x,G=He.y-Ve.y,k=Et*Et+Vt*Vt,de=Et*G-Vt*lt;if(Math.abs(de)>Number.EPSILON){const Ae=Math.sqrt(k),Be=Math.sqrt(lt*lt+G*G),Ie=Je.x-Vt/Ae,wt=Je.y+Et/Ae,ft=He.x-G/Be,Pt=He.y+lt/Be,jt=((ft-Ie)*G-(Pt-wt)*lt)/(Et*G-Vt*lt);mt=Ie+Et*jt-Ve.x,te=wt+Vt*jt-Ve.y;const Ze=mt*mt+te*te;if(Ze<=2)return new Ye(mt,te);kt=Math.sqrt(Ze/2)}else{let Ae=!1;Et>Number.EPSILON?lt>Number.EPSILON&&(Ae=!0):Et<-Number.EPSILON?lt<-Number.EPSILON&&(Ae=!0):Math.sign(Vt)===Math.sign(G)&&(Ae=!0),Ae?(mt=-Vt,te=Et,kt=Math.sqrt(k)):(mt=Et,te=Vt,kt=Math.sqrt(k/2))}return new Ye(mt/kt,te/kt)}const Me=[];for(let Ve=0,Je=re.length,He=Je-1,mt=Ve+1;Ve<Je;Ve++,He++,mt++)He===Je&&(He=0),mt===Je&&(mt=0),Me[Ve]=ae(re[Ve],re[He],re[mt]);const Se=[];let Y,pe=Me.concat();for(let Ve=0,Je=ne;Ve<Je;Ve++){const He=W[Ve];Y=[];for(let mt=0,te=He.length,kt=te-1,Et=mt+1;mt<te;mt++,kt++,Et++)kt===te&&(kt=0),Et===te&&(Et=0),Y[mt]=ae(He[mt],He[kt],He[Et]);Se.push(Y),pe=pe.concat(Y)}let we;if(w===0)we=Go.triangulateShape(re,W);else{const Ve=[],Je=[];for(let He=0;He<w;He++){const mt=He/w,te=b*Math.cos(mt*Math.PI/2),kt=S*Math.sin(mt*Math.PI/2)+A;for(let Et=0,Vt=re.length;Et<Vt;Et++){const lt=X(re[Et],Me[Et],kt);yt(lt.x,lt.y,-te),mt===0&&Ve.push(lt)}for(let Et=0,Vt=ne;Et<Vt;Et++){const lt=W[Et];Y=Se[Et];const G=[];for(let k=0,de=lt.length;k<de;k++){const Ae=X(lt[k],Y[k],kt);yt(Ae.x,Ae.y,-te),mt===0&&G.push(Ae)}mt===0&&Je.push(G)}}we=Go.triangulateShape(Ve,Je)}const ke=we.length,pt=S+A;for(let Ve=0;Ve<J;Ve++){const Je=_?X(U[Ve],pe[Ve],pt):U[Ve];I?(F.copy(L.normals[0]).multiplyScalar(Je.x),N.copy(L.binormals[0]).multiplyScalar(Je.y),V.copy(D[0]).add(F).add(N),yt(V.x,V.y,V.z)):yt(Je.x,Je.y,0)}for(let Ve=1;Ve<=g;Ve++)for(let Je=0;Je<J;Je++){const He=_?X(U[Je],pe[Je],pt):U[Je];I?(F.copy(L.normals[Ve]).multiplyScalar(He.x),N.copy(L.binormals[Ve]).multiplyScalar(He.y),V.copy(D[Ve]).add(F).add(N),yt(V.x,V.y,V.z)):yt(He.x,He.y,y/g*Ve)}for(let Ve=w-1;Ve>=0;Ve--){const Je=Ve/w,He=b*Math.cos(Je*Math.PI/2),mt=S*Math.sin(Je*Math.PI/2)+A;for(let te=0,kt=re.length;te<kt;te++){const Et=X(re[te],Me[te],mt);yt(Et.x,Et.y,y+He)}for(let te=0,kt=W.length;te<kt;te++){const Et=W[te];Y=Se[te];for(let Vt=0,lt=Et.length;Vt<lt;Vt++){const G=X(Et[Vt],Y[Vt],mt);I?yt(G.x,G.y+D[g-1].y,D[g-1].x+He):yt(G.x,G.y,y+He)}}}ge(),Re();function ge(){const Ve=r.length/3;if(_){let Je=0,He=J*Je;for(let mt=0;mt<ke;mt++){const te=we[mt];Rt(te[2]+He,te[1]+He,te[0]+He)}Je=g+w*2,He=J*Je;for(let mt=0;mt<ke;mt++){const te=we[mt];Rt(te[0]+He,te[1]+He,te[2]+He)}}else{for(let Je=0;Je<ke;Je++){const He=we[Je];Rt(He[2],He[1],He[0])}for(let Je=0;Je<ke;Je++){const He=we[Je];Rt(He[0]+J*g,He[1]+J*g,He[2]+J*g)}}i.addGroup(Ve,r.length/3-Ve,0)}function Re(){const Ve=r.length/3;let Je=0;tt(re,Je),Je+=re.length;for(let He=0,mt=W.length;He<mt;He++){const te=W[He];tt(te,Je),Je+=te.length}i.addGroup(Ve,r.length/3-Ve,1)}function tt(Ve,Je){let He=Ve.length;for(;--He>=0;){const mt=He;let te=He-1;te<0&&(te=Ve.length-1);for(let kt=0,Et=g+w*2;kt<Et;kt++){const Vt=J*kt,lt=J*(kt+1),G=Je+mt+Vt,k=Je+te+Vt,de=Je+te+lt,Ae=Je+mt+lt;nn(G,k,de,Ae)}}}function yt(Ve,Je,He){h.push(Ve),h.push(Je),h.push(He)}function Rt(Ve,Je,He){cn(Ve),cn(Je),cn(He);const mt=r.length/3,te=R.generateTopUV(i,r,mt-3,mt-2,mt-1);zt(te[0]),zt(te[1]),zt(te[2])}function nn(Ve,Je,He,mt){cn(Ve),cn(Je),cn(mt),cn(Je),cn(He),cn(mt);const te=r.length/3,kt=R.generateSideWallUV(i,r,te-6,te-3,te-2,te-1);zt(kt[0]),zt(kt[1]),zt(kt[3]),zt(kt[1]),zt(kt[2]),zt(kt[3])}function cn(Ve){r.push(h[Ve*3+0]),r.push(h[Ve*3+1]),r.push(h[Ve*3+2])}function zt(Ve){a.push(Ve.x),a.push(Ve.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return SF(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,l=e.shapes.length;a<l;a++){const u=t[e.shapes[a]];i.push(u)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new dx[r.type]().fromJSON(r)),new fS(i,e.options)}}const xF={generateTopUV:function(n,e,t,i,r){const a=e[t*3],l=e[t*3+1],u=e[i*3],h=e[i*3+1],p=e[r*3],g=e[r*3+1];return[new Ye(a,l),new Ye(u,h),new Ye(p,g)]},generateSideWallUV:function(n,e,t,i,r,a){const l=e[t*3],u=e[t*3+1],h=e[t*3+2],p=e[i*3],g=e[i*3+1],y=e[i*3+2],_=e[r*3],b=e[r*3+1],S=e[r*3+2],A=e[a*3],w=e[a*3+1],E=e[a*3+2];return Math.abs(u-g)<Math.abs(l-p)?[new Ye(l,1-h),new Ye(p,1-y),new Ye(_,1-S),new Ye(A,1-E)]:[new Ye(u,1-h),new Ye(g,1-y),new Ye(b,1-S),new Ye(w,1-E)]}};function SF(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class cv extends cf{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cv(e.radius,e.detail)}}class dS extends Mn{constructor(e=[new Ye(0,-.5),new Ye(.5,0),new Ye(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=fn(r,0,Math.PI*2);const a=[],l=[],u=[],h=[],p=[],g=1/t,y=new ee,_=new Ye,b=new ee,S=new ee,A=new ee;let w=0,E=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:w=e[R+1].x-e[R].x,E=e[R+1].y-e[R].y,b.x=E*1,b.y=-w,b.z=E*0,A.copy(b),b.normalize(),h.push(b.x,b.y,b.z);break;case e.length-1:h.push(A.x,A.y,A.z);break;default:w=e[R+1].x-e[R].x,E=e[R+1].y-e[R].y,b.x=E*1,b.y=-w,b.z=E*0,S.copy(b),b.x+=A.x,b.y+=A.y,b.z+=A.z,b.normalize(),h.push(b.x,b.y,b.z),A.copy(S)}for(let R=0;R<=t;R++){const D=i+R*g*r,I=Math.sin(D),L=Math.cos(D);for(let N=0;N<=e.length-1;N++){y.x=e[N].x*I,y.y=e[N].y,y.z=e[N].x*L,l.push(y.x,y.y,y.z),_.x=R/t,_.y=N/(e.length-1),u.push(_.x,_.y);const F=h[3*N+0]*I,V=h[3*N+1],P=h[3*N+0]*L;p.push(F,V,P)}}for(let R=0;R<t;R++)for(let D=0;D<e.length-1;D++){const I=D+R*e.length,L=I,N=I+e.length,F=I+e.length+1,V=I+1;a.push(L,N,V),a.push(F,V,N)}this.setIndex(a),this.setAttribute("position",new Gt(l,3)),this.setAttribute("uv",new Gt(u,2)),this.setAttribute("normal",new Gt(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dS(e.points,e.segments,e.phiStart,e.phiLength)}}class uv extends cf{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uv(e.radius,e.detail)}}class Wc extends Mn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,l=t/2,u=Math.floor(i),h=Math.floor(r),p=u+1,g=h+1,y=e/u,_=t/h,b=[],S=[],A=[],w=[];for(let E=0;E<g;E++){const R=E*_-l;for(let D=0;D<p;D++){const I=D*y-a;S.push(I,-R,0),A.push(0,0,1),w.push(D/u),w.push(1-E/h)}}for(let E=0;E<h;E++)for(let R=0;R<u;R++){const D=R+p*E,I=R+p*(E+1),L=R+1+p*(E+1),N=R+1+p*E;b.push(D,I,N),b.push(I,L,N)}this.setIndex(b),this.setAttribute("position",new Gt(S,3)),this.setAttribute("normal",new Gt(A,3)),this.setAttribute("uv",new Gt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wc(e.width,e.height,e.widthSegments,e.heightSegments)}}class hS extends Mn{constructor(e=.5,t=1,i=32,r=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:l},i=Math.max(3,i),r=Math.max(1,r);const u=[],h=[],p=[],g=[];let y=e;const _=(t-e)/r,b=new ee,S=new Ye;for(let A=0;A<=r;A++){for(let w=0;w<=i;w++){const E=a+w/i*l;b.x=y*Math.cos(E),b.y=y*Math.sin(E),h.push(b.x,b.y,b.z),p.push(0,0,1),S.x=(b.x/t+1)/2,S.y=(b.y/t+1)/2,g.push(S.x,S.y)}y+=_}for(let A=0;A<r;A++){const w=A*(i+1);for(let E=0;E<i;E++){const R=E+w,D=R,I=R+i+1,L=R+i+2,N=R+1;u.push(D,I,N),u.push(I,L,N)}}this.setIndex(u),this.setAttribute("position",new Gt(h,3)),this.setAttribute("normal",new Gt(p,3)),this.setAttribute("uv",new Gt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class pS extends Mn{constructor(e=new wd([new Ye(0,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],l=[];let u=0,h=0;if(Array.isArray(e)===!1)p(e);else for(let g=0;g<e.length;g++)p(e[g]),this.addGroup(u,h,g),u+=h,h=0;this.setIndex(i),this.setAttribute("position",new Gt(r,3)),this.setAttribute("normal",new Gt(a,3)),this.setAttribute("uv",new Gt(l,2));function p(g){const y=r.length/3,_=g.extractPoints(t);let b=_.shape;const S=_.holes;Go.isClockWise(b)===!1&&(b=b.reverse());for(let w=0,E=S.length;w<E;w++){const R=S[w];Go.isClockWise(R)===!0&&(S[w]=R.reverse())}const A=Go.triangulateShape(b,S);for(let w=0,E=S.length;w<E;w++){const R=S[w];b=b.concat(R)}for(let w=0,E=b.length;w<E;w++){const R=b[w];r.push(R.x,R.y,0),a.push(0,0,1),l.push(R.x,R.y)}for(let w=0,E=A.length;w<E;w++){const R=A[w],D=R[0]+y,I=R[1]+y,L=R[2]+y;i.push(D,I,L),h+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return MF(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const l=t[e.shapes[r]];i.push(l)}return new pS(i,e.curveSegments)}}function MF(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class fv extends Mn{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const h=Math.min(l+u,Math.PI);let p=0;const g=[],y=new ee,_=new ee,b=[],S=[],A=[],w=[];for(let E=0;E<=i;E++){const R=[],D=E/i;let I=0;E===0&&l===0?I=.5/t:E===i&&h===Math.PI&&(I=-.5/t);for(let L=0;L<=t;L++){const N=L/t;y.x=-e*Math.cos(r+N*a)*Math.sin(l+D*u),y.y=e*Math.cos(l+D*u),y.z=e*Math.sin(r+N*a)*Math.sin(l+D*u),S.push(y.x,y.y,y.z),_.copy(y).normalize(),A.push(_.x,_.y,_.z),w.push(N+I,1-D),R.push(p++)}g.push(R)}for(let E=0;E<i;E++)for(let R=0;R<t;R++){const D=g[E][R+1],I=g[E][R],L=g[E+1][R],N=g[E+1][R+1];(E!==0||l>0)&&b.push(D,I,N),(E!==i-1||h<Math.PI)&&b.push(I,L,N)}this.setIndex(b),this.setAttribute("position",new Gt(S,3)),this.setAttribute("normal",new Gt(A,3)),this.setAttribute("uv",new Gt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class mS extends cf{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mS(e.radius,e.detail)}}class gS extends Mn{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const l=[],u=[],h=[],p=[],g=new ee,y=new ee,_=new ee;for(let b=0;b<=i;b++)for(let S=0;S<=r;S++){const A=S/r*a,w=b/i*Math.PI*2;y.x=(e+t*Math.cos(w))*Math.cos(A),y.y=(e+t*Math.cos(w))*Math.sin(A),y.z=t*Math.sin(w),u.push(y.x,y.y,y.z),g.x=e*Math.cos(A),g.y=e*Math.sin(A),_.subVectors(y,g).normalize(),h.push(_.x,_.y,_.z),p.push(S/r),p.push(b/i)}for(let b=1;b<=i;b++)for(let S=1;S<=r;S++){const A=(r+1)*b+S-1,w=(r+1)*(b-1)+S-1,E=(r+1)*(b-1)+S,R=(r+1)*b+S;l.push(A,w,R),l.push(w,E,R)}this.setIndex(l),this.setAttribute("position",new Gt(u,3)),this.setAttribute("normal",new Gt(h,3)),this.setAttribute("uv",new Gt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class vS extends Mn{constructor(e=1,t=.4,i=64,r=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:l},i=Math.floor(i),r=Math.floor(r);const u=[],h=[],p=[],g=[],y=new ee,_=new ee,b=new ee,S=new ee,A=new ee,w=new ee,E=new ee;for(let D=0;D<=i;++D){const I=D/i*a*Math.PI*2;R(I,a,l,e,b),R(I+.01,a,l,e,S),w.subVectors(S,b),E.addVectors(S,b),A.crossVectors(w,E),E.crossVectors(A,w),A.normalize(),E.normalize();for(let L=0;L<=r;++L){const N=L/r*Math.PI*2,F=-t*Math.cos(N),V=t*Math.sin(N);y.x=b.x+(F*E.x+V*A.x),y.y=b.y+(F*E.y+V*A.y),y.z=b.z+(F*E.z+V*A.z),h.push(y.x,y.y,y.z),_.subVectors(y,b).normalize(),p.push(_.x,_.y,_.z),g.push(D/i),g.push(L/r)}}for(let D=1;D<=i;D++)for(let I=1;I<=r;I++){const L=(r+1)*(D-1)+(I-1),N=(r+1)*D+(I-1),F=(r+1)*D+I,V=(r+1)*(D-1)+I;u.push(L,N,V),u.push(N,F,V)}this.setIndex(u),this.setAttribute("position",new Gt(h,3)),this.setAttribute("normal",new Gt(p,3)),this.setAttribute("uv",new Gt(g,2));function R(D,I,L,N,F){const V=Math.cos(D),P=Math.sin(D),U=L/I*D,W=Math.cos(U);F.x=N*(2+W)*.5*V,F.y=N*(2+W)*P*.5,F.z=N*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class yS extends Mn{constructor(e=new jw(new ee(-1,-1,0),new ee(-1,1,0),new ee(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const l=e.computeFrenetFrames(t,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new ee,h=new ee,p=new Ye;let g=new ee;const y=[],_=[],b=[],S=[];A(),this.setIndex(S),this.setAttribute("position",new Gt(y,3)),this.setAttribute("normal",new Gt(_,3)),this.setAttribute("uv",new Gt(b,2));function A(){for(let D=0;D<t;D++)w(D);w(a===!1?t:0),R(),E()}function w(D){g=e.getPointAt(D/t,g);const I=l.normals[D],L=l.binormals[D];for(let N=0;N<=r;N++){const F=N/r*Math.PI*2,V=Math.sin(F),P=-Math.cos(F);h.x=P*I.x+V*L.x,h.y=P*I.y+V*L.y,h.z=P*I.z+V*L.z,h.normalize(),_.push(h.x,h.y,h.z),u.x=g.x+i*h.x,u.y=g.y+i*h.y,u.z=g.z+i*h.z,y.push(u.x,u.y,u.z)}}function E(){for(let D=1;D<=t;D++)for(let I=1;I<=r;I++){const L=(r+1)*(D-1)+(I-1),N=(r+1)*D+(I-1),F=(r+1)*D+I,V=(r+1)*(D-1)+I;S.push(L,N,V),S.push(N,F,V)}}function R(){for(let D=0;D<=t;D++)for(let I=0;I<=r;I++)p.x=D/t,p.y=I/r,b.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new yS(new dx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class fI extends Mn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ee,a=new ee;if(e.index!==null){const l=e.attributes.position,u=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,g=h.length;p<g;++p){const y=h[p],_=y.start,b=y.count;for(let S=_,A=_+b;S<A;S+=3)for(let w=0;w<3;w++){const E=u.getX(S+w),R=u.getX(S+(w+1)%3);r.fromBufferAttribute(l,E),a.fromBufferAttribute(l,R),WC(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const l=e.attributes.position;for(let u=0,h=l.count/3;u<h;u++)for(let p=0;p<3;p++){const g=3*u+p,y=3*u+(p+1)%3;r.fromBufferAttribute(l,g),a.fromBufferAttribute(l,y),WC(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function WC(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var $C=Object.freeze({__proto__:null,BoxGeometry:Fd,CapsuleGeometry:oS,CircleGeometry:lS,ConeGeometry:lv,CylinderGeometry:ov,DodecahedronGeometry:cS,EdgesGeometry:tI,ExtrudeGeometry:fS,IcosahedronGeometry:cv,LatheGeometry:dS,OctahedronGeometry:uv,PlaneGeometry:Wc,PolyhedronGeometry:cf,RingGeometry:hS,ShapeGeometry:pS,SphereGeometry:fv,TetrahedronGeometry:mS,TorusGeometry:gS,TorusKnotGeometry:vS,TubeGeometry:yS,WireframeGeometry:fI});class dI extends Ms{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class qw extends ss{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Yw extends Ms{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hI extends Yw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class pI extends Ms{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.combine=tv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mI extends Ms{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class gI extends Ms{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class vI extends Ms{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.combine=tv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _S extends Ms{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=RO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Zw extends Ms{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class yI extends Ms{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lf,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _I extends $s{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function bd(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function bI(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function wE(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,l=0;l!==i;++a){const u=t[a]*e;for(let h=0;h!==e;++h)r[l++]=n[u+h]}return r}function Kw(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let l=a[i];if(l!==void 0)if(Array.isArray(l))do l=a[i],l!==void 0&&(e.push(a.time),t.push(...l)),a=n[r++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[i],l!==void 0&&(e.push(a.time),l.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do l=a[i],l!==void 0&&(e.push(a.time),t.push(l)),a=n[r++];while(a!==void 0)}function EF(n,e,t,i,r=30){const a=n.clone();a.name=e;const l=[];for(let h=0;h<a.tracks.length;++h){const p=a.tracks[h],g=p.getValueSize(),y=[],_=[];for(let b=0;b<p.times.length;++b){const S=p.times[b]*r;if(!(S<t||S>=i)){y.push(p.times[b]);for(let A=0;A<g;++A)_.push(p.values[b*g+A])}}y.length!==0&&(p.times=bd(y,p.times.constructor),p.values=bd(_,p.values.constructor),l.push(p))}a.tracks=l;let u=1/0;for(let h=0;h<a.tracks.length;++h)u>a.tracks[h].times[0]&&(u=a.tracks[h].times[0]);for(let h=0;h<a.tracks.length;++h)a.tracks[h].shift(-1*u);return a.resetDuration(),a}function wF(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let l=0;l<r;++l){const u=t.tracks[l],h=u.ValueTypeName;if(h==="bool"||h==="string")continue;const p=n.tracks.find(function(E){return E.name===u.name&&E.ValueTypeName===h});if(p===void 0)continue;let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);let _=0;const b=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=b/3);const S=u.times.length-1;let A;if(a<=u.times[0]){const E=g,R=y-g;A=u.values.slice(E,R)}else if(a>=u.times[S]){const E=S*y+g,R=E+y-g;A=u.values.slice(E,R)}else{const E=u.createInterpolant(),R=g,D=y-g;E.evaluate(a),A=E.resultBuffer.slice(R,D)}h==="quaternion"&&new xs().fromArray(A).normalize().conjugate().toArray(A);const w=p.times.length;for(let E=0;E<w;++E){const R=E*b+_;if(h==="quaternion")xs.multiplyQuaternionsFlat(p.values,R,A,0,p.values,R);else{const D=b-_*2;for(let I=0;I<D;++I)p.values[R+I]-=A[I]}}}return n.blendMode=Iw,n}class TF{static convertArray(e,t){return bd(e,t)}static isTypedArray(e){return FO(e)}static getKeyframeOrder(e){return bI(e)}static sortedArray(e,t,i){return wE(e,t,i)}static flattenJSON(e,t,i,r){Kw(e,t,i,r)}static subclip(e,t,i,r,a=30){return EF(e,t,i,r,a)}static makeClipAdditive(e,t=0,i=e,r=30){return wF(e,t,i,r)}}class dv{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let l;n:{i:if(!(e<r)){for(let u=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(a=r,r=t[++i],e<r)break t}l=t.length;break n}if(!(e>=a)){const u=t[1];e<u&&(i=2,a=u);for(let h=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(r=a,a=t[--i-1],e>=a)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let l=0;l!==r;++l)t[l]=i[a+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class xI extends dv{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:vd,endingEnd:vd}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,l=e+1,u=r[a],h=r[l];if(u===void 0)switch(this.getSettings_().endingStart){case yd:a=e,u=2*t-i;break;case A0:a=r.length-2,u=t+r[a]-r[a+1];break;default:a=e,u=i}if(h===void 0)switch(this.getSettings_().endingEnd){case yd:l=e,h=2*i-t;break;case A0:l=1,h=i+r[1]-r[0];break;default:l=e-1,h=t}const p=(i-t)*.5,g=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(h-i),this._offsetPrev=a*g,this._offsetNext=l*g}interpolate_(e,t,i,r){const a=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,p=h-u,g=this._offsetPrev,y=this._offsetNext,_=this._weightPrev,b=this._weightNext,S=(i-t)/(r-t),A=S*S,w=A*S,E=-_*w+2*_*A-_*S,R=(1+_)*w+(-1.5-2*_)*A+(-.5+_)*S+1,D=(-1-b)*w+(1.5+b)*A+.5*S,I=b*w-b*A;for(let L=0;L!==u;++L)a[L]=E*l[g+L]+R*l[p+L]+D*l[h+L]+I*l[y+L];return a}}class Qw extends dv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,p=h-u,g=(i-t)/(r-t),y=1-g;for(let _=0;_!==u;++_)a[_]=l[p+_]*y+l[h+_]*g;return a}}class SI extends dv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class mo{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=bd(t,this.TimeBufferType),this.values=bd(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:bd(e.times,Array),values:bd(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new SI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Qw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new xI(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case T0:t=this.InterpolantFactoryMethodDiscrete;break;case cx:t=this.InterpolantFactoryMethodLinear;break;case mb:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return It("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return T0;case this.InterpolantFactoryMethodLinear:return cx;case this.InterpolantFactoryMethodSmooth:return mb}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,l=r-1;for(;a!==r&&i[a]<e;)++a;for(;l!==-1&&i[l]>t;)--l;if(++l,a!==0||l!==r){a>=l&&(l=Math.max(l,1),a=l-1);const u=this.getValueSize();this.times=i.slice(a,l),this.values=this.values.slice(a*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Kt("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(Kt("KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==a;u++){const h=i[u];if(typeof h=="number"&&isNaN(h)){Kt("KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){Kt("KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(r!==void 0&&FO(r))for(let u=0,h=r.length;u!==h;++u){const p=r[u];if(isNaN(p)){Kt("KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===mb,a=e.length-1;let l=1;for(let u=1;u<a;++u){let h=!1;const p=e[u],g=e[u+1];if(p!==g&&(u!==1||p!==e[0]))if(r)h=!0;else{const y=u*i,_=y-i,b=y+i;for(let S=0;S!==i;++S){const A=t[y+S];if(A!==t[_+S]||A!==t[b+S]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const y=u*i,_=l*i;for(let b=0;b!==i;++b)t[_+b]=t[y+b]}++l}}if(a>0){e[l]=e[a];for(let u=a*i,h=l*i,p=0;p!==i;++p)t[h+p]=t[u+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}mo.prototype.ValueTypeName="";mo.prototype.TimeBufferType=Float32Array;mo.prototype.ValueBufferType=Float32Array;mo.prototype.DefaultInterpolation=cx;class Bd extends mo{constructor(e,t,i){super(e,t,i)}}Bd.prototype.ValueTypeName="bool";Bd.prototype.ValueBufferType=Array;Bd.prototype.DefaultInterpolation=T0;Bd.prototype.InterpolantFactoryMethodLinear=void 0;Bd.prototype.InterpolantFactoryMethodSmooth=void 0;class Jw extends mo{constructor(e,t,i,r){super(e,t,i,r)}}Jw.prototype.ValueTypeName="color";class L0 extends mo{constructor(e,t,i,r){super(e,t,i,r)}}L0.prototype.ValueTypeName="number";class MI extends dv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(i-t)/(r-t);let p=e*u;for(let g=p+u;p!==g;p+=4)xs.slerpFlat(a,0,l,p-u,l,p,h);return a}}class hv extends mo{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new MI(this.times,this.values,this.getValueSize(),e)}}hv.prototype.ValueTypeName="quaternion";hv.prototype.InterpolantFactoryMethodSmooth=void 0;class kd extends mo{constructor(e,t,i){super(e,t,i)}}kd.prototype.ValueTypeName="string";kd.prototype.ValueBufferType=Array;kd.prototype.DefaultInterpolation=T0;kd.prototype.InterpolantFactoryMethodLinear=void 0;kd.prototype.InterpolantFactoryMethodSmooth=void 0;class U0 extends mo{constructor(e,t,i,r){super(e,t,i,r)}}U0.prototype.ValueTypeName="vector";class z0{constructor(e="",t=-1,i=[],r=qx){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Aa(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(CF(i[l]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,l=i.length;a!==l;++a)t.push(mo.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,l=[];for(let u=0;u<a;u++){let h=[],p=[];h.push((u+a-1)%a,u,(u+1)%a),p.push(0,1,0);const g=bI(h);h=wE(h,1,g),p=wE(p,1,g),!r&&h[0]===0&&(h.push(a),p.push(p[0])),l.push(new L0(".morphTargetInfluences["+t[u].name+"]",h,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const p=e[u],g=p.name.match(a);if(g&&g.length>1){const y=g[1];let _=r[y];_||(r[y]=_=[]),_.push(p)}}const l=[];for(const u in r)l.push(this.CreateFromMorphTargetSequence(u,r[u],t,i));return l}static parseAnimation(e,t){if(It("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Kt("AnimationClip: No animation in JSONLoader data."),null;const i=function(y,_,b,S,A){if(b.length!==0){const w=[],E=[];Kw(b,w,E,S),w.length!==0&&A.push(new y(_,w,E))}},r=[],a=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const p=e.hierarchy||[];for(let y=0;y<p.length;y++){const _=p[y].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const b={};let S;for(S=0;S<_.length;S++)if(_[S].morphTargets)for(let A=0;A<_[S].morphTargets.length;A++)b[_[S].morphTargets[A]]=-1;for(const A in b){const w=[],E=[];for(let R=0;R!==_[S].morphTargets.length;++R){const D=_[S];w.push(D.time),E.push(D.morphTarget===A?1:0)}r.push(new L0(".morphTargetInfluence["+A+"]",w,E))}h=b.length*l}else{const b=".bones["+t[y].name+"]";i(U0,b+".position",_,"pos",r),i(hv,b+".quaternion",_,"rot",r),i(U0,b+".scale",_,"scl",r)}}return r.length===0?null:new this(a,h,r,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function AF(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return L0;case"vector":case"vector2":case"vector3":case"vector4":return U0;case"color":return Jw;case"quaternion":return hv;case"bool":case"boolean":return Bd;case"string":return kd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function CF(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=AF(n.type);if(n.times===void 0){const t=[],i=[];Kw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ul={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class bS{constructor(e,t,i){const r=this;let a=!1,l=0,u=0,h;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(g){u++,a===!1&&r.onStart!==void 0&&r.onStart(g,l,u),a=!0},this.itemEnd=function(g){l++,r.onProgress!==void 0&&r.onProgress(g,l,u),l===u&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(g){r.onError!==void 0&&r.onError(g)},this.resolveURL=function(g){return h?h(g):g},this.setURLModifier=function(g){return h=g,this},this.addHandler=function(g,y){return p.push(g,y),this},this.removeHandler=function(g){const y=p.indexOf(g);return y!==-1&&p.splice(y,2),this},this.getHandler=function(g){for(let y=0,_=p.length;y<_;y+=2){const b=p[y],S=p[y+1];if(b.global&&(b.lastIndex=0),b.test(g))return S}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const EI=new bS;class js{constructor(e){this.manager=e!==void 0?e:EI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}js.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ac={};class RF extends Error{constructor(e,t){super(e),this.response=t}}class Ca extends js{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Ul.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Ac[e]!==void 0){Ac[e].push({onLoad:t,onProgress:i,onError:r});return}Ac[e]=[],Ac[e].push({onLoad:t,onProgress:i,onError:r});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),u=this.mimeType,h=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&It("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const g=Ac[e],y=p.body.getReader(),_=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),b=_?parseInt(_):0,S=b!==0;let A=0;const w=new ReadableStream({start(E){R();function R(){y.read().then(({done:D,value:I})=>{if(D)E.close();else{A+=I.byteLength;const L=new ProgressEvent("progress",{lengthComputable:S,loaded:A,total:b});for(let N=0,F=g.length;N<F;N++){const V=g[N];V.onProgress&&V.onProgress(L)}E.enqueue(I),R()}},D=>{E.error(D)})}}});return new Response(w)}else throw new RF(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(h){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>new DOMParser().parseFromString(g,u));case"json":return p.json();default:if(u==="")return p.text();{const y=/charset="?([^;"\s]*)"?/i.exec(u),_=y&&y[1]?y[1].toLowerCase():void 0,b=new TextDecoder(_);return p.arrayBuffer().then(S=>b.decode(S))}}}).then(p=>{Ul.add(`file:${e}`,p);const g=Ac[e];delete Ac[e];for(let y=0,_=g.length;y<_;y++){const b=g[y];b.onLoad&&b.onLoad(p)}}).catch(p=>{const g=Ac[e];if(g===void 0)throw this.manager.itemError(e),p;delete Ac[e];for(let y=0,_=g.length;y<_;y++){const b=g[y];b.onError&&b.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class DF extends js{constructor(e){super(e)}load(e,t,i,r){const a=this,l=new Ca(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(a.parse(JSON.parse(u)))}catch(h){r?r(h):Kt(h),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=z0.parse(e[i]);t.push(r)}return t}}class OF extends js{constructor(e){super(e)}load(e,t,i,r){const a=this,l=[],u=new aS,h=new Ca(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(a.withCredentials);let p=0;function g(y){h.load(e[y],function(_){const b=a.parse(_,!0);l[y]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps},p+=1,p===6&&(b.mipmapCount===1&&(u.minFilter=qn),u.image=l,u.format=b.format,u.needsUpdate=!0,t&&t(u))},i,r)}if(Array.isArray(e))for(let y=0,_=e.length;y<_;++y)g(y);else h.load(e,function(y){const _=a.parse(y,!0);if(_.isCubemap){const b=_.mipmaps.length/_.mipmapCount;for(let S=0;S<b;S++){l[S]={mipmaps:[]};for(let A=0;A<_.mipmapCount;A++)l[S].mipmaps.push(_.mipmaps[S*_.mipmapCount+A]),l[S].format=_.format,l[S].width=_.width,l[S].height=_.height}u.image=l}else u.image.width=_.width,u.image.height=_.height,u.mipmaps=_.mipmaps;_.mipmapCount===1&&(u.minFilter=qn),u.format=_.format,u.needsUpdate=!0,t&&t(u)},i,r);return u}}const dp=new WeakMap;class F0 extends js{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=Ul.get(`image:${e}`);if(l!==void 0){if(l.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0);else{let y=dp.get(l);y===void 0&&(y=[],dp.set(l,y)),y.push({onLoad:t,onError:r})}return l}const u=D0("img");function h(){g(),t&&t(this);const y=dp.get(this)||[];for(let _=0;_<y.length;_++){const b=y[_];b.onLoad&&b.onLoad(this)}dp.delete(this),a.manager.itemEnd(e)}function p(y){g(),r&&r(y),Ul.remove(`image:${e}`);const _=dp.get(this)||[];for(let b=0;b<_.length;b++){const S=_[b];S.onError&&S.onError(y)}dp.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function g(){u.removeEventListener("load",h,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),Ul.add(`image:${e}`,u),a.manager.itemStart(e),u.src=e,u}}class wI extends js{constructor(e){super(e)}load(e,t,i,r){const a=new sv;a.colorSpace=Wr;const l=new F0(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function h(p){l.load(e[p],function(g){a.images[p]=g,u++,u===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let p=0;p<e.length;++p)h(p);return a}}class eT extends js{constructor(e){super(e)}load(e,t,i,r){const a=this,l=new po,u=new Ca(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(a.withCredentials),u.load(e,function(h){let p;try{p=a.parse(h)}catch(g){if(r!==void 0)r(g);else{g(g);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:ar,l.wrapT=p.wrapT!==void 0?p.wrapT:ar,l.magFilter=p.magFilter!==void 0?p.magFilter:qn,l.minFilter=p.minFilter!==void 0?p.minFilter:qn,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=Ll),p.mipmapCount===1&&(l.minFilter=qn),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p)},i,r),l}}class IF extends js{constructor(e){super(e)}load(e,t,i,r){const a=new gi,l=new F0(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){a.image=u,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class uf extends ei{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class TI extends uf{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const oM=new hn,jC=new ee,XC=new ee;class tT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.mapType=$r,this.map=null,this.mapPass=null,this.matrix=new hn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new em,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new Si(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;jC.setFromMatrixPosition(e.matrixWorld),t.position.copy(jC),XC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(XC),t.updateMatrixWorld(),oM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oM,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(oM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class PF extends tT{constructor(){super(new vr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=Vp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class AI extends uf{constructor(e,t,i=0,r=Math.PI/3,a=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.distance=i,this.angle=r,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new PF}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class NF extends tT{constructor(){super(new vr(90,1,.5,500)),this.isPointLightShadow=!0}}class CI extends uf{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new NF}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class Fl extends Jx{constructor(e=-1,t=1,i=1,r=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,l=i+e,u=r+t,h=r-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=p*this.view.offsetX,l=a+p*this.view.width,u-=g*this.view.offsetY,h=u-g*this.view.height}this.projectionMatrix.makeOrthographic(a,l,u,h,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class LF extends tT{constructor(){super(new Fl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class RI extends uf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.shadow=new LF}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class DI extends uf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class OI extends uf{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class nT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ee)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*r),t.addScaledVector(l[2],.488603*a),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*r)),t.addScaledVector(l[5],1.092548*(r*a)),t.addScaledVector(l[6],.315392*(3*a*a-1)),t.addScaledVector(l[7],1.092548*(i*a)),t.addScaledVector(l[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*r),t.addScaledVector(l[2],2*.511664*a),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*r),t.addScaledVector(l[5],2*.429043*r*a),t.addScaledVector(l[6],.743125*a*a-.247708),t.addScaledVector(l[7],2*.429043*i*a),t.addScaledVector(l[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class II extends uf{constructor(e=new nT,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class xS extends js{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,l=new Ca(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(u){try{t(a.parse(JSON.parse(u)))}catch(h){r?r(h):Kt(h),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&It("MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const l=e.uniforms[a];switch(r.uniforms[a]={},l.type){case"t":r.uniforms[a].value=i(l.value);break;case"c":r.uniforms[a].value=new Bt().setHex(l.value);break;case"v2":r.uniforms[a].value=new Ye().fromArray(l.value);break;case"v3":r.uniforms[a].value=new ee().fromArray(l.value);break;case"v4":r.uniforms[a].value=new Si().fromArray(l.value);break;case"m3":r.uniforms[a].value=new Tn().fromArray(l.value);break;case"m4":r.uniforms[a].value=new hn().fromArray(l.value);break;default:r.uniforms[a].value=l.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new Ye().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ye().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return xS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:dI,SpriteMaterial:zw,RawShaderMaterial:qw,ShaderMaterial:ss,PointsMaterial:Bw,MeshPhysicalMaterial:hI,MeshStandardMaterial:Yw,MeshPhongMaterial:pI,MeshToonMaterial:mI,MeshNormalMaterial:gI,MeshLambertMaterial:vI,MeshDepthMaterial:_S,MeshDistanceMaterial:Zw,MeshBasicMaterial:Gc,MeshMatcapMaterial:yI,LineDashedMaterial:_I,LineBasicMaterial:$s,Material:Ms};return new t[e]}}class TE{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class PI extends Mn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class NI extends js{constructor(e){super(e)}load(e,t,i,r){const a=this,l=new Ca(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(u){try{t(a.parse(JSON.parse(u)))}catch(h){r?r(h):Kt(h),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(b,S){if(t[S]!==void 0)return t[S];const w=b.interleavedBuffers[S],E=a(b,w.buffer),R=wp(w.type,E),D=new iS(R,w.stride);return D.uuid=w.uuid,t[S]=D,D}function a(b,S){if(i[S]!==void 0)return i[S];const w=b.arrayBuffers[S],E=new Uint32Array(w).buffer;return i[S]=E,E}const l=e.isInstancedBufferGeometry?new PI:new Mn,u=e.data.index;if(u!==void 0){const b=wp(u.type,u.array);l.setIndex(new vi(b,1))}const h=e.data.attributes;for(const b in h){const S=h[b];let A;if(S.isInterleavedBufferAttribute){const w=r(e.data,S.data);A=new Dd(w,S.itemSize,S.offset,S.normalized)}else{const w=wp(S.type,S.array),E=S.isInstancedBufferAttribute?Wp:vi;A=new E(w,S.itemSize,S.normalized)}S.name!==void 0&&(A.name=S.name),S.usage!==void 0&&A.setUsage(S.usage),l.setAttribute(b,A)}const p=e.data.morphAttributes;if(p)for(const b in p){const S=p[b],A=[];for(let w=0,E=S.length;w<E;w++){const R=S[w];let D;if(R.isInterleavedBufferAttribute){const I=r(e.data,R.data);D=new Dd(I,R.itemSize,R.offset,R.normalized)}else{const I=wp(R.type,R.array);D=new vi(I,R.itemSize,R.normalized)}R.name!==void 0&&(D.name=R.name),A.push(D)}l.morphAttributes[b]=A}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const y=e.data.groups||e.data.drawcalls||e.data.offsets;if(y!==void 0)for(let b=0,S=y.length;b!==S;++b){const A=y[b];l.addGroup(A.start,A.count,A.materialIndex)}const _=e.data.boundingSphere;return _!==void 0&&(l.boundingSphere=new rs().fromJSON(_)),e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class UF extends js{constructor(e){super(e)}load(e,t,i,r){const a=this,l=this.path===""?TE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new Ca(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){let p=null;try{p=JSON.parse(h)}catch(y){r!==void 0&&r(y),y("ObjectLoader: Can't parse "+e+".",y.message);return}const g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),Kt("ObjectLoader: Can't load "+e);return}a.parse(p,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?TE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new Ca(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const l=await a.loadAsync(e,t),u=JSON.parse(l),h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(u)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),u=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,u),p=this.parseObject(e.object,a,h,u,i),g=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,g),this.bindLightTargets(p),t!==void 0){let y=!1;for(const _ in l)if(l[_].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,r,u,l,t),p=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,p),this.bindLightTargets(h),h}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new wd().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,l=e.length;a<l;a++){const u=new rS().fromJSON(e[a],r);i[u.uuid]=u}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new NI;for(let a=0,l=e.length;a<l;a++){let u;const h=e[a];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":u=r.parse(h);break;default:h.type in $C?u=$C[h.type].fromJSON(h,t):It(`ObjectLoader: Unsupported geometry type "${h.type}"`)}u.uuid=h.uuid,h.name!==void 0&&(u.name=h.name),h.userData!==void 0&&(u.userData=h.userData),i[h.uuid]=u}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new xS;a.setTextures(t);for(let l=0,u=e.length;l<u;l++){const h=e[l];i[h.uuid]===void 0&&(i[h.uuid]=a.parse(h)),r[h.uuid]=i[h.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=z0.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function l(h){return i.manager.itemStart(h),a.load(h,function(){i.manager.itemEnd(h)},void 0,function(){i.manager.itemError(h),i.manager.itemEnd(h)})}function u(h){if(typeof h=="string"){const p=h,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return l(g)}else return h.data?{data:wp(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new bS(t);a=new F0(h),a.setCrossOrigin(this.crossOrigin);for(let p=0,g=e.length;p<g;p++){const y=e[p],_=y.url;if(Array.isArray(_)){const b=[];for(let S=0,A=_.length;S<A;S++){const w=_[S],E=u(w);E!==null&&(E instanceof HTMLImageElement?b.push(E):b.push(new po(E.data,E.width,E.height)))}r[y.uuid]=new Xu(b)}else{const b=u(y.url);r[y.uuid]=new Xu(b)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await r.loadAsync(h)}else return l.data?{data:wp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){r=new F0(this.manager),r.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const h=e[l],p=h.url;if(Array.isArray(p)){const g=[];for(let y=0,_=p.length;y<_;y++){const b=p[y],S=await a(b);S!==null&&(S instanceof HTMLImageElement?g.push(S):g.push(new po(S.data,S.width,S.height)))}i[h.uuid]=new Xu(g)}else{const g=await a(h.url);i[h.uuid]=new Xu(g)}}}return i}parseTextures(e,t){function i(a,l){return typeof a=="number"?a:(It("ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}const r={};if(e!==void 0)for(let a=0,l=e.length;a<l;a++){const u=e[a];u.image===void 0&&It('ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&It("ObjectLoader: Undefined image",u.image);const h=t[u.image],p=h.data;let g;Array.isArray(p)?(g=new sv,p.length===6&&(g.needsUpdate=!0)):(p&&p.data?g=new po:g=new gi,p&&(g.needsUpdate=!0)),g.source=h,g.uuid=u.uuid,u.name!==void 0&&(g.name=u.name),u.mapping!==void 0&&(g.mapping=i(u.mapping,zF)),u.channel!==void 0&&(g.channel=u.channel),u.offset!==void 0&&g.offset.fromArray(u.offset),u.repeat!==void 0&&g.repeat.fromArray(u.repeat),u.center!==void 0&&g.center.fromArray(u.center),u.rotation!==void 0&&(g.rotation=u.rotation),u.wrap!==void 0&&(g.wrapS=i(u.wrap[0],qC),g.wrapT=i(u.wrap[1],qC)),u.format!==void 0&&(g.format=u.format),u.internalFormat!==void 0&&(g.internalFormat=u.internalFormat),u.type!==void 0&&(g.type=u.type),u.colorSpace!==void 0&&(g.colorSpace=u.colorSpace),u.minFilter!==void 0&&(g.minFilter=i(u.minFilter,YC)),u.magFilter!==void 0&&(g.magFilter=i(u.magFilter,YC)),u.anisotropy!==void 0&&(g.anisotropy=u.anisotropy),u.flipY!==void 0&&(g.flipY=u.flipY),u.generateMipmaps!==void 0&&(g.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(g.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(g.compareFunction=u.compareFunction),u.userData!==void 0&&(g.userData=u.userData),r[u.uuid]=g}return r}parseObject(e,t,i,r,a){let l;function u(_){return t[_]===void 0&&It("ObjectLoader: Undefined geometry",_),t[_]}function h(_){if(_!==void 0){if(Array.isArray(_)){const b=[];for(let S=0,A=_.length;S<A;S++){const w=_[S];i[w]===void 0&&It("ObjectLoader: Undefined material",w),b.push(i[w])}return b}return i[_]===void 0&&It("ObjectLoader: Undefined material",_),i[_]}}function p(_){return r[_]===void 0&&It("ObjectLoader: Undefined texture",_),r[_]}let g,y;switch(e.type){case"Scene":l=new av,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Bt(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new nS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new tS(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new vr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new Fl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new DI(e.color,e.intensity);break;case"DirectionalLight":l=new RI(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new CI(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new OI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new AI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new TI(e.color,e.groundColor,e.intensity);break;case"LightProbe":const _=new nT().fromArray(e.sh);l=new II(_,e.intensity);break;case"SkinnedMesh":g=u(e.geometry),y=h(e.material),l=new qO(g,y),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=u(e.geometry),y=h(e.material),l=new Gi(g,y);break;case"InstancedMesh":g=u(e.geometry),y=h(e.material);const b=e.count,S=e.instanceMatrix,A=e.instanceColor;l=new YO(g,y,b),l.instanceMatrix=new Wp(new Float32Array(S.array),16),A!==void 0&&(l.instanceColor=new Wp(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":g=u(e.geometry),y=h(e.material),l=new ZO(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,y),l.geometry=g,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._geometryInfo=e.geometryInfo.map(w=>{let E=null,R=null;return w.boundingBox!==void 0&&(E=new Ss().fromJSON(w.boundingBox)),w.boundingSphere!==void 0&&(R=new rs().fromJSON(w.boundingSphere)),{...w,boundingBox:E,boundingSphere:R}}),l._instanceInfo=e.instanceInfo,l._availableInstanceIds=e._availableInstanceIds,l._availableGeometryIds=e._availableGeometryIds,l._nextIndexStart=e.nextIndexStart,l._nextVertexStart=e.nextVertexStart,l._geometryCount=e.geometryCount,l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._matricesTexture=p(e.matricesTexture.uuid),l._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(l.boundingSphere=new rs().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(l.boundingBox=new Ss().fromJSON(e.boundingBox));break;case"LOD":l=new XO;break;case"Line":l=new nf(u(e.geometry),h(e.material));break;case"LineLoop":l=new KO(u(e.geometry),h(e.material));break;case"LineSegments":l=new Wl(u(e.geometry),h(e.material));break;case"PointCloud":case"Points":l=new QO(u(e.geometry),h(e.material));break;case"Sprite":l=new jO(h(e.material));break;case"Group":l=new Tp;break;case"Bone":l=new Fw;break;default:l=new ei}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let b=0;b<_.length;b++)l.add(this.parseObject(_[b],t,i,r,a))}if(e.animations!==void 0){const _=e.animations;for(let b=0;b<_.length;b++){const S=_[b];l.animations.push(a[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const _=e.levels;for(let b=0;b<_.length;b++){const S=_[b],A=l.getObjectByProperty("uuid",S.object);A!==void 0&&l.addLevel(A,S.distance,S.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?It("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new ei}})}}const zF={UVMapping:Ju,CubeReflectionMapping:jo,CubeRefractionMapping:ef,EquirectangularReflectionMapping:Lp,EquirectangularRefractionMapping:E0,CubeUVReflectionMapping:Jp},qC={RepeatWrapping:Up,ClampToEdgeWrapping:ar,MirroredRepeatWrapping:w0},YC={NearestFilter:yr,NearestMipmapNearestFilter:Aw,NearestMipmapLinearFilter:Ep,LinearFilter:qn,LinearMipmapNearestFilter:l0,LinearMipmapLinearFilter:Ll},lM=new WeakMap;class FF extends js{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&It("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&It("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=Ul.get(`image-bitmap:${e}`);if(l!==void 0){if(a.manager.itemStart(e),l.then){l.then(p=>{if(lM.has(l)===!0)r&&r(lM.get(l)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(p),a.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,u.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const h=fetch(e,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(p){return Ul.add(`image-bitmap:${e}`,p),t&&t(p),a.manager.itemEnd(e),p}).catch(function(p){r&&r(p),lM.set(h,p),Ul.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Ul.add(`image-bitmap:${e}`,h),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let $_;class iT{static getContext(){return $_===void 0&&($_=new(window.AudioContext||window.webkitAudioContext)),$_}static setContext(e){$_=e}}class BF extends js{constructor(e){super(e)}load(e,t,i,r){const a=this,l=new Ca(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(h){try{const p=h.slice(0);iT.getContext().decodeAudioData(p,function(y){t(y)}).catch(u)}catch(p){u(p)}},i,r);function u(h){r?r(h):Kt(h),a.manager.itemError(e)}}}const ZC=new hn,KC=new hn,nd=new hn;class kF{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new vr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,nd.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,l=t.near*Math.tan(Ed*t.fov*.5)/t.zoom;let u,h;KC.elements[12]=-r,ZC.elements[12]=r,u=-l*t.aspect+a,h=l*t.aspect+a,nd.elements[0]=2*t.near/(h-u),nd.elements[8]=(h+u)/(h-u),this.cameraL.projectionMatrix.copy(nd),u=-l*t.aspect-a,h=l*t.aspect-a,nd.elements[0]=2*t.near/(h-u),nd.elements[8]=(h+u)/(h-u),this.cameraR.projectionMatrix.copy(nd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(KC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ZC)}}class LI extends vr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class rT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const id=new ee,cM=new xs,VF=new ee,rd=new ee,sd=new ee;class HF extends ei{constructor(){super(),this.type="AudioListener",this.context=iT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new rT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(id,cM,VF),rd.set(0,0,-1).applyQuaternion(cM),sd.set(0,1,0).applyQuaternion(cM),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(id.x,i),t.positionY.linearRampToValueAtTime(id.y,i),t.positionZ.linearRampToValueAtTime(id.z,i),t.forwardX.linearRampToValueAtTime(rd.x,i),t.forwardY.linearRampToValueAtTime(rd.y,i),t.forwardZ.linearRampToValueAtTime(rd.z,i),t.upX.linearRampToValueAtTime(sd.x,i),t.upY.linearRampToValueAtTime(sd.y,i),t.upZ.linearRampToValueAtTime(sd.z,i)}else t.setPosition(id.x,id.y,id.z),t.setOrientation(rd.x,rd.y,rd.z,sd.x,sd.y,sd.z)}}class UI extends ei{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){It("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(It("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(It("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const ad=new ee,QC=new xs,GF=new ee,od=new ee;class WF extends UI{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ad,QC,GF),od.set(0,0,1).applyQuaternion(QC);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ad.x,i),t.positionY.linearRampToValueAtTime(ad.y,i),t.positionZ.linearRampToValueAtTime(ad.z,i),t.orientationX.linearRampToValueAtTime(od.x,i),t.orientationY.linearRampToValueAtTime(od.y,i),t.orientationZ.linearRampToValueAtTime(od.z,i)}else t.setPosition(ad.x,ad.y,ad.z),t.setOrientation(od.x,od.y,od.z)}}class $F{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class zI{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,l;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==r;++u)i[a+u]=i[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(i,a,0,u,r)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const h=t*this._origIndex;this._mixBufferRegion(i,r,h,1-a,t)}l>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let h=t,p=t+t;h!==p;++h)if(i[h]!==i[h+t]){u.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,l=r;a!==l;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let l=0;l!==a;++l)e[t+l]=e[i+l]}_slerp(e,t,i,r){xs.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const l=this._workIndex*a;xs.multiplyQuaternionsFlat(e,l,e,t,e,i),xs.slerpFlat(e,t,e,t,e,l,r)}_lerp(e,t,i,r,a){const l=1-r;for(let u=0;u!==a;++u){const h=t+u;e[h]=e[h]*l+e[i+u]*r}}_lerpAdditive(e,t,i,r,a){for(let l=0;l!==a;++l){const u=t+l;e[u]=e[u]+e[i+l]*r}}}const sT="\\[\\]\\.:\\/",jF=new RegExp("["+sT+"]","g"),aT="[^"+sT+"]",XF="[^"+sT.replace("\\.","")+"]",qF=/((?:WC+[\/:])*)/.source.replace("WC",aT),YF=/(WCOD+)?/.source.replace("WCOD",XF),ZF=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",aT),KF=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",aT),QF=new RegExp("^"+qF+YF+ZF+KF+"$"),JF=["material","materials","bones","map"];class eB{constructor(e,t,i){const r=i||Jn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Jn{constructor(e,t,i){this.path=t,this.parsedPath=i||Jn.parseTrackName(t),this.node=Jn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Jn.Composite(e,t,i):new Jn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jF,"")}static parseTrackName(e){const t=QF.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);JF.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let l=0;l<a.length;l++){const u=a[l];if(u.name===t||u.uuid===t)return u;const h=i(u.children);if(h)return h}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=Jn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){It("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){Kt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Kt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Kt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===p){p=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Kt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Kt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Kt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){Kt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[r];if(l===void 0){const p=t.nodeName;Kt("PropertyBinding: Trying to update property for track: "+p+"."+r+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?u=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){Kt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Kt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Jn.Composite=eB;Jn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Jn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Jn.prototype.GetterByBindingType=[Jn.prototype._getValue_direct,Jn.prototype._getValue_array,Jn.prototype._getValue_arrayElement,Jn.prototype._getValue_toArray];Jn.prototype.SetterByBindingTypeAndVersioning=[[Jn.prototype._setValue_direct,Jn.prototype._setValue_direct_setNeedsUpdate,Jn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jn.prototype._setValue_array,Jn.prototype._setValue_array_setNeedsUpdate,Jn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jn.prototype._setValue_arrayElement,Jn.prototype._setValue_arrayElement_setNeedsUpdate,Jn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jn.prototype._setValue_fromArray,Jn.prototype._setValue_fromArray_setNeedsUpdate,Jn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tB{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Aa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length;let u,h=e.length,p=this.nCachedObjects_;for(let g=0,y=arguments.length;g!==y;++g){const _=arguments[g],b=_.uuid;let S=t[b];if(S===void 0){S=h++,t[b]=S,e.push(_);for(let A=0,w=l;A!==w;++A)a[A].push(new Jn(_,i[A],r[A]))}else if(S<p){u=e[S];const A=--p,w=e[A];t[w.uuid]=S,e[S]=w,t[b]=A,e[A]=_;for(let E=0,R=l;E!==R;++E){const D=a[E],I=D[A];let L=D[S];D[S]=I,L===void 0&&(L=new Jn(_,i[E],r[E])),D[A]=L}}else e[S]!==u&&Kt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],p=h.uuid,g=t[p];if(g!==void 0&&g>=a){const y=a++,_=e[y];t[_.uuid]=g,e[g]=_,t[p]=y,e[y]=h;for(let b=0,S=r;b!==S;++b){const A=i[b],w=A[y],E=A[g];A[g]=w,A[y]=E}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,l=e.length;for(let u=0,h=arguments.length;u!==h;++u){const p=arguments[u],g=p.uuid,y=t[g];if(y!==void 0)if(delete t[g],y<a){const _=--a,b=e[_],S=--l,A=e[S];t[b.uuid]=y,e[y]=b,t[A.uuid]=_,e[_]=A,e.pop();for(let w=0,E=r;w!==E;++w){const R=i[w],D=R[_],I=R[S];R[y]=D,R[_]=I,R.pop()}}else{const _=--l,b=e[_];_>0&&(t[b.uuid]=y),e[y]=b,e.pop();for(let S=0,A=r;S!==A;++S){const w=i[S];w[y]=w[_],w.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const l=this._paths,u=this._parsedPaths,h=this._objects,p=h.length,g=this.nCachedObjects_,y=new Array(p);r=a.length,i[e]=r,l.push(e),u.push(t),a.push(y);for(let _=g,b=h.length;_!==b;++_){const S=h[_];y[_]=new Jn(S,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,l=this._bindings,u=l.length-1,h=l[u],p=e[u];t[p]=i,l[i]=h,l.pop(),a[i]=a[u],a.pop(),r[i]=r[u],r.pop()}}}class FI{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,l=a.length,u=new Array(l),h={endingStart:vd,endingEnd:vd};for(let p=0;p!==l;++p){const g=a[p].createInterpolant(null);u[p]=g,g.settings=h}this._interpolantSettings=h,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,a=e._clip.duration,l=a/r,u=r/a;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=r._lendControlInterpolant(),this._timeScaleInterpolant=u);const h=u.parameterPositions,p=u.sampleValues;return h[0]=a,h[1]=a+i,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const h=(e-a)*i;h<0||i===0?t=0:(this._startTime=null,t=i*h)}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const h=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case Iw:for(let g=0,y=h.length;g!==y;++g)h[g].evaluate(l),p[g].accumulateAdditive(u);break;case qx:default:for(let g=0,y=h.length;g!==y;++g)h[g].evaluate(l),p[g].accumulate(r,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const l=i===CO;if(e===0)return a===-1?r:l&&(a&1)===1?t-r:r;if(i===TO){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),r>=t||r<0){const u=Math.floor(r/t);r-=t*u,a+=Math.abs(u);const h=this.repetitions-a;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=r;if(l&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=yd,r.endingEnd=yd):(e?r.endingStart=this.zeroSlopeAtStart?yd:vd:r.endingStart=A0,t?r.endingEnd=this.zeroSlopeAtEnd?yd:vd:r.endingEnd=A0)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let l=this._weightInterpolant;l===null&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=a,h[0]=t,u[1]=a+e,h[1]=i,this}}const nB=new Float32Array(1);class iB extends Gl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,l=e._propertyBindings,u=e._interpolants,h=i.uuid,p=this._bindingsByRootAndName;let g=p[h];g===void 0&&(g={},p[h]=g);for(let y=0;y!==a;++y){const _=r[y],b=_.name;let S=g[b];if(S!==void 0)++S.referenceCount,l[y]=S;else{if(S=l[y],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,h,b));continue}const A=t&&t._propertyBindings[y].binding.parsedPath;S=new zI(Jn.create(i,b,A),_.ValueTypeName,_.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,h,b),l[y]=S}u[y].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let l=a[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=r.length,r.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,l=this._actionsByClip,u=l[a],h=u.knownActions,p=h[h.length-1],g=e._byClipCacheIndex;p._byClipCacheIndex=g,h[g]=p,h.pop(),e._byClipCacheIndex=null;const y=u.actionByRoot,_=(e._localRoot||this._root).uuid;delete y[_],h.length===0&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let l=r[t];l===void 0&&(l={},r[t]=l),l[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,l=this._bindingsByRootAndName,u=l[r],h=t[t.length-1],p=e._cacheIndex;h._cacheIndex=p,t[p]=h,t.pop(),delete u[a],Object.keys(u).length===0&&delete l[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Qw(new Float32Array(2),new Float32Array(2),1,nB),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let l=typeof e=="string"?z0.findByName(r,e):e;const u=l!==null?l.uuid:e,h=this._actionsByClip[u];let p=null;if(i===void 0&&(l!==null?i=l.blendMode:i=qx),h!==void 0){const y=h.actionByRoot[a];if(y!==void 0&&y.blendMode===i)return y;p=h.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const g=new FI(this,l,t,i);return this._bindAction(g,p),this._addInactiveAction(g,u,a),g}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?z0.findByName(i,e):e,l=a?a.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==i;++p)t[p]._update(r,e,a,l);const u=this._bindings,h=this._nActiveBindings;for(let p=0;p!==h;++p)u[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const l=a.knownActions;for(let u=0,h=l.length;u!==h;++u){const p=l[u];this._deactivateAction(p);const g=p._cacheIndex,y=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,y._cacheIndex=g,t[g]=y,t.pop(),this._removeInactiveBindingsForAction(p)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const u=i[l].actionByRoot,h=u[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const l in a){const u=a[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class rB extends Nw{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Qx(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class oT{constructor(e){this.value=e}clone(){return new oT(this.value.clone===void 0?this.value:this.value.clone())}}let sB=0;class aB extends Gl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:sB++}),this.name="",this.usage=R0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let l=0;l<a.length;l++)this.uniforms.push(a[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class oB extends iS{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class lB{constructor(e,t,i,r,a,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const JC=new hn;class lT{constructor(e,t,i=0,r=1/0){this.ray=new zd(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Hp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Kt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return JC.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(JC),this}intersectObject(e,t=!0,i=[]){return AE(e,this,i,t),i.sort(eR),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)AE(e[r],this,i,t);return i.sort(eR),i}}function eR(n,e){return n.distance-e.distance}function AE(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let l=0,u=a.length;l<u;l++)AE(a[l],e,t,!0)}}class cB{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=uB.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function uB(){this._document.hidden===!1&&this.reset()}class CE{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=fn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class fB{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class cT{constructor(e,t,i,r){cT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const tR=new Ye;class dB{constructor(e=new Ye(1/0,1/0),t=new Ye(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=tR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,tR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const nR=new ee,j_=new ee,hp=new ee,pp=new ee,uM=new ee,hB=new ee,pB=new ee;class mB{constructor(e=new ee,t=new ee){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){nR.subVectors(e,this.start),j_.subVectors(this.end,this.start);const i=j_.dot(j_);let a=j_.dot(nR)/i;return t&&(a=fn(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=hB,i=pB){const r=10000000000000001e-32;let a,l;const u=this.start,h=e.start,p=this.end,g=e.end;hp.subVectors(p,u),pp.subVectors(g,h),uM.subVectors(u,h);const y=hp.dot(hp),_=pp.dot(pp),b=pp.dot(uM);if(y<=r&&_<=r)return t.copy(u),i.copy(h),t.sub(i),t.dot(t);if(y<=r)a=0,l=b/_,l=fn(l,0,1);else{const S=hp.dot(uM);if(_<=r)l=0,a=fn(-S/y,0,1);else{const A=hp.dot(pp),w=y*_-A*A;w!==0?a=fn((A*b-S*_)/w,0,1):a=0,l=(A*a+b)/_,l<0?(l=0,a=fn(-S/y,0,1)):l>1&&(l=1,a=fn((A-S)/y,0,1))}}return t.copy(u).add(hp.multiplyScalar(a)),i.copy(h).add(pp.multiplyScalar(l)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const iR=new ee;class gB extends ei{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Mn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,h=32;l<h;l++,u++){const p=l/h*Math.PI*2,g=u/h*Math.PI*2;r.push(Math.cos(p),Math.sin(p),1,Math.cos(g),Math.sin(g),1)}i.setAttribute("position",new Gt(r,3));const a=new $s({fog:!1,toneMapped:!1});this.cone=new Wl(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),iR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(iR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Hu=new ee,X_=new hn,fM=new hn;class vB extends Wl{constructor(e){const t=BI(e),i=new Mn,r=[],a=[];for(let p=0;p<t.length;p++){const g=t[p];g.parent&&g.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new Gt(r,3)),i.setAttribute("color",new Gt(a,3));const l=new $s({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const u=new Bt(255),h=new Bt(65280);this.setColors(u,h)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");fM.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<t.length;a++){const u=t[a];u.parent&&u.parent.isBone&&(X_.multiplyMatrices(fM,u.matrixWorld),Hu.setFromMatrixPosition(X_),r.setXYZ(l,Hu.x,Hu.y,Hu.z),X_.multiplyMatrices(fM,u.parent.matrixWorld),Hu.setFromMatrixPosition(X_),r.setXYZ(l+1,Hu.x,Hu.y,Hu.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function BI(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...BI(n.children[t]));return e}class yB extends Gi{constructor(e,t,i){const r=new fv(t,4,2),a=new Gc({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _B=new ee,rR=new Bt,sR=new Bt;class bB extends ei{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new uv(t);r.rotateY(Math.PI*.5),this.material=new Gc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),l=new Float32Array(a.count*3);r.setAttribute("color",new vi(l,3)),this.add(new Gi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");rR.copy(this.light.color),sR.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?rR:sR;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(_B.setFromMatrixPosition(this.light.matrixWorld).negate())}}class xB extends Wl{constructor(e=10,t=10,i=4473924,r=8947848){i=new Bt(i),r=new Bt(r);const a=t/2,l=e/t,u=e/2,h=[],p=[];for(let _=0,b=0,S=-u;_<=t;_++,S+=l){h.push(-u,0,S,u,0,S),h.push(S,0,-u,S,0,u);const A=_===a?i:r;A.toArray(p,b),b+=3,A.toArray(p,b),b+=3,A.toArray(p,b),b+=3,A.toArray(p,b),b+=3}const g=new Mn;g.setAttribute("position",new Gt(h,3)),g.setAttribute("color",new Gt(p,3));const y=new $s({vertexColors:!0,toneMapped:!1});super(g,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class SB extends Wl{constructor(e=10,t=16,i=8,r=64,a=4473924,l=8947848){a=new Bt(a),l=new Bt(l);const u=[],h=[];if(t>1)for(let y=0;y<t;y++){const _=y/t*(Math.PI*2),b=Math.sin(_)*e,S=Math.cos(_)*e;u.push(0,0,0),u.push(b,0,S);const A=y&1?a:l;h.push(A.r,A.g,A.b),h.push(A.r,A.g,A.b)}for(let y=0;y<i;y++){const _=y&1?a:l,b=e-e/i*y;for(let S=0;S<r;S++){let A=S/r*(Math.PI*2),w=Math.sin(A)*b,E=Math.cos(A)*b;u.push(w,0,E),h.push(_.r,_.g,_.b),A=(S+1)/r*(Math.PI*2),w=Math.sin(A)*b,E=Math.cos(A)*b,u.push(w,0,E),h.push(_.r,_.g,_.b)}}const p=new Mn;p.setAttribute("position",new Gt(u,3)),p.setAttribute("color",new Gt(h,3));const g=new $s({vertexColors:!0,toneMapped:!1});super(p,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const aR=new ee,q_=new ee,oR=new ee;class MB extends ei{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Mn;r.setAttribute("position",new Gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new $s({fog:!1,toneMapped:!1});this.lightPlane=new nf(r,a),this.add(this.lightPlane),r=new Mn,r.setAttribute("position",new Gt([0,0,0,0,0,1],3)),this.targetLine=new nf(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),aR.setFromMatrixPosition(this.light.matrixWorld),q_.setFromMatrixPosition(this.light.target.matrixWorld),oR.subVectors(q_,aR),this.lightPlane.lookAt(q_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(q_),this.targetLine.scale.z=oR.length()}}const Y_=new ee,sr=new Jx;class EB extends Wl{constructor(e){const t=new Mn,i=new $s({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(S,A){h(S),h(A)}function h(S){r.push(0,0,0),a.push(0,0,0),l[S]===void 0&&(l[S]=[]),l[S].push(r.length/3-1)}t.setAttribute("position",new Gt(r,3)),t.setAttribute("color",new Gt(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new Bt(16755200),g=new Bt(16711680),y=new Bt(43775),_=new Bt(16777215),b=new Bt(3355443);this.setColors(p,g,y,_,b)}setColors(e,t,i,r,a){const u=this.geometry.getAttribute("color");return u.setXYZ(0,e.r,e.g,e.b),u.setXYZ(1,e.r,e.g,e.b),u.setXYZ(2,e.r,e.g,e.b),u.setXYZ(3,e.r,e.g,e.b),u.setXYZ(4,e.r,e.g,e.b),u.setXYZ(5,e.r,e.g,e.b),u.setXYZ(6,e.r,e.g,e.b),u.setXYZ(7,e.r,e.g,e.b),u.setXYZ(8,e.r,e.g,e.b),u.setXYZ(9,e.r,e.g,e.b),u.setXYZ(10,e.r,e.g,e.b),u.setXYZ(11,e.r,e.g,e.b),u.setXYZ(12,e.r,e.g,e.b),u.setXYZ(13,e.r,e.g,e.b),u.setXYZ(14,e.r,e.g,e.b),u.setXYZ(15,e.r,e.g,e.b),u.setXYZ(16,e.r,e.g,e.b),u.setXYZ(17,e.r,e.g,e.b),u.setXYZ(18,e.r,e.g,e.b),u.setXYZ(19,e.r,e.g,e.b),u.setXYZ(20,e.r,e.g,e.b),u.setXYZ(21,e.r,e.g,e.b),u.setXYZ(22,e.r,e.g,e.b),u.setXYZ(23,e.r,e.g,e.b),u.setXYZ(24,t.r,t.g,t.b),u.setXYZ(25,t.r,t.g,t.b),u.setXYZ(26,t.r,t.g,t.b),u.setXYZ(27,t.r,t.g,t.b),u.setXYZ(28,t.r,t.g,t.b),u.setXYZ(29,t.r,t.g,t.b),u.setXYZ(30,t.r,t.g,t.b),u.setXYZ(31,t.r,t.g,t.b),u.setXYZ(32,i.r,i.g,i.b),u.setXYZ(33,i.r,i.g,i.b),u.setXYZ(34,i.r,i.g,i.b),u.setXYZ(35,i.r,i.g,i.b),u.setXYZ(36,i.r,i.g,i.b),u.setXYZ(37,i.r,i.g,i.b),u.setXYZ(38,r.r,r.g,r.b),u.setXYZ(39,r.r,r.g,r.b),u.setXYZ(40,a.r,a.g,a.b),u.setXYZ(41,a.r,a.g,a.b),u.setXYZ(42,a.r,a.g,a.b),u.setXYZ(43,a.r,a.g,a.b),u.setXYZ(44,a.r,a.g,a.b),u.setXYZ(45,a.r,a.g,a.b),u.setXYZ(46,a.r,a.g,a.b),u.setXYZ(47,a.r,a.g,a.b),u.setXYZ(48,a.r,a.g,a.b),u.setXYZ(49,a.r,a.g,a.b),u.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let a,l;if(sr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,l=0;else if(this.camera.coordinateSystem===Ta)a=-1,l=1;else if(this.camera.coordinateSystem===Bp)a=0,l=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);gr("c",t,e,sr,0,0,a),gr("t",t,e,sr,0,0,l),gr("n1",t,e,sr,-i,-r,a),gr("n2",t,e,sr,i,-r,a),gr("n3",t,e,sr,-i,r,a),gr("n4",t,e,sr,i,r,a),gr("f1",t,e,sr,-i,-r,l),gr("f2",t,e,sr,i,-r,l),gr("f3",t,e,sr,-i,r,l),gr("f4",t,e,sr,i,r,l),gr("u1",t,e,sr,i*.7,r*1.1,a),gr("u2",t,e,sr,-i*.7,r*1.1,a),gr("u3",t,e,sr,0,r*2,a),gr("cf1",t,e,sr,-i,0,l),gr("cf2",t,e,sr,i,0,l),gr("cf3",t,e,sr,0,-r,l),gr("cf4",t,e,sr,0,r,l),gr("cn1",t,e,sr,-i,0,a),gr("cn2",t,e,sr,i,0,a),gr("cn3",t,e,sr,0,-r,a),gr("cn4",t,e,sr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function gr(n,e,t,i,r,a,l){Y_.set(r,a,l).unproject(i);const u=e[n];if(u!==void 0){const h=t.getAttribute("position");for(let p=0,g=u.length;p<g;p++)h.setXYZ(u[p],Y_.x,Y_.y,Y_.z)}}const Z_=new Ss;class wB extends Wl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new Mn;a.setIndex(new vi(i,1)),a.setAttribute("position",new vi(r,3)),super(a,new $s({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Z_.setFromObject(this.object),Z_.isEmpty())return;const e=Z_.min,t=Z_.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TB extends Wl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Mn;a.setIndex(new vi(i,1)),a.setAttribute("position",new Gt(r,3)),super(a,new $s({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class AB extends nf{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Mn;l.setAttribute("position",new Gt(a,3)),l.computeBoundingSphere(),super(l,new $s({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new Mn;h.setAttribute("position",new Gt(u,3)),h.computeBoundingSphere(),this.add(new Gi(h,new Gc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const lR=new ee;let K_,dM;class CB extends ei{constructor(e=new ee(0,0,1),t=new ee(0,0,0),i=1,r=16776960,a=i*.2,l=a*.2){super(),this.type="ArrowHelper",K_===void 0&&(K_=new Mn,K_.setAttribute("position",new Gt([0,0,0,0,1,0],3)),dM=new lv(.5,1,5,1),dM.translate(0,-.5,0)),this.position.copy(t),this.line=new nf(K_,new $s({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gi(dM,new Gc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class RB extends Wl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Mn;r.setAttribute("position",new Gt(t,3)),r.setAttribute("color",new Gt(i,3));const a=new $s({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new Bt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class DB{constructor(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new hx,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,l){return this.currentPath.bezierCurveTo(e,t,i,r,a,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(E){const R=[];for(let D=0,I=E.length;D<I;D++){const L=E[D],N=new wd;N.curves=L.curves,R.push(N)}return R}function i(E,R){const D=R.length;let I=!1;for(let L=D-1,N=0;N<D;L=N++){let F=R[L],V=R[N],P=V.x-F.x,U=V.y-F.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(F=R[N],P=-P,V=R[L],U=-U),E.y<F.y||E.y>V.y)continue;if(E.y===F.y){if(E.x===F.x)return!0}else{const W=U*(E.x-F.x)-P*(E.y-F.y);if(W===0)return!0;if(W<0)continue;I=!I}}else{if(E.y!==F.y)continue;if(V.x<=E.x&&E.x<=F.x||F.x<=E.x&&E.x<=V.x)return!0}}return I}const r=Go.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,u,h;const p=[];if(a.length===1)return u=a[0],h=new wd,h.curves=u.curves,p.push(h),p;let g=!r(a[0].getPoints());g=e?!g:g;const y=[],_=[];let b=[],S=0,A;_[S]=void 0,b[S]=[];for(let E=0,R=a.length;E<R;E++)u=a[E],A=u.getPoints(),l=r(A),l=e?!l:l,l?(!g&&_[S]&&S++,_[S]={s:new wd,p:A},_[S].s.curves=u.curves,g&&S++,b[S]=[]):b[S].push({h:u,p:A[0]});if(!_[0])return t(a);if(_.length>1){let E=!1,R=0;for(let D=0,I=_.length;D<I;D++)y[D]=[];for(let D=0,I=_.length;D<I;D++){const L=b[D];for(let N=0;N<L.length;N++){const F=L[N];let V=!0;for(let P=0;P<_.length;P++)i(F.p,_[P].p)&&(D!==P&&R++,V?(V=!1,y[P].push(F)):E=!0);V&&y[D].push(F)}}R>0&&E===!1&&(b=y)}let w;for(let E=0,R=_.length;E<R;E++){h=_[E].s,p.push(h),w=b[E];for(let D=0,I=w.length;D<I;D++)h.holes.push(w[D].h)}return p}}class OB extends Gl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){It("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function IB(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function PB(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function NB(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function RE(n,e,t,i){const r=LB(i);switch(t){case Dw:return n*e;case iv:return n*e/r.components*r.byteLength;case rv:return n*e/r.components*r.byteLength;case Rd:return n*e*2/r.components*r.byteLength;case jx:return n*e*2/r.components*r.byteLength;case Ow:return n*e*3/r.components*r.byteLength;case _r:return n*e*4/r.components*r.byteLength;case Xx:return n*e*4/r.components*r.byteLength;case c0:case u0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case f0:case d0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Ib:case Nb:return Math.max(n,16)*Math.max(e,8)/4;case Ob:case Pb:return Math.max(n,8)*Math.max(e,8)/2;case Lb:case Ub:case Fb:case Bb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case zb:case kb:case Vb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Hb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Gb:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Wb:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case $b:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case jb:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Xb:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case qb:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Yb:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Zb:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Kb:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Qb:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Jb:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case ex:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case tx:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case nx:case ix:case rx:return Math.ceil(n/4)*Math.ceil(e/4)*16;case sx:case ax:return Math.ceil(n/4)*Math.ceil(e/4)*8;case ox:case lx:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function LB(n){switch(n){case $r:case Hx:return{byteLength:1,components:1};case zp:case Gx:case or:return{byteLength:2,components:1};case Wx:case $x:return{byteLength:2,components:4};case Da:case nv:case Hi:return{byteLength:4,components:1};case Cw:case Rw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class UB{static contain(e,t){return IB(e,t)}static cover(e,t){return PB(e,t)}static fill(e){return NB(e)}static getByteLength(e,t,i,r){return RE(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ev}}));typeof window<"u"&&(window.__THREE__?It("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ev);function kI(){let n=null,e=!1,t=null,i=null;function r(a,l){t(a,l),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function zB(n){const e=new WeakMap;function t(u,h){const p=u.array,g=u.usage,y=p.byteLength,_=n.createBuffer();n.bindBuffer(h,_),n.bufferData(h,p,g),u.onUploadCallback();let b;if(p instanceof Float32Array)b=n.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)b=n.HALF_FLOAT;else if(p instanceof Uint16Array)u.isFloat16BufferAttribute?b=n.HALF_FLOAT:b=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)b=n.SHORT;else if(p instanceof Uint32Array)b=n.UNSIGNED_INT;else if(p instanceof Int32Array)b=n.INT;else if(p instanceof Int8Array)b=n.BYTE;else if(p instanceof Uint8Array)b=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)b=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:b,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version,size:y}}function i(u,h,p){const g=h.array,y=h.updateRanges;if(n.bindBuffer(p,u),y.length===0)n.bufferSubData(p,0,g);else{y.sort((b,S)=>b.start-S.start);let _=0;for(let b=1;b<y.length;b++){const S=y[_],A=y[b];A.start<=S.start+S.count+1?S.count=Math.max(S.count,A.start+A.count-S.start):(++_,y[_]=A)}y.length=_+1;for(let b=0,S=y.length;b<S;b++){const A=y[b];n.bufferSubData(p,A.start*g.BYTES_PER_ELEMENT,g,A.start,A.count)}h.clearUpdateRanges()}h.onUploadCallback()}function r(u){return u.isInterleavedBufferAttribute&&(u=u.data),e.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const h=e.get(u);h&&(n.deleteBuffer(h.buffer),e.delete(u))}function l(u,h){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const g=e.get(u);(!g||g.version<u.version)&&e.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const p=e.get(u);if(p===void 0)e.set(u,t(u,h));else if(p.version<u.version){if(p.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,u,h),p.version=u.version}}return{get:r,remove:a,update:l}}var FB=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,BB=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kB=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,VB=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,HB=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,GB=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,WB=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$B=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,jB=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,XB=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,qB=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,YB=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ZB=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,KB=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,QB=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,JB=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,e5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,t5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,n5=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,i5=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,r5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,s5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,a5=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,o5=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,l5=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,c5=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,u5=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,f5=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,d5=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,h5=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,p5="gl_FragColor = linearToOutputTexel( gl_FragColor );",m5=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,g5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,v5=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,y5=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_5=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,b5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,x5=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,S5=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,M5=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,E5=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,w5=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,T5=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,A5=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,C5=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,R5=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,D5=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,O5=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,I5=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,P5=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,N5=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,L5=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,U5=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,z5=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,F5=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,B5=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,k5=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,V5=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,H5=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,G5=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,W5=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,$5=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,j5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,X5=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,q5=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Y5=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Z5=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,K5=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Q5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,J5=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,ek=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,tk=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,nk=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ik=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,rk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sk=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ak=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ok=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,lk=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ck=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,uk=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,fk=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dk=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,hk=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,pk=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,mk=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,gk=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,vk=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,yk=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_k=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,bk=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,xk=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Sk=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Mk=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ek=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,wk=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Tk=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Ak=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ck=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Rk=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Dk=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ok=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Ik=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Pk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Nk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Lk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Uk=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const zk=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Fk=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Bk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kk=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Vk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Hk=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Wk=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,$k=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,jk=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,Xk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qk=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Yk=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Zk=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Kk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Qk=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jk=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,e6=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t6=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,n6=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i6=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,r6=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,s6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,o6=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,l6=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c6=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u6=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f6=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,d6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,h6=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,p6=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,m6=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,g6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Pn={alphahash_fragment:FB,alphahash_pars_fragment:BB,alphamap_fragment:kB,alphamap_pars_fragment:VB,alphatest_fragment:HB,alphatest_pars_fragment:GB,aomap_fragment:WB,aomap_pars_fragment:$B,batching_pars_vertex:jB,batching_vertex:XB,begin_vertex:qB,beginnormal_vertex:YB,bsdfs:ZB,iridescence_fragment:KB,bumpmap_pars_fragment:QB,clipping_planes_fragment:JB,clipping_planes_pars_fragment:e5,clipping_planes_pars_vertex:t5,clipping_planes_vertex:n5,color_fragment:i5,color_pars_fragment:r5,color_pars_vertex:s5,color_vertex:a5,common:o5,cube_uv_reflection_fragment:l5,defaultnormal_vertex:c5,displacementmap_pars_vertex:u5,displacementmap_vertex:f5,emissivemap_fragment:d5,emissivemap_pars_fragment:h5,colorspace_fragment:p5,colorspace_pars_fragment:m5,envmap_fragment:g5,envmap_common_pars_fragment:v5,envmap_pars_fragment:y5,envmap_pars_vertex:_5,envmap_physical_pars_fragment:D5,envmap_vertex:b5,fog_vertex:x5,fog_pars_vertex:S5,fog_fragment:M5,fog_pars_fragment:E5,gradientmap_pars_fragment:w5,lightmap_pars_fragment:T5,lights_lambert_fragment:A5,lights_lambert_pars_fragment:C5,lights_pars_begin:R5,lights_toon_fragment:O5,lights_toon_pars_fragment:I5,lights_phong_fragment:P5,lights_phong_pars_fragment:N5,lights_physical_fragment:L5,lights_physical_pars_fragment:U5,lights_fragment_begin:z5,lights_fragment_maps:F5,lights_fragment_end:B5,logdepthbuf_fragment:k5,logdepthbuf_pars_fragment:V5,logdepthbuf_pars_vertex:H5,logdepthbuf_vertex:G5,map_fragment:W5,map_pars_fragment:$5,map_particle_fragment:j5,map_particle_pars_fragment:X5,metalnessmap_fragment:q5,metalnessmap_pars_fragment:Y5,morphinstance_vertex:Z5,morphcolor_vertex:K5,morphnormal_vertex:Q5,morphtarget_pars_vertex:J5,morphtarget_vertex:ek,normal_fragment_begin:tk,normal_fragment_maps:nk,normal_pars_fragment:ik,normal_pars_vertex:rk,normal_vertex:sk,normalmap_pars_fragment:ak,clearcoat_normal_fragment_begin:ok,clearcoat_normal_fragment_maps:lk,clearcoat_pars_fragment:ck,iridescence_pars_fragment:uk,opaque_fragment:fk,packing:dk,premultiplied_alpha_fragment:hk,project_vertex:pk,dithering_fragment:mk,dithering_pars_fragment:gk,roughnessmap_fragment:vk,roughnessmap_pars_fragment:yk,shadowmap_pars_fragment:_k,shadowmap_pars_vertex:bk,shadowmap_vertex:xk,shadowmask_pars_fragment:Sk,skinbase_vertex:Mk,skinning_pars_vertex:Ek,skinning_vertex:wk,skinnormal_vertex:Tk,specularmap_fragment:Ak,specularmap_pars_fragment:Ck,tonemapping_fragment:Rk,tonemapping_pars_fragment:Dk,transmission_fragment:Ok,transmission_pars_fragment:Ik,uv_pars_fragment:Pk,uv_pars_vertex:Nk,uv_vertex:Lk,worldpos_vertex:Uk,background_vert:zk,background_frag:Fk,backgroundCube_vert:Bk,backgroundCube_frag:kk,cube_vert:Vk,cube_frag:Hk,depth_vert:Gk,depth_frag:Wk,distance_vert:$k,distance_frag:jk,equirect_vert:Xk,equirect_frag:qk,linedashed_vert:Yk,linedashed_frag:Zk,meshbasic_vert:Kk,meshbasic_frag:Qk,meshlambert_vert:Jk,meshlambert_frag:e6,meshmatcap_vert:t6,meshmatcap_frag:n6,meshnormal_vert:i6,meshnormal_frag:r6,meshphong_vert:s6,meshphong_frag:a6,meshphysical_vert:o6,meshphysical_frag:l6,meshtoon_vert:c6,meshtoon_frag:u6,points_vert:f6,points_frag:d6,shadow_vert:h6,shadow_frag:p6,sprite_vert:m6,sprite_frag:g6},Nt={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tn}},envmap:{envMap:{value:null},envMapRotation:{value:new Tn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tn},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0},uvTransform:{value:new Tn}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}}},Bo={basic:{uniforms:Fs([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.fog]),vertexShader:Pn.meshbasic_vert,fragmentShader:Pn.meshbasic_frag},lambert:{uniforms:Fs([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:Pn.meshlambert_vert,fragmentShader:Pn.meshlambert_frag},phong:{uniforms:Fs([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:Pn.meshphong_vert,fragmentShader:Pn.meshphong_frag},standard:{uniforms:Fs([Nt.common,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.roughnessmap,Nt.metalnessmap,Nt.fog,Nt.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Pn.meshphysical_vert,fragmentShader:Pn.meshphysical_frag},toon:{uniforms:Fs([Nt.common,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.gradientmap,Nt.fog,Nt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:Pn.meshtoon_vert,fragmentShader:Pn.meshtoon_frag},matcap:{uniforms:Fs([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,{matcap:{value:null}}]),vertexShader:Pn.meshmatcap_vert,fragmentShader:Pn.meshmatcap_frag},points:{uniforms:Fs([Nt.points,Nt.fog]),vertexShader:Pn.points_vert,fragmentShader:Pn.points_frag},dashed:{uniforms:Fs([Nt.common,Nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Pn.linedashed_vert,fragmentShader:Pn.linedashed_frag},depth:{uniforms:Fs([Nt.common,Nt.displacementmap]),vertexShader:Pn.depth_vert,fragmentShader:Pn.depth_frag},normal:{uniforms:Fs([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,{opacity:{value:1}}]),vertexShader:Pn.meshnormal_vert,fragmentShader:Pn.meshnormal_frag},sprite:{uniforms:Fs([Nt.sprite,Nt.fog]),vertexShader:Pn.sprite_vert,fragmentShader:Pn.sprite_frag},background:{uniforms:{uvTransform:{value:new Tn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Pn.background_vert,fragmentShader:Pn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Tn}},vertexShader:Pn.backgroundCube_vert,fragmentShader:Pn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Pn.cube_vert,fragmentShader:Pn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Pn.equirect_vert,fragmentShader:Pn.equirect_frag},distance:{uniforms:Fs([Nt.common,Nt.displacementmap,{referencePosition:{value:new ee},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Pn.distance_vert,fragmentShader:Pn.distance_frag},shadow:{uniforms:Fs([Nt.lights,Nt.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:Pn.shadow_vert,fragmentShader:Pn.shadow_frag}};Bo.physical={uniforms:Fs([Bo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tn},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tn},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tn},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tn},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tn},anisotropyVector:{value:new Ye},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tn}}]),vertexShader:Pn.meshphysical_vert,fragmentShader:Pn.meshphysical_frag};const Q_={r:0,b:0,g:0},ld=new Oa,v6=new hn;function y6(n,e,t,i,r,a,l){const u=new Bt(0);let h=a===!0?0:1,p,g,y=null,_=0,b=null;function S(D){let I=D.isScene===!0?D.background:null;return I&&I.isTexture&&(I=(D.backgroundBlurriness>0?t:e).get(I)),I}function A(D){let I=!1;const L=S(D);L===null?E(u,h):L&&L.isColor&&(E(L,1),I=!0);const N=n.xr.getEnvironmentBlendMode();N==="additive"?i.buffers.color.setClear(0,0,0,1,l):N==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,l),(n.autoClear||I)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(D,I){const L=S(I);L&&(L.isCubeTexture||L.mapping===Jp)?(g===void 0&&(g=new Gi(new Fd(1,1,1),new ss({name:"BackgroundCubeMaterial",uniforms:Gp(Bo.backgroundCube.uniforms),vertexShader:Bo.backgroundCube.vertexShader,fragmentShader:Bo.backgroundCube.fragmentShader,side:Ws,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(N,F,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(g)),ld.copy(I.backgroundRotation),ld.x*=-1,ld.y*=-1,ld.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(ld.y*=-1,ld.z*=-1),g.material.uniforms.envMap.value=L,g.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(v6.makeRotationFromEuler(ld)),g.material.toneMapped=$n.getTransfer(L.colorSpace)!==li,(y!==L||_!==L.version||b!==n.toneMapping)&&(g.material.needsUpdate=!0,y=L,_=L.version,b=n.toneMapping),g.layers.enableAll(),D.unshift(g,g.geometry,g.material,0,0,null)):L&&L.isTexture&&(p===void 0&&(p=new Gi(new Wc(2,2),new ss({name:"BackgroundMaterial",uniforms:Gp(Bo.background.uniforms),vertexShader:Bo.background.vertexShader,fragmentShader:Bo.background.fragmentShader,side:Fc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=L,p.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,p.material.toneMapped=$n.getTransfer(L.colorSpace)!==li,L.matrixAutoUpdate===!0&&L.updateMatrix(),p.material.uniforms.uvTransform.value.copy(L.matrix),(y!==L||_!==L.version||b!==n.toneMapping)&&(p.material.needsUpdate=!0,y=L,_=L.version,b=n.toneMapping),p.layers.enableAll(),D.unshift(p,p.geometry,p.material,0,0,null))}function E(D,I){D.getRGB(Q_,HO(n)),i.buffers.color.setClear(Q_.r,Q_.g,Q_.b,I,l)}function R(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return u},setClearColor:function(D,I=1){u.set(D),h=I,E(u,h)},getClearAlpha:function(){return h},setClearAlpha:function(D){h=D,E(u,h)},render:A,addToRenderList:w,dispose:R}}function _6(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=_(null);let a=r,l=!1;function u(U,W,Q,K,ne){let re=!1;const X=y(K,Q,W);a!==X&&(a=X,p(a.object)),re=b(U,K,Q,ne),re&&S(U,K,Q,ne),ne!==null&&e.update(ne,n.ELEMENT_ARRAY_BUFFER),(re||l)&&(l=!1,I(U,W,Q,K),ne!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ne).buffer))}function h(){return n.createVertexArray()}function p(U){return n.bindVertexArray(U)}function g(U){return n.deleteVertexArray(U)}function y(U,W,Q){const K=Q.wireframe===!0;let ne=i[U.id];ne===void 0&&(ne={},i[U.id]=ne);let re=ne[W.id];re===void 0&&(re={},ne[W.id]=re);let X=re[K];return X===void 0&&(X=_(h()),re[K]=X),X}function _(U){const W=[],Q=[],K=[];for(let ne=0;ne<t;ne++)W[ne]=0,Q[ne]=0,K[ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:Q,attributeDivisors:K,object:U,attributes:{},index:null}}function b(U,W,Q,K){const ne=a.attributes,re=W.attributes;let X=0;const J=Q.getAttributes();for(const ae in J)if(J[ae].location>=0){const Se=ne[ae];let Y=re[ae];if(Y===void 0&&(ae==="instanceMatrix"&&U.instanceMatrix&&(Y=U.instanceMatrix),ae==="instanceColor"&&U.instanceColor&&(Y=U.instanceColor)),Se===void 0||Se.attribute!==Y||Y&&Se.data!==Y.data)return!0;X++}return a.attributesNum!==X||a.index!==K}function S(U,W,Q,K){const ne={},re=W.attributes;let X=0;const J=Q.getAttributes();for(const ae in J)if(J[ae].location>=0){let Se=re[ae];Se===void 0&&(ae==="instanceMatrix"&&U.instanceMatrix&&(Se=U.instanceMatrix),ae==="instanceColor"&&U.instanceColor&&(Se=U.instanceColor));const Y={};Y.attribute=Se,Se&&Se.data&&(Y.data=Se.data),ne[ae]=Y,X++}a.attributes=ne,a.attributesNum=X,a.index=K}function A(){const U=a.newAttributes;for(let W=0,Q=U.length;W<Q;W++)U[W]=0}function w(U){E(U,0)}function E(U,W){const Q=a.newAttributes,K=a.enabledAttributes,ne=a.attributeDivisors;Q[U]=1,K[U]===0&&(n.enableVertexAttribArray(U),K[U]=1),ne[U]!==W&&(n.vertexAttribDivisor(U,W),ne[U]=W)}function R(){const U=a.newAttributes,W=a.enabledAttributes;for(let Q=0,K=W.length;Q<K;Q++)W[Q]!==U[Q]&&(n.disableVertexAttribArray(Q),W[Q]=0)}function D(U,W,Q,K,ne,re,X){X===!0?n.vertexAttribIPointer(U,W,Q,ne,re):n.vertexAttribPointer(U,W,Q,K,ne,re)}function I(U,W,Q,K){A();const ne=K.attributes,re=Q.getAttributes(),X=W.defaultAttributeValues;for(const J in re){const ae=re[J];if(ae.location>=0){let Me=ne[J];if(Me===void 0&&(J==="instanceMatrix"&&U.instanceMatrix&&(Me=U.instanceMatrix),J==="instanceColor"&&U.instanceColor&&(Me=U.instanceColor)),Me!==void 0){const Se=Me.normalized,Y=Me.itemSize,pe=e.get(Me);if(pe===void 0)continue;const we=pe.buffer,ke=pe.type,pt=pe.bytesPerElement,ge=ke===n.INT||ke===n.UNSIGNED_INT||Me.gpuType===nv;if(Me.isInterleavedBufferAttribute){const Re=Me.data,tt=Re.stride,yt=Me.offset;if(Re.isInstancedInterleavedBuffer){for(let Rt=0;Rt<ae.locationSize;Rt++)E(ae.location+Rt,Re.meshPerAttribute);U.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let Rt=0;Rt<ae.locationSize;Rt++)w(ae.location+Rt);n.bindBuffer(n.ARRAY_BUFFER,we);for(let Rt=0;Rt<ae.locationSize;Rt++)D(ae.location+Rt,Y/ae.locationSize,ke,Se,tt*pt,(yt+Y/ae.locationSize*Rt)*pt,ge)}else{if(Me.isInstancedBufferAttribute){for(let Re=0;Re<ae.locationSize;Re++)E(ae.location+Re,Me.meshPerAttribute);U.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let Re=0;Re<ae.locationSize;Re++)w(ae.location+Re);n.bindBuffer(n.ARRAY_BUFFER,we);for(let Re=0;Re<ae.locationSize;Re++)D(ae.location+Re,Y/ae.locationSize,ke,Se,Y*pt,Y/ae.locationSize*Re*pt,ge)}}else if(X!==void 0){const Se=X[J];if(Se!==void 0)switch(Se.length){case 2:n.vertexAttrib2fv(ae.location,Se);break;case 3:n.vertexAttrib3fv(ae.location,Se);break;case 4:n.vertexAttrib4fv(ae.location,Se);break;default:n.vertexAttrib1fv(ae.location,Se)}}}}R()}function L(){V();for(const U in i){const W=i[U];for(const Q in W){const K=W[Q];for(const ne in K)g(K[ne].object),delete K[ne];delete W[Q]}delete i[U]}}function N(U){if(i[U.id]===void 0)return;const W=i[U.id];for(const Q in W){const K=W[Q];for(const ne in K)g(K[ne].object),delete K[ne];delete W[Q]}delete i[U.id]}function F(U){for(const W in i){const Q=i[W];if(Q[U.id]===void 0)continue;const K=Q[U.id];for(const ne in K)g(K[ne].object),delete K[ne];delete Q[U.id]}}function V(){P(),l=!0,a!==r&&(a=r,p(a.object))}function P(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:u,reset:V,resetDefaultState:P,dispose:L,releaseStatesOfGeometry:N,releaseStatesOfProgram:F,initAttributes:A,enableAttribute:w,disableUnusedAttributes:R}}function b6(n,e,t){let i;function r(p){i=p}function a(p,g){n.drawArrays(i,p,g),t.update(g,i,1)}function l(p,g,y){y!==0&&(n.drawArraysInstanced(i,p,g,y),t.update(g,i,y))}function u(p,g,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,g,0,y);let b=0;for(let S=0;S<y;S++)b+=g[S];t.update(b,i,1)}function h(p,g,y,_){if(y===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let S=0;S<p.length;S++)l(p[S],g[S],_[S]);else{b.multiDrawArraysInstancedWEBGL(i,p,0,g,0,_,0,y);let S=0;for(let A=0;A<y;A++)S+=g[A]*_[A];t.update(S,i,1)}}this.setMode=r,this.render=a,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function x6(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function l(F){return!(F!==_r&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(F){const V=F===or&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(F!==$r&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==Hi&&!V)}function h(F){if(F==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const g=h(p);g!==p&&(It("WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const y=t.logarithmicDepthBuffer===!0,_=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),b=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),E=n.getParameter(n.MAX_VERTEX_ATTRIBS),R=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),D=n.getParameter(n.MAX_VARYING_VECTORS),I=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),L=n.getParameter(n.MAX_SAMPLES),N=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:h,textureFormatReadable:l,textureTypeReadable:u,precision:p,logarithmicDepthBuffer:y,reversedDepthBuffer:_,maxTextures:b,maxVertexTextures:S,maxTextureSize:A,maxCubemapSize:w,maxAttributes:E,maxVertexUniforms:R,maxVaryings:D,maxFragmentUniforms:I,maxSamples:L,samples:N}}function S6(n){const e=this;let t=null,i=0,r=!1,a=!1;const l=new Dc,u=new Tn,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(y,_){const b=y.length!==0||_||i!==0||r;return r=_,i=y.length,b},this.beginShadows=function(){a=!0,g(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(y,_){t=g(y,_,0)},this.setState=function(y,_,b){const S=y.clippingPlanes,A=y.clipIntersection,w=y.clipShadows,E=n.get(y);if(!r||S===null||S.length===0||a&&!w)a?g(null):p();else{const R=a?0:i,D=R*4;let I=E.clippingState||null;h.value=I,I=g(S,_,D,b);for(let L=0;L!==D;++L)I[L]=t[L];E.clippingState=I,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=R}};function p(){h.value!==t&&(h.value=t,h.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function g(y,_,b,S){const A=y!==null?y.length:0;let w=null;if(A!==0){if(w=h.value,S!==!0||w===null){const E=b+A*4,R=_.matrixWorldInverse;u.getNormalMatrix(R),(w===null||w.length<E)&&(w=new Float32Array(E));for(let D=0,I=b;D!==A;++D,I+=4)l.copy(y[D]).applyMatrix4(R,u),l.normal.toArray(w,I),w[I+3]=l.constant}h.value=w,h.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,w}}function M6(n){let e=new WeakMap;function t(l,u){return u===Lp?l.mapping=jo:u===E0&&(l.mapping=ef),l}function i(l){if(l&&l.isTexture){const u=l.mapping;if(u===Lp||u===E0)if(e.has(l)){const h=e.get(l).texture;return t(h,l.mapping)}else{const h=l.image;if(h&&h.height>0){const p=new eS(h.height);return p.fromEquirectangularTexture(n,l),e.set(l,p),l.addEventListener("dispose",r),t(p.texture,l.mapping)}else return null}}return l}function r(l){const u=l.target;u.removeEventListener("dispose",r);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const qu=4,cR=[.125,.215,.35,.446,.526,.582],pd=20,E6=256,jg=new Fl,uR=new Bt;let hM=null,pM=0,mM=0,gM=!1;const w6=new ee;class DE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,a={}){const{size:l=256,position:u=w6}=a;hM=this._renderer.getRenderTarget(),pM=this._renderer.getActiveCubeFace(),mM=this._renderer.getActiveMipmapLevel(),gM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(e,i,r,h,u),t>0&&this._blur(h,0,0,t),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=hR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=dR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(hM,pM,mM),this._renderer.xr.enabled=gM,e.scissorTest=!1,mp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===jo||e.mapping===ef?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),hM=this._renderer.getRenderTarget(),pM=this._renderer.getActiveCubeFace(),mM=this._renderer.getActiveMipmapLevel(),gM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:qn,minFilter:qn,generateMipmaps:!1,type:or,format:_r,colorSpace:Xo,depthBuffer:!1},r=fR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=fR(e,t,i);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=T6(a)),this._blurMaterial=C6(a,e,t),this._ggxMaterial=A6(a,e,t)}return r}_compileMaterial(e){const t=new Gi(new Mn,e);this._renderer.compile(t,jg)}_sceneToCubeUV(e,t,i,r,a){const h=new vr(90,1,t,i),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],y=this._renderer,_=y.autoClear,b=y.toneMapping;y.getClearColor(uR),y.toneMapping=ho,y.autoClear=!1,y.state.buffers.depth.getReversed()&&(y.setRenderTarget(r),y.clearDepth(),y.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Gi(new Fd,new Gc({name:"PMREM.Background",side:Ws,depthWrite:!1,depthTest:!1})));const A=this._backgroundBox,w=A.material;let E=!1;const R=e.background;R?R.isColor&&(w.color.copy(R),e.background=null,E=!0):(w.color.copy(uR),E=!0);for(let D=0;D<6;D++){const I=D%3;I===0?(h.up.set(0,p[D],0),h.position.set(a.x,a.y,a.z),h.lookAt(a.x+g[D],a.y,a.z)):I===1?(h.up.set(0,0,p[D]),h.position.set(a.x,a.y,a.z),h.lookAt(a.x,a.y+g[D],a.z)):(h.up.set(0,p[D],0),h.position.set(a.x,a.y,a.z),h.lookAt(a.x,a.y,a.z+g[D]));const L=this._cubeSize;mp(r,I*L,D>2?L:0,L,L),y.setRenderTarget(r),E&&y.render(A,h),y.render(e,h)}y.toneMapping=b,y.autoClear=_,e.background=R}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===jo||e.mapping===ef;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=hR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=dR());const a=r?this._cubemapMaterial:this._equirectMaterial,l=this._lodMeshes[0];l.material=a;const u=a.uniforms;u.envMap.value=e;const h=this._cubeSize;mp(t,0,0,3*h,2*h),i.setRenderTarget(t),i.render(l,jg)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodMeshes.length;for(let a=1;a<r;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=i}_applyGGXFilter(e,t,i){const r=this._renderer,a=this._pingPongRenderTarget,l=this._ggxMaterial,u=this._lodMeshes[i];u.material=l;const h=l.uniforms,p=i/(this._lodMeshes.length-1),g=t/(this._lodMeshes.length-1),y=Math.sqrt(p*p-g*g),_=0+p*1.25,b=y*_,{_lodMax:S}=this,A=this._sizeLods[i],w=3*A*(i>S-qu?i-S+qu:0),E=4*(this._cubeSize-A);h.envMap.value=e.texture,h.roughness.value=b,h.mipInt.value=S-t,mp(a,w,E,3*A,2*A),r.setRenderTarget(a),r.render(u,jg),h.envMap.value=a.texture,h.roughness.value=0,h.mipInt.value=S-i,mp(e,w,E,3*A,2*A),r.setRenderTarget(e),r.render(u,jg)}_blur(e,t,i,r,a){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,r,"latitudinal",a),this._halfBlur(l,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,l,u){const h=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&Kt("blur direction must be either latitudinal or longitudinal!");const g=3,y=this._lodMeshes[r];y.material=p;const _=p.uniforms,b=this._sizeLods[i]-1,S=isFinite(a)?Math.PI/(2*b):2*Math.PI/(2*pd-1),A=a/S,w=isFinite(a)?1+Math.floor(g*A):pd;w>pd&&It(`sigmaRadians, ${a}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${pd}`);const E=[];let R=0;for(let F=0;F<pd;++F){const V=F/A,P=Math.exp(-V*V/2);E.push(P),F===0?R+=P:F<w&&(R+=2*P)}for(let F=0;F<E.length;F++)E[F]=E[F]/R;_.envMap.value=e.texture,_.samples.value=w,_.weights.value=E,_.latitudinal.value=l==="latitudinal",u&&(_.poleAxis.value=u);const{_lodMax:D}=this;_.dTheta.value=S,_.mipInt.value=D-i;const I=this._sizeLods[r],L=3*I*(r>D-qu?r-D+qu:0),N=4*(this._cubeSize-I);mp(t,L,N,3*I,2*I),h.setRenderTarget(t),h.render(y,jg)}}function T6(n){const e=[],t=[],i=[];let r=n;const a=n-qu+1+cR.length;for(let l=0;l<a;l++){const u=Math.pow(2,r);e.push(u);let h=1/u;l>n-qu?h=cR[l-n+qu-1]:l===0&&(h=0),t.push(h);const p=1/(u-2),g=-p,y=1+p,_=[g,g,y,g,y,y,g,g,y,y,g,y],b=6,S=6,A=3,w=2,E=1,R=new Float32Array(A*S*b),D=new Float32Array(w*S*b),I=new Float32Array(E*S*b);for(let N=0;N<b;N++){const F=N%3*2/3-1,V=N>2?0:-1,P=[F,V,0,F+2/3,V,0,F+2/3,V+1,0,F,V,0,F+2/3,V+1,0,F,V+1,0];R.set(P,A*S*N),D.set(_,w*S*N);const U=[N,N,N,N,N,N];I.set(U,E*S*N)}const L=new Mn;L.setAttribute("position",new vi(R,A)),L.setAttribute("uv",new vi(D,w)),L.setAttribute("faceIndex",new vi(I,E)),i.push(new Gi(L,null)),r>qu&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function fR(n,e,t){const i=new is(n,e,t);return i.texture.mapping=Jp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function mp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function A6(n,e,t){return new ss({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:E6,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:SS(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:$o,depthTest:!1,depthWrite:!1})}function C6(n,e,t){const i=new Float32Array(pd),r=new ee(0,1,0);return new ss({name:"SphericalGaussianBlur",defines:{n:pd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:SS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$o,depthTest:!1,depthWrite:!1})}function dR(){return new ss({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:SS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$o,depthTest:!1,depthWrite:!1})}function hR(){return new ss({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:SS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$o,depthTest:!1,depthWrite:!1})}function SS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function R6(n){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture){const h=u.mapping,p=h===Lp||h===E0,g=h===jo||h===ef;if(p||g){let y=e.get(u);const _=y!==void 0?y.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==_)return t===null&&(t=new DE(n)),y=p?t.fromEquirectangular(u,y):t.fromCubemap(u,y),y.texture.pmremVersion=u.pmremVersion,e.set(u,y),y.texture;if(y!==void 0)return y.texture;{const b=u.image;return p&&b&&b.height>0||g&&b&&r(b)?(t===null&&(t=new DE(n)),y=p?t.fromEquirectangular(u):t.fromCubemap(u),y.texture.pmremVersion=u.pmremVersion,e.set(u,y),u.addEventListener("dispose",a),y.texture):null}}}return u}function r(u){let h=0;const p=6;for(let g=0;g<p;g++)u[g]!==void 0&&h++;return h===p}function a(u){const h=u.target;h.removeEventListener("dispose",a);const p=e.get(h);p!==void 0&&(e.delete(h),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function D6(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&kp("WebGLRenderer: "+i+" extension not supported."),r}}}function O6(n,e,t,i){const r={},a=new WeakMap;function l(y){const _=y.target;_.index!==null&&e.remove(_.index);for(const S in _.attributes)e.remove(_.attributes[S]);_.removeEventListener("dispose",l),delete r[_.id];const b=a.get(_);b&&(e.remove(b),a.delete(_)),i.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function u(y,_){return r[_.id]===!0||(_.addEventListener("dispose",l),r[_.id]=!0,t.memory.geometries++),_}function h(y){const _=y.attributes;for(const b in _)e.update(_[b],n.ARRAY_BUFFER)}function p(y){const _=[],b=y.index,S=y.attributes.position;let A=0;if(b!==null){const R=b.array;A=b.version;for(let D=0,I=R.length;D<I;D+=3){const L=R[D+0],N=R[D+1],F=R[D+2];_.push(L,N,N,F,F,L)}}else if(S!==void 0){const R=S.array;A=S.version;for(let D=0,I=R.length/3-1;D<I;D+=3){const L=D+0,N=D+1,F=D+2;_.push(L,N,N,F,F,L)}}else return;const w=new(zO(_)?Uw:Lw)(_,1);w.version=A;const E=a.get(y);E&&e.remove(E),a.set(y,w)}function g(y){const _=a.get(y);if(_){const b=y.index;b!==null&&_.version<b.version&&p(y)}else p(y);return a.get(y)}return{get:u,update:h,getWireframeAttribute:g}}function I6(n,e,t){let i;function r(_){i=_}let a,l;function u(_){a=_.type,l=_.bytesPerElement}function h(_,b){n.drawElements(i,b,a,_*l),t.update(b,i,1)}function p(_,b,S){S!==0&&(n.drawElementsInstanced(i,b,a,_*l,S),t.update(b,i,S))}function g(_,b,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,b,0,a,_,0,S);let w=0;for(let E=0;E<S;E++)w+=b[E];t.update(w,i,1)}function y(_,b,S,A){if(S===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let E=0;E<_.length;E++)p(_[E]/l,b[E],A[E]);else{w.multiDrawElementsInstancedWEBGL(i,b,0,a,_,0,A,0,S);let E=0;for(let R=0;R<S;R++)E+=b[R]*A[R];t.update(E,i,1)}}this.setMode=r,this.setIndex=u,this.render=h,this.renderInstances=p,this.renderMultiDraw=g,this.renderMultiDrawInstances=y}function P6(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,l,u){switch(t.calls++,l){case n.TRIANGLES:t.triangles+=u*(a/3);break;case n.LINES:t.lines+=u*(a/2);break;case n.LINE_STRIP:t.lines+=u*(a-1);break;case n.LINE_LOOP:t.lines+=u*a;break;case n.POINTS:t.points+=u*a;break;default:Kt("WebGLInfo: Unknown draw mode:",l);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function N6(n,e,t){const i=new WeakMap,r=new Si;function a(l,u,h){const p=l.morphTargetInfluences,g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=g!==void 0?g.length:0;let _=i.get(u);if(_===void 0||_.count!==y){let U=function(){V.dispose(),i.delete(u),u.removeEventListener("dispose",U)};var b=U;_!==void 0&&_.texture.dispose();const S=u.morphAttributes.position!==void 0,A=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,E=u.morphAttributes.position||[],R=u.morphAttributes.normal||[],D=u.morphAttributes.color||[];let I=0;S===!0&&(I=1),A===!0&&(I=2),w===!0&&(I=3);let L=u.attributes.position.count*I,N=1;L>e.maxTextureSize&&(N=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const F=new Float32Array(L*N*4*y),V=new Kx(F,L,N,y);V.type=Hi,V.needsUpdate=!0;const P=I*4;for(let W=0;W<y;W++){const Q=E[W],K=R[W],ne=D[W],re=L*N*4*W;for(let X=0;X<Q.count;X++){const J=X*P;S===!0&&(r.fromBufferAttribute(Q,X),F[re+J+0]=r.x,F[re+J+1]=r.y,F[re+J+2]=r.z,F[re+J+3]=0),A===!0&&(r.fromBufferAttribute(K,X),F[re+J+4]=r.x,F[re+J+5]=r.y,F[re+J+6]=r.z,F[re+J+7]=0),w===!0&&(r.fromBufferAttribute(ne,X),F[re+J+8]=r.x,F[re+J+9]=r.y,F[re+J+10]=r.z,F[re+J+11]=ne.itemSize===4?r.w:1)}}_={count:y,texture:V,size:new Ye(L,N)},i.set(u,_),u.addEventListener("dispose",U)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)h.getUniforms().setValue(n,"morphTexture",l.morphTexture,t);else{let S=0;for(let w=0;w<p.length;w++)S+=p[w];const A=u.morphTargetsRelative?1:1-S;h.getUniforms().setValue(n,"morphTargetBaseInfluence",A),h.getUniforms().setValue(n,"morphTargetInfluences",p)}h.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}return{update:a}}function L6(n,e,t,i){let r=new WeakMap;function a(h){const p=i.render.frame,g=h.geometry,y=e.get(h,g);if(r.get(y)!==p&&(e.update(y),r.set(y,p)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),r.get(h)!==p&&(t.update(h.instanceMatrix,n.ARRAY_BUFFER),h.instanceColor!==null&&t.update(h.instanceColor,n.ARRAY_BUFFER),r.set(h,p))),h.isSkinnedMesh){const _=h.skeleton;r.get(_)!==p&&(_.update(),r.set(_,p))}return y}function l(){r=new WeakMap}function u(h){const p=h.target;p.removeEventListener("dispose",u),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:a,dispose:l}}const U6={[xw]:"LINEAR_TONE_MAPPING",[Sw]:"REINHARD_TONE_MAPPING",[Mw]:"CINEON_TONE_MAPPING",[Vx]:"ACES_FILMIC_TONE_MAPPING",[ww]:"AGX_TONE_MAPPING",[Tw]:"NEUTRAL_TONE_MAPPING",[Ew]:"CUSTOM_TONE_MAPPING"};function z6(n,e,t,i,r){const a=new is(e,t,{type:n,depthBuffer:i,stencilBuffer:r}),l=new is(e,t,{type:or,depthBuffer:!1,stencilBuffer:!1}),u=new Mn;u.setAttribute("position",new Gt([-1,3,0,-1,-1,0,3,-1,0],3)),u.setAttribute("uv",new Gt([0,2,0,0,2,0],2));const h=new qw({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),p=new Gi(u,h),g=new Fl(-1,1,1,-1,0,1);let y=null,_=null,b=!1,S,A=null,w=[],E=!1;this.setSize=function(R,D){a.setSize(R,D),l.setSize(R,D);for(let I=0;I<w.length;I++){const L=w[I];L.setSize&&L.setSize(R,D)}},this.setEffects=function(R){w=R,E=w.length>0&&w[0].isRenderPass===!0;const D=a.width,I=a.height;for(let L=0;L<w.length;L++){const N=w[L];N.setSize&&N.setSize(D,I)}},this.begin=function(R,D){if(b||R.toneMapping===ho&&w.length===0)return!1;if(A=D,D!==null){const I=D.width,L=D.height;(a.width!==I||a.height!==L)&&this.setSize(I,L)}return E===!1&&R.setRenderTarget(a),S=R.toneMapping,R.toneMapping=ho,!0},this.hasRenderPass=function(){return E},this.end=function(R,D){R.toneMapping=S,b=!0;let I=a,L=l;for(let N=0;N<w.length;N++){const F=w[N];if(F.enabled!==!1&&(F.render(R,L,I,D),F.needsSwap!==!1)){const V=I;I=L,L=V}}if(y!==R.outputColorSpace||_!==R.toneMapping){y=R.outputColorSpace,_=R.toneMapping,h.defines={},$n.getTransfer(y)===li&&(h.defines.SRGB_TRANSFER="");const N=U6[_];N&&(h.defines[N]=""),h.needsUpdate=!0}h.uniforms.tDiffuse.value=I.texture,R.setRenderTarget(A),R.render(p,g),A=null,b=!1},this.isCompositing=function(){return b},this.dispose=function(){a.dispose(),l.dispose(),u.dispose(),h.dispose()}}const VI=new gi,OE=new $p(1,1),HI=new Kx,GI=new Qx,WI=new sv,pR=[],mR=[],gR=new Float32Array(16),vR=new Float32Array(9),yR=new Float32Array(4);function tm(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let a=pR[r];if(a===void 0&&(a=new Float32Array(r),pR[r]=a),e!==0){i.toArray(a,0);for(let l=1,u=0;l!==e;++l)u+=t,n[l].toArray(a,u)}return a}function Lr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ur(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function MS(n,e){let t=mR[e];t===void 0&&(t=new Int32Array(e),mR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function F6(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function B6(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Lr(t,e))return;n.uniform2fv(this.addr,e),Ur(t,e)}}function k6(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Lr(t,e))return;n.uniform3fv(this.addr,e),Ur(t,e)}}function V6(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Lr(t,e))return;n.uniform4fv(this.addr,e),Ur(t,e)}}function H6(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Lr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ur(t,e)}else{if(Lr(t,i))return;yR.set(i),n.uniformMatrix2fv(this.addr,!1,yR),Ur(t,i)}}function G6(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Lr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ur(t,e)}else{if(Lr(t,i))return;vR.set(i),n.uniformMatrix3fv(this.addr,!1,vR),Ur(t,i)}}function W6(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Lr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ur(t,e)}else{if(Lr(t,i))return;gR.set(i),n.uniformMatrix4fv(this.addr,!1,gR),Ur(t,i)}}function $6(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function j6(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Lr(t,e))return;n.uniform2iv(this.addr,e),Ur(t,e)}}function X6(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Lr(t,e))return;n.uniform3iv(this.addr,e),Ur(t,e)}}function q6(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Lr(t,e))return;n.uniform4iv(this.addr,e),Ur(t,e)}}function Y6(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Z6(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Lr(t,e))return;n.uniform2uiv(this.addr,e),Ur(t,e)}}function K6(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Lr(t,e))return;n.uniform3uiv(this.addr,e),Ur(t,e)}}function Q6(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Lr(t,e))return;n.uniform4uiv(this.addr,e),Ur(t,e)}}function J6(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(OE.compareFunction=t.isReversedDepthBuffer()?Zx:Yx,a=OE):a=VI,t.setTexture2D(e||a,r)}function e8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||GI,r)}function t8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||WI,r)}function n8(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||HI,r)}function i8(n){switch(n){case 5126:return F6;case 35664:return B6;case 35665:return k6;case 35666:return V6;case 35674:return H6;case 35675:return G6;case 35676:return W6;case 5124:case 35670:return $6;case 35667:case 35671:return j6;case 35668:case 35672:return X6;case 35669:case 35673:return q6;case 5125:return Y6;case 36294:return Z6;case 36295:return K6;case 36296:return Q6;case 35678:case 36198:case 36298:case 36306:case 35682:return J6;case 35679:case 36299:case 36307:return e8;case 35680:case 36300:case 36308:case 36293:return t8;case 36289:case 36303:case 36311:case 36292:return n8}}function r8(n,e){n.uniform1fv(this.addr,e)}function s8(n,e){const t=tm(e,this.size,2);n.uniform2fv(this.addr,t)}function a8(n,e){const t=tm(e,this.size,3);n.uniform3fv(this.addr,t)}function o8(n,e){const t=tm(e,this.size,4);n.uniform4fv(this.addr,t)}function l8(n,e){const t=tm(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function c8(n,e){const t=tm(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function u8(n,e){const t=tm(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function f8(n,e){n.uniform1iv(this.addr,e)}function d8(n,e){n.uniform2iv(this.addr,e)}function h8(n,e){n.uniform3iv(this.addr,e)}function p8(n,e){n.uniform4iv(this.addr,e)}function m8(n,e){n.uniform1uiv(this.addr,e)}function g8(n,e){n.uniform2uiv(this.addr,e)}function v8(n,e){n.uniform3uiv(this.addr,e)}function y8(n,e){n.uniform4uiv(this.addr,e)}function _8(n,e,t){const i=this.cache,r=e.length,a=MS(t,r);Lr(i,a)||(n.uniform1iv(this.addr,a),Ur(i,a));let l;this.type===n.SAMPLER_2D_SHADOW?l=OE:l=VI;for(let u=0;u!==r;++u)t.setTexture2D(e[u]||l,a[u])}function b8(n,e,t){const i=this.cache,r=e.length,a=MS(t,r);Lr(i,a)||(n.uniform1iv(this.addr,a),Ur(i,a));for(let l=0;l!==r;++l)t.setTexture3D(e[l]||GI,a[l])}function x8(n,e,t){const i=this.cache,r=e.length,a=MS(t,r);Lr(i,a)||(n.uniform1iv(this.addr,a),Ur(i,a));for(let l=0;l!==r;++l)t.setTextureCube(e[l]||WI,a[l])}function S8(n,e,t){const i=this.cache,r=e.length,a=MS(t,r);Lr(i,a)||(n.uniform1iv(this.addr,a),Ur(i,a));for(let l=0;l!==r;++l)t.setTexture2DArray(e[l]||HI,a[l])}function M8(n){switch(n){case 5126:return r8;case 35664:return s8;case 35665:return a8;case 35666:return o8;case 35674:return l8;case 35675:return c8;case 35676:return u8;case 5124:case 35670:return f8;case 35667:case 35671:return d8;case 35668:case 35672:return h8;case 35669:case 35673:return p8;case 5125:return m8;case 36294:return g8;case 36295:return v8;case 36296:return y8;case 35678:case 36198:case 36298:case 36306:case 35682:return _8;case 35679:case 36299:case 36307:return b8;case 35680:case 36300:case 36308:case 36293:return x8;case 36289:case 36303:case 36311:case 36292:return S8}}class E8{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=i8(t.type)}}class w8{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=M8(t.type)}}class T8{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let a=0,l=r.length;a!==l;++a){const u=r[a];u.setValue(e,t[u.id],i)}}}const vM=/(\w+)(\])?(\[|\.)?/g;function _R(n,e){n.seq.push(e),n.map[e.id]=e}function A8(n,e,t){const i=n.name,r=i.length;for(vM.lastIndex=0;;){const a=vM.exec(i),l=vM.lastIndex;let u=a[1];const h=a[2]==="]",p=a[3];if(h&&(u=u|0),p===void 0||p==="["&&l+2===r){_R(t,p===void 0?new E8(u,n,e):new w8(u,n,e));break}else{let y=t.map[u];y===void 0&&(y=new T8(u),_R(t,y)),t=y}}}class vb{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let l=0;l<i;++l){const u=e.getActiveUniform(t,l),h=e.getUniformLocation(t,u.name);A8(u,h,this)}const r=[],a=[];for(const l of this.seq)l.type===e.SAMPLER_2D_SHADOW||l.type===e.SAMPLER_CUBE_SHADOW||l.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(l):a.push(l);r.length>0&&(this.seq=r.concat(a))}setValue(e,t,i,r){const a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,l=t.length;a!==l;++a){const u=t[a],h=i[u.id];h.needsUpdate!==!1&&u.setValue(e,h.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,a=e.length;r!==a;++r){const l=e[r];l.id in t&&i.push(l)}return i}}function bR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const C8=37297;let R8=0;function D8(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let l=r;l<a;l++){const u=l+1;i.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return i.join(`
`)}const xR=new Tn;function O8(n){$n._getMatrix(xR,$n.workingColorSpace,n);const e=`mat3( ${xR.elements.map(t=>t.toFixed(4))} )`;switch($n.getTransfer(n)){case C0:return[e,"LinearTransferOETF"];case li:return[e,"sRGBTransferOETF"];default:return It("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function SR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const l=/ERROR: 0:(\d+)/.exec(a);if(l){const u=parseInt(l[1]);return t.toUpperCase()+`

`+a+`

`+D8(n.getShaderSource(e),u)}else return a}function I8(n,e){const t=O8(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const P8={[xw]:"Linear",[Sw]:"Reinhard",[Mw]:"Cineon",[Vx]:"ACESFilmic",[ww]:"AgX",[Tw]:"Neutral",[Ew]:"Custom"};function N8(n,e){const t=P8[e];return t===void 0?(It("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const J_=new ee;function L8(){$n.getLuminanceCoefficients(J_);const n=J_.x.toFixed(4),e=J_.y.toFixed(4),t=J_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function U8(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(r0).join(`
`)}function z8(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function F8(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r),l=a.name;let u=1;a.type===n.FLOAT_MAT2&&(u=2),a.type===n.FLOAT_MAT3&&(u=3),a.type===n.FLOAT_MAT4&&(u=4),t[l]={type:a.type,location:n.getAttribLocation(e,l),locationSize:u}}return t}function r0(n){return n!==""}function MR(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ER(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const B8=/^[ \t]*#include +<([\w\d./]+)>/gm;function IE(n){return n.replace(B8,V8)}const k8=new Map;function V8(n,e){let t=Pn[e];if(t===void 0){const i=k8.get(e);if(i!==void 0)t=Pn[i],It('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return IE(t)}const H8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wR(n){return n.replace(H8,G8)}function G8(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function TR(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const W8={[Cp]:"SHADOWMAP_TYPE_PCF",[gd]:"SHADOWMAP_TYPE_VSM"};function $8(n){return W8[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const j8={[jo]:"ENVMAP_TYPE_CUBE",[ef]:"ENVMAP_TYPE_CUBE",[Jp]:"ENVMAP_TYPE_CUBE_UV"};function X8(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":j8[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const q8={[ef]:"ENVMAP_MODE_REFRACTION"};function Y8(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":q8[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const Z8={[tv]:"ENVMAP_BLENDING_MULTIPLY",[MO]:"ENVMAP_BLENDING_MIX",[EO]:"ENVMAP_BLENDING_ADD"};function K8(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":Z8[n.combine]||"ENVMAP_BLENDING_NONE"}function Q8(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function J8(n,e,t,i){const r=n.getContext(),a=t.defines;let l=t.vertexShader,u=t.fragmentShader;const h=$8(t),p=X8(t),g=Y8(t),y=K8(t),_=Q8(t),b=U8(t),S=z8(a),A=r.createProgram();let w,E,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(r0).join(`
`),w.length>0&&(w+=`
`),E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(r0).join(`
`),E.length>0&&(E+=`
`)):(w=[TR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(r0).join(`
`),E=[TR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ho?"#define TONE_MAPPING":"",t.toneMapping!==ho?Pn.tonemapping_pars_fragment:"",t.toneMapping!==ho?N8("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Pn.colorspace_pars_fragment,I8("linearToOutputTexel",t.outputColorSpace),L8(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(r0).join(`
`)),l=IE(l),l=MR(l,t),l=ER(l,t),u=IE(u),u=MR(u,t),u=ER(u,t),l=wR(l),u=wR(u),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,w=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,E=["#define varying in",t.glslVersion===xE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===xE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const D=R+w+l,I=R+E+u,L=bR(r,r.VERTEX_SHADER,D),N=bR(r,r.FRAGMENT_SHADER,I);r.attachShader(A,L),r.attachShader(A,N),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A);function F(W){if(n.debug.checkShaderErrors){const Q=r.getProgramInfoLog(A)||"",K=r.getShaderInfoLog(L)||"",ne=r.getShaderInfoLog(N)||"",re=Q.trim(),X=K.trim(),J=ne.trim();let ae=!0,Me=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(ae=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,A,L,N);else{const Se=SR(r,L,"vertex"),Y=SR(r,N,"fragment");Kt("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+re+`
`+Se+`
`+Y)}else re!==""?It("WebGLProgram: Program Info Log:",re):(X===""||J==="")&&(Me=!1);Me&&(W.diagnostics={runnable:ae,programLog:re,vertexShader:{log:X,prefix:w},fragmentShader:{log:J,prefix:E}})}r.deleteShader(L),r.deleteShader(N),V=new vb(r,A),P=F8(r,A)}let V;this.getUniforms=function(){return V===void 0&&F(this),V};let P;this.getAttributes=function(){return P===void 0&&F(this),P};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=r.getProgramParameter(A,C8)),U},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=R8++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=L,this.fragmentShader=N,this}let eV=0;class tV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(r)===!1&&(l.add(r),r.usedTimes++),l.has(a)===!1&&(l.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new nV(e),t.set(e,i)),i}}class nV{constructor(e){this.id=eV++,this.code=e,this.usedTimes=0}}function iV(n,e,t,i,r,a,l){const u=new Hp,h=new tV,p=new Set,g=[],y=new Map,_=r.logarithmicDepthBuffer;let b=r.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(P){return p.add(P),P===0?"uv":`uv${P}`}function w(P,U,W,Q,K){const ne=Q.fog,re=K.geometry,X=P.isMeshStandardMaterial?Q.environment:null,J=(P.isMeshStandardMaterial?t:e).get(P.envMap||X),ae=J&&J.mapping===Jp?J.image.height:null,Me=S[P.type];P.precision!==null&&(b=r.getMaxPrecision(P.precision),b!==P.precision&&It("WebGLProgram.getParameters:",P.precision,"not supported, using",b,"instead."));const Se=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,Y=Se!==void 0?Se.length:0;let pe=0;re.morphAttributes.position!==void 0&&(pe=1),re.morphAttributes.normal!==void 0&&(pe=2),re.morphAttributes.color!==void 0&&(pe=3);let we,ke,pt,ge;if(Me){const yn=Bo[Me];we=yn.vertexShader,ke=yn.fragmentShader}else we=P.vertexShader,ke=P.fragmentShader,h.update(P),pt=h.getVertexShaderID(P),ge=h.getFragmentShaderID(P);const Re=n.getRenderTarget(),tt=n.state.buffers.depth.getReversed(),yt=K.isInstancedMesh===!0,Rt=K.isBatchedMesh===!0,nn=!!P.map,cn=!!P.matcap,zt=!!J,Ve=!!P.aoMap,Je=!!P.lightMap,He=!!P.bumpMap,mt=!!P.normalMap,te=!!P.displacementMap,kt=!!P.emissiveMap,Et=!!P.metalnessMap,Vt=!!P.roughnessMap,lt=P.anisotropy>0,G=P.clearcoat>0,k=P.dispersion>0,de=P.iridescence>0,Ae=P.sheen>0,Be=P.transmission>0,Ie=lt&&!!P.anisotropyMap,wt=G&&!!P.clearcoatMap,ft=G&&!!P.clearcoatNormalMap,Pt=G&&!!P.clearcoatRoughnessMap,jt=de&&!!P.iridescenceMap,Ze=de&&!!P.iridescenceThicknessMap,Ke=Ae&&!!P.sheenColorMap,At=Ae&&!!P.sheenRoughnessMap,ie=!!P.specularMap,_e=!!P.specularColorMap,nt=!!P.specularIntensityMap,oe=Be&&!!P.transmissionMap,Ee=Be&&!!P.thicknessMap,et=!!P.gradientMap,Mt=!!P.alphaMap,it=P.alphaTest>0,We=!!P.alphaHash,ct=!!P.extensions;let Xt=ho;P.toneMapped&&(Re===null||Re.isXRRenderTarget===!0)&&(Xt=n.toneMapping);const mn={shaderID:Me,shaderType:P.type,shaderName:P.name,vertexShader:we,fragmentShader:ke,defines:P.defines,customVertexShaderID:pt,customFragmentShaderID:ge,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:b,batching:Rt,batchingColor:Rt&&K._colorsTexture!==null,instancing:yt,instancingColor:yt&&K.instanceColor!==null,instancingMorph:yt&&K.morphTexture!==null,outputColorSpace:Re===null?n.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:Xo,alphaToCoverage:!!P.alphaToCoverage,map:nn,matcap:cn,envMap:zt,envMapMode:zt&&J.mapping,envMapCubeUVHeight:ae,aoMap:Ve,lightMap:Je,bumpMap:He,normalMap:mt,displacementMap:te,emissiveMap:kt,normalMapObjectSpace:mt&&P.normalMapType===DO,normalMapTangentSpace:mt&&P.normalMapType===lf,metalnessMap:Et,roughnessMap:Vt,anisotropy:lt,anisotropyMap:Ie,clearcoat:G,clearcoatMap:wt,clearcoatNormalMap:ft,clearcoatRoughnessMap:Pt,dispersion:k,iridescence:de,iridescenceMap:jt,iridescenceThicknessMap:Ze,sheen:Ae,sheenColorMap:Ke,sheenRoughnessMap:At,specularMap:ie,specularColorMap:_e,specularIntensityMap:nt,transmission:Be,transmissionMap:oe,thicknessMap:Ee,gradientMap:et,opaque:P.transparent===!1&&P.blending===Md&&P.alphaToCoverage===!1,alphaMap:Mt,alphaTest:it,alphaHash:We,combine:P.combine,mapUv:nn&&A(P.map.channel),aoMapUv:Ve&&A(P.aoMap.channel),lightMapUv:Je&&A(P.lightMap.channel),bumpMapUv:He&&A(P.bumpMap.channel),normalMapUv:mt&&A(P.normalMap.channel),displacementMapUv:te&&A(P.displacementMap.channel),emissiveMapUv:kt&&A(P.emissiveMap.channel),metalnessMapUv:Et&&A(P.metalnessMap.channel),roughnessMapUv:Vt&&A(P.roughnessMap.channel),anisotropyMapUv:Ie&&A(P.anisotropyMap.channel),clearcoatMapUv:wt&&A(P.clearcoatMap.channel),clearcoatNormalMapUv:ft&&A(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Pt&&A(P.clearcoatRoughnessMap.channel),iridescenceMapUv:jt&&A(P.iridescenceMap.channel),iridescenceThicknessMapUv:Ze&&A(P.iridescenceThicknessMap.channel),sheenColorMapUv:Ke&&A(P.sheenColorMap.channel),sheenRoughnessMapUv:At&&A(P.sheenRoughnessMap.channel),specularMapUv:ie&&A(P.specularMap.channel),specularColorMapUv:_e&&A(P.specularColorMap.channel),specularIntensityMapUv:nt&&A(P.specularIntensityMap.channel),transmissionMapUv:oe&&A(P.transmissionMap.channel),thicknessMapUv:Ee&&A(P.thicknessMap.channel),alphaMapUv:Mt&&A(P.alphaMap.channel),vertexTangents:!!re.attributes.tangent&&(mt||lt),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,pointsUvs:K.isPoints===!0&&!!re.attributes.uv&&(nn||Mt),fog:!!ne,useFog:P.fog===!0,fogExp2:!!ne&&ne.isFogExp2,flatShading:P.flatShading===!0&&P.wireframe===!1,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:_,reversedDepthBuffer:tt,skinning:K.isSkinnedMesh===!0,morphTargets:re.morphAttributes.position!==void 0,morphNormals:re.morphAttributes.normal!==void 0,morphColors:re.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:pe,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:Xt,decodeVideoTexture:nn&&P.map.isVideoTexture===!0&&$n.getTransfer(P.map.colorSpace)===li,decodeVideoTextureEmissive:kt&&P.emissiveMap.isVideoTexture===!0&&$n.getTransfer(P.emissiveMap.colorSpace)===li,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===Vo,flipSided:P.side===Ws,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:ct&&P.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ct&&P.extensions.multiDraw===!0||Rt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return mn.vertexUv1s=p.has(1),mn.vertexUv2s=p.has(2),mn.vertexUv3s=p.has(3),p.clear(),mn}function E(P){const U=[];if(P.shaderID?U.push(P.shaderID):(U.push(P.customVertexShaderID),U.push(P.customFragmentShaderID)),P.defines!==void 0)for(const W in P.defines)U.push(W),U.push(P.defines[W]);return P.isRawShaderMaterial===!1&&(R(U,P),D(U,P),U.push(n.outputColorSpace)),U.push(P.customProgramCacheKey),U.join()}function R(P,U){P.push(U.precision),P.push(U.outputColorSpace),P.push(U.envMapMode),P.push(U.envMapCubeUVHeight),P.push(U.mapUv),P.push(U.alphaMapUv),P.push(U.lightMapUv),P.push(U.aoMapUv),P.push(U.bumpMapUv),P.push(U.normalMapUv),P.push(U.displacementMapUv),P.push(U.emissiveMapUv),P.push(U.metalnessMapUv),P.push(U.roughnessMapUv),P.push(U.anisotropyMapUv),P.push(U.clearcoatMapUv),P.push(U.clearcoatNormalMapUv),P.push(U.clearcoatRoughnessMapUv),P.push(U.iridescenceMapUv),P.push(U.iridescenceThicknessMapUv),P.push(U.sheenColorMapUv),P.push(U.sheenRoughnessMapUv),P.push(U.specularMapUv),P.push(U.specularColorMapUv),P.push(U.specularIntensityMapUv),P.push(U.transmissionMapUv),P.push(U.thicknessMapUv),P.push(U.combine),P.push(U.fogExp2),P.push(U.sizeAttenuation),P.push(U.morphTargetsCount),P.push(U.morphAttributeCount),P.push(U.numDirLights),P.push(U.numPointLights),P.push(U.numSpotLights),P.push(U.numSpotLightMaps),P.push(U.numHemiLights),P.push(U.numRectAreaLights),P.push(U.numDirLightShadows),P.push(U.numPointLightShadows),P.push(U.numSpotLightShadows),P.push(U.numSpotLightShadowsWithMaps),P.push(U.numLightProbes),P.push(U.shadowMapType),P.push(U.toneMapping),P.push(U.numClippingPlanes),P.push(U.numClipIntersection),P.push(U.depthPacking)}function D(P,U){u.disableAll(),U.instancing&&u.enable(0),U.instancingColor&&u.enable(1),U.instancingMorph&&u.enable(2),U.matcap&&u.enable(3),U.envMap&&u.enable(4),U.normalMapObjectSpace&&u.enable(5),U.normalMapTangentSpace&&u.enable(6),U.clearcoat&&u.enable(7),U.iridescence&&u.enable(8),U.alphaTest&&u.enable(9),U.vertexColors&&u.enable(10),U.vertexAlphas&&u.enable(11),U.vertexUv1s&&u.enable(12),U.vertexUv2s&&u.enable(13),U.vertexUv3s&&u.enable(14),U.vertexTangents&&u.enable(15),U.anisotropy&&u.enable(16),U.alphaHash&&u.enable(17),U.batching&&u.enable(18),U.dispersion&&u.enable(19),U.batchingColor&&u.enable(20),U.gradientMap&&u.enable(21),P.push(u.mask),u.disableAll(),U.fog&&u.enable(0),U.useFog&&u.enable(1),U.flatShading&&u.enable(2),U.logarithmicDepthBuffer&&u.enable(3),U.reversedDepthBuffer&&u.enable(4),U.skinning&&u.enable(5),U.morphTargets&&u.enable(6),U.morphNormals&&u.enable(7),U.morphColors&&u.enable(8),U.premultipliedAlpha&&u.enable(9),U.shadowMapEnabled&&u.enable(10),U.doubleSided&&u.enable(11),U.flipSided&&u.enable(12),U.useDepthPacking&&u.enable(13),U.dithering&&u.enable(14),U.transmission&&u.enable(15),U.sheen&&u.enable(16),U.opaque&&u.enable(17),U.pointsUvs&&u.enable(18),U.decodeVideoTexture&&u.enable(19),U.decodeVideoTextureEmissive&&u.enable(20),U.alphaToCoverage&&u.enable(21),P.push(u.mask)}function I(P){const U=S[P.type];let W;if(U){const Q=Bo[U];W=GO.clone(Q.uniforms)}else W=P.uniforms;return W}function L(P,U){let W=y.get(U);return W!==void 0?++W.usedTimes:(W=new J8(n,U,P,a),g.push(W),y.set(U,W)),W}function N(P){if(--P.usedTimes===0){const U=g.indexOf(P);g[U]=g[g.length-1],g.pop(),y.delete(P.cacheKey),P.destroy()}}function F(P){h.remove(P)}function V(){h.dispose()}return{getParameters:w,getProgramCacheKey:E,getUniforms:I,acquireProgram:L,releaseProgram:N,releaseShaderCache:F,programs:g,dispose:V}}function rV(){let n=new WeakMap;function e(l){return n.has(l)}function t(l){let u=n.get(l);return u===void 0&&(u={},n.set(l,u)),u}function i(l){n.delete(l)}function r(l,u,h){n.get(l)[u]=h}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function sV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function AR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function CR(){const n=[];let e=0;const t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function l(y,_,b,S,A,w){let E=n[e];return E===void 0?(E={id:y.id,object:y,geometry:_,material:b,groupOrder:S,renderOrder:y.renderOrder,z:A,group:w},n[e]=E):(E.id=y.id,E.object=y,E.geometry=_,E.material=b,E.groupOrder=S,E.renderOrder=y.renderOrder,E.z=A,E.group=w),e++,E}function u(y,_,b,S,A,w){const E=l(y,_,b,S,A,w);b.transmission>0?i.push(E):b.transparent===!0?r.push(E):t.push(E)}function h(y,_,b,S,A,w){const E=l(y,_,b,S,A,w);b.transmission>0?i.unshift(E):b.transparent===!0?r.unshift(E):t.unshift(E)}function p(y,_){t.length>1&&t.sort(y||sV),i.length>1&&i.sort(_||AR),r.length>1&&r.sort(_||AR)}function g(){for(let y=e,_=n.length;y<_;y++){const b=n[y];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:u,unshift:h,finish:g,sort:p}}function aV(){let n=new WeakMap;function e(i,r){const a=n.get(i);let l;return a===void 0?(l=new CR,n.set(i,[l])):r>=a.length?(l=new CR,a.push(l)):l=a[r],l}function t(){n=new WeakMap}return{get:e,dispose:t}}function oV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ee,color:new Bt};break;case"SpotLight":t={position:new ee,direction:new ee,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ee,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ee,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":t={color:new Bt,position:new ee,halfWidth:new ee,halfHeight:new ee};break}return n[e.id]=t,t}}}function lV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let cV=0;function uV(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function fV(n){const e=new oV,t=lV(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new ee);const r=new ee,a=new hn,l=new hn;function u(p){let g=0,y=0,_=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let b=0,S=0,A=0,w=0,E=0,R=0,D=0,I=0,L=0,N=0,F=0;p.sort(uV);for(let P=0,U=p.length;P<U;P++){const W=p[P],Q=W.color,K=W.intensity,ne=W.distance;let re=null;if(W.shadow&&W.shadow.map&&(W.shadow.map.texture.format===Rd?re=W.shadow.map.texture:re=W.shadow.map.depthTexture||W.shadow.map.texture),W.isAmbientLight)g+=Q.r*K,y+=Q.g*K,_+=Q.b*K;else if(W.isLightProbe){for(let X=0;X<9;X++)i.probe[X].addScaledVector(W.sh.coefficients[X],K);F++}else if(W.isDirectionalLight){const X=e.get(W);if(X.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const J=W.shadow,ae=t.get(W);ae.shadowIntensity=J.intensity,ae.shadowBias=J.bias,ae.shadowNormalBias=J.normalBias,ae.shadowRadius=J.radius,ae.shadowMapSize=J.mapSize,i.directionalShadow[b]=ae,i.directionalShadowMap[b]=re,i.directionalShadowMatrix[b]=W.shadow.matrix,R++}i.directional[b]=X,b++}else if(W.isSpotLight){const X=e.get(W);X.position.setFromMatrixPosition(W.matrixWorld),X.color.copy(Q).multiplyScalar(K),X.distance=ne,X.coneCos=Math.cos(W.angle),X.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),X.decay=W.decay,i.spot[A]=X;const J=W.shadow;if(W.map&&(i.spotLightMap[L]=W.map,L++,J.updateMatrices(W),W.castShadow&&N++),i.spotLightMatrix[A]=J.matrix,W.castShadow){const ae=t.get(W);ae.shadowIntensity=J.intensity,ae.shadowBias=J.bias,ae.shadowNormalBias=J.normalBias,ae.shadowRadius=J.radius,ae.shadowMapSize=J.mapSize,i.spotShadow[A]=ae,i.spotShadowMap[A]=re,I++}A++}else if(W.isRectAreaLight){const X=e.get(W);X.color.copy(Q).multiplyScalar(K),X.halfWidth.set(W.width*.5,0,0),X.halfHeight.set(0,W.height*.5,0),i.rectArea[w]=X,w++}else if(W.isPointLight){const X=e.get(W);if(X.color.copy(W.color).multiplyScalar(W.intensity),X.distance=W.distance,X.decay=W.decay,W.castShadow){const J=W.shadow,ae=t.get(W);ae.shadowIntensity=J.intensity,ae.shadowBias=J.bias,ae.shadowNormalBias=J.normalBias,ae.shadowRadius=J.radius,ae.shadowMapSize=J.mapSize,ae.shadowCameraNear=J.camera.near,ae.shadowCameraFar=J.camera.far,i.pointShadow[S]=ae,i.pointShadowMap[S]=re,i.pointShadowMatrix[S]=W.shadow.matrix,D++}i.point[S]=X,S++}else if(W.isHemisphereLight){const X=e.get(W);X.skyColor.copy(W.color).multiplyScalar(K),X.groundColor.copy(W.groundColor).multiplyScalar(K),i.hemi[E]=X,E++}}w>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Nt.LTC_FLOAT_1,i.rectAreaLTC2=Nt.LTC_FLOAT_2):(i.rectAreaLTC1=Nt.LTC_HALF_1,i.rectAreaLTC2=Nt.LTC_HALF_2)),i.ambient[0]=g,i.ambient[1]=y,i.ambient[2]=_;const V=i.hash;(V.directionalLength!==b||V.pointLength!==S||V.spotLength!==A||V.rectAreaLength!==w||V.hemiLength!==E||V.numDirectionalShadows!==R||V.numPointShadows!==D||V.numSpotShadows!==I||V.numSpotMaps!==L||V.numLightProbes!==F)&&(i.directional.length=b,i.spot.length=A,i.rectArea.length=w,i.point.length=S,i.hemi.length=E,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=D,i.spotLightMatrix.length=I+L-N,i.spotLightMap.length=L,i.numSpotLightShadowsWithMaps=N,i.numLightProbes=F,V.directionalLength=b,V.pointLength=S,V.spotLength=A,V.rectAreaLength=w,V.hemiLength=E,V.numDirectionalShadows=R,V.numPointShadows=D,V.numSpotShadows=I,V.numSpotMaps=L,V.numLightProbes=F,i.version=cV++)}function h(p,g){let y=0,_=0,b=0,S=0,A=0;const w=g.matrixWorldInverse;for(let E=0,R=p.length;E<R;E++){const D=p[E];if(D.isDirectionalLight){const I=i.directional[y];I.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(w),y++}else if(D.isSpotLight){const I=i.spot[b];I.position.setFromMatrixPosition(D.matrixWorld),I.position.applyMatrix4(w),I.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(w),b++}else if(D.isRectAreaLight){const I=i.rectArea[S];I.position.setFromMatrixPosition(D.matrixWorld),I.position.applyMatrix4(w),l.identity(),a.copy(D.matrixWorld),a.premultiply(w),l.extractRotation(a),I.halfWidth.set(D.width*.5,0,0),I.halfHeight.set(0,D.height*.5,0),I.halfWidth.applyMatrix4(l),I.halfHeight.applyMatrix4(l),S++}else if(D.isPointLight){const I=i.point[_];I.position.setFromMatrixPosition(D.matrixWorld),I.position.applyMatrix4(w),_++}else if(D.isHemisphereLight){const I=i.hemi[A];I.direction.setFromMatrixPosition(D.matrixWorld),I.direction.transformDirection(w),A++}}}return{setup:u,setupView:h,state:i}}function RR(n){const e=new fV(n),t=[],i=[];function r(g){p.camera=g,t.length=0,i.length=0}function a(g){t.push(g)}function l(g){i.push(g)}function u(){e.setup(t)}function h(g){e.setupView(t,g)}const p={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:p,setupLights:u,setupLightsView:h,pushLight:a,pushShadow:l}}function dV(n){let e=new WeakMap;function t(r,a=0){const l=e.get(r);let u;return l===void 0?(u=new RR(n),e.set(r,[u])):a>=l.length?(u=new RR(n),l.push(u)):u=l[a],u}function i(){e=new WeakMap}return{get:t,dispose:i}}const hV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,pV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,mV=[new ee(1,0,0),new ee(-1,0,0),new ee(0,1,0),new ee(0,-1,0),new ee(0,0,1),new ee(0,0,-1)],gV=[new ee(0,-1,0),new ee(0,-1,0),new ee(0,0,1),new ee(0,0,-1),new ee(0,-1,0),new ee(0,-1,0)],DR=new hn,Xg=new ee,yM=new ee;function vV(n,e,t){let i=new em;const r=new Ye,a=new Ye,l=new Si,u=new _S,h=new Zw,p={},g=t.maxTextureSize,y={[Fc]:Ws,[Ws]:Fc,[Vo]:Vo},_=new ss({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:hV,fragmentShader:pV}),b=_.clone();b.defines.HORIZONTAL_PASS=1;const S=new Mn;S.setAttribute("position",new vi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Gi(S,_),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Cp;let E=this.type;this.render=function(N,F,V){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||N.length===0)return;N.type===o0&&(It("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),N.type=Cp);const P=n.getRenderTarget(),U=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),Q=n.state;Q.setBlending($o),Q.buffers.depth.getReversed()===!0?Q.buffers.color.setClear(0,0,0,0):Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);const K=E!==this.type;K&&F.traverse(function(ne){ne.material&&(Array.isArray(ne.material)?ne.material.forEach(re=>re.needsUpdate=!0):ne.material.needsUpdate=!0)});for(let ne=0,re=N.length;ne<re;ne++){const X=N[ne],J=X.shadow;if(J===void 0){It("WebGLShadowMap:",X,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;r.copy(J.mapSize);const ae=J.getFrameExtents();if(r.multiply(ae),a.copy(J.mapSize),(r.x>g||r.y>g)&&(r.x>g&&(a.x=Math.floor(g/ae.x),r.x=a.x*ae.x,J.mapSize.x=a.x),r.y>g&&(a.y=Math.floor(g/ae.y),r.y=a.y*ae.y,J.mapSize.y=a.y)),J.map===null||K===!0){if(J.map!==null&&(J.map.depthTexture!==null&&(J.map.depthTexture.dispose(),J.map.depthTexture=null),J.map.dispose()),this.type===gd){if(X.isPointLight){It("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}J.map=new is(r.x,r.y,{format:Rd,type:or,minFilter:qn,magFilter:qn,generateMipmaps:!1}),J.map.texture.name=X.name+".shadowMap",J.map.depthTexture=new $p(r.x,r.y,Hi),J.map.depthTexture.name=X.name+".shadowMapDepth",J.map.depthTexture.format=kl,J.map.depthTexture.compareFunction=null,J.map.depthTexture.minFilter=yr,J.map.depthTexture.magFilter=yr}else{X.isPointLight?(J.map=new eS(r.x),J.map.depthTexture=new eI(r.x,Da)):(J.map=new is(r.x,r.y),J.map.depthTexture=new $p(r.x,r.y,Da)),J.map.depthTexture.name=X.name+".shadowMap",J.map.depthTexture.format=kl;const Se=n.state.buffers.depth.getReversed();this.type===Cp?(J.map.depthTexture.compareFunction=Se?Zx:Yx,J.map.depthTexture.minFilter=qn,J.map.depthTexture.magFilter=qn):(J.map.depthTexture.compareFunction=null,J.map.depthTexture.minFilter=yr,J.map.depthTexture.magFilter=yr)}J.camera.updateProjectionMatrix()}const Me=J.map.isWebGLCubeRenderTarget?6:1;for(let Se=0;Se<Me;Se++){if(J.map.isWebGLCubeRenderTarget)n.setRenderTarget(J.map,Se),n.clear();else{Se===0&&(n.setRenderTarget(J.map),n.clear());const Y=J.getViewport(Se);l.set(a.x*Y.x,a.y*Y.y,a.x*Y.z,a.y*Y.w),Q.viewport(l)}if(X.isPointLight){const Y=J.camera,pe=J.matrix,we=X.distance||Y.far;we!==Y.far&&(Y.far=we,Y.updateProjectionMatrix()),Xg.setFromMatrixPosition(X.matrixWorld),Y.position.copy(Xg),yM.copy(Y.position),yM.add(mV[Se]),Y.up.copy(gV[Se]),Y.lookAt(yM),Y.updateMatrixWorld(),pe.makeTranslation(-Xg.x,-Xg.y,-Xg.z),DR.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),J._frustum.setFromProjectionMatrix(DR,Y.coordinateSystem,Y.reversedDepth)}else J.updateMatrices(X);i=J.getFrustum(),I(F,V,J.camera,X,this.type)}J.isPointLightShadow!==!0&&this.type===gd&&R(J,V),J.needsUpdate=!1}E=this.type,w.needsUpdate=!1,n.setRenderTarget(P,U,W)};function R(N,F){const V=e.update(A);_.defines.VSM_SAMPLES!==N.blurSamples&&(_.defines.VSM_SAMPLES=N.blurSamples,b.defines.VSM_SAMPLES=N.blurSamples,_.needsUpdate=!0,b.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new is(r.x,r.y,{format:Rd,type:or})),_.uniforms.shadow_pass.value=N.map.depthTexture,_.uniforms.resolution.value=N.mapSize,_.uniforms.radius.value=N.radius,n.setRenderTarget(N.mapPass),n.clear(),n.renderBufferDirect(F,null,V,_,A,null),b.uniforms.shadow_pass.value=N.mapPass.texture,b.uniforms.resolution.value=N.mapSize,b.uniforms.radius.value=N.radius,n.setRenderTarget(N.map),n.clear(),n.renderBufferDirect(F,null,V,b,A,null)}function D(N,F,V,P){let U=null;const W=V.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(W!==void 0)U=W;else if(U=V.isPointLight===!0?h:u,n.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0||F.alphaToCoverage===!0){const Q=U.uuid,K=F.uuid;let ne=p[Q];ne===void 0&&(ne={},p[Q]=ne);let re=ne[K];re===void 0&&(re=U.clone(),ne[K]=re,F.addEventListener("dispose",L)),U=re}if(U.visible=F.visible,U.wireframe=F.wireframe,P===gd?U.side=F.shadowSide!==null?F.shadowSide:F.side:U.side=F.shadowSide!==null?F.shadowSide:y[F.side],U.alphaMap=F.alphaMap,U.alphaTest=F.alphaToCoverage===!0?.5:F.alphaTest,U.map=F.map,U.clipShadows=F.clipShadows,U.clippingPlanes=F.clippingPlanes,U.clipIntersection=F.clipIntersection,U.displacementMap=F.displacementMap,U.displacementScale=F.displacementScale,U.displacementBias=F.displacementBias,U.wireframeLinewidth=F.wireframeLinewidth,U.linewidth=F.linewidth,V.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const Q=n.properties.get(U);Q.light=V}return U}function I(N,F,V,P,U){if(N.visible===!1)return;if(N.layers.test(F.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&U===gd)&&(!N.frustumCulled||i.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,N.matrixWorld);const K=e.update(N),ne=N.material;if(Array.isArray(ne)){const re=K.groups;for(let X=0,J=re.length;X<J;X++){const ae=re[X],Me=ne[ae.materialIndex];if(Me&&Me.visible){const Se=D(N,Me,P,U);N.onBeforeShadow(n,N,F,V,K,Se,ae),n.renderBufferDirect(V,null,K,Se,N,ae),N.onAfterShadow(n,N,F,V,K,Se,ae)}}}else if(ne.visible){const re=D(N,ne,P,U);N.onBeforeShadow(n,N,F,V,K,re,null),n.renderBufferDirect(V,null,K,re,N,null),N.onAfterShadow(n,N,F,V,K,re,null)}}const Q=N.children;for(let K=0,ne=Q.length;K<ne;K++)I(Q[K],F,V,P,U)}function L(N){N.target.removeEventListener("dispose",L);for(const V in p){const P=p[V],U=N.target.uuid;U in P&&(P[U].dispose(),delete P[U])}}}const yV={[Eb]:wb,[Tb]:Rb,[Ab]:Db,[Cd]:Cb,[wb]:Eb,[Rb]:Tb,[Db]:Ab,[Cb]:Cd};function _V(n,e){function t(){let oe=!1;const Ee=new Si;let et=null;const Mt=new Si(0,0,0,0);return{setMask:function(it){et!==it&&!oe&&(n.colorMask(it,it,it,it),et=it)},setLocked:function(it){oe=it},setClear:function(it,We,ct,Xt,mn){mn===!0&&(it*=Xt,We*=Xt,ct*=Xt),Ee.set(it,We,ct,Xt),Mt.equals(Ee)===!1&&(n.clearColor(it,We,ct,Xt),Mt.copy(Ee))},reset:function(){oe=!1,et=null,Mt.set(-1,0,0,0)}}}function i(){let oe=!1,Ee=!1,et=null,Mt=null,it=null;return{setReversed:function(We){if(Ee!==We){const ct=e.get("EXT_clip_control");We?ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.ZERO_TO_ONE_EXT):ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.NEGATIVE_ONE_TO_ONE_EXT),Ee=We;const Xt=it;it=null,this.setClear(Xt)}},getReversed:function(){return Ee},setTest:function(We){We?Re(n.DEPTH_TEST):tt(n.DEPTH_TEST)},setMask:function(We){et!==We&&!oe&&(n.depthMask(We),et=We)},setFunc:function(We){if(Ee&&(We=yV[We]),Mt!==We){switch(We){case Eb:n.depthFunc(n.NEVER);break;case wb:n.depthFunc(n.ALWAYS);break;case Tb:n.depthFunc(n.LESS);break;case Cd:n.depthFunc(n.LEQUAL);break;case Ab:n.depthFunc(n.EQUAL);break;case Cb:n.depthFunc(n.GEQUAL);break;case Rb:n.depthFunc(n.GREATER);break;case Db:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Mt=We}},setLocked:function(We){oe=We},setClear:function(We){it!==We&&(Ee&&(We=1-We),n.clearDepth(We),it=We)},reset:function(){oe=!1,et=null,Mt=null,it=null,Ee=!1}}}function r(){let oe=!1,Ee=null,et=null,Mt=null,it=null,We=null,ct=null,Xt=null,mn=null;return{setTest:function(yn){oe||(yn?Re(n.STENCIL_TEST):tt(n.STENCIL_TEST))},setMask:function(yn){Ee!==yn&&!oe&&(n.stencilMask(yn),Ee=yn)},setFunc:function(yn,_i,Wi){(et!==yn||Mt!==_i||it!==Wi)&&(n.stencilFunc(yn,_i,Wi),et=yn,Mt=_i,it=Wi)},setOp:function(yn,_i,Wi){(We!==yn||ct!==_i||Xt!==Wi)&&(n.stencilOp(yn,_i,Wi),We=yn,ct=_i,Xt=Wi)},setLocked:function(yn){oe=yn},setClear:function(yn){mn!==yn&&(n.clearStencil(yn),mn=yn)},reset:function(){oe=!1,Ee=null,et=null,Mt=null,it=null,We=null,ct=null,Xt=null,mn=null}}}const a=new t,l=new i,u=new r,h=new WeakMap,p=new WeakMap;let g={},y={},_=new WeakMap,b=[],S=null,A=!1,w=null,E=null,R=null,D=null,I=null,L=null,N=null,F=new Bt(0,0,0),V=0,P=!1,U=null,W=null,Q=null,K=null,ne=null;const re=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,J=0;const ae=n.getParameter(n.VERSION);ae.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(ae)[1]),X=J>=1):ae.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(ae)[1]),X=J>=2);let Me=null,Se={};const Y=n.getParameter(n.SCISSOR_BOX),pe=n.getParameter(n.VIEWPORT),we=new Si().fromArray(Y),ke=new Si().fromArray(pe);function pt(oe,Ee,et,Mt){const it=new Uint8Array(4),We=n.createTexture();n.bindTexture(oe,We),n.texParameteri(oe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(oe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ct=0;ct<et;ct++)oe===n.TEXTURE_3D||oe===n.TEXTURE_2D_ARRAY?n.texImage3D(Ee,0,n.RGBA,1,1,Mt,0,n.RGBA,n.UNSIGNED_BYTE,it):n.texImage2D(Ee+ct,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,it);return We}const ge={};ge[n.TEXTURE_2D]=pt(n.TEXTURE_2D,n.TEXTURE_2D,1),ge[n.TEXTURE_CUBE_MAP]=pt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ge[n.TEXTURE_2D_ARRAY]=pt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ge[n.TEXTURE_3D]=pt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Re(n.DEPTH_TEST),l.setFunc(Cd),He(!1),mt(pE),Re(n.CULL_FACE),Ve($o);function Re(oe){g[oe]!==!0&&(n.enable(oe),g[oe]=!0)}function tt(oe){g[oe]!==!1&&(n.disable(oe),g[oe]=!1)}function yt(oe,Ee){return y[oe]!==Ee?(n.bindFramebuffer(oe,Ee),y[oe]=Ee,oe===n.DRAW_FRAMEBUFFER&&(y[n.FRAMEBUFFER]=Ee),oe===n.FRAMEBUFFER&&(y[n.DRAW_FRAMEBUFFER]=Ee),!0):!1}function Rt(oe,Ee){let et=b,Mt=!1;if(oe){et=_.get(Ee),et===void 0&&(et=[],_.set(Ee,et));const it=oe.textures;if(et.length!==it.length||et[0]!==n.COLOR_ATTACHMENT0){for(let We=0,ct=it.length;We<ct;We++)et[We]=n.COLOR_ATTACHMENT0+We;et.length=it.length,Mt=!0}}else et[0]!==n.BACK&&(et[0]=n.BACK,Mt=!0);Mt&&n.drawBuffers(et)}function nn(oe){return S!==oe?(n.useProgram(oe),S=oe,!0):!1}const cn={[$u]:n.FUNC_ADD,[aO]:n.FUNC_SUBTRACT,[oO]:n.FUNC_REVERSE_SUBTRACT};cn[lO]=n.MIN,cn[cO]=n.MAX;const zt={[uO]:n.ZERO,[fO]:n.ONE,[dO]:n.SRC_COLOR,[Sb]:n.SRC_ALPHA,[yO]:n.SRC_ALPHA_SATURATE,[gO]:n.DST_COLOR,[pO]:n.DST_ALPHA,[hO]:n.ONE_MINUS_SRC_COLOR,[Mb]:n.ONE_MINUS_SRC_ALPHA,[vO]:n.ONE_MINUS_DST_COLOR,[mO]:n.ONE_MINUS_DST_ALPHA,[_O]:n.CONSTANT_COLOR,[bO]:n.ONE_MINUS_CONSTANT_COLOR,[xO]:n.CONSTANT_ALPHA,[SO]:n.ONE_MINUS_CONSTANT_ALPHA};function Ve(oe,Ee,et,Mt,it,We,ct,Xt,mn,yn){if(oe===$o){A===!0&&(tt(n.BLEND),A=!1);return}if(A===!1&&(Re(n.BLEND),A=!0),oe!==sO){if(oe!==w||yn!==P){if((E!==$u||I!==$u)&&(n.blendEquation(n.FUNC_ADD),E=$u,I=$u),yn)switch(oe){case Md:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mE:n.blendFunc(n.ONE,n.ONE);break;case gE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case vE:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:Kt("WebGLState: Invalid blending: ",oe);break}else switch(oe){case Md:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mE:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case gE:Kt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case vE:Kt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Kt("WebGLState: Invalid blending: ",oe);break}R=null,D=null,L=null,N=null,F.set(0,0,0),V=0,w=oe,P=yn}return}it=it||Ee,We=We||et,ct=ct||Mt,(Ee!==E||it!==I)&&(n.blendEquationSeparate(cn[Ee],cn[it]),E=Ee,I=it),(et!==R||Mt!==D||We!==L||ct!==N)&&(n.blendFuncSeparate(zt[et],zt[Mt],zt[We],zt[ct]),R=et,D=Mt,L=We,N=ct),(Xt.equals(F)===!1||mn!==V)&&(n.blendColor(Xt.r,Xt.g,Xt.b,mn),F.copy(Xt),V=mn),w=oe,P=!1}function Je(oe,Ee){oe.side===Vo?tt(n.CULL_FACE):Re(n.CULL_FACE);let et=oe.side===Ws;Ee&&(et=!et),He(et),oe.blending===Md&&oe.transparent===!1?Ve($o):Ve(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.blendColor,oe.blendAlpha,oe.premultipliedAlpha),l.setFunc(oe.depthFunc),l.setTest(oe.depthTest),l.setMask(oe.depthWrite),a.setMask(oe.colorWrite);const Mt=oe.stencilWrite;u.setTest(Mt),Mt&&(u.setMask(oe.stencilWriteMask),u.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),u.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),kt(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?Re(n.SAMPLE_ALPHA_TO_COVERAGE):tt(n.SAMPLE_ALPHA_TO_COVERAGE)}function He(oe){U!==oe&&(oe?n.frontFace(n.CW):n.frontFace(n.CCW),U=oe)}function mt(oe){oe!==nO?(Re(n.CULL_FACE),oe!==W&&(oe===pE?n.cullFace(n.BACK):oe===iO?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):tt(n.CULL_FACE),W=oe}function te(oe){oe!==Q&&(X&&n.lineWidth(oe),Q=oe)}function kt(oe,Ee,et){oe?(Re(n.POLYGON_OFFSET_FILL),(K!==Ee||ne!==et)&&(n.polygonOffset(Ee,et),K=Ee,ne=et)):tt(n.POLYGON_OFFSET_FILL)}function Et(oe){oe?Re(n.SCISSOR_TEST):tt(n.SCISSOR_TEST)}function Vt(oe){oe===void 0&&(oe=n.TEXTURE0+re-1),Me!==oe&&(n.activeTexture(oe),Me=oe)}function lt(oe,Ee,et){et===void 0&&(Me===null?et=n.TEXTURE0+re-1:et=Me);let Mt=Se[et];Mt===void 0&&(Mt={type:void 0,texture:void 0},Se[et]=Mt),(Mt.type!==oe||Mt.texture!==Ee)&&(Me!==et&&(n.activeTexture(et),Me=et),n.bindTexture(oe,Ee||ge[oe]),Mt.type=oe,Mt.texture=Ee)}function G(){const oe=Se[Me];oe!==void 0&&oe.type!==void 0&&(n.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function k(){try{n.compressedTexImage2D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function de(){try{n.compressedTexImage3D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function Ae(){try{n.texSubImage2D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function Be(){try{n.texSubImage3D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function Ie(){try{n.compressedTexSubImage2D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function wt(){try{n.compressedTexSubImage3D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function ft(){try{n.texStorage2D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function Pt(){try{n.texStorage3D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function jt(){try{n.texImage2D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function Ze(){try{n.texImage3D(...arguments)}catch(oe){Kt("WebGLState:",oe)}}function Ke(oe){we.equals(oe)===!1&&(n.scissor(oe.x,oe.y,oe.z,oe.w),we.copy(oe))}function At(oe){ke.equals(oe)===!1&&(n.viewport(oe.x,oe.y,oe.z,oe.w),ke.copy(oe))}function ie(oe,Ee){let et=p.get(Ee);et===void 0&&(et=new WeakMap,p.set(Ee,et));let Mt=et.get(oe);Mt===void 0&&(Mt=n.getUniformBlockIndex(Ee,oe.name),et.set(oe,Mt))}function _e(oe,Ee){const Mt=p.get(Ee).get(oe);h.get(Ee)!==Mt&&(n.uniformBlockBinding(Ee,Mt,oe.__bindingPointIndex),h.set(Ee,Mt))}function nt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),l.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},Me=null,Se={},y={},_=new WeakMap,b=[],S=null,A=!1,w=null,E=null,R=null,D=null,I=null,L=null,N=null,F=new Bt(0,0,0),V=0,P=!1,U=null,W=null,Q=null,K=null,ne=null,we.set(0,0,n.canvas.width,n.canvas.height),ke.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:Re,disable:tt,bindFramebuffer:yt,drawBuffers:Rt,useProgram:nn,setBlending:Ve,setMaterial:Je,setFlipSided:He,setCullFace:mt,setLineWidth:te,setPolygonOffset:kt,setScissorTest:Et,activeTexture:Vt,bindTexture:lt,unbindTexture:G,compressedTexImage2D:k,compressedTexImage3D:de,texImage2D:jt,texImage3D:Ze,updateUBOMapping:ie,uniformBlockBinding:_e,texStorage2D:ft,texStorage3D:Pt,texSubImage2D:Ae,texSubImage3D:Be,compressedTexSubImage2D:Ie,compressedTexSubImage3D:wt,scissor:Ke,viewport:At,reset:nt}}function bV(n,e,t,i,r,a,l){const u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Ye,g=new WeakMap;let y;const _=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(G,k){return b?new OffscreenCanvas(G,k):D0("canvas")}function A(G,k,de){let Ae=1;const Be=lt(G);if((Be.width>de||Be.height>de)&&(Ae=de/Math.max(Be.width,Be.height)),Ae<1)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap||typeof VideoFrame<"u"&&G instanceof VideoFrame){const Ie=Math.floor(Ae*Be.width),wt=Math.floor(Ae*Be.height);y===void 0&&(y=S(Ie,wt));const ft=k?S(Ie,wt):y;return ft.width=Ie,ft.height=wt,ft.getContext("2d").drawImage(G,0,0,Ie,wt),It("WebGLRenderer: Texture has been resized from ("+Be.width+"x"+Be.height+") to ("+Ie+"x"+wt+")."),ft}else return"data"in G&&It("WebGLRenderer: Image in DataTexture is too big ("+Be.width+"x"+Be.height+")."),G;return G}function w(G){return G.generateMipmaps}function E(G){n.generateMipmap(G)}function R(G){return G.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:G.isWebGL3DRenderTarget?n.TEXTURE_3D:G.isWebGLArrayRenderTarget||G.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function D(G,k,de,Ae,Be=!1){if(G!==null){if(n[G]!==void 0)return n[G];It("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let Ie=k;if(k===n.RED&&(de===n.FLOAT&&(Ie=n.R32F),de===n.HALF_FLOAT&&(Ie=n.R16F),de===n.UNSIGNED_BYTE&&(Ie=n.R8)),k===n.RED_INTEGER&&(de===n.UNSIGNED_BYTE&&(Ie=n.R8UI),de===n.UNSIGNED_SHORT&&(Ie=n.R16UI),de===n.UNSIGNED_INT&&(Ie=n.R32UI),de===n.BYTE&&(Ie=n.R8I),de===n.SHORT&&(Ie=n.R16I),de===n.INT&&(Ie=n.R32I)),k===n.RG&&(de===n.FLOAT&&(Ie=n.RG32F),de===n.HALF_FLOAT&&(Ie=n.RG16F),de===n.UNSIGNED_BYTE&&(Ie=n.RG8)),k===n.RG_INTEGER&&(de===n.UNSIGNED_BYTE&&(Ie=n.RG8UI),de===n.UNSIGNED_SHORT&&(Ie=n.RG16UI),de===n.UNSIGNED_INT&&(Ie=n.RG32UI),de===n.BYTE&&(Ie=n.RG8I),de===n.SHORT&&(Ie=n.RG16I),de===n.INT&&(Ie=n.RG32I)),k===n.RGB_INTEGER&&(de===n.UNSIGNED_BYTE&&(Ie=n.RGB8UI),de===n.UNSIGNED_SHORT&&(Ie=n.RGB16UI),de===n.UNSIGNED_INT&&(Ie=n.RGB32UI),de===n.BYTE&&(Ie=n.RGB8I),de===n.SHORT&&(Ie=n.RGB16I),de===n.INT&&(Ie=n.RGB32I)),k===n.RGBA_INTEGER&&(de===n.UNSIGNED_BYTE&&(Ie=n.RGBA8UI),de===n.UNSIGNED_SHORT&&(Ie=n.RGBA16UI),de===n.UNSIGNED_INT&&(Ie=n.RGBA32UI),de===n.BYTE&&(Ie=n.RGBA8I),de===n.SHORT&&(Ie=n.RGBA16I),de===n.INT&&(Ie=n.RGBA32I)),k===n.RGB&&(de===n.UNSIGNED_INT_5_9_9_9_REV&&(Ie=n.RGB9_E5),de===n.UNSIGNED_INT_10F_11F_11F_REV&&(Ie=n.R11F_G11F_B10F)),k===n.RGBA){const wt=Be?C0:$n.getTransfer(Ae);de===n.FLOAT&&(Ie=n.RGBA32F),de===n.HALF_FLOAT&&(Ie=n.RGBA16F),de===n.UNSIGNED_BYTE&&(Ie=wt===li?n.SRGB8_ALPHA8:n.RGBA8),de===n.UNSIGNED_SHORT_4_4_4_4&&(Ie=n.RGBA4),de===n.UNSIGNED_SHORT_5_5_5_1&&(Ie=n.RGB5_A1)}return(Ie===n.R16F||Ie===n.R32F||Ie===n.RG16F||Ie===n.RG32F||Ie===n.RGBA16F||Ie===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ie}function I(G,k){let de;return G?k===null||k===Da||k===Fp?de=n.DEPTH24_STENCIL8:k===Hi?de=n.DEPTH32F_STENCIL8:k===zp&&(de=n.DEPTH24_STENCIL8,It("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Da||k===Fp?de=n.DEPTH_COMPONENT24:k===Hi?de=n.DEPTH_COMPONENT32F:k===zp&&(de=n.DEPTH_COMPONENT16),de}function L(G,k){return w(G)===!0||G.isFramebufferTexture&&G.minFilter!==yr&&G.minFilter!==qn?Math.log2(Math.max(k.width,k.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?k.mipmaps.length:1}function N(G){const k=G.target;k.removeEventListener("dispose",N),V(k),k.isVideoTexture&&g.delete(k)}function F(G){const k=G.target;k.removeEventListener("dispose",F),U(k)}function V(G){const k=i.get(G);if(k.__webglInit===void 0)return;const de=G.source,Ae=_.get(de);if(Ae){const Be=Ae[k.__cacheKey];Be.usedTimes--,Be.usedTimes===0&&P(G),Object.keys(Ae).length===0&&_.delete(de)}i.remove(G)}function P(G){const k=i.get(G);n.deleteTexture(k.__webglTexture);const de=G.source,Ae=_.get(de);delete Ae[k.__cacheKey],l.memory.textures--}function U(G){const k=i.get(G);if(G.depthTexture&&(G.depthTexture.dispose(),i.remove(G.depthTexture)),G.isWebGLCubeRenderTarget)for(let Ae=0;Ae<6;Ae++){if(Array.isArray(k.__webglFramebuffer[Ae]))for(let Be=0;Be<k.__webglFramebuffer[Ae].length;Be++)n.deleteFramebuffer(k.__webglFramebuffer[Ae][Be]);else n.deleteFramebuffer(k.__webglFramebuffer[Ae]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[Ae])}else{if(Array.isArray(k.__webglFramebuffer))for(let Ae=0;Ae<k.__webglFramebuffer.length;Ae++)n.deleteFramebuffer(k.__webglFramebuffer[Ae]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let Ae=0;Ae<k.__webglColorRenderbuffer.length;Ae++)k.__webglColorRenderbuffer[Ae]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[Ae]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const de=G.textures;for(let Ae=0,Be=de.length;Ae<Be;Ae++){const Ie=i.get(de[Ae]);Ie.__webglTexture&&(n.deleteTexture(Ie.__webglTexture),l.memory.textures--),i.remove(de[Ae])}i.remove(G)}let W=0;function Q(){W=0}function K(){const G=W;return G>=r.maxTextures&&It("WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+r.maxTextures),W+=1,G}function ne(G){const k=[];return k.push(G.wrapS),k.push(G.wrapT),k.push(G.wrapR||0),k.push(G.magFilter),k.push(G.minFilter),k.push(G.anisotropy),k.push(G.internalFormat),k.push(G.format),k.push(G.type),k.push(G.generateMipmaps),k.push(G.premultiplyAlpha),k.push(G.flipY),k.push(G.unpackAlignment),k.push(G.colorSpace),k.join()}function re(G,k){const de=i.get(G);if(G.isVideoTexture&&Et(G),G.isRenderTargetTexture===!1&&G.isExternalTexture!==!0&&G.version>0&&de.__version!==G.version){const Ae=G.image;if(Ae===null)It("WebGLRenderer: Texture marked for update but no image data found.");else if(Ae.complete===!1)It("WebGLRenderer: Texture marked for update but image is incomplete");else{ge(de,G,k);return}}else G.isExternalTexture&&(de.__webglTexture=G.sourceTexture?G.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,de.__webglTexture,n.TEXTURE0+k)}function X(G,k){const de=i.get(G);if(G.isRenderTargetTexture===!1&&G.version>0&&de.__version!==G.version){ge(de,G,k);return}else G.isExternalTexture&&(de.__webglTexture=G.sourceTexture?G.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,de.__webglTexture,n.TEXTURE0+k)}function J(G,k){const de=i.get(G);if(G.isRenderTargetTexture===!1&&G.version>0&&de.__version!==G.version){ge(de,G,k);return}t.bindTexture(n.TEXTURE_3D,de.__webglTexture,n.TEXTURE0+k)}function ae(G,k){const de=i.get(G);if(G.isCubeDepthTexture!==!0&&G.version>0&&de.__version!==G.version){Re(de,G,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+k)}const Me={[Up]:n.REPEAT,[ar]:n.CLAMP_TO_EDGE,[w0]:n.MIRRORED_REPEAT},Se={[yr]:n.NEAREST,[Aw]:n.NEAREST_MIPMAP_NEAREST,[Ep]:n.NEAREST_MIPMAP_LINEAR,[qn]:n.LINEAR,[l0]:n.LINEAR_MIPMAP_NEAREST,[Ll]:n.LINEAR_MIPMAP_LINEAR},Y={[OO]:n.NEVER,[UO]:n.ALWAYS,[IO]:n.LESS,[Yx]:n.LEQUAL,[PO]:n.EQUAL,[Zx]:n.GEQUAL,[NO]:n.GREATER,[LO]:n.NOTEQUAL};function pe(G,k){if(k.type===Hi&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===qn||k.magFilter===l0||k.magFilter===Ep||k.magFilter===Ll||k.minFilter===qn||k.minFilter===l0||k.minFilter===Ep||k.minFilter===Ll)&&It("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(G,n.TEXTURE_WRAP_S,Me[k.wrapS]),n.texParameteri(G,n.TEXTURE_WRAP_T,Me[k.wrapT]),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,Me[k.wrapR]),n.texParameteri(G,n.TEXTURE_MAG_FILTER,Se[k.magFilter]),n.texParameteri(G,n.TEXTURE_MIN_FILTER,Se[k.minFilter]),k.compareFunction&&(n.texParameteri(G,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(G,n.TEXTURE_COMPARE_FUNC,Y[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===yr||k.minFilter!==Ep&&k.minFilter!==Ll||k.type===Hi&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||i.get(k).__currentAnisotropy){const de=e.get("EXT_texture_filter_anisotropic");n.texParameterf(G,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy}}}function we(G,k){let de=!1;G.__webglInit===void 0&&(G.__webglInit=!0,k.addEventListener("dispose",N));const Ae=k.source;let Be=_.get(Ae);Be===void 0&&(Be={},_.set(Ae,Be));const Ie=ne(k);if(Ie!==G.__cacheKey){Be[Ie]===void 0&&(Be[Ie]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,de=!0),Be[Ie].usedTimes++;const wt=Be[G.__cacheKey];wt!==void 0&&(Be[G.__cacheKey].usedTimes--,wt.usedTimes===0&&P(k)),G.__cacheKey=Ie,G.__webglTexture=Be[Ie].texture}return de}function ke(G,k,de){return Math.floor(Math.floor(G/de)/k)}function pt(G,k,de,Ae){const Ie=G.updateRanges;if(Ie.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,k.width,k.height,de,Ae,k.data);else{Ie.sort((Ze,Ke)=>Ze.start-Ke.start);let wt=0;for(let Ze=1;Ze<Ie.length;Ze++){const Ke=Ie[wt],At=Ie[Ze],ie=Ke.start+Ke.count,_e=ke(At.start,k.width,4),nt=ke(Ke.start,k.width,4);At.start<=ie+1&&_e===nt&&ke(At.start+At.count-1,k.width,4)===_e?Ke.count=Math.max(Ke.count,At.start+At.count-Ke.start):(++wt,Ie[wt]=At)}Ie.length=wt+1;const ft=n.getParameter(n.UNPACK_ROW_LENGTH),Pt=n.getParameter(n.UNPACK_SKIP_PIXELS),jt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,k.width);for(let Ze=0,Ke=Ie.length;Ze<Ke;Ze++){const At=Ie[Ze],ie=Math.floor(At.start/4),_e=Math.ceil(At.count/4),nt=ie%k.width,oe=Math.floor(ie/k.width),Ee=_e,et=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,nt),n.pixelStorei(n.UNPACK_SKIP_ROWS,oe),t.texSubImage2D(n.TEXTURE_2D,0,nt,oe,Ee,et,de,Ae,k.data)}G.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,ft),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Pt),n.pixelStorei(n.UNPACK_SKIP_ROWS,jt)}}function ge(G,k,de){let Ae=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Ae=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(Ae=n.TEXTURE_3D);const Be=we(G,k),Ie=k.source;t.bindTexture(Ae,G.__webglTexture,n.TEXTURE0+de);const wt=i.get(Ie);if(Ie.version!==wt.__version||Be===!0){t.activeTexture(n.TEXTURE0+de);const ft=$n.getPrimaries($n.workingColorSpace),Pt=k.colorSpace===Ic?null:$n.getPrimaries(k.colorSpace),jt=k.colorSpace===Ic||ft===Pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,jt);let Ze=A(k.image,!1,r.maxTextureSize);Ze=Vt(k,Ze);const Ke=a.convert(k.format,k.colorSpace),At=a.convert(k.type);let ie=D(k.internalFormat,Ke,At,k.colorSpace,k.isVideoTexture);pe(Ae,k);let _e;const nt=k.mipmaps,oe=k.isVideoTexture!==!0,Ee=wt.__version===void 0||Be===!0,et=Ie.dataReady,Mt=L(k,Ze);if(k.isDepthTexture)ie=I(k.format===ju,k.type),Ee&&(oe?t.texStorage2D(n.TEXTURE_2D,1,ie,Ze.width,Ze.height):t.texImage2D(n.TEXTURE_2D,0,ie,Ze.width,Ze.height,0,Ke,At,null));else if(k.isDataTexture)if(nt.length>0){oe&&Ee&&t.texStorage2D(n.TEXTURE_2D,Mt,ie,nt[0].width,nt[0].height);for(let it=0,We=nt.length;it<We;it++)_e=nt[it],oe?et&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,_e.width,_e.height,Ke,At,_e.data):t.texImage2D(n.TEXTURE_2D,it,ie,_e.width,_e.height,0,Ke,At,_e.data);k.generateMipmaps=!1}else oe?(Ee&&t.texStorage2D(n.TEXTURE_2D,Mt,ie,Ze.width,Ze.height),et&&pt(k,Ze,Ke,At)):t.texImage2D(n.TEXTURE_2D,0,ie,Ze.width,Ze.height,0,Ke,At,Ze.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){oe&&Ee&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Mt,ie,nt[0].width,nt[0].height,Ze.depth);for(let it=0,We=nt.length;it<We;it++)if(_e=nt[it],k.format!==_r)if(Ke!==null)if(oe){if(et)if(k.layerUpdates.size>0){const ct=RE(_e.width,_e.height,k.format,k.type);for(const Xt of k.layerUpdates){const mn=_e.data.subarray(Xt*ct/_e.data.BYTES_PER_ELEMENT,(Xt+1)*ct/_e.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,Xt,_e.width,_e.height,1,Ke,mn)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,0,_e.width,_e.height,Ze.depth,Ke,_e.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,it,ie,_e.width,_e.height,Ze.depth,0,_e.data,0,0);else It("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else oe?et&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,0,_e.width,_e.height,Ze.depth,Ke,At,_e.data):t.texImage3D(n.TEXTURE_2D_ARRAY,it,ie,_e.width,_e.height,Ze.depth,0,Ke,At,_e.data)}else{oe&&Ee&&t.texStorage2D(n.TEXTURE_2D,Mt,ie,nt[0].width,nt[0].height);for(let it=0,We=nt.length;it<We;it++)_e=nt[it],k.format!==_r?Ke!==null?oe?et&&t.compressedTexSubImage2D(n.TEXTURE_2D,it,0,0,_e.width,_e.height,Ke,_e.data):t.compressedTexImage2D(n.TEXTURE_2D,it,ie,_e.width,_e.height,0,_e.data):It("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oe?et&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,_e.width,_e.height,Ke,At,_e.data):t.texImage2D(n.TEXTURE_2D,it,ie,_e.width,_e.height,0,Ke,At,_e.data)}else if(k.isDataArrayTexture)if(oe){if(Ee&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Mt,ie,Ze.width,Ze.height,Ze.depth),et)if(k.layerUpdates.size>0){const it=RE(Ze.width,Ze.height,k.format,k.type);for(const We of k.layerUpdates){const ct=Ze.data.subarray(We*it/Ze.data.BYTES_PER_ELEMENT,(We+1)*it/Ze.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,We,Ze.width,Ze.height,1,Ke,At,ct)}k.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ze.width,Ze.height,Ze.depth,Ke,At,Ze.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ie,Ze.width,Ze.height,Ze.depth,0,Ke,At,Ze.data);else if(k.isData3DTexture)oe?(Ee&&t.texStorage3D(n.TEXTURE_3D,Mt,ie,Ze.width,Ze.height,Ze.depth),et&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ze.width,Ze.height,Ze.depth,Ke,At,Ze.data)):t.texImage3D(n.TEXTURE_3D,0,ie,Ze.width,Ze.height,Ze.depth,0,Ke,At,Ze.data);else if(k.isFramebufferTexture){if(Ee)if(oe)t.texStorage2D(n.TEXTURE_2D,Mt,ie,Ze.width,Ze.height);else{let it=Ze.width,We=Ze.height;for(let ct=0;ct<Mt;ct++)t.texImage2D(n.TEXTURE_2D,ct,ie,it,We,0,Ke,At,null),it>>=1,We>>=1}}else if(nt.length>0){if(oe&&Ee){const it=lt(nt[0]);t.texStorage2D(n.TEXTURE_2D,Mt,ie,it.width,it.height)}for(let it=0,We=nt.length;it<We;it++)_e=nt[it],oe?et&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,Ke,At,_e):t.texImage2D(n.TEXTURE_2D,it,ie,Ke,At,_e);k.generateMipmaps=!1}else if(oe){if(Ee){const it=lt(Ze);t.texStorage2D(n.TEXTURE_2D,Mt,ie,it.width,it.height)}et&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ke,At,Ze)}else t.texImage2D(n.TEXTURE_2D,0,ie,Ke,At,Ze);w(k)&&E(Ae),wt.__version=Ie.version,k.onUpdate&&k.onUpdate(k)}G.__version=k.version}function Re(G,k,de){if(k.image.length!==6)return;const Ae=we(G,k),Be=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+de);const Ie=i.get(Be);if(Be.version!==Ie.__version||Ae===!0){t.activeTexture(n.TEXTURE0+de);const wt=$n.getPrimaries($n.workingColorSpace),ft=k.colorSpace===Ic?null:$n.getPrimaries(k.colorSpace),Pt=k.colorSpace===Ic||wt===ft?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pt);const jt=k.isCompressedTexture||k.image[0].isCompressedTexture,Ze=k.image[0]&&k.image[0].isDataTexture,Ke=[];for(let We=0;We<6;We++)!jt&&!Ze?Ke[We]=A(k.image[We],!0,r.maxCubemapSize):Ke[We]=Ze?k.image[We].image:k.image[We],Ke[We]=Vt(k,Ke[We]);const At=Ke[0],ie=a.convert(k.format,k.colorSpace),_e=a.convert(k.type),nt=D(k.internalFormat,ie,_e,k.colorSpace),oe=k.isVideoTexture!==!0,Ee=Ie.__version===void 0||Ae===!0,et=Be.dataReady;let Mt=L(k,At);pe(n.TEXTURE_CUBE_MAP,k);let it;if(jt){oe&&Ee&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Mt,nt,At.width,At.height);for(let We=0;We<6;We++){it=Ke[We].mipmaps;for(let ct=0;ct<it.length;ct++){const Xt=it[ct];k.format!==_r?ie!==null?oe?et&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ct,0,0,Xt.width,Xt.height,ie,Xt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ct,nt,Xt.width,Xt.height,0,Xt.data):It("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):oe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ct,0,0,Xt.width,Xt.height,ie,_e,Xt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ct,nt,Xt.width,Xt.height,0,ie,_e,Xt.data)}}}else{if(it=k.mipmaps,oe&&Ee){it.length>0&&Mt++;const We=lt(Ke[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Mt,nt,We.width,We.height)}for(let We=0;We<6;We++)if(Ze){oe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,Ke[We].width,Ke[We].height,ie,_e,Ke[We].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,nt,Ke[We].width,Ke[We].height,0,ie,_e,Ke[We].data);for(let ct=0;ct<it.length;ct++){const mn=it[ct].image[We].image;oe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ct+1,0,0,mn.width,mn.height,ie,_e,mn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ct+1,nt,mn.width,mn.height,0,ie,_e,mn.data)}}else{oe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,ie,_e,Ke[We]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,nt,ie,_e,Ke[We]);for(let ct=0;ct<it.length;ct++){const Xt=it[ct];oe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ct+1,0,0,ie,_e,Xt.image[We]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ct+1,nt,ie,_e,Xt.image[We])}}}w(k)&&E(n.TEXTURE_CUBE_MAP),Ie.__version=Be.version,k.onUpdate&&k.onUpdate(k)}G.__version=k.version}function tt(G,k,de,Ae,Be,Ie){const wt=a.convert(de.format,de.colorSpace),ft=a.convert(de.type),Pt=D(de.internalFormat,wt,ft,de.colorSpace),jt=i.get(k),Ze=i.get(de);if(Ze.__renderTarget=k,!jt.__hasExternalTextures){const Ke=Math.max(1,k.width>>Ie),At=Math.max(1,k.height>>Ie);Be===n.TEXTURE_3D||Be===n.TEXTURE_2D_ARRAY?t.texImage3D(Be,Ie,Pt,Ke,At,k.depth,0,wt,ft,null):t.texImage2D(Be,Ie,Pt,Ke,At,0,wt,ft,null)}t.bindFramebuffer(n.FRAMEBUFFER,G),kt(k)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ae,Be,Ze.__webglTexture,0,te(k)):(Be===n.TEXTURE_2D||Be>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Be<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ae,Be,Ze.__webglTexture,Ie),t.bindFramebuffer(n.FRAMEBUFFER,null)}function yt(G,k,de){if(n.bindRenderbuffer(n.RENDERBUFFER,G),k.depthBuffer){const Ae=k.depthTexture,Be=Ae&&Ae.isDepthTexture?Ae.type:null,Ie=I(k.stencilBuffer,Be),wt=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;kt(k)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,te(k),Ie,k.width,k.height):de?n.renderbufferStorageMultisample(n.RENDERBUFFER,te(k),Ie,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Ie,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,wt,n.RENDERBUFFER,G)}else{const Ae=k.textures;for(let Be=0;Be<Ae.length;Be++){const Ie=Ae[Be],wt=a.convert(Ie.format,Ie.colorSpace),ft=a.convert(Ie.type),Pt=D(Ie.internalFormat,wt,ft,Ie.colorSpace);kt(k)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,te(k),Pt,k.width,k.height):de?n.renderbufferStorageMultisample(n.RENDERBUFFER,te(k),Pt,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Pt,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Rt(G,k,de){const Ae=k.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,G),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Be=i.get(k.depthTexture);if(Be.__renderTarget=k,(!Be.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),Ae){if(Be.__webglInit===void 0&&(Be.__webglInit=!0,k.depthTexture.addEventListener("dispose",N)),Be.__webglTexture===void 0){Be.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Be.__webglTexture),pe(n.TEXTURE_CUBE_MAP,k.depthTexture);const jt=a.convert(k.depthTexture.format),Ze=a.convert(k.depthTexture.type);let Ke;k.depthTexture.format===kl?Ke=n.DEPTH_COMPONENT24:k.depthTexture.format===ju&&(Ke=n.DEPTH24_STENCIL8);for(let At=0;At<6;At++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+At,0,Ke,k.width,k.height,0,jt,Ze,null)}}else re(k.depthTexture,0);const Ie=Be.__webglTexture,wt=te(k),ft=Ae?n.TEXTURE_CUBE_MAP_POSITIVE_X+de:n.TEXTURE_2D,Pt=k.depthTexture.format===ju?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(k.depthTexture.format===kl)kt(k)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pt,ft,Ie,0,wt):n.framebufferTexture2D(n.FRAMEBUFFER,Pt,ft,Ie,0);else if(k.depthTexture.format===ju)kt(k)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pt,ft,Ie,0,wt):n.framebufferTexture2D(n.FRAMEBUFFER,Pt,ft,Ie,0);else throw new Error("Unknown depthTexture format")}function nn(G){const k=i.get(G),de=G.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==G.depthTexture){const Ae=G.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),Ae){const Be=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,Ae.removeEventListener("dispose",Be)};Ae.addEventListener("dispose",Be),k.__depthDisposeCallback=Be}k.__boundDepthTexture=Ae}if(G.depthTexture&&!k.__autoAllocateDepthBuffer)if(de)for(let Ae=0;Ae<6;Ae++)Rt(k.__webglFramebuffer[Ae],G,Ae);else{const Ae=G.texture.mipmaps;Ae&&Ae.length>0?Rt(k.__webglFramebuffer[0],G,0):Rt(k.__webglFramebuffer,G,0)}else if(de){k.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)if(t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[Ae]),k.__webglDepthbuffer[Ae]===void 0)k.__webglDepthbuffer[Ae]=n.createRenderbuffer(),yt(k.__webglDepthbuffer[Ae],G,!1);else{const Be=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=k.__webglDepthbuffer[Ae];n.bindRenderbuffer(n.RENDERBUFFER,Ie),n.framebufferRenderbuffer(n.FRAMEBUFFER,Be,n.RENDERBUFFER,Ie)}}else{const Ae=G.texture.mipmaps;if(Ae&&Ae.length>0?t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=n.createRenderbuffer(),yt(k.__webglDepthbuffer,G,!1);else{const Be=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=k.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ie),n.framebufferRenderbuffer(n.FRAMEBUFFER,Be,n.RENDERBUFFER,Ie)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function cn(G,k,de){const Ae=i.get(G);k!==void 0&&tt(Ae.__webglFramebuffer,G,G.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),de!==void 0&&nn(G)}function zt(G){const k=G.texture,de=i.get(G),Ae=i.get(k);G.addEventListener("dispose",F);const Be=G.textures,Ie=G.isWebGLCubeRenderTarget===!0,wt=Be.length>1;if(wt||(Ae.__webglTexture===void 0&&(Ae.__webglTexture=n.createTexture()),Ae.__version=k.version,l.memory.textures++),Ie){de.__webglFramebuffer=[];for(let ft=0;ft<6;ft++)if(k.mipmaps&&k.mipmaps.length>0){de.__webglFramebuffer[ft]=[];for(let Pt=0;Pt<k.mipmaps.length;Pt++)de.__webglFramebuffer[ft][Pt]=n.createFramebuffer()}else de.__webglFramebuffer[ft]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){de.__webglFramebuffer=[];for(let ft=0;ft<k.mipmaps.length;ft++)de.__webglFramebuffer[ft]=n.createFramebuffer()}else de.__webglFramebuffer=n.createFramebuffer();if(wt)for(let ft=0,Pt=Be.length;ft<Pt;ft++){const jt=i.get(Be[ft]);jt.__webglTexture===void 0&&(jt.__webglTexture=n.createTexture(),l.memory.textures++)}if(G.samples>0&&kt(G)===!1){de.__webglMultisampledFramebuffer=n.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let ft=0;ft<Be.length;ft++){const Pt=Be[ft];de.__webglColorRenderbuffer[ft]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,de.__webglColorRenderbuffer[ft]);const jt=a.convert(Pt.format,Pt.colorSpace),Ze=a.convert(Pt.type),Ke=D(Pt.internalFormat,jt,Ze,Pt.colorSpace,G.isXRRenderTarget===!0),At=te(G);n.renderbufferStorageMultisample(n.RENDERBUFFER,At,Ke,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ft,n.RENDERBUFFER,de.__webglColorRenderbuffer[ft])}n.bindRenderbuffer(n.RENDERBUFFER,null),G.depthBuffer&&(de.__webglDepthRenderbuffer=n.createRenderbuffer(),yt(de.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ie){t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture),pe(n.TEXTURE_CUBE_MAP,k);for(let ft=0;ft<6;ft++)if(k.mipmaps&&k.mipmaps.length>0)for(let Pt=0;Pt<k.mipmaps.length;Pt++)tt(de.__webglFramebuffer[ft][Pt],G,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ft,Pt);else tt(de.__webglFramebuffer[ft],G,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ft,0);w(k)&&E(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(wt){for(let ft=0,Pt=Be.length;ft<Pt;ft++){const jt=Be[ft],Ze=i.get(jt);let Ke=n.TEXTURE_2D;(G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(Ke=G.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ke,Ze.__webglTexture),pe(Ke,jt),tt(de.__webglFramebuffer,G,jt,n.COLOR_ATTACHMENT0+ft,Ke,0),w(jt)&&E(Ke)}t.unbindTexture()}else{let ft=n.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(ft=G.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ft,Ae.__webglTexture),pe(ft,k),k.mipmaps&&k.mipmaps.length>0)for(let Pt=0;Pt<k.mipmaps.length;Pt++)tt(de.__webglFramebuffer[Pt],G,k,n.COLOR_ATTACHMENT0,ft,Pt);else tt(de.__webglFramebuffer,G,k,n.COLOR_ATTACHMENT0,ft,0);w(k)&&E(ft),t.unbindTexture()}G.depthBuffer&&nn(G)}function Ve(G){const k=G.textures;for(let de=0,Ae=k.length;de<Ae;de++){const Be=k[de];if(w(Be)){const Ie=R(G),wt=i.get(Be).__webglTexture;t.bindTexture(Ie,wt),E(Ie),t.unbindTexture()}}}const Je=[],He=[];function mt(G){if(G.samples>0){if(kt(G)===!1){const k=G.textures,de=G.width,Ae=G.height;let Be=n.COLOR_BUFFER_BIT;const Ie=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,wt=i.get(G),ft=k.length>1;if(ft)for(let jt=0;jt<k.length;jt++)t.bindFramebuffer(n.FRAMEBUFFER,wt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+jt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,wt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+jt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,wt.__webglMultisampledFramebuffer);const Pt=G.texture.mipmaps;Pt&&Pt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,wt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,wt.__webglFramebuffer);for(let jt=0;jt<k.length;jt++){if(G.resolveDepthBuffer&&(G.depthBuffer&&(Be|=n.DEPTH_BUFFER_BIT),G.stencilBuffer&&G.resolveStencilBuffer&&(Be|=n.STENCIL_BUFFER_BIT)),ft){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,wt.__webglColorRenderbuffer[jt]);const Ze=i.get(k[jt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ze,0)}n.blitFramebuffer(0,0,de,Ae,0,0,de,Ae,Be,n.NEAREST),h===!0&&(Je.length=0,He.length=0,Je.push(n.COLOR_ATTACHMENT0+jt),G.depthBuffer&&G.resolveDepthBuffer===!1&&(Je.push(Ie),He.push(Ie),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,He)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Je))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ft)for(let jt=0;jt<k.length;jt++){t.bindFramebuffer(n.FRAMEBUFFER,wt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+jt,n.RENDERBUFFER,wt.__webglColorRenderbuffer[jt]);const Ze=i.get(k[jt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,wt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+jt,n.TEXTURE_2D,Ze,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,wt.__webglMultisampledFramebuffer)}else if(G.depthBuffer&&G.resolveDepthBuffer===!1&&h){const k=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[k])}}}function te(G){return Math.min(r.maxSamples,G.samples)}function kt(G){const k=i.get(G);return G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Et(G){const k=l.render.frame;g.get(G)!==k&&(g.set(G,k),G.update())}function Vt(G,k){const de=G.colorSpace,Ae=G.format,Be=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||de!==Xo&&de!==Ic&&($n.getTransfer(de)===li?(Ae!==_r||Be!==$r)&&It("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Kt("WebGLTextures: Unsupported texture color space:",de)),k}function lt(G){return typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement?(p.width=G.naturalWidth||G.width,p.height=G.naturalHeight||G.height):typeof VideoFrame<"u"&&G instanceof VideoFrame?(p.width=G.displayWidth,p.height=G.displayHeight):(p.width=G.width,p.height=G.height),p}this.allocateTextureUnit=K,this.resetTextureUnits=Q,this.setTexture2D=re,this.setTexture2DArray=X,this.setTexture3D=J,this.setTextureCube=ae,this.rebindTextures=cn,this.setupRenderTarget=zt,this.updateRenderTargetMipmap=Ve,this.updateMultisampleRenderTarget=mt,this.setupDepthRenderbuffer=nn,this.setupFrameBufferTexture=tt,this.useMultisampledRTT=kt,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function $I(n,e){function t(i,r=Ic){let a;const l=$n.getTransfer(r);if(i===$r)return n.UNSIGNED_BYTE;if(i===Wx)return n.UNSIGNED_SHORT_4_4_4_4;if(i===$x)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Cw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Rw)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===Hx)return n.BYTE;if(i===Gx)return n.SHORT;if(i===zp)return n.UNSIGNED_SHORT;if(i===nv)return n.INT;if(i===Da)return n.UNSIGNED_INT;if(i===Hi)return n.FLOAT;if(i===or)return n.HALF_FLOAT;if(i===Dw)return n.ALPHA;if(i===Ow)return n.RGB;if(i===_r)return n.RGBA;if(i===kl)return n.DEPTH_COMPONENT;if(i===ju)return n.DEPTH_STENCIL;if(i===iv)return n.RED;if(i===rv)return n.RED_INTEGER;if(i===Rd)return n.RG;if(i===jx)return n.RG_INTEGER;if(i===Xx)return n.RGBA_INTEGER;if(i===c0||i===u0||i===f0||i===d0)if(l===li)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===c0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===u0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===f0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===d0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===c0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===u0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===f0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===d0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Ob||i===Ib||i===Pb||i===Nb)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===Ob)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Ib)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Pb)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Nb)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Lb||i===Ub||i===zb||i===Fb||i===Bb||i===kb||i===Vb)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===Lb||i===Ub)return l===li?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===zb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(i===Fb)return a.COMPRESSED_R11_EAC;if(i===Bb)return a.COMPRESSED_SIGNED_R11_EAC;if(i===kb)return a.COMPRESSED_RG11_EAC;if(i===Vb)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===Hb||i===Gb||i===Wb||i===$b||i===jb||i===Xb||i===qb||i===Yb||i===Zb||i===Kb||i===Qb||i===Jb||i===ex||i===tx)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===Hb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Gb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Wb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===$b)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===jb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Xb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===qb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Yb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Zb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Kb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Qb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Jb)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===ex)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===tx)return l===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===nx||i===ix||i===rx)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===nx)return l===li?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===ix)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===rx)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===sx||i===ax||i===ox||i===lx)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===sx)return a.COMPRESSED_RED_RGTC1_EXT;if(i===ax)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===ox)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===lx)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Fp?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const xV=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,SV=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class MV{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new Vw(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new ss({vertexShader:xV,fragmentShader:SV,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Gi(new Wc(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class EV extends Gl{constructor(e,t){super();const i=this;let r=null,a=1,l=null,u="local-floor",h=1,p=null,g=null,y=null,_=null,b=null,S=null;const A=typeof XRWebGLBinding<"u",w=new MV,E={},R=t.getContextAttributes();let D=null,I=null;const L=[],N=[],F=new Ye;let V=null;const P=new vr;P.viewport=new Si;const U=new vr;U.viewport=new Si;const W=[P,U],Q=new LI;let K=null,ne=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ge){let Re=L[ge];return Re===void 0&&(Re=new gb,L[ge]=Re),Re.getTargetRaySpace()},this.getControllerGrip=function(ge){let Re=L[ge];return Re===void 0&&(Re=new gb,L[ge]=Re),Re.getGripSpace()},this.getHand=function(ge){let Re=L[ge];return Re===void 0&&(Re=new gb,L[ge]=Re),Re.getHandSpace()};function re(ge){const Re=N.indexOf(ge.inputSource);if(Re===-1)return;const tt=L[Re];tt!==void 0&&(tt.update(ge.inputSource,ge.frame,p||l),tt.dispatchEvent({type:ge.type,data:ge.inputSource}))}function X(){r.removeEventListener("select",re),r.removeEventListener("selectstart",re),r.removeEventListener("selectend",re),r.removeEventListener("squeeze",re),r.removeEventListener("squeezestart",re),r.removeEventListener("squeezeend",re),r.removeEventListener("end",X),r.removeEventListener("inputsourceschange",J);for(let ge=0;ge<L.length;ge++){const Re=N[ge];Re!==null&&(N[ge]=null,L[ge].disconnect(Re))}K=null,ne=null,w.reset();for(const ge in E)delete E[ge];e.setRenderTarget(D),b=null,_=null,y=null,r=null,I=null,pt.stop(),i.isPresenting=!1,e.setPixelRatio(V),e.setSize(F.width,F.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ge){a=ge,i.isPresenting===!0&&It("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ge){u=ge,i.isPresenting===!0&&It("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(ge){p=ge},this.getBaseLayer=function(){return _!==null?_:b},this.getBinding=function(){return y===null&&A&&(y=new XRWebGLBinding(r,t)),y},this.getFrame=function(){return S},this.getSession=function(){return r},this.setSession=async function(ge){if(r=ge,r!==null){if(D=e.getRenderTarget(),r.addEventListener("select",re),r.addEventListener("selectstart",re),r.addEventListener("selectend",re),r.addEventListener("squeeze",re),r.addEventListener("squeezestart",re),r.addEventListener("squeezeend",re),r.addEventListener("end",X),r.addEventListener("inputsourceschange",J),R.xrCompatible!==!0&&await t.makeXRCompatible(),V=e.getPixelRatio(),e.getSize(F),A&&"createProjectionLayer"in XRWebGLBinding.prototype){let tt=null,yt=null,Rt=null;R.depth&&(Rt=R.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,tt=R.stencil?ju:kl,yt=R.stencil?Fp:Da);const nn={colorFormat:t.RGBA8,depthFormat:Rt,scaleFactor:a};y=this.getBinding(),_=y.createProjectionLayer(nn),r.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),I=new is(_.textureWidth,_.textureHeight,{format:_r,type:$r,depthTexture:new $p(_.textureWidth,_.textureHeight,yt,void 0,void 0,void 0,void 0,void 0,void 0,tt),stencilBuffer:R.stencil,colorSpace:e.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const tt={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:a};b=new XRWebGLLayer(r,t,tt),r.updateRenderState({baseLayer:b}),e.setPixelRatio(1),e.setSize(b.framebufferWidth,b.framebufferHeight,!1),I=new is(b.framebufferWidth,b.framebufferHeight,{format:_r,type:$r,colorSpace:e.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}I.isXRRenderTarget=!0,this.setFoveation(h),p=null,l=await r.requestReferenceSpace(u),pt.setContext(r),pt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function J(ge){for(let Re=0;Re<ge.removed.length;Re++){const tt=ge.removed[Re],yt=N.indexOf(tt);yt>=0&&(N[yt]=null,L[yt].disconnect(tt))}for(let Re=0;Re<ge.added.length;Re++){const tt=ge.added[Re];let yt=N.indexOf(tt);if(yt===-1){for(let nn=0;nn<L.length;nn++)if(nn>=N.length){N.push(tt),yt=nn;break}else if(N[nn]===null){N[nn]=tt,yt=nn;break}if(yt===-1)break}const Rt=L[yt];Rt&&Rt.connect(tt)}}const ae=new ee,Me=new ee;function Se(ge,Re,tt){ae.setFromMatrixPosition(Re.matrixWorld),Me.setFromMatrixPosition(tt.matrixWorld);const yt=ae.distanceTo(Me),Rt=Re.projectionMatrix.elements,nn=tt.projectionMatrix.elements,cn=Rt[14]/(Rt[10]-1),zt=Rt[14]/(Rt[10]+1),Ve=(Rt[9]+1)/Rt[5],Je=(Rt[9]-1)/Rt[5],He=(Rt[8]-1)/Rt[0],mt=(nn[8]+1)/nn[0],te=cn*He,kt=cn*mt,Et=yt/(-He+mt),Vt=Et*-He;if(Re.matrixWorld.decompose(ge.position,ge.quaternion,ge.scale),ge.translateX(Vt),ge.translateZ(Et),ge.matrixWorld.compose(ge.position,ge.quaternion,ge.scale),ge.matrixWorldInverse.copy(ge.matrixWorld).invert(),Rt[10]===-1)ge.projectionMatrix.copy(Re.projectionMatrix),ge.projectionMatrixInverse.copy(Re.projectionMatrixInverse);else{const lt=cn+Et,G=zt+Et,k=te-Vt,de=kt+(yt-Vt),Ae=Ve*zt/G*lt,Be=Je*zt/G*lt;ge.projectionMatrix.makePerspective(k,de,Ae,Be,lt,G),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert()}}function Y(ge,Re){Re===null?ge.matrixWorld.copy(ge.matrix):ge.matrixWorld.multiplyMatrices(Re.matrixWorld,ge.matrix),ge.matrixWorldInverse.copy(ge.matrixWorld).invert()}this.updateCamera=function(ge){if(r===null)return;let Re=ge.near,tt=ge.far;w.texture!==null&&(w.depthNear>0&&(Re=w.depthNear),w.depthFar>0&&(tt=w.depthFar)),Q.near=U.near=P.near=Re,Q.far=U.far=P.far=tt,(K!==Q.near||ne!==Q.far)&&(r.updateRenderState({depthNear:Q.near,depthFar:Q.far}),K=Q.near,ne=Q.far),Q.layers.mask=ge.layers.mask|6,P.layers.mask=Q.layers.mask&3,U.layers.mask=Q.layers.mask&5;const yt=ge.parent,Rt=Q.cameras;Y(Q,yt);for(let nn=0;nn<Rt.length;nn++)Y(Rt[nn],yt);Rt.length===2?Se(Q,P,U):Q.projectionMatrix.copy(P.projectionMatrix),pe(ge,Q,yt)};function pe(ge,Re,tt){tt===null?ge.matrix.copy(Re.matrixWorld):(ge.matrix.copy(tt.matrixWorld),ge.matrix.invert(),ge.matrix.multiply(Re.matrixWorld)),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.updateMatrixWorld(!0),ge.projectionMatrix.copy(Re.projectionMatrix),ge.projectionMatrixInverse.copy(Re.projectionMatrixInverse),ge.isPerspectiveCamera&&(ge.fov=Vp*2*Math.atan(1/ge.projectionMatrix.elements[5]),ge.zoom=1)}this.getCamera=function(){return Q},this.getFoveation=function(){if(!(_===null&&b===null))return h},this.setFoveation=function(ge){h=ge,_!==null&&(_.fixedFoveation=ge),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=ge)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(Q)},this.getCameraTexture=function(ge){return E[ge]};let we=null;function ke(ge,Re){if(g=Re.getViewerPose(p||l),S=Re,g!==null){const tt=g.views;b!==null&&(e.setRenderTargetFramebuffer(I,b.framebuffer),e.setRenderTarget(I));let yt=!1;tt.length!==Q.cameras.length&&(Q.cameras.length=0,yt=!0);for(let zt=0;zt<tt.length;zt++){const Ve=tt[zt];let Je=null;if(b!==null)Je=b.getViewport(Ve);else{const mt=y.getViewSubImage(_,Ve);Je=mt.viewport,zt===0&&(e.setRenderTargetTextures(I,mt.colorTexture,mt.depthStencilTexture),e.setRenderTarget(I))}let He=W[zt];He===void 0&&(He=new vr,He.layers.enable(zt),He.viewport=new Si,W[zt]=He),He.matrix.fromArray(Ve.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(Ve.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(Je.x,Je.y,Je.width,Je.height),zt===0&&(Q.matrix.copy(He.matrix),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale)),yt===!0&&Q.cameras.push(He)}const Rt=r.enabledFeatures;if(Rt&&Rt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&A){y=i.getBinding();const zt=y.getDepthInformation(tt[0]);zt&&zt.isValid&&zt.texture&&w.init(zt,r.renderState)}if(Rt&&Rt.includes("camera-access")&&A){e.state.unbindTexture(),y=i.getBinding();for(let zt=0;zt<tt.length;zt++){const Ve=tt[zt].camera;if(Ve){let Je=E[Ve];Je||(Je=new Vw,E[Ve]=Je);const He=y.getCameraImage(Ve);Je.sourceTexture=He}}}}for(let tt=0;tt<L.length;tt++){const yt=N[tt],Rt=L[tt];yt!==null&&Rt!==void 0&&Rt.update(yt,Re,p||l)}we&&we(ge,Re),Re.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Re}),S=null}const pt=new kI;pt.setAnimationLoop(ke),this.setAnimationLoop=function(ge){we=ge},this.dispose=function(){}}}const cd=new Oa,wV=new hn;function TV(n,e){function t(w,E){w.matrixAutoUpdate===!0&&w.updateMatrix(),E.value.copy(w.matrix)}function i(w,E){E.color.getRGB(w.fogColor.value,HO(n)),E.isFog?(w.fogNear.value=E.near,w.fogFar.value=E.far):E.isFogExp2&&(w.fogDensity.value=E.density)}function r(w,E,R,D,I){E.isMeshBasicMaterial||E.isMeshLambertMaterial?a(w,E):E.isMeshToonMaterial?(a(w,E),y(w,E)):E.isMeshPhongMaterial?(a(w,E),g(w,E)):E.isMeshStandardMaterial?(a(w,E),_(w,E),E.isMeshPhysicalMaterial&&b(w,E,I)):E.isMeshMatcapMaterial?(a(w,E),S(w,E)):E.isMeshDepthMaterial?a(w,E):E.isMeshDistanceMaterial?(a(w,E),A(w,E)):E.isMeshNormalMaterial?a(w,E):E.isLineBasicMaterial?(l(w,E),E.isLineDashedMaterial&&u(w,E)):E.isPointsMaterial?h(w,E,R,D):E.isSpriteMaterial?p(w,E):E.isShadowMaterial?(w.color.value.copy(E.color),w.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function a(w,E){w.opacity.value=E.opacity,E.color&&w.diffuse.value.copy(E.color),E.emissive&&w.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(w.map.value=E.map,t(E.map,w.mapTransform)),E.alphaMap&&(w.alphaMap.value=E.alphaMap,t(E.alphaMap,w.alphaMapTransform)),E.bumpMap&&(w.bumpMap.value=E.bumpMap,t(E.bumpMap,w.bumpMapTransform),w.bumpScale.value=E.bumpScale,E.side===Ws&&(w.bumpScale.value*=-1)),E.normalMap&&(w.normalMap.value=E.normalMap,t(E.normalMap,w.normalMapTransform),w.normalScale.value.copy(E.normalScale),E.side===Ws&&w.normalScale.value.negate()),E.displacementMap&&(w.displacementMap.value=E.displacementMap,t(E.displacementMap,w.displacementMapTransform),w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias),E.emissiveMap&&(w.emissiveMap.value=E.emissiveMap,t(E.emissiveMap,w.emissiveMapTransform)),E.specularMap&&(w.specularMap.value=E.specularMap,t(E.specularMap,w.specularMapTransform)),E.alphaTest>0&&(w.alphaTest.value=E.alphaTest);const R=e.get(E),D=R.envMap,I=R.envMapRotation;D&&(w.envMap.value=D,cd.copy(I),cd.x*=-1,cd.y*=-1,cd.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(cd.y*=-1,cd.z*=-1),w.envMapRotation.value.setFromMatrix4(wV.makeRotationFromEuler(cd)),w.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=E.reflectivity,w.ior.value=E.ior,w.refractionRatio.value=E.refractionRatio),E.lightMap&&(w.lightMap.value=E.lightMap,w.lightMapIntensity.value=E.lightMapIntensity,t(E.lightMap,w.lightMapTransform)),E.aoMap&&(w.aoMap.value=E.aoMap,w.aoMapIntensity.value=E.aoMapIntensity,t(E.aoMap,w.aoMapTransform))}function l(w,E){w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,E.map&&(w.map.value=E.map,t(E.map,w.mapTransform))}function u(w,E){w.dashSize.value=E.dashSize,w.totalSize.value=E.dashSize+E.gapSize,w.scale.value=E.scale}function h(w,E,R,D){w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,w.size.value=E.size*R,w.scale.value=D*.5,E.map&&(w.map.value=E.map,t(E.map,w.uvTransform)),E.alphaMap&&(w.alphaMap.value=E.alphaMap,t(E.alphaMap,w.alphaMapTransform)),E.alphaTest>0&&(w.alphaTest.value=E.alphaTest)}function p(w,E){w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,w.rotation.value=E.rotation,E.map&&(w.map.value=E.map,t(E.map,w.mapTransform)),E.alphaMap&&(w.alphaMap.value=E.alphaMap,t(E.alphaMap,w.alphaMapTransform)),E.alphaTest>0&&(w.alphaTest.value=E.alphaTest)}function g(w,E){w.specular.value.copy(E.specular),w.shininess.value=Math.max(E.shininess,1e-4)}function y(w,E){E.gradientMap&&(w.gradientMap.value=E.gradientMap)}function _(w,E){w.metalness.value=E.metalness,E.metalnessMap&&(w.metalnessMap.value=E.metalnessMap,t(E.metalnessMap,w.metalnessMapTransform)),w.roughness.value=E.roughness,E.roughnessMap&&(w.roughnessMap.value=E.roughnessMap,t(E.roughnessMap,w.roughnessMapTransform)),E.envMap&&(w.envMapIntensity.value=E.envMapIntensity)}function b(w,E,R){w.ior.value=E.ior,E.sheen>0&&(w.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),w.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(w.sheenColorMap.value=E.sheenColorMap,t(E.sheenColorMap,w.sheenColorMapTransform)),E.sheenRoughnessMap&&(w.sheenRoughnessMap.value=E.sheenRoughnessMap,t(E.sheenRoughnessMap,w.sheenRoughnessMapTransform))),E.clearcoat>0&&(w.clearcoat.value=E.clearcoat,w.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(w.clearcoatMap.value=E.clearcoatMap,t(E.clearcoatMap,w.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,t(E.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(w.clearcoatNormalMap.value=E.clearcoatNormalMap,t(E.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===Ws&&w.clearcoatNormalScale.value.negate())),E.dispersion>0&&(w.dispersion.value=E.dispersion),E.iridescence>0&&(w.iridescence.value=E.iridescence,w.iridescenceIOR.value=E.iridescenceIOR,w.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(w.iridescenceMap.value=E.iridescenceMap,t(E.iridescenceMap,w.iridescenceMapTransform)),E.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=E.iridescenceThicknessMap,t(E.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),E.transmission>0&&(w.transmission.value=E.transmission,w.transmissionSamplerMap.value=R.texture,w.transmissionSamplerSize.value.set(R.width,R.height),E.transmissionMap&&(w.transmissionMap.value=E.transmissionMap,t(E.transmissionMap,w.transmissionMapTransform)),w.thickness.value=E.thickness,E.thicknessMap&&(w.thicknessMap.value=E.thicknessMap,t(E.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=E.attenuationDistance,w.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(w.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(w.anisotropyMap.value=E.anisotropyMap,t(E.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=E.specularIntensity,w.specularColor.value.copy(E.specularColor),E.specularColorMap&&(w.specularColorMap.value=E.specularColorMap,t(E.specularColorMap,w.specularColorMapTransform)),E.specularIntensityMap&&(w.specularIntensityMap.value=E.specularIntensityMap,t(E.specularIntensityMap,w.specularIntensityMapTransform))}function S(w,E){E.matcap&&(w.matcap.value=E.matcap)}function A(w,E){const R=e.get(E).light;w.referencePosition.value.setFromMatrixPosition(R.matrixWorld),w.nearDistance.value=R.shadow.camera.near,w.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function AV(n,e,t,i){let r={},a={},l=[];const u=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function h(R,D){const I=D.program;i.uniformBlockBinding(R,I)}function p(R,D){let I=r[R.id];I===void 0&&(S(R),I=g(R),r[R.id]=I,R.addEventListener("dispose",w));const L=D.program;i.updateUBOMapping(R,L);const N=e.render.frame;a[R.id]!==N&&(_(R),a[R.id]=N)}function g(R){const D=y();R.__bindingPointIndex=D;const I=n.createBuffer(),L=R.__size,N=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,I),n.bufferData(n.UNIFORM_BUFFER,L,N),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,D,I),I}function y(){for(let R=0;R<u;R++)if(l.indexOf(R)===-1)return l.push(R),R;return Kt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(R){const D=r[R.id],I=R.uniforms,L=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,D);for(let N=0,F=I.length;N<F;N++){const V=Array.isArray(I[N])?I[N]:[I[N]];for(let P=0,U=V.length;P<U;P++){const W=V[P];if(b(W,N,P,L)===!0){const Q=W.__offset,K=Array.isArray(W.value)?W.value:[W.value];let ne=0;for(let re=0;re<K.length;re++){const X=K[re],J=A(X);typeof X=="number"||typeof X=="boolean"?(W.__data[0]=X,n.bufferSubData(n.UNIFORM_BUFFER,Q+ne,W.__data)):X.isMatrix3?(W.__data[0]=X.elements[0],W.__data[1]=X.elements[1],W.__data[2]=X.elements[2],W.__data[3]=0,W.__data[4]=X.elements[3],W.__data[5]=X.elements[4],W.__data[6]=X.elements[5],W.__data[7]=0,W.__data[8]=X.elements[6],W.__data[9]=X.elements[7],W.__data[10]=X.elements[8],W.__data[11]=0):(X.toArray(W.__data,ne),ne+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Q,W.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function b(R,D,I,L){const N=R.value,F=D+"_"+I;if(L[F]===void 0)return typeof N=="number"||typeof N=="boolean"?L[F]=N:L[F]=N.clone(),!0;{const V=L[F];if(typeof N=="number"||typeof N=="boolean"){if(V!==N)return L[F]=N,!0}else if(V.equals(N)===!1)return V.copy(N),!0}return!1}function S(R){const D=R.uniforms;let I=0;const L=16;for(let F=0,V=D.length;F<V;F++){const P=Array.isArray(D[F])?D[F]:[D[F]];for(let U=0,W=P.length;U<W;U++){const Q=P[U],K=Array.isArray(Q.value)?Q.value:[Q.value];for(let ne=0,re=K.length;ne<re;ne++){const X=K[ne],J=A(X),ae=I%L,Me=ae%J.boundary,Se=ae+Me;I+=Me,Se!==0&&L-Se<J.storage&&(I+=L-Se),Q.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=I,I+=J.storage}}}const N=I%L;return N>0&&(I+=L-N),R.__size=I,R.__cache={},this}function A(R){const D={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(D.boundary=4,D.storage=4):R.isVector2?(D.boundary=8,D.storage=8):R.isVector3||R.isColor?(D.boundary=16,D.storage=12):R.isVector4?(D.boundary=16,D.storage=16):R.isMatrix3?(D.boundary=48,D.storage=48):R.isMatrix4?(D.boundary=64,D.storage=64):R.isTexture?It("WebGLRenderer: Texture samplers can not be part of an uniforms group."):It("WebGLRenderer: Unsupported uniform value type.",R),D}function w(R){const D=R.target;D.removeEventListener("dispose",w);const I=l.indexOf(D.__bindingPointIndex);l.splice(I,1),n.deleteBuffer(r[D.id]),delete r[D.id],delete a[D.id]}function E(){for(const R in r)n.deleteBuffer(r[R]);l=[],r={},a={}}return{bind:h,update:p,dispose:E}}const CV=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Rl=null;function RV(){return Rl===null&&(Rl=new po(CV,16,16,Rd,or),Rl.name="DFG_LUT",Rl.minFilter=qn,Rl.magFilter=qn,Rl.wrapS=ar,Rl.wrapT=ar,Rl.generateMipmaps=!1,Rl.needsUpdate=!0),Rl}class uT{constructor(e={}){const{canvas:t=BO(),context:i=null,depth:r=!0,stencil:a=!1,alpha:l=!1,antialias:u=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:y=!1,reversedDepthBuffer:_=!1,outputBufferType:b=$r}=e;this.isWebGLRenderer=!0;let S;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");S=i.getContextAttributes().alpha}else S=l;const A=b,w=new Set([Xx,jx,rv]),E=new Set([$r,Da,zp,Fp,Wx,$x]),R=new Uint32Array(4),D=new Int32Array(4);let I=null,L=null;const N=[],F=[];let V=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ho,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const P=this;let U=!1;this._outputColorSpace=Wr;let W=0,Q=0,K=null,ne=-1,re=null;const X=new Si,J=new Si;let ae=null;const Me=new Bt(0);let Se=0,Y=t.width,pe=t.height,we=1,ke=null,pt=null;const ge=new Si(0,0,Y,pe),Re=new Si(0,0,Y,pe);let tt=!1;const yt=new em;let Rt=!1,nn=!1;const cn=new hn,zt=new ee,Ve=new Si,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let He=!1;function mt(){return K===null?we:1}let te=i;function kt($,se){return t.getContext($,se)}try{const $={alpha:!0,depth:r,stencil:a,antialias:u,premultipliedAlpha:h,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:y};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ev}`),t.addEventListener("webglcontextlost",Xt,!1),t.addEventListener("webglcontextrestored",mn,!1),t.addEventListener("webglcontextcreationerror",yn,!1),te===null){const se="webgl2";if(te=kt(se,$),te===null)throw kt(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw Kt("WebGLRenderer: "+$.message),$}let Et,Vt,lt,G,k,de,Ae,Be,Ie,wt,ft,Pt,jt,Ze,Ke,At,ie,_e,nt,oe,Ee,et,Mt,it;function We(){Et=new D6(te),Et.init(),et=new $I(te,Et),Vt=new x6(te,Et,e,et),lt=new _V(te,Et),Vt.reversedDepthBuffer&&_&&lt.buffers.depth.setReversed(!0),G=new P6(te),k=new rV,de=new bV(te,Et,lt,k,Vt,et,G),Ae=new M6(P),Be=new R6(P),Ie=new zB(te),Mt=new _6(te,Ie),wt=new O6(te,Ie,G,Mt),ft=new L6(te,wt,Ie,G),nt=new N6(te,Vt,de),At=new S6(k),Pt=new iV(P,Ae,Be,Et,Vt,Mt,At),jt=new TV(P,k),Ze=new aV,Ke=new dV(Et),_e=new y6(P,Ae,Be,lt,ft,S,h),ie=new vV(P,ft,Vt),it=new AV(te,G,Vt,lt),oe=new b6(te,Et,G),Ee=new I6(te,Et,G),G.programs=Pt.programs,P.capabilities=Vt,P.extensions=Et,P.properties=k,P.renderLists=Ze,P.shadowMap=ie,P.state=lt,P.info=G}We(),A!==$r&&(V=new z6(A,t.width,t.height,r,a));const ct=new EV(P,te);this.xr=ct,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const $=Et.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=Et.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return we},this.setPixelRatio=function($){$!==void 0&&(we=$,this.setSize(Y,pe,!1))},this.getSize=function($){return $.set(Y,pe)},this.setSize=function($,se,ve=!0){if(ct.isPresenting){It("WebGLRenderer: Can't change size while VR device is presenting.");return}Y=$,pe=se,t.width=Math.floor($*we),t.height=Math.floor(se*we),ve===!0&&(t.style.width=$+"px",t.style.height=se+"px"),V!==null&&V.setSize(t.width,t.height),this.setViewport(0,0,$,se)},this.getDrawingBufferSize=function($){return $.set(Y*we,pe*we).floor()},this.setDrawingBufferSize=function($,se,ve){Y=$,pe=se,we=ve,t.width=Math.floor($*ve),t.height=Math.floor(se*ve),this.setViewport(0,0,$,se)},this.setEffects=function($){if(A===$r){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if($){for(let se=0;se<$.length;se++)if($[se].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}V.setEffects($||[])},this.getCurrentViewport=function($){return $.copy(X)},this.getViewport=function($){return $.copy(ge)},this.setViewport=function($,se,ve,ye){$.isVector4?ge.set($.x,$.y,$.z,$.w):ge.set($,se,ve,ye),lt.viewport(X.copy(ge).multiplyScalar(we).round())},this.getScissor=function($){return $.copy(Re)},this.setScissor=function($,se,ve,ye){$.isVector4?Re.set($.x,$.y,$.z,$.w):Re.set($,se,ve,ye),lt.scissor(J.copy(Re).multiplyScalar(we).round())},this.getScissorTest=function(){return tt},this.setScissorTest=function($){lt.setScissorTest(tt=$)},this.setOpaqueSort=function($){ke=$},this.setTransparentSort=function($){pt=$},this.getClearColor=function($){return $.copy(_e.getClearColor())},this.setClearColor=function(){_e.setClearColor(...arguments)},this.getClearAlpha=function(){return _e.getClearAlpha()},this.setClearAlpha=function(){_e.setClearAlpha(...arguments)},this.clear=function($=!0,se=!0,ve=!0){let ye=0;if($){let he=!1;if(K!==null){const $e=K.texture.format;he=w.has($e)}if(he){const $e=K.texture.type,ot=E.has($e),Xe=_e.getClearColor(),Ct=_e.getClearAlpha(),vt=Xe.r,Ht=Xe.g,xt=Xe.b;ot?(R[0]=vt,R[1]=Ht,R[2]=xt,R[3]=Ct,te.clearBufferuiv(te.COLOR,0,R)):(D[0]=vt,D[1]=Ht,D[2]=xt,D[3]=Ct,te.clearBufferiv(te.COLOR,0,D))}else ye|=te.COLOR_BUFFER_BIT}se&&(ye|=te.DEPTH_BUFFER_BIT),ve&&(ye|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(ye)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Xt,!1),t.removeEventListener("webglcontextrestored",mn,!1),t.removeEventListener("webglcontextcreationerror",yn,!1),_e.dispose(),Ze.dispose(),Ke.dispose(),k.dispose(),Ae.dispose(),Be.dispose(),ft.dispose(),Mt.dispose(),it.dispose(),Pt.dispose(),ct.dispose(),ct.removeEventListener("sessionstart",jr),ct.removeEventListener("sessionend",ws),en.stop()};function Xt($){$.preventDefault(),O0("WebGLRenderer: Context Lost."),U=!0}function mn(){O0("WebGLRenderer: Context Restored."),U=!1;const $=G.autoReset,se=ie.enabled,ve=ie.autoUpdate,ye=ie.needsUpdate,he=ie.type;We(),G.autoReset=$,ie.enabled=se,ie.autoUpdate=ve,ie.needsUpdate=ye,ie.type=he}function yn($){Kt("WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function _i($){const se=$.target;se.removeEventListener("dispose",_i),Wi(se)}function Wi($){Ia($),k.remove($)}function Ia($){const se=k.get($).programs;se!==void 0&&(se.forEach(function(ve){Pt.releaseProgram(ve)}),$.isShaderMaterial&&Pt.releaseShaderCache($))}this.renderBufferDirect=function($,se,ve,ye,he,$e){se===null&&(se=Je);const ot=he.isMesh&&he.matrixWorld.determinant()<0,Xe=at($,se,ve,ye,he);lt.setMaterial(ye,ot);let Ct=ve.index,vt=1;if(ye.wireframe===!0){if(Ct=wt.getWireframeAttribute(ve),Ct===void 0)return;vt=2}const Ht=ve.drawRange,xt=ve.attributes.position;let Ft=Ht.start*vt,gn=(Ht.start+Ht.count)*vt;$e!==null&&(Ft=Math.max(Ft,$e.start*vt),gn=Math.min(gn,($e.start+$e.count)*vt)),Ct!==null?(Ft=Math.max(Ft,0),gn=Math.min(gn,Ct.count)):xt!=null&&(Ft=Math.max(Ft,0),gn=Math.min(gn,xt.count));const Yn=gn-Ft;if(Yn<0||Yn===1/0)return;Mt.setup(he,ye,Xe,ve,Ct);let En,Lt=oe;if(Ct!==null&&(En=Ie.get(Ct),Lt=Ee,Lt.setIndex(En)),he.isMesh)ye.wireframe===!0?(lt.setLineWidth(ye.wireframeLinewidth*mt()),Lt.setMode(te.LINES)):Lt.setMode(te.TRIANGLES);else if(he.isLine){let dt=ye.linewidth;dt===void 0&&(dt=1),lt.setLineWidth(dt*mt()),he.isLineSegments?Lt.setMode(te.LINES):he.isLineLoop?Lt.setMode(te.LINE_LOOP):Lt.setMode(te.LINE_STRIP)}else he.isPoints?Lt.setMode(te.POINTS):he.isSprite&&Lt.setMode(te.TRIANGLES);if(he.isBatchedMesh)if(he._multiDrawInstances!==null)kp("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Lt.renderMultiDrawInstances(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount,he._multiDrawInstances);else if(Et.get("WEBGL_multi_draw"))Lt.renderMultiDraw(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount);else{const dt=he._multiDrawStarts,qt=he._multiDrawCounts,Dt=he._multiDrawCount,jn=Ct?Ie.get(Ct).bytesPerElement:1,cr=k.get(ye).currentProgram.getUniforms();for(let On=0;On<Dt;On++)cr.setValue(te,"_gl_DrawID",On),Lt.render(dt[On]/jn,qt[On])}else if(he.isInstancedMesh)Lt.renderInstances(Ft,Yn,he.count);else if(ve.isInstancedBufferGeometry){const dt=ve._maxInstanceCount!==void 0?ve._maxInstanceCount:1/0,qt=Math.min(ve.instanceCount,dt);Lt.renderInstances(Ft,Yn,qt)}else Lt.render(Ft,Yn)};function Pa($,se,ve){$.transparent===!0&&$.side===Vo&&$.forceSinglePass===!1?($.side=Ws,$.needsUpdate=!0,Te($,se,ve),$.side=Fc,$.needsUpdate=!0,Te($,se,ve),$.side=Vo):Te($,se,ve)}this.compile=function($,se,ve=null){ve===null&&(ve=$),L=Ke.get(ve),L.init(se),F.push(L),ve.traverseVisible(function(he){he.isLight&&he.layers.test(se.layers)&&(L.pushLight(he),he.castShadow&&L.pushShadow(he))}),$!==ve&&$.traverseVisible(function(he){he.isLight&&he.layers.test(se.layers)&&(L.pushLight(he),he.castShadow&&L.pushShadow(he))}),L.setupLights();const ye=new Set;return $.traverse(function(he){if(!(he.isMesh||he.isPoints||he.isLine||he.isSprite))return;const $e=he.material;if($e)if(Array.isArray($e))for(let ot=0;ot<$e.length;ot++){const Xe=$e[ot];Pa(Xe,ve,he),ye.add(Xe)}else Pa($e,ve,he),ye.add($e)}),L=F.pop(),ye},this.compileAsync=function($,se,ve=null){const ye=this.compile($,se,ve);return new Promise(he=>{function $e(){if(ye.forEach(function(ot){k.get(ot).currentProgram.isReady()&&ye.delete(ot)}),ye.size===0){he($);return}setTimeout($e,10)}Et.get("KHR_parallel_shader_compile")!==null?$e():setTimeout($e,10)})};let Xs=null;function Na($){Xs&&Xs($)}function jr(){en.stop()}function ws(){en.start()}const en=new kI;en.setAnimationLoop(Na),typeof self<"u"&&en.setContext(self),this.setAnimationLoop=function($){Xs=$,ct.setAnimationLoop($),$===null?en.stop():en.start()},ct.addEventListener("sessionstart",jr),ct.addEventListener("sessionend",ws),this.render=function($,se){if(se!==void 0&&se.isCamera!==!0){Kt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(U===!0)return;const ve=ct.enabled===!0&&ct.isPresenting===!0,ye=V!==null&&(K===null||ve)&&V.begin(P,K);if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),ct.enabled===!0&&ct.isPresenting===!0&&(V===null||V.isCompositing()===!1)&&(ct.cameraAutoUpdate===!0&&ct.updateCamera(se),se=ct.getCamera()),$.isScene===!0&&$.onBeforeRender(P,$,se,K),L=Ke.get($,F.length),L.init(se),F.push(L),cn.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),yt.setFromProjectionMatrix(cn,Ta,se.reversedDepth),nn=this.localClippingEnabled,Rt=At.init(this.clippingPlanes,nn),I=Ze.get($,N.length),I.init(),N.push(I),ct.enabled===!0&&ct.isPresenting===!0){const ot=P.xr.getDepthSensingMesh();ot!==null&&zr(ot,se,-1/0,P.sortObjects)}zr($,se,0,P.sortObjects),I.finish(),P.sortObjects===!0&&I.sort(ke,pt),He=ct.enabled===!1||ct.isPresenting===!1||ct.hasDepthSensing()===!1,He&&_e.addToRenderList(I,$),this.info.render.frame++,Rt===!0&&At.beginShadows();const he=L.state.shadowsArray;if(ie.render(he,$,se),Rt===!0&&At.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ye&&V.hasRenderPass())===!1){const ot=I.opaque,Xe=I.transmissive;if(L.setupLights(),se.isArrayCamera){const Ct=se.cameras;if(Xe.length>0)for(let vt=0,Ht=Ct.length;vt<Ht;vt++){const xt=Ct[vt];H(ot,Xe,$,xt)}He&&_e.render($);for(let vt=0,Ht=Ct.length;vt<Ht;vt++){const xt=Ct[vt];bi(I,$,xt,xt.viewport)}}else Xe.length>0&&H(ot,Xe,$,se),He&&_e.render($),bi(I,$,se)}K!==null&&Q===0&&(de.updateMultisampleRenderTarget(K),de.updateRenderTargetMipmap(K)),ye&&V.end(P),$.isScene===!0&&$.onAfterRender(P,$,se),Mt.resetDefaultState(),ne=-1,re=null,F.pop(),F.length>0?(L=F[F.length-1],Rt===!0&&At.setGlobalState(P.clippingPlanes,L.state.camera)):L=null,N.pop(),N.length>0?I=N[N.length-1]:I=null};function zr($,se,ve,ye){if($.visible===!1)return;if($.layers.test(se.layers)){if($.isGroup)ve=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(se);else if($.isLight)L.pushLight($),$.castShadow&&L.pushShadow($);else if($.isSprite){if(!$.frustumCulled||yt.intersectsSprite($)){ye&&Ve.setFromMatrixPosition($.matrixWorld).applyMatrix4(cn);const ot=ft.update($),Xe=$.material;Xe.visible&&I.push($,ot,Xe,ve,Ve.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||yt.intersectsObject($))){const ot=ft.update($),Xe=$.material;if(ye&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),Ve.copy($.boundingSphere.center)):(ot.boundingSphere===null&&ot.computeBoundingSphere(),Ve.copy(ot.boundingSphere.center)),Ve.applyMatrix4($.matrixWorld).applyMatrix4(cn)),Array.isArray(Xe)){const Ct=ot.groups;for(let vt=0,Ht=Ct.length;vt<Ht;vt++){const xt=Ct[vt],Ft=Xe[xt.materialIndex];Ft&&Ft.visible&&I.push($,ot,Ft,ve,Ve.z,xt)}}else Xe.visible&&I.push($,ot,Xe,ve,Ve.z,null)}}const $e=$.children;for(let ot=0,Xe=$e.length;ot<Xe;ot++)zr($e[ot],se,ve,ye)}function bi($,se,ve,ye){const{opaque:he,transmissive:$e,transparent:ot}=$;L.setupLightsView(ve),Rt===!0&&At.setGlobalState(P.clippingPlanes,ve),ye&&lt.viewport(X.copy(ye)),he.length>0&&Z(he,se,ve),$e.length>0&&Z($e,se,ve),ot.length>0&&Z(ot,se,ve),lt.buffers.depth.setTest(!0),lt.buffers.depth.setMask(!0),lt.buffers.color.setMask(!0),lt.setPolygonOffset(!1)}function H($,se,ve,ye){if((ve.isScene===!0?ve.overrideMaterial:null)!==null)return;if(L.state.transmissionRenderTarget[ye.id]===void 0){const Ft=Et.has("EXT_color_buffer_half_float")||Et.has("EXT_color_buffer_float");L.state.transmissionRenderTarget[ye.id]=new is(1,1,{generateMipmaps:!0,type:Ft?or:$r,minFilter:Ll,samples:Vt.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:$n.workingColorSpace})}const $e=L.state.transmissionRenderTarget[ye.id],ot=ye.viewport||X;$e.setSize(ot.z*P.transmissionResolutionScale,ot.w*P.transmissionResolutionScale);const Xe=P.getRenderTarget(),Ct=P.getActiveCubeFace(),vt=P.getActiveMipmapLevel();P.setRenderTarget($e),P.getClearColor(Me),Se=P.getClearAlpha(),Se<1&&P.setClearColor(16777215,.5),P.clear(),He&&_e.render(ve);const Ht=P.toneMapping;P.toneMapping=ho;const xt=ye.viewport;if(ye.viewport!==void 0&&(ye.viewport=void 0),L.setupLightsView(ye),Rt===!0&&At.setGlobalState(P.clippingPlanes,ye),Z($,ve,ye),de.updateMultisampleRenderTarget($e),de.updateRenderTargetMipmap($e),Et.has("WEBGL_multisampled_render_to_texture")===!1){let Ft=!1;for(let gn=0,Yn=se.length;gn<Yn;gn++){const En=se[gn],{object:Lt,geometry:dt,material:qt,group:Dt}=En;if(qt.side===Vo&&Lt.layers.test(ye.layers)){const jn=qt.side;qt.side=Ws,qt.needsUpdate=!0,ue(Lt,ve,ye,dt,qt,Dt),qt.side=jn,qt.needsUpdate=!0,Ft=!0}}Ft===!0&&(de.updateMultisampleRenderTarget($e),de.updateRenderTargetMipmap($e))}P.setRenderTarget(Xe,Ct,vt),P.setClearColor(Me,Se),xt!==void 0&&(ye.viewport=xt),P.toneMapping=Ht}function Z($,se,ve){const ye=se.isScene===!0?se.overrideMaterial:null;for(let he=0,$e=$.length;he<$e;he++){const ot=$[he],{object:Xe,geometry:Ct,group:vt}=ot;let Ht=ot.material;Ht.allowOverride===!0&&ye!==null&&(Ht=ye),Xe.layers.test(ve.layers)&&ue(Xe,se,ve,Ct,Ht,vt)}}function ue($,se,ve,ye,he,$e){$.onBeforeRender(P,se,ve,ye,he,$e),$.modelViewMatrix.multiplyMatrices(ve.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),he.onBeforeRender(P,se,ve,ye,$,$e),he.transparent===!0&&he.side===Vo&&he.forceSinglePass===!1?(he.side=Ws,he.needsUpdate=!0,P.renderBufferDirect(ve,se,ye,he,$,$e),he.side=Fc,he.needsUpdate=!0,P.renderBufferDirect(ve,se,ye,he,$,$e),he.side=Vo):P.renderBufferDirect(ve,se,ye,he,$,$e),$.onAfterRender(P,se,ve,ye,he,$e)}function Te($,se,ve){se.isScene!==!0&&(se=Je);const ye=k.get($),he=L.state.lights,$e=L.state.shadowsArray,ot=he.state.version,Xe=Pt.getParameters($,he.state,$e,se,ve),Ct=Pt.getProgramCacheKey(Xe);let vt=ye.programs;ye.environment=$.isMeshStandardMaterial?se.environment:null,ye.fog=se.fog,ye.envMap=($.isMeshStandardMaterial?Be:Ae).get($.envMap||ye.environment),ye.envMapRotation=ye.environment!==null&&$.envMap===null?se.environmentRotation:$.envMapRotation,vt===void 0&&($.addEventListener("dispose",_i),vt=new Map,ye.programs=vt);let Ht=vt.get(Ct);if(Ht!==void 0){if(ye.currentProgram===Ht&&ye.lightsStateVersion===ot)return Fe($,Xe),Ht}else Xe.uniforms=Pt.getUniforms($),$.onBeforeCompile(Xe,P),Ht=Pt.acquireProgram(Xe,Ct),vt.set(Ct,Ht),ye.uniforms=Xe.uniforms;const xt=ye.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(xt.clippingPlanes=At.uniform),Fe($,Xe),ye.needsLights=_t($),ye.lightsStateVersion=ot,ye.needsLights&&(xt.ambientLightColor.value=he.state.ambient,xt.lightProbe.value=he.state.probe,xt.directionalLights.value=he.state.directional,xt.directionalLightShadows.value=he.state.directionalShadow,xt.spotLights.value=he.state.spot,xt.spotLightShadows.value=he.state.spotShadow,xt.rectAreaLights.value=he.state.rectArea,xt.ltc_1.value=he.state.rectAreaLTC1,xt.ltc_2.value=he.state.rectAreaLTC2,xt.pointLights.value=he.state.point,xt.pointLightShadows.value=he.state.pointShadow,xt.hemisphereLights.value=he.state.hemi,xt.directionalShadowMap.value=he.state.directionalShadowMap,xt.directionalShadowMatrix.value=he.state.directionalShadowMatrix,xt.spotShadowMap.value=he.state.spotShadowMap,xt.spotLightMatrix.value=he.state.spotLightMatrix,xt.spotLightMap.value=he.state.spotLightMap,xt.pointShadowMap.value=he.state.pointShadowMap,xt.pointShadowMatrix.value=he.state.pointShadowMatrix),ye.currentProgram=Ht,ye.uniformsList=null,Ht}function Ue($){if($.uniformsList===null){const se=$.currentProgram.getUniforms();$.uniformsList=vb.seqWithValue(se.seq,$.uniforms)}return $.uniformsList}function Fe($,se){const ve=k.get($);ve.outputColorSpace=se.outputColorSpace,ve.batching=se.batching,ve.batchingColor=se.batchingColor,ve.instancing=se.instancing,ve.instancingColor=se.instancingColor,ve.instancingMorph=se.instancingMorph,ve.skinning=se.skinning,ve.morphTargets=se.morphTargets,ve.morphNormals=se.morphNormals,ve.morphColors=se.morphColors,ve.morphTargetsCount=se.morphTargetsCount,ve.numClippingPlanes=se.numClippingPlanes,ve.numIntersection=se.numClipIntersection,ve.vertexAlphas=se.vertexAlphas,ve.vertexTangents=se.vertexTangents,ve.toneMapping=se.toneMapping}function at($,se,ve,ye,he){se.isScene!==!0&&(se=Je),de.resetTextureUnits();const $e=se.fog,ot=ye.isMeshStandardMaterial?se.environment:null,Xe=K===null?P.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:Xo,Ct=(ye.isMeshStandardMaterial?Be:Ae).get(ye.envMap||ot),vt=ye.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4,Ht=!!ve.attributes.tangent&&(!!ye.normalMap||ye.anisotropy>0),xt=!!ve.morphAttributes.position,Ft=!!ve.morphAttributes.normal,gn=!!ve.morphAttributes.color;let Yn=ho;ye.toneMapped&&(K===null||K.isXRRenderTarget===!0)&&(Yn=P.toneMapping);const En=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,Lt=En!==void 0?En.length:0,dt=k.get(ye),qt=L.state.lights;if(Rt===!0&&(nn===!0||$!==re)){const br=$===re&&ye.id===ne;At.setState(ye,$,br)}let Dt=!1;ye.version===dt.__version?(dt.needsLights&&dt.lightsStateVersion!==qt.state.version||dt.outputColorSpace!==Xe||he.isBatchedMesh&&dt.batching===!1||!he.isBatchedMesh&&dt.batching===!0||he.isBatchedMesh&&dt.batchingColor===!0&&he.colorTexture===null||he.isBatchedMesh&&dt.batchingColor===!1&&he.colorTexture!==null||he.isInstancedMesh&&dt.instancing===!1||!he.isInstancedMesh&&dt.instancing===!0||he.isSkinnedMesh&&dt.skinning===!1||!he.isSkinnedMesh&&dt.skinning===!0||he.isInstancedMesh&&dt.instancingColor===!0&&he.instanceColor===null||he.isInstancedMesh&&dt.instancingColor===!1&&he.instanceColor!==null||he.isInstancedMesh&&dt.instancingMorph===!0&&he.morphTexture===null||he.isInstancedMesh&&dt.instancingMorph===!1&&he.morphTexture!==null||dt.envMap!==Ct||ye.fog===!0&&dt.fog!==$e||dt.numClippingPlanes!==void 0&&(dt.numClippingPlanes!==At.numPlanes||dt.numIntersection!==At.numIntersection)||dt.vertexAlphas!==vt||dt.vertexTangents!==Ht||dt.morphTargets!==xt||dt.morphNormals!==Ft||dt.morphColors!==gn||dt.toneMapping!==Yn||dt.morphTargetsCount!==Lt)&&(Dt=!0):(Dt=!0,dt.__version=ye.version);let jn=dt.currentProgram;Dt===!0&&(jn=Te(ye,se,he));let cr=!1,On=!1,Mi=!1;const Kn=jn.getUniforms(),ur=dt.uniforms;if(lt.useProgram(jn.program)&&(cr=!0,On=!0,Mi=!0),ye.id!==ne&&(ne=ye.id,On=!0),cr||re!==$){lt.buffers.depth.getReversed()&&$.reversedDepth!==!0&&($._reversedDepth=!0,$.updateProjectionMatrix()),Kn.setValue(te,"projectionMatrix",$.projectionMatrix),Kn.setValue(te,"viewMatrix",$.matrixWorldInverse);const xr=Kn.map.cameraPosition;xr!==void 0&&xr.setValue(te,zt.setFromMatrixPosition($.matrixWorld)),Vt.logarithmicDepthBuffer&&Kn.setValue(te,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(ye.isMeshPhongMaterial||ye.isMeshToonMaterial||ye.isMeshLambertMaterial||ye.isMeshBasicMaterial||ye.isMeshStandardMaterial||ye.isShaderMaterial)&&Kn.setValue(te,"isOrthographic",$.isOrthographicCamera===!0),re!==$&&(re=$,On=!0,Mi=!0)}if(dt.needsLights&&(qt.state.directionalShadowMap.length>0&&Kn.setValue(te,"directionalShadowMap",qt.state.directionalShadowMap,de),qt.state.spotShadowMap.length>0&&Kn.setValue(te,"spotShadowMap",qt.state.spotShadowMap,de),qt.state.pointShadowMap.length>0&&Kn.setValue(te,"pointShadowMap",qt.state.pointShadowMap,de)),he.isSkinnedMesh){Kn.setOptional(te,he,"bindMatrix"),Kn.setOptional(te,he,"bindMatrixInverse");const br=he.skeleton;br&&(br.boneTexture===null&&br.computeBoneTexture(),Kn.setValue(te,"boneTexture",br.boneTexture,de))}he.isBatchedMesh&&(Kn.setOptional(te,he,"batchingTexture"),Kn.setValue(te,"batchingTexture",he._matricesTexture,de),Kn.setOptional(te,he,"batchingIdTexture"),Kn.setValue(te,"batchingIdTexture",he._indirectTexture,de),Kn.setOptional(te,he,"batchingColorTexture"),he._colorsTexture!==null&&Kn.setValue(te,"batchingColorTexture",he._colorsTexture,de));const er=ve.morphAttributes;if((er.position!==void 0||er.normal!==void 0||er.color!==void 0)&&nt.update(he,ve,jn),(On||dt.receiveShadow!==he.receiveShadow)&&(dt.receiveShadow=he.receiveShadow,Kn.setValue(te,"receiveShadow",he.receiveShadow)),ye.isMeshGouraudMaterial&&ye.envMap!==null&&(ur.envMap.value=Ct,ur.flipEnvMap.value=Ct.isCubeTexture&&Ct.isRenderTargetTexture===!1?-1:1),ye.isMeshStandardMaterial&&ye.envMap===null&&se.environment!==null&&(ur.envMapIntensity.value=se.environmentIntensity),ur.dfgLUT!==void 0&&(ur.dfgLUT.value=RV()),On&&(Kn.setValue(te,"toneMappingExposure",P.toneMappingExposure),dt.needsLights&&rt(ur,Mi),$e&&ye.fog===!0&&jt.refreshFogUniforms(ur,$e),jt.refreshMaterialUniforms(ur,ye,we,pe,L.state.transmissionRenderTarget[$.id]),vb.upload(te,Ue(dt),ur,de)),ye.isShaderMaterial&&ye.uniformsNeedUpdate===!0&&(vb.upload(te,Ue(dt),ur,de),ye.uniformsNeedUpdate=!1),ye.isSpriteMaterial&&Kn.setValue(te,"center",he.center),Kn.setValue(te,"modelViewMatrix",he.modelViewMatrix),Kn.setValue(te,"normalMatrix",he.normalMatrix),Kn.setValue(te,"modelMatrix",he.matrixWorld),ye.isShaderMaterial||ye.isRawShaderMaterial){const br=ye.uniformsGroups;for(let xr=0,jl=br.length;xr<jl;xr++){const qs=br[xr];it.update(qs,jn),it.bind(qs,jn)}}return jn}function rt($,se){$.ambientLightColor.needsUpdate=se,$.lightProbe.needsUpdate=se,$.directionalLights.needsUpdate=se,$.directionalLightShadows.needsUpdate=se,$.pointLights.needsUpdate=se,$.pointLightShadows.needsUpdate=se,$.spotLights.needsUpdate=se,$.spotLightShadows.needsUpdate=se,$.rectAreaLights.needsUpdate=se,$.hemisphereLights.needsUpdate=se}function _t($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return Q},this.getRenderTarget=function(){return K},this.setRenderTargetTextures=function($,se,ve){const ye=k.get($);ye.__autoAllocateDepthBuffer=$.resolveDepthBuffer===!1,ye.__autoAllocateDepthBuffer===!1&&(ye.__useRenderToTexture=!1),k.get($.texture).__webglTexture=se,k.get($.depthTexture).__webglTexture=ye.__autoAllocateDepthBuffer?void 0:ve,ye.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function($,se){const ve=k.get($);ve.__webglFramebuffer=se,ve.__useDefaultFramebuffer=se===void 0};const gt=te.createFramebuffer();this.setRenderTarget=function($,se=0,ve=0){K=$,W=se,Q=ve;let ye=null,he=!1,$e=!1;if($){const Xe=k.get($);if(Xe.__useDefaultFramebuffer!==void 0){lt.bindFramebuffer(te.FRAMEBUFFER,Xe.__webglFramebuffer),X.copy($.viewport),J.copy($.scissor),ae=$.scissorTest,lt.viewport(X),lt.scissor(J),lt.setScissorTest(ae),ne=-1;return}else if(Xe.__webglFramebuffer===void 0)de.setupRenderTarget($);else if(Xe.__hasExternalTextures)de.rebindTextures($,k.get($.texture).__webglTexture,k.get($.depthTexture).__webglTexture);else if($.depthBuffer){const Ht=$.depthTexture;if(Xe.__boundDepthTexture!==Ht){if(Ht!==null&&k.has(Ht)&&($.width!==Ht.image.width||$.height!==Ht.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");de.setupDepthRenderbuffer($)}}const Ct=$.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&($e=!0);const vt=k.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(vt[se])?ye=vt[se][ve]:ye=vt[se],he=!0):$.samples>0&&de.useMultisampledRTT($)===!1?ye=k.get($).__webglMultisampledFramebuffer:Array.isArray(vt)?ye=vt[ve]:ye=vt,X.copy($.viewport),J.copy($.scissor),ae=$.scissorTest}else X.copy(ge).multiplyScalar(we).floor(),J.copy(Re).multiplyScalar(we).floor(),ae=tt;if(ve!==0&&(ye=gt),lt.bindFramebuffer(te.FRAMEBUFFER,ye)&&lt.drawBuffers($,ye),lt.viewport(X),lt.scissor(J),lt.setScissorTest(ae),he){const Xe=k.get($.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+se,Xe.__webglTexture,ve)}else if($e){const Xe=se;for(let Ct=0;Ct<$.textures.length;Ct++){const vt=k.get($.textures[Ct]);te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0+Ct,vt.__webglTexture,ve,Xe)}}else if($!==null&&ve!==0){const Xe=k.get($.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Xe.__webglTexture,ve)}ne=-1},this.readRenderTargetPixels=function($,se,ve,ye,he,$e,ot,Xe=0){if(!($&&$.isWebGLRenderTarget)){Kt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ct=k.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&ot!==void 0&&(Ct=Ct[ot]),Ct){lt.bindFramebuffer(te.FRAMEBUFFER,Ct);try{const vt=$.textures[Xe],Ht=vt.format,xt=vt.type;if(!Vt.textureFormatReadable(Ht)){Kt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Vt.textureTypeReadable(xt)){Kt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=$.width-ye&&ve>=0&&ve<=$.height-he&&($.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+Xe),te.readPixels(se,ve,ye,he,et.convert(Ht),et.convert(xt),$e))}finally{const vt=K!==null?k.get(K).__webglFramebuffer:null;lt.bindFramebuffer(te.FRAMEBUFFER,vt)}}},this.readRenderTargetPixelsAsync=async function($,se,ve,ye,he,$e,ot,Xe=0){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ct=k.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&ot!==void 0&&(Ct=Ct[ot]),Ct)if(se>=0&&se<=$.width-ye&&ve>=0&&ve<=$.height-he){lt.bindFramebuffer(te.FRAMEBUFFER,Ct);const vt=$.textures[Xe],Ht=vt.format,xt=vt.type;if(!Vt.textureFormatReadable(Ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Vt.textureTypeReadable(xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ft=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,Ft),te.bufferData(te.PIXEL_PACK_BUFFER,$e.byteLength,te.STREAM_READ),$.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+Xe),te.readPixels(se,ve,ye,he,et.convert(Ht),et.convert(xt),0);const gn=K!==null?k.get(K).__webglFramebuffer:null;lt.bindFramebuffer(te.FRAMEBUFFER,gn);const Yn=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),await Hz(te,Yn,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,Ft),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,$e),te.deleteBuffer(Ft),te.deleteSync(Yn),$e}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function($,se=null,ve=0){const ye=Math.pow(2,-ve),he=Math.floor($.image.width*ye),$e=Math.floor($.image.height*ye),ot=se!==null?se.x:0,Xe=se!==null?se.y:0;de.setTexture2D($,0),te.copyTexSubImage2D(te.TEXTURE_2D,ve,0,0,ot,Xe,he,$e),lt.unbindTexture()};const St=te.createFramebuffer(),ht=te.createFramebuffer();this.copyTextureToTexture=function($,se,ve=null,ye=null,he=0,$e=null){$e===null&&(he!==0?(kp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),$e=he,he=0):$e=0);let ot,Xe,Ct,vt,Ht,xt,Ft,gn,Yn;const En=$.isCompressedTexture?$.mipmaps[$e]:$.image;if(ve!==null)ot=ve.max.x-ve.min.x,Xe=ve.max.y-ve.min.y,Ct=ve.isBox3?ve.max.z-ve.min.z:1,vt=ve.min.x,Ht=ve.min.y,xt=ve.isBox3?ve.min.z:0;else{const er=Math.pow(2,-he);ot=Math.floor(En.width*er),Xe=Math.floor(En.height*er),$.isDataArrayTexture?Ct=En.depth:$.isData3DTexture?Ct=Math.floor(En.depth*er):Ct=1,vt=0,Ht=0,xt=0}ye!==null?(Ft=ye.x,gn=ye.y,Yn=ye.z):(Ft=0,gn=0,Yn=0);const Lt=et.convert(se.format),dt=et.convert(se.type);let qt;se.isData3DTexture?(de.setTexture3D(se,0),qt=te.TEXTURE_3D):se.isDataArrayTexture||se.isCompressedArrayTexture?(de.setTexture2DArray(se,0),qt=te.TEXTURE_2D_ARRAY):(de.setTexture2D(se,0),qt=te.TEXTURE_2D),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,se.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,se.unpackAlignment);const Dt=te.getParameter(te.UNPACK_ROW_LENGTH),jn=te.getParameter(te.UNPACK_IMAGE_HEIGHT),cr=te.getParameter(te.UNPACK_SKIP_PIXELS),On=te.getParameter(te.UNPACK_SKIP_ROWS),Mi=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,En.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,En.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,vt),te.pixelStorei(te.UNPACK_SKIP_ROWS,Ht),te.pixelStorei(te.UNPACK_SKIP_IMAGES,xt);const Kn=$.isDataArrayTexture||$.isData3DTexture,ur=se.isDataArrayTexture||se.isData3DTexture;if($.isDepthTexture){const er=k.get($),br=k.get(se),xr=k.get(er.__renderTarget),jl=k.get(br.__renderTarget);lt.bindFramebuffer(te.READ_FRAMEBUFFER,xr.__webglFramebuffer),lt.bindFramebuffer(te.DRAW_FRAMEBUFFER,jl.__webglFramebuffer);for(let qs=0;qs<Ct;qs++)Kn&&(te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,k.get($).__webglTexture,he,xt+qs),te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,k.get(se).__webglTexture,$e,Yn+qs)),te.blitFramebuffer(vt,Ht,ot,Xe,Ft,gn,ot,Xe,te.DEPTH_BUFFER_BIT,te.NEAREST);lt.bindFramebuffer(te.READ_FRAMEBUFFER,null),lt.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else if(he!==0||$.isRenderTargetTexture||k.has($)){const er=k.get($),br=k.get(se);lt.bindFramebuffer(te.READ_FRAMEBUFFER,St),lt.bindFramebuffer(te.DRAW_FRAMEBUFFER,ht);for(let xr=0;xr<Ct;xr++)Kn?te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,er.__webglTexture,he,xt+xr):te.framebufferTexture2D(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,er.__webglTexture,he),ur?te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,br.__webglTexture,$e,Yn+xr):te.framebufferTexture2D(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,br.__webglTexture,$e),he!==0?te.blitFramebuffer(vt,Ht,ot,Xe,Ft,gn,ot,Xe,te.COLOR_BUFFER_BIT,te.NEAREST):ur?te.copyTexSubImage3D(qt,$e,Ft,gn,Yn+xr,vt,Ht,ot,Xe):te.copyTexSubImage2D(qt,$e,Ft,gn,vt,Ht,ot,Xe);lt.bindFramebuffer(te.READ_FRAMEBUFFER,null),lt.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else ur?$.isDataTexture||$.isData3DTexture?te.texSubImage3D(qt,$e,Ft,gn,Yn,ot,Xe,Ct,Lt,dt,En.data):se.isCompressedArrayTexture?te.compressedTexSubImage3D(qt,$e,Ft,gn,Yn,ot,Xe,Ct,Lt,En.data):te.texSubImage3D(qt,$e,Ft,gn,Yn,ot,Xe,Ct,Lt,dt,En):$.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,$e,Ft,gn,ot,Xe,Lt,dt,En.data):$.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,$e,Ft,gn,En.width,En.height,Lt,En.data):te.texSubImage2D(te.TEXTURE_2D,$e,Ft,gn,ot,Xe,Lt,dt,En);te.pixelStorei(te.UNPACK_ROW_LENGTH,Dt),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,jn),te.pixelStorei(te.UNPACK_SKIP_PIXELS,cr),te.pixelStorei(te.UNPACK_SKIP_ROWS,On),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Mi),$e===0&&se.generateMipmaps&&te.generateMipmap(qt),lt.unbindTexture()},this.initRenderTarget=function($){k.get($).__webglFramebuffer===void 0&&de.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?de.setTextureCube($,0):$.isData3DTexture?de.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?de.setTexture2DArray($,0):de.setTexture2D($,0),lt.unbindTexture()},this.resetState=function(){W=0,Q=0,K=null,lt.reset(),Mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ta}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=$n._getDrawingBufferColorSpace(e),t.unpackColorSpace=$n._getUnpackColorSpace()}}const jI=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Vx,AddEquation:$u,AddOperation:EO,AdditiveAnimationBlendMode:Iw,AdditiveBlending:mE,AgXToneMapping:ww,AlphaFormat:Dw,AlwaysCompare:UO,AlwaysDepth:wb,AlwaysStencilFunc:bE,AmbientLight:DI,AnimationAction:FI,AnimationClip:z0,AnimationLoader:DF,AnimationMixer:iB,AnimationObjectGroup:tB,AnimationUtils:TF,ArcCurve:nI,ArrayCamera:LI,ArrowHelper:CB,AttachedBindMode:yE,Audio:UI,AudioAnalyser:$F,AudioContext:iT,AudioListener:HF,AudioLoader:BF,AxesHelper:RB,BackSide:Ws,BasicDepthPacking:RO,BasicShadowMap:rO,BatchedMesh:ZO,Bone:Fw,BooleanKeyframeTrack:Bd,Box2:dB,Box3:Ss,Box3Helper:TB,BoxGeometry:Fd,BoxHelper:wB,BufferAttribute:vi,BufferGeometry:Mn,BufferGeometryLoader:NI,ByteType:Hx,Cache:Ul,Camera:Jx,CameraHelper:EB,CanvasTexture:kw,CapsuleGeometry:oS,CatmullRomCurve3:iI,CineonToneMapping:Mw,CircleGeometry:lS,ClampToEdgeWrapping:ar,Clock:rT,Color:Bt,ColorKeyframeTrack:Jw,ColorManagement:$n,CompressedArrayTexture:q4,CompressedCubeTexture:Y4,CompressedTexture:aS,CompressedTextureLoader:OF,ConeGeometry:lv,ConstantAlphaFactor:xO,ConstantColorFactor:_O,Controls:OB,CubeCamera:WO,CubeDepthTexture:eI,CubeReflectionMapping:jo,CubeRefractionMapping:ef,CubeTexture:sv,CubeTextureLoader:wI,CubeUVReflectionMapping:Jp,CubicBezierCurve:Gw,CubicBezierCurve3:rI,CubicInterpolant:xI,CullFaceBack:pE,CullFaceFront:iO,CullFaceFrontBack:JU,CullFaceNone:nO,Curve:Ko,CurvePath:aI,CustomBlending:sO,CustomToneMapping:Ew,CylinderGeometry:ov,Cylindrical:fB,Data3DTexture:Qx,DataArrayTexture:Kx,DataTexture:po,DataTextureLoader:eT,DataUtils:_d,DecrementStencilOp:gz,DecrementWrapStencilOp:yz,DefaultLoadingManager:EI,DepthFormat:kl,DepthStencilFormat:ju,DepthTexture:$p,DetachedBindMode:wO,DirectionalLight:RI,DirectionalLightHelper:MB,DiscreteInterpolant:SI,DodecahedronGeometry:cS,DoubleSide:Vo,DstAlphaFactor:pO,DstColorFactor:gO,DynamicCopyUsage:Pz,DynamicDrawUsage:Az,DynamicReadUsage:Dz,EdgesGeometry:tI,EllipseCurve:uS,EqualCompare:PO,EqualDepth:Ab,EqualStencilFunc:Sz,EquirectangularReflectionMapping:Lp,EquirectangularRefractionMapping:E0,Euler:Oa,EventDispatcher:Gl,ExternalTexture:Vw,ExtrudeGeometry:fS,FileLoader:Ca,Float16BufferAttribute:T4,Float32BufferAttribute:Gt,FloatType:Hi,Fog:nS,FogExp2:tS,FramebufferTexture:X4,FrontSide:Fc,Frustum:em,FrustumArray:sS,GLBufferAttribute:lB,GLSL1:Lz,GLSL3:xE,GreaterCompare:NO,GreaterDepth:Rb,GreaterEqualCompare:Zx,GreaterEqualDepth:Cb,GreaterEqualStencilFunc:Tz,GreaterStencilFunc:Ez,GridHelper:xB,Group:Tp,HalfFloatType:or,HemisphereLight:TI,HemisphereLightHelper:bB,IcosahedronGeometry:cv,ImageBitmapLoader:FF,ImageLoader:F0,ImageUtils:kO,IncrementStencilOp:mz,IncrementWrapStencilOp:vz,InstancedBufferAttribute:Wp,InstancedBufferGeometry:PI,InstancedInterleavedBuffer:oB,InstancedMesh:YO,Int16BufferAttribute:E4,Int32BufferAttribute:w4,Int8BufferAttribute:x4,IntType:nv,InterleavedBuffer:iS,InterleavedBufferAttribute:Dd,Interpolant:dv,InterpolateDiscrete:T0,InterpolateLinear:cx,InterpolateSmooth:mb,InterpolationSamplingMode:Fz,InterpolationSamplingType:zz,InvertStencilOp:_z,KeepStencilOp:hd,KeyframeTrack:mo,LOD:XO,LatheGeometry:dS,Layers:Hp,LessCompare:IO,LessDepth:Tb,LessEqualCompare:Yx,LessEqualDepth:Cd,LessEqualStencilFunc:Mz,LessStencilFunc:xz,Light:uf,LightProbe:II,Line:nf,Line3:mB,LineBasicMaterial:$s,LineCurve:Ww,LineCurve3:sI,LineDashedMaterial:_I,LineLoop:KO,LineSegments:Wl,LinearFilter:qn,LinearInterpolant:Qw,LinearMipMapLinearFilter:_E,LinearMipMapNearestFilter:nz,LinearMipmapLinearFilter:Ll,LinearMipmapNearestFilter:l0,LinearSRGBColorSpace:Xo,LinearToneMapping:xw,LinearTransfer:C0,Loader:js,LoaderUtils:TE,LoadingManager:bS,LoopOnce:TO,LoopPingPong:CO,LoopRepeat:AO,MOUSE:fd,Material:Ms,MaterialLoader:xS,MathUtils:s4,Matrix2:cT,Matrix3:Tn,Matrix4:hn,MaxEquation:cO,Mesh:Gi,MeshBasicMaterial:Gc,MeshDepthMaterial:_S,MeshDistanceMaterial:Zw,MeshLambertMaterial:vI,MeshMatcapMaterial:yI,MeshNormalMaterial:gI,MeshPhongMaterial:pI,MeshPhysicalMaterial:hI,MeshStandardMaterial:Yw,MeshToonMaterial:mI,MinEquation:lO,MirroredRepeatWrapping:w0,MixOperation:MO,MultiplyBlending:vE,MultiplyOperation:tv,NearestFilter:yr,NearestMipMapLinearFilter:tz,NearestMipMapNearestFilter:ez,NearestMipmapLinearFilter:Ep,NearestMipmapNearestFilter:Aw,NeutralToneMapping:Tw,NeverCompare:OO,NeverDepth:Eb,NeverStencilFunc:bz,NoBlending:$o,NoColorSpace:Ic,NoNormalPacking:uz,NoToneMapping:ho,NormalAnimationBlendMode:qx,NormalBlending:Md,NormalGAPacking:dz,NormalRGPacking:fz,NotEqualCompare:LO,NotEqualDepth:Db,NotEqualStencilFunc:wz,NumberKeyframeTrack:L0,Object3D:ei,ObjectLoader:UF,ObjectSpaceNormalMap:DO,OctahedronGeometry:uv,OneFactor:fO,OneMinusConstantAlphaFactor:SO,OneMinusConstantColorFactor:bO,OneMinusDstAlphaFactor:mO,OneMinusDstColorFactor:vO,OneMinusSrcAlphaFactor:Mb,OneMinusSrcColorFactor:hO,OrthographicCamera:Fl,PCFShadowMap:Cp,PCFSoftShadowMap:o0,PMREMGenerator:DE,Path:hx,PerspectiveCamera:vr,Plane:Dc,PlaneGeometry:Wc,PlaneHelper:AB,PointLight:CI,PointLightHelper:yB,Points:QO,PointsMaterial:Bw,PolarGridHelper:SB,PolyhedronGeometry:cf,PositionalAudio:WF,PropertyBinding:Jn,PropertyMixer:zI,QuadraticBezierCurve:$w,QuadraticBezierCurve3:jw,Quaternion:xs,QuaternionKeyframeTrack:hv,QuaternionLinearInterpolant:MI,R11_EAC_Format:Fb,RED_GREEN_RGTC2_Format:ox,RED_RGTC1_Format:sx,REVISION:ev,RG11_EAC_Format:kb,RGBADepthPacking:oz,RGBAFormat:_r,RGBAIntegerFormat:Xx,RGBA_ASTC_10x10_Format:Jb,RGBA_ASTC_10x5_Format:Zb,RGBA_ASTC_10x6_Format:Kb,RGBA_ASTC_10x8_Format:Qb,RGBA_ASTC_12x10_Format:ex,RGBA_ASTC_12x12_Format:tx,RGBA_ASTC_4x4_Format:Hb,RGBA_ASTC_5x4_Format:Gb,RGBA_ASTC_5x5_Format:Wb,RGBA_ASTC_6x5_Format:$b,RGBA_ASTC_6x6_Format:jb,RGBA_ASTC_8x5_Format:Xb,RGBA_ASTC_8x6_Format:qb,RGBA_ASTC_8x8_Format:Yb,RGBA_BPTC_Format:nx,RGBA_ETC2_EAC_Format:zb,RGBA_PVRTC_2BPPV1_Format:Nb,RGBA_PVRTC_4BPPV1_Format:Pb,RGBA_S3TC_DXT1_Format:u0,RGBA_S3TC_DXT3_Format:f0,RGBA_S3TC_DXT5_Format:d0,RGBDepthPacking:lz,RGBFormat:Ow,RGBIntegerFormat:iz,RGB_BPTC_SIGNED_Format:ix,RGB_BPTC_UNSIGNED_Format:rx,RGB_ETC1_Format:Lb,RGB_ETC2_Format:Ub,RGB_PVRTC_2BPPV1_Format:Ib,RGB_PVRTC_4BPPV1_Format:Ob,RGB_S3TC_DXT1_Format:c0,RGDepthPacking:cz,RGFormat:Rd,RGIntegerFormat:jx,RawShaderMaterial:qw,Ray:zd,Raycaster:lT,RectAreaLight:OI,RedFormat:iv,RedIntegerFormat:rv,ReinhardToneMapping:Sw,RenderTarget:Nw,RenderTarget3D:rB,RepeatWrapping:Up,ReplaceStencilOp:pz,ReverseSubtractEquation:oO,RingGeometry:hS,SIGNED_R11_EAC_Format:Bb,SIGNED_RED_GREEN_RGTC2_Format:lx,SIGNED_RED_RGTC1_Format:ax,SIGNED_RG11_EAC_Format:Vb,SRGBColorSpace:Wr,SRGBTransfer:li,Scene:av,ShaderChunk:Pn,ShaderLib:Bo,ShaderMaterial:ss,ShadowMaterial:dI,Shape:wd,ShapeGeometry:pS,ShapePath:DB,ShapeUtils:Go,ShortType:Gx,Skeleton:rS,SkeletonHelper:vB,SkinnedMesh:qO,Source:Xu,Sphere:rs,SphereGeometry:fv,Spherical:CE,SphericalHarmonics3:nT,SplineCurve:Xw,SpotLight:AI,SpotLightHelper:gB,Sprite:jO,SpriteMaterial:zw,SrcAlphaFactor:Sb,SrcAlphaSaturateFactor:yO,SrcColorFactor:dO,StaticCopyUsage:Iz,StaticDrawUsage:R0,StaticReadUsage:Rz,StereoCamera:kF,StreamCopyUsage:Nz,StreamDrawUsage:Cz,StreamReadUsage:Oz,StringKeyframeTrack:kd,SubtractEquation:aO,SubtractiveBlending:gE,TOUCH:dd,TangentSpaceNormalMap:lf,TetrahedronGeometry:mS,Texture:gi,TextureLoader:IF,TextureUtils:UB,Timer:cB,TimestampQuery:Uz,TorusGeometry:gS,TorusKnotGeometry:vS,Triangle:ga,TriangleFanDrawMode:az,TriangleStripDrawMode:sz,TrianglesDrawMode:rz,TubeGeometry:yS,UVMapping:Ju,Uint16BufferAttribute:Lw,Uint32BufferAttribute:Uw,Uint8BufferAttribute:S4,Uint8ClampedBufferAttribute:M4,Uniform:oT,UniformsGroup:aB,UniformsLib:Nt,UniformsUtils:GO,UnsignedByteType:$r,UnsignedInt101111Type:Rw,UnsignedInt248Type:Fp,UnsignedInt5999Type:Cw,UnsignedIntType:Da,UnsignedShort4444Type:Wx,UnsignedShort5551Type:$x,UnsignedShortType:zp,VSMShadowMap:gd,Vector2:Ye,Vector3:ee,Vector4:Si,VectorKeyframeTrack:U0,VideoFrameTexture:j4,VideoTexture:JO,WebGL3DRenderTarget:u4,WebGLArrayRenderTarget:c4,WebGLCoordinateSystem:Ta,WebGLCubeRenderTarget:eS,WebGLRenderTarget:is,WebGLRenderer:uT,WebGLUtils:$I,WebGPUCoordinateSystem:Bp,WebXRController:gb,WireframeGeometry:fI,WrapAroundEnding:A0,ZeroCurvatureEnding:vd,ZeroFactor:uO,ZeroSlopeEnding:yd,ZeroStencilOp:hz,createCanvasElement:BO,error:Kt,getConsoleFunction:Vz,log:O0,setConsoleFunction:kz,warn:It,warnOnce:kp},Symbol.toStringTag,{value:"Module"}));var _M={exports:{}},bM={},xM={exports:{}},SM={};var OR;function DV(){if(OR)return SM;OR=1;var n=J0();function e(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,l=n.useDebugValue;function u(y,_){var b=_(),S=i({inst:{value:b,getSnapshot:_}}),A=S[0].inst,w=S[1];return a(function(){A.value=b,A.getSnapshot=_,h(A)&&w({inst:A})},[y,b,_]),r(function(){return h(A)&&w({inst:A}),y(function(){h(A)&&w({inst:A})})},[y]),l(b),b}function h(y){var _=y.getSnapshot;y=y.value;try{var b=_();return!t(y,b)}catch{return!0}}function p(y,_){return _()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return SM.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,SM}var IR;function OV(){return IR||(IR=1,xM.exports=DV()),xM.exports}var PR;function IV(){if(PR)return bM;PR=1;var n=J0(),e=OV();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=n.useRef,l=n.useEffect,u=n.useMemo,h=n.useDebugValue;return bM.useSyncExternalStoreWithSelector=function(p,g,y,_,b){var S=a(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function E(N){if(!R){if(R=!0,D=N,N=_(N),b!==void 0&&A.hasValue){var F=A.value;if(b(F,N))return I=F}return I=N}if(F=I,i(D,N))return F;var V=_(N);return b!==void 0&&b(F,V)?(D=N,F):(D=N,I=V)}var R=!1,D,I,L=y===void 0?null:y;return[function(){return E(g())},L===null?void 0:function(){return E(L())}]},[g,y,_,b]);var w=r(p,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=w},[w]),h(w),w},bM}var NR;function PV(){return NR||(NR=1,_M.exports=IV()),_M.exports}var NV=PV();const LV=Ud(NV),LR=n=>{let e;const t=new Set,i=(p,g)=>{const y=typeof p=="function"?p(e):p;if(!Object.is(y,e)){const _=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,_))}},r=()=>e,u={setState:i,getState:r,getInitialState:()=>h,subscribe:p=>(t.add(p),()=>t.delete(p))},h=e=n(i,r,u);return u},UV=(n=>n?LR(n):LR),{useSyncExternalStoreWithSelector:zV}=LV,FV=n=>n;function BV(n,e=FV,t){const i=zV(n.subscribe,n.getState,n.getInitialState,e,t);return ce.useDebugValue(i),i}const UR=(n,e)=>{const t=UV(n),i=(r,a=e)=>BV(t,r,a);return Object.assign(i,t),i},XI=((n,e)=>n?UR(n,e):UR),kV=n=>typeof n=="object"&&typeof n.then=="function",xd=[];function qI(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function YI(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const a of xd)if(qI(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!t)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=xd.indexOf(r);a!==-1&&xd.splice(a,1)},promise:(kV(n)?n:n(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(xd.push(r),!t)throw r.promise}const VV=(n,e,t)=>YI(n,e,!1,t),HV=(n,e,t)=>{YI(n,e,!0,t)},GV=n=>{if(n===void 0||n.length===0)xd.splice(0,xd.length);else{const e=xd.find(t=>qI(n,t.keys,t.equal));e&&e.remove()}};var PE=JD();const WV=Ud(PE);function fT(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=fT(i,e,t);if(r)return r;i=e?null:i.sibling}}function ZI(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const dT=ZI(B.createContext(null));let KI=class extends B.Component{render(){return B.createElement(dT.Provider,{value:this._reactInternals},this.props.children)}};function QI(){const n=B.useContext(dT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=B.useId();return B.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=fT(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const $V=Symbol.for("react.context"),jV=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===$V;function XV(){const n=QI(),[e]=B.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;jV(i)&&i!==dT&&!e.has(i)&&e.set(i,B.use(ZI(i))),t=t.return}return e}function qV(){const n=XV();return B.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>B.createElement(e,null,B.createElement(t.Provider,{...i,value:n.get(t)})),e=>B.createElement(KI,{...e})),[n])}function JI(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const eP=n=>n&&n.isOrthographicCamera,YV=n=>n&&n.hasOwnProperty("current"),ZV=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),pv=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?B.useLayoutEffect:B.useEffect;function hT(n){const e=B.useRef(n);return pv(()=>{e.current=n},[n]),e}function KV(){const n=QI(),e=qV();return B.useMemo(()=>({children:t})=>{const r=!!fT(n,!0,a=>a.type===B.StrictMode)?B.StrictMode:B.Fragment;return je.jsx(r,{children:je.jsx(e,{children:t})})},[n,e])}function QV({set:n}){return pv(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const JV=(n=>(n=class extends B.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function tP(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function gp(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Vi={obj:n=>n===Object(n)&&!Vi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Vi.str(n)||Vi.num(n)||Vi.boo(n))return n===e;const a=Vi.obj(n);if(a&&i==="reference")return n===e;const l=Vi.arr(n);if(l&&t==="reference")return n===e;if((l||a)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(u in r?e:n)if(!Vi.equ(n[u],e[u],{strict:r,objects:"reference"}))return!1}else for(u in r?e:n)if(n[u]!==e[u])return!1;if(Vi.und(u)){if(l&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function eH(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function tH(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const nP=["children","key","ref"];function nH(n){const e={};for(const t in n)nP.includes(t)||(e[t]=n[t]);return e}function px(n,e,t,i){const r=n;let a=r?.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:nH(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function B0(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const r of i){if(typeof t!="object"||t===null){if(t!==void 0){const a=i.slice(i.indexOf(r)).join("-");return{root:t,key:a,target:void 0}}return{root:n,key:e,target:void 0}}e=r,n=t,t=t[e]}return{root:n,key:e,target:t}}const zR=/-\d+$/;function mx(n,e){if(Vi.str(e.props.attach)){if(zR.test(e.props.attach)){const r=e.props.attach.replace(zR,""),{root:a,key:l}=B0(n.object,r);Array.isArray(a[l])||(a[l]=[])}const{root:t,key:i}=B0(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Vi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function gx(n,e){if(Vi.str(e.props.attach)){const{root:t,key:i}=B0(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const NE=[...nP,"args","dispose","attach","object","onUpdate","dispose"],FR=new Map;function iH(n){let e=FR.get(n.constructor);try{e||(e=new n.constructor,FR.set(n.constructor,e))}catch{}return e}function rH(n,e){const t={};for(const i in e)if(!NE.includes(i)&&!Vi.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(NE.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=B0(n.object,i);if(r.constructor&&r.constructor.length===0){const l=iH(r);Vi.und(l)||(t[a]=l[a])}else t[a]=0}return t}const sH=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],aH=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ho(n,e){var t;const i=n.__r3f,r=i&&JI(i).getState(),a=i?.eventCount;for(const u in e){let h=e[u];if(NE.includes(u))continue;if(i&&aH.test(u)){typeof h=="function"?i.handlers[u]=h:delete i.handlers[u],i.eventCount=Object.keys(i.handlers).length;continue}if(h===void 0)continue;let{root:p,key:g,target:y}=B0(n,u);if(y===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${u}". Ensure it is an object before setting "${g}".`);if(y instanceof Hp&&h instanceof Hp)y.mask=h.mask;else if(y instanceof Bt&&ZV(h))y.set(h);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&h!=null&&h.constructor&&y.constructor===h.constructor)y.copy(h);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(h))typeof y.fromArray=="function"?y.fromArray(h):y.set(...h);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof h=="number")typeof y.setScalar=="function"?y.setScalar(h):y.set(h);else{var l;p[g]=h,r&&!r.linear&&sH.includes(g)&&(l=p[g])!=null&&l.isTexture&&p[g].format===_r&&p[g].type===$r&&(p[g].colorSpace=Wr)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const u=i.object,h=r.internal.interaction.indexOf(u);h>-1&&r.internal.interaction.splice(h,1),i.eventCount&&u.raycast!==null&&r.internal.interaction.push(u)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&nm(i),n}function nm(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function iP(n,e){n.manual||(eP(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const ks=n=>n?.isObject3D;function eb(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function rP(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function oH(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{rP(t.capturedMap,e,i,r)})}function lH(n){function e(h){const{internal:p}=n.getState(),g=h.offsetX-p.initialClick[0],y=h.offsetY-p.initialClick[1];return Math.round(Math.sqrt(g*g+y*y))}function t(h){return h.filter(p=>["Move","Over","Enter","Out","Leave"].some(g=>{var y;return(y=p.__r3f)==null?void 0:y.handlers["onPointer"+g]}))}function i(h,p){const g=n.getState(),y=new Set,_=[],b=p?p(g.internal.interaction):g.internal.interaction;for(let E=0;E<b.length;E++){const R=gp(b[E]);R&&(R.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(h,g);function S(E){const R=gp(E);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var D;R.events.compute==null||R.events.compute(h,R,(D=R.previousRoot)==null?void 0:D.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(E,!0):[]}let A=b.flatMap(S).sort((E,R)=>{const D=gp(E.object),I=gp(R.object);return!D||!I?E.distance-R.distance:I.events.priority-D.events.priority||E.distance-R.distance}).filter(E=>{const R=eb(E);return y.has(R)?!1:(y.add(R),!0)});g.events.filter&&(A=g.events.filter(A,g));for(const E of A){let R=E.object;for(;R;){var w;(w=R.__r3f)!=null&&w.eventCount&&_.push({...E,eventObject:R}),R=R.parent}}if("pointerId"in h&&g.internal.capturedMap.has(h.pointerId))for(let E of g.internal.capturedMap.get(h.pointerId).values())y.has(eb(E.intersection))||_.push(E.intersection);return _}function r(h,p,g,y){if(h.length){const _={stopped:!1};for(const b of h){let S=gp(b.object);if(S||b.object.traverseAncestors(A=>{const w=gp(A);if(w)return S=w,!1}),S){const{raycaster:A,pointer:w,camera:E,internal:R}=S,D=new ee(w.x,w.y,0).unproject(E),I=P=>{var U,W;return(U=(W=R.capturedMap.get(P))==null?void 0:W.has(b.eventObject))!=null?U:!1},L=P=>{const U={intersection:b,target:p.target};R.capturedMap.has(P)?R.capturedMap.get(P).set(b.eventObject,U):R.capturedMap.set(P,new Map([[b.eventObject,U]])),p.target.setPointerCapture(P)},N=P=>{const U=R.capturedMap.get(P);U&&rP(R.capturedMap,b.eventObject,U,P)};let F={};for(let P in p){let U=p[P];typeof U!="function"&&(F[P]=U)}let V={...b,...F,pointer:w,intersections:h,stopped:_.stopped,delta:g,unprojectedPoint:D,ray:A.ray,camera:E,stopPropagation(){const P="pointerId"in p&&R.capturedMap.get(p.pointerId);if((!P||P.has(b.eventObject))&&(V.stopped=_.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(U=>U.eventObject===b.eventObject))){const U=h.slice(0,h.indexOf(b));a([...U,b])}},target:{hasPointerCapture:I,setPointerCapture:L,releasePointerCapture:N},currentTarget:{hasPointerCapture:I,setPointerCapture:L,releasePointerCapture:N},nativeEvent:p};if(y(V),_.stopped===!0)break}}}return h}function a(h){const{internal:p}=n.getState();for(const g of p.hovered.values())if(!h.length||!h.find(y=>y.object===g.object&&y.index===g.index&&y.instanceId===g.instanceId)){const _=g.eventObject.__r3f;if(p.hovered.delete(eb(g)),_!=null&&_.eventCount){const b=_.handlers,S={...g,intersections:h};b.onPointerOut==null||b.onPointerOut(S),b.onPointerLeave==null||b.onPointerLeave(S)}}}function l(h,p){for(let g=0;g<p.length;g++){const y=p[g].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(h)}}function u(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return p=>{const{internal:g}=n.getState();"pointerId"in p&&g.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(p.pointerId)&&(g.capturedMap.delete(p.pointerId),a([]))})}}return function(g){const{onPointerMissed:y,internal:_}=n.getState();_.lastEvent.current=g;const b=h==="onPointerMove",S=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",w=i(g,b?t:void 0),E=S?e(g):0;h==="onPointerDown"&&(_.initialClick=[g.offsetX,g.offsetY],_.initialHits=w.map(D=>D.eventObject)),S&&!w.length&&E<=2&&(l(g,_.interaction),y&&y(g)),b&&a(w);function R(D){const I=D.eventObject,L=I.__r3f;if(!(L!=null&&L.eventCount))return;const N=L.handlers;if(b){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const F=eb(D),V=_.hovered.get(F);V?V.stopped&&D.stopPropagation():(_.hovered.set(F,D),N.onPointerOver==null||N.onPointerOver(D),N.onPointerEnter==null||N.onPointerEnter(D))}N.onPointerMove==null||N.onPointerMove(D)}else{const F=N[h];F?(!S||_.initialHits.includes(I))&&(l(g,_.interaction.filter(V=>!_.initialHits.includes(V))),F(D)):S&&_.initialHits.includes(I)&&l(g,_.interaction.filter(V=>!_.initialHits.includes(V)))}}r(w,g,E,R)}}return{handlePointer:u}}const BR=n=>!!(n!=null&&n.render),pT=B.createContext(null),cH=(n,e)=>{const t=XI((u,h)=>{const p=new ee,g=new ee,y=new ee;function _(E=h().camera,R=g,D=h().size){const{width:I,height:L,top:N,left:F}=D,V=I/L;R.isVector3?y.copy(R):y.set(...R);const P=E.getWorldPosition(p).distanceTo(y);if(eP(E))return{width:I/E.zoom,height:L/E.zoom,top:N,left:F,factor:1,distance:P,aspect:V};{const U=E.fov*Math.PI/180,W=2*Math.tan(U/2)*P,Q=W*(I/L);return{width:Q,height:W,top:N,left:F,factor:I/Q,distance:P,aspect:V}}}let b;const S=E=>u(R=>({performance:{...R.performance,current:E}})),A=new Ye;return{set:u,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(E=1)=>n(h(),E),advance:(E,R)=>e(E,R,h()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new rT,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=h();b&&clearTimeout(b),E.performance.current!==E.performance.min&&S(E.performance.min),b=setTimeout(()=>S(h().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:E=>u(R=>({...R,events:{...R.events,...E}})),setSize:(E,R,D=0,I=0)=>{const L=h().camera,N={width:E,height:R,top:D,left:I};u(F=>({size:N,viewport:{...F.viewport,..._(L,g,N)}}))},setDpr:E=>u(R=>{const D=tP(E);return{viewport:{...R.viewport,dpr:D,initialDpr:R.viewport.initialDpr||D}}}),setFrameloop:(E="always")=>{const R=h().clock;R.stop(),R.elapsedTime=0,E!=="never"&&(R.start(),R.elapsedTime=0),u(()=>({frameloop:E}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:B.createRef(),active:!1,frames:0,priority:0,subscribe:(E,R,D)=>{const I=h().internal;return I.priority=I.priority+(R>0?1:0),I.subscribers.push({ref:E,priority:R,store:D}),I.subscribers=I.subscribers.sort((L,N)=>L.priority-N.priority),()=>{const L=h().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(R>0?1:0),L.subscribers=L.subscribers.filter(N=>N.ref!==E))}}}}}),i=t.getState();let r=i.size,a=i.viewport.dpr,l=i.camera;return t.subscribe(()=>{const{camera:u,size:h,viewport:p,gl:g,set:y}=t.getState();if(h.width!==r.width||h.height!==r.height||p.dpr!==a){r=h,a=p.dpr,iP(u,h),p.dpr>0&&g.setPixelRatio(p.dpr);const _=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(h.width,h.height,_)}u!==l&&(l=u,y(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};function mT(){const n=B.useContext(pT);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Vs(n=t=>t,e){return mT()(n,e)}function gT(n,e=0){const t=mT(),i=t.getState().internal.subscribe,r=hT(n);return pv(()=>i(r,e,t),[e,i,t]),null}const kR=new WeakMap,uH=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function sP(n,e){return function(t,...i){let r;return uH(t)?(r=kR.get(t),r||(r=new t,kR.set(t,r))):r=t,n&&n(r),Promise.all(i.map(a=>new Promise((l,u)=>r.load(a,h=>{ks(h?.scene)&&Object.assign(h,eH(h.scene)),l(h)},e,h=>u(new Error(`Could not load ${a}: ${h?.message}`))))))}}function Xp(n,e,t,i){const r=Array.isArray(e)?e:[e],a=VV(sP(t,i),[n,...r],{equal:Vi.equ});return Array.isArray(e)?a:a[0]}Xp.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return HV(sP(t),[n,...i])};Xp.clear=function(n,e){const t=Array.isArray(e)?e:[e];return GV([n,...t])};const fH=1,dH=8,hH=32,pH=2;var mH={version:"9.5.0"};function gH(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var VR={exports:{}},HR={exports:{}},GR;function vH(){return GR||(GR=1,(function(n){n.exports=function(e){function t(c,f,v,x){return new Pm(c,f,v,x)}function i(){}function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}function l(c){if(a(c)!==c)throw Error(r(188))}function u(c){var f=c.alternate;if(!f){if(f=a(c),f===null)throw Error(r(188));return f!==c?null:c}for(var v=c,x=f;;){var C=v.return;if(C===null)break;var O=C.alternate;if(O===null){if(x=C.return,x!==null){v=x;continue}break}if(C.child===O.child){for(O=C.child;O;){if(O===v)return l(C),c;if(O===x)return l(C),f;O=O.sibling}throw Error(r(188))}if(v.return!==x.return)v=C,x=O;else{for(var j=!1,fe=C.child;fe;){if(fe===v){j=!0,v=C,x=O;break}if(fe===x){j=!0,x=C,v=O;break}fe=fe.sibling}if(!j){for(fe=O.child;fe;){if(fe===v){j=!0,v=O,x=C;break}if(fe===x){j=!0,x=O,v=C;break}fe=fe.sibling}if(!j)throw Error(r(189))}}if(v.alternate!==x)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?c:f}function h(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=h(c),f!==null)return f;c=c.sibling}return null}function p(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(f=p(c),f!==null))return f;c=c.sibling}return null}function g(c){return c===null||typeof c!="object"?null:(c=wo&&c[wo]||c["@@iterator"],typeof c=="function"?c:null)}function y(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===fl?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case rc:return"Fragment";case ac:return"Profiler";case sc:return"StrictMode";case vh:return"Suspense";case Eo:return"SuspenseList";case Of:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case ic:return"Portal";case ta:return c.displayName||"Context";case Df:return(c._context.displayName||"Context")+".Consumer";case hu:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case yh:return f=c.displayName||null,f!==null?f:y(c.type)||"Memo";case Zr:f=c._payload,c=c._init;try{return y(c(f))}catch{}}return null}function _(c){return{current:c}}function b(c){0>fc||(c.current=Oh[fc],Oh[fc]=null,fc--)}function S(c,f){fc++,Oh[fc]=c.current,c.current=f}function A(c){return c>>>=0,c===0?32:31-(Ih(c)/Gy|0)|0}function w(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function E(c,f,v){var x=c.pendingLanes;if(x===0)return 0;var C=0,O=c.suspendedLanes,j=c.pingedLanes;c=c.warmLanes;var fe=x&134217727;return fe!==0?(x=fe&~O,x!==0?C=w(x):(j&=fe,j!==0?C=w(j):v||(v=fe&~c,v!==0&&(C=w(v))))):(fe=x&~O,fe!==0?C=w(fe):j!==0?C=w(j):v||(v=x&~c,v!==0&&(C=w(v)))),C===0?0:f!==0&&f!==C&&(f&O)===0&&(O=C&-C,v=f&-f,O>=v||O===32&&(v&4194048)!==0)?f:C}function R(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function D(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I(){var c=bu;return bu<<=1,(bu&62914560)===0&&(bu=4194304),c}function L(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function N(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function F(c,f,v,x,C,O){var j=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var fe=c.entanglements,Le=c.expirationTimes,st=c.hiddenUpdates;for(v=j&~v;0<v;){var Tt=31-fs(v),ut=1<<Tt;fe[Tt]=0,Le[Tt]=-1;var Ut=st[Tt];if(Ut!==null)for(st[Tt]=null,Tt=0;Tt<Ut.length;Tt++){var vn=Ut[Tt];vn!==null&&(vn.lane&=-536870913)}v&=~ut}x!==0&&V(c,x,0),O!==0&&C===0&&c.tag!==0&&(c.suspendedLanes|=O&~(j&~f))}function V(c,f,v){c.pendingLanes|=f,c.suspendedLanes&=~f;var x=31-fs(f);c.entangledLanes|=f,c.entanglements[x]=c.entanglements[x]|1073741824|v&261930}function P(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var x=31-fs(v),C=1<<x;C&f|c[x]&f&&(c[x]|=f),v&=~C}}function U(c,f){var v=f&-f;return v=(v&42)!==0?1:W(v),(v&(c.suspendedLanes|f))!==0?0:v}function W(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Q(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function K(c){if(typeof yg=="function"&&jy(c),ds&&typeof ds.setStrictMode=="function")try{ds.setStrictMode(hc,c)}catch{}}function ne(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}function re(c){if(Fh===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);Fh=f&&f[1]||"",Ya=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fh+c+Ya}function X(c,f){if(!c||kf)return"";kf=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(f){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(vn){var Ut=vn}Reflect.construct(c,[],ut)}else{try{ut.call()}catch(vn){Ut=vn}c.call(ut.prototype)}}else{try{throw Error()}catch(vn){Ut=vn}(ut=c())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(vn){if(vn&&Ut&&typeof vn.stack=="string")return[vn.stack,Ut.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=x.DetermineComponentFrameRoot(),j=O[0],fe=O[1];if(j&&fe){var Le=j.split(`
`),st=fe.split(`
`);for(C=x=0;x<Le.length&&!Le[x].includes("DetermineComponentFrameRoot");)x++;for(;C<st.length&&!st[C].includes("DetermineComponentFrameRoot");)C++;if(x===Le.length||C===st.length)for(x=Le.length-1,C=st.length-1;1<=x&&0<=C&&Le[x]!==st[C];)C--;for(;1<=x&&0<=C;x--,C--)if(Le[x]!==st[C]){if(x!==1||C!==1)do if(x--,C--,0>C||Le[x]!==st[C]){var Tt=`
`+Le[x].replace(" at new "," at ");return c.displayName&&Tt.includes("<anonymous>")&&(Tt=Tt.replace("<anonymous>",c.displayName)),Tt}while(1<=x&&0<=C);break}}}finally{kf=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?re(v):""}function J(c,f){switch(c.tag){case 26:case 27:case 5:return re(c.type);case 16:return re("Lazy");case 13:return c.child!==f&&f!==null?re("Suspense Fallback"):re("Suspense");case 19:return re("SuspenseList");case 0:case 15:return X(c.type,!1);case 11:return X(c.type.render,!1);case 1:return X(c.type,!0);case 31:return re("Activity");default:return""}}function ae(c){try{var f="",v=null;do f+=J(c,v),v=c,c=c.return;while(c);return f}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function Me(c,f){if(typeof c=="object"&&c!==null){var v=_g.get(c);return v!==void 0?v:(f={value:c,source:f,stack:ae(f)},_g.set(c,f),f)}return{value:c,source:f,stack:ae(f)}}function Se(c,f){Co[Za++]=Vf,Co[Za++]=oi,oi=c,Vf=f}function Y(c,f,v){ra[Os++]=Or,ra[Os++]=_a,ra[Os++]=sa,sa=c;var x=Or;c=_a;var C=32-fs(x)-1;x&=~(1<<C),v+=1;var O=32-fs(f)+C;if(30<O){var j=C-C%5;O=(x&(1<<j)-1).toString(32),x>>=j,C-=j,Or=1<<32-fs(f)+C|v<<C|x,_a=O+c}else Or=1<<O|v<<C|x,_a=c}function pe(c){c.return!==null&&(Se(c,1),Y(c,1,0))}function we(c){for(;c===oi;)oi=Co[--Za],Co[Za]=null,Vf=Co[--Za],Co[Za]=null;for(;c===sa;)sa=ra[--Os],ra[Os]=null,_a=ra[--Os],ra[Os]=null,Or=ra[--Os],ra[Os]=null}function ke(c,f){ra[Os++]=Or,ra[Os++]=_a,ra[Os++]=sa,Or=f.id,_a=f.overflow,sa=c}function pt(c,f){S(Ir,f),S(Ro,c),S(wr,null),c=sy(f),b(wr),S(wr,c)}function ge(){b(wr),b(Ro),b(Ir)}function Re(c){c.memoizedState!==null&&S(Hf,c);var f=wr.current,v=gu(f,c.type);f!==v&&(S(Ro,c),S(wr,v))}function tt(c){Ro.current===c&&(b(wr),b(Ro)),Hf.current===c&&(b(Hf),$i?cc._currentValue=lc:cc._currentValue2=lc)}function yt(c){var f=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Je(Me(f,c)),Bh}function Rt(c,f){if(!wi)throw Error(r(175));Oy(c.stateNode,c.type,c.memoizedProps,f,c)||yt(c,!0)}function nn(c){for(hr=c.return;hr;)switch(hr.tag){case 5:case 31:case 13:Qr=!1;return;case 27:case 3:Qr=!0;return;default:hr=hr.return}}function cn(c){if(!wi||c!==hr)return!1;if(!zn)return nn(c),zn=!0,!1;var f=c.tag;if(dr?f!==3&&f!==27&&(f!==5||_u(c.type)&&!Kr(c.type,c.memoizedProps))&&Ti&&yt(c):f!==3&&(f!==5||_u(c.type)&&!Kr(c.type,c.memoizedProps))&&Ti&&yt(c),nn(c),f===13){if(!wi)throw Error(r(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));Ti=og(c)}else if(f===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));Ti=Py(c)}else Ti=dr&&f===27?My(c.type,Ti):hr?Sy(c.stateNode):null;return!0}function zt(){wi&&(Ti=hr=null,zn=!1)}function Ve(){var c=Ka;return c!==null&&(ms===null?ms=c:ms.push.apply(ms,c),Ka=null),c}function Je(c){Ka===null?Ka=[c]:Ka.push(c)}function He(c,f,v){$i?(S(aa,f._currentValue),f._currentValue=v):(S(aa,f._currentValue2),f._currentValue2=v)}function mt(c){var f=aa.current;$i?c._currentValue=f:c._currentValue2=f,b(aa)}function te(c,f,v){for(;c!==null;){var x=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,x!==null&&(x.childLanes|=f)):x!==null&&(x.childLanes&f)!==f&&(x.childLanes|=f),c===v)break;c=c.return}}function kt(c,f,v,x){var C=c.child;for(C!==null&&(C.return=c);C!==null;){var O=C.dependencies;if(O!==null){var j=C.child;O=O.firstContext;e:for(;O!==null;){var fe=O;O=C;for(var Le=0;Le<f.length;Le++)if(fe.context===f[Le]){O.lanes|=v,fe=O.alternate,fe!==null&&(fe.lanes|=v),te(O.return,v,c),x||(j=null);break e}O=fe.next}}else if(C.tag===18){if(j=C.return,j===null)throw Error(r(341));j.lanes|=v,O=j.alternate,O!==null&&(O.lanes|=v),te(j,v,c),j=null}else j=C.child;if(j!==null)j.return=C;else for(j=C;j!==null;){if(j===c){j=null;break}if(C=j.sibling,C!==null){C.return=j.return,j=C;break}j=j.return}C=j}}function Et(c,f,v,x){c=null;for(var C=f,O=!1;C!==null;){if(!O){if((C.flags&524288)!==0)O=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var j=C.alternate;if(j===null)throw Error(r(387));if(j=j.memoizedProps,j!==null){var fe=C.type;Xi(C.pendingProps.value,j.value)||(c!==null?c.push(fe):c=[fe])}}else if(C===Hf.current){if(j=C.alternate,j===null)throw Error(r(387));j.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(c!==null?c.push(cc):c=[cc])}C=C.return}c!==null&&kt(f,c,v,x),f.flags|=262144}function Vt(c){for(c=c.firstContext;c!==null;){var f=c.context;if(!Xi($i?f._currentValue:f._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function lt(c){di=c,ba=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function G(c){return de(di,c)}function k(c,f){return di===null&&lt(c),de(c,f)}function de(c,f){var v=$i?f._currentValue:f._currentValue2;if(f={context:f,memoizedValue:v,next:null},ba===null){if(c===null)throw Error(r(308));ba=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else ba=ba.next=f;return v}function Ae(){return{controller:new Xy,data:new Map,refCount:0}}function Be(c){c.refCount--,c.refCount===0&&Tr(t1,function(){c.controller.abort()})}function Ie(){}function wt(c){c!==ii&&c.next===null&&(ii===null?Gf=ii=c:ii=ii.next=c),oa=!0,kr||(kr=!0,ie())}function ft(c,f){if(!kh&&oa){kh=!0;do for(var v=!1,x=Gf;x!==null;){if(c!==0){var C=x.pendingLanes;if(C===0)var O=0;else{var j=x.suspendedLanes,fe=x.pingedLanes;O=(1<<31-fs(42|c)+1)-1,O&=C&~(j&~fe),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(v=!0,At(x,O))}else O=Fn,O=E(x,x===Rn?O:0,x.cancelPendingCommit!==null||x.timeoutHandle!==us),(O&3)===0||R(x,O)||(v=!0,At(x,O));x=x.next}while(v);kh=!1}}function Pt(){jt()}function jt(){oa=kr=!1;var c=0;gl!==0&&oc()&&(c=gl);for(var f=Br(),v=null,x=Gf;x!==null;){var C=x.next,O=Ze(x,f);O===0?(x.next=null,v===null?Gf=C:v.next=C,C===null&&(ii=v)):(v=x,(c!==0||(O&3)!==0)&&(oa=!0)),x=C}rr!==0&&rr!==5||ft(c),gl!==0&&(gl=0)}function Ze(c,f){for(var v=c.suspendedLanes,x=c.pingedLanes,C=c.expirationTimes,O=c.pendingLanes&-62914561;0<O;){var j=31-fs(O),fe=1<<j,Le=C[j];Le===-1?((fe&v)===0||(fe&x)!==0)&&(C[j]=D(fe,f)):Le<=f&&(c.expiredLanes|=fe),O&=~fe}if(f=Rn,v=Fn,v=E(c,c===f?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==us),x=c.callbackNode,v===0||c===f&&(si===2||si===9)||c.cancelPendingCommit!==null)return x!==null&&x!==null&&Nh(x),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||R(c,v)){if(f=v&-v,f===c.callbackPriority)return f;switch(x!==null&&Nh(x),Q(v)){case 2:case 8:v=$y;break;case 32:v=Bf;break;case 268435456:v=Uh;break;default:v=Bf}return x=Ke.bind(null,c),v=Ff(v,x),c.callbackPriority=f,c.callbackNode=v,f}return x!==null&&x!==null&&Nh(x),c.callbackPriority=2,c.callbackNode=null,2}function Ke(c,f){if(rr!==0&&rr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var v=c.callbackNode;if(ja()&&c.callbackNode!==v)return null;var x=Fn;return x=E(c,c===Rn?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==us),x===0?null:(ya(c,x,f),Ze(c,Br()),c.callbackNode!=null&&c.callbackNode===v?Ke.bind(null,c):null)}function At(c,f){if(ja())return null;ya(c,f,!0)}function ie(){$m?jm(function(){(Nn&6)!==0?Ff(Lh,Pt):jt()}):Ff(Lh,Pt)}function _e(){if(gl===0){var c=Do;c===0&&(c=Ph,Ph<<=1,(Ph&261888)===0&&(Ph=256)),gl=c}return gl}function nt(c,f){if(xu===null){var v=xu=[];bg=0,Do=_e(),pr={status:"pending",value:void 0,then:function(x){v.push(x)}}}return bg++,f.then(oe,oe),f}function oe(){if(--bg===0&&xu!==null){pr!==null&&(pr.status="fulfilled");var c=xu;xu=null,Do=0,pr=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function Ee(c,f){var v=[],x={status:"pending",value:null,reason:null,then:function(C){v.push(C)}};return c.then(function(){x.status="fulfilled",x.value=f;for(var C=0;C<v.length;C++)(0,v[C])(f)},function(C){for(x.status="rejected",x.reason=C,C=0;C<v.length;C++)(0,v[C])(void 0)}),x}function et(){var c=vl.current;return c!==null?c:Rn.pooledCache}function Mt(c,f){f===null?S(vl,vl.current):S(vl,f.pool)}function it(){var c=et();return c===null?null:{parent:$i?Ai._currentValue:Ai._currentValue2,pool:c}}function We(c,f){if(Xi(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),x=Object.keys(f);if(v.length!==x.length)return!1;for(x=0;x<v.length;x++){var C=v[x];if(!e1.call(f,C)||!Xi(c[C],f[C]))return!1}return!0}function ct(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Xt(c,f,v){switch(v=c[v],v===void 0?c.push(f):v!==f&&(f.then(Ie,Ie),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,_i(c),c;default:if(typeof f.status=="string")f.then(Ie,Ie);else{if(c=Rn,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(x){if(f.status==="pending"){var C=f;C.status="fulfilled",C.value=x}},function(x){if(f.status==="pending"){var C=f;C.status="rejected",C.reason=x}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,_i(c),c}throw Jr=f,mr}}function mn(c){try{var f=c._init;return f(c._payload)}catch(v){throw v!==null&&typeof v=="object"&&typeof v.then=="function"?(Jr=v,mr):v}}function yn(){if(Jr===null)throw Error(r(459));var c=Jr;return Jr=null,c}function _i(c){if(c===mr||c===ca)throw Error(r(483))}function Wi(c){var f=pc;return pc+=1,yl===null&&(yl=[]),Xt(yl,c,f)}function Ia(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Pa(c,f){throw f.$$typeof===nc?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function Xs(c){function f(Oe,xe){if(c){var Ne=Oe.deletions;Ne===null?(Oe.deletions=[xe],Oe.flags|=16):Ne.push(xe)}}function v(Oe,xe){if(!c)return null;for(;xe!==null;)f(Oe,xe),xe=xe.sibling;return null}function x(Oe){for(var xe=new Map;Oe!==null;)Oe.key!==null?xe.set(Oe.key,Oe):xe.set(Oe.index,Oe),Oe=Oe.sibling;return xe}function C(Oe,xe){return Oe=Rs(Oe,xe),Oe.index=0,Oe.sibling=null,Oe}function O(Oe,xe,Ne){return Oe.index=Ne,c?(Ne=Oe.alternate,Ne!==null?(Ne=Ne.index,Ne<xe?(Oe.flags|=67108866,xe):Ne):(Oe.flags|=67108866,xe)):(Oe.flags|=1048576,xe)}function j(Oe){return c&&Oe.alternate===null&&(Oe.flags|=67108866),Oe}function fe(Oe,xe,Ne,bt){return xe===null||xe.tag!==6?(xe=Nm(Ne,Oe.mode,bt),xe.return=Oe,xe):(xe=C(xe,Ne),xe.return=Oe,xe)}function Le(Oe,xe,Ne,bt){var tn=Ne.type;return tn===rc?Tt(Oe,xe,Ne.props.children,bt,Ne.key):xe!==null&&(xe.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===Zr&&mn(tn)===xe.type)?(xe=C(xe,Ne.props),Ia(xe,Ne),xe.return=Oe,xe):(xe=Mo(Ne.type,Ne.key,Ne.props,null,Oe.mode,bt),Ia(xe,Ne),xe.return=Oe,xe)}function st(Oe,xe,Ne,bt){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Ne.containerInfo||xe.stateNode.implementation!==Ne.implementation?(xe=Um(Ne,Oe.mode,bt),xe.return=Oe,xe):(xe=C(xe,Ne.children||[]),xe.return=Oe,xe)}function Tt(Oe,xe,Ne,bt,tn){return xe===null||xe.tag!==7?(xe=ea(Ne,Oe.mode,bt,tn),xe.return=Oe,xe):(xe=C(xe,Ne),xe.return=Oe,xe)}function ut(Oe,xe,Ne){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=Nm(""+xe,Oe.mode,Ne),xe.return=Oe,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case Xa:return Ne=Mo(xe.type,xe.key,xe.props,null,Oe.mode,Ne),Ia(Ne,xe),Ne.return=Oe,Ne;case ic:return xe=Um(xe,Oe.mode,Ne),xe.return=Oe,xe;case Zr:return xe=mn(xe),ut(Oe,xe,Ne)}if(dl(xe)||g(xe))return xe=ea(xe,Oe.mode,Ne,null),xe.return=Oe,xe;if(typeof xe.then=="function")return ut(Oe,Wi(xe),Ne);if(xe.$$typeof===ta)return ut(Oe,k(Oe,xe),Ne);Pa(Oe,xe)}return null}function Ut(Oe,xe,Ne,bt){var tn=xe!==null?xe.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return tn!==null?null:fe(Oe,xe,""+Ne,bt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case Xa:return Ne.key===tn?Le(Oe,xe,Ne,bt):null;case ic:return Ne.key===tn?st(Oe,xe,Ne,bt):null;case Zr:return Ne=mn(Ne),Ut(Oe,xe,Ne,bt)}if(dl(Ne)||g(Ne))return tn!==null?null:Tt(Oe,xe,Ne,bt,null);if(typeof Ne.then=="function")return Ut(Oe,xe,Wi(Ne),bt);if(Ne.$$typeof===ta)return Ut(Oe,xe,k(Oe,Ne),bt);Pa(Oe,Ne)}return null}function vn(Oe,xe,Ne,bt,tn){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Oe=Oe.get(Ne)||null,fe(xe,Oe,""+bt,tn);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case Xa:return Oe=Oe.get(bt.key===null?Ne:bt.key)||null,Le(xe,Oe,bt,tn);case ic:return Oe=Oe.get(bt.key===null?Ne:bt.key)||null,st(xe,Oe,bt,tn);case Zr:return bt=mn(bt),vn(Oe,xe,Ne,bt,tn)}if(dl(bt)||g(bt))return Oe=Oe.get(Ne)||null,Tt(xe,Oe,bt,tn,null);if(typeof bt.then=="function")return vn(Oe,xe,Ne,Wi(bt),tn);if(bt.$$typeof===ta)return vn(Oe,xe,Ne,k(xe,bt),tn);Pa(xe,bt)}return null}function Zi(Oe,xe,Ne,bt){for(var tn=null,Li=null,rn=xe,Gn=xe=0,Ar=null;rn!==null&&Gn<Ne.length;Gn++){rn.index>Gn?(Ar=rn,rn=null):Ar=rn.sibling;var Zn=Ut(Oe,rn,Ne[Gn],bt);if(Zn===null){rn===null&&(rn=Ar);break}c&&rn&&Zn.alternate===null&&f(Oe,rn),xe=O(Zn,xe,Gn),Li===null?tn=Zn:Li.sibling=Zn,Li=Zn,rn=Ar}if(Gn===Ne.length)return v(Oe,rn),zn&&Se(Oe,Gn),tn;if(rn===null){for(;Gn<Ne.length;Gn++)rn=ut(Oe,Ne[Gn],bt),rn!==null&&(xe=O(rn,xe,Gn),Li===null?tn=rn:Li.sibling=rn,Li=rn);return zn&&Se(Oe,Gn),tn}for(rn=x(rn);Gn<Ne.length;Gn++)Ar=vn(rn,Oe,Gn,Ne[Gn],bt),Ar!==null&&(c&&Ar.alternate!==null&&rn.delete(Ar.key===null?Gn:Ar.key),xe=O(Ar,xe,Gn),Li===null?tn=Ar:Li.sibling=Ar,Li=Ar);return c&&rn.forEach(function(da){return f(Oe,da)}),zn&&Se(Oe,Gn),tn}function Ru(Oe,xe,Ne,bt){if(Ne==null)throw Error(r(151));for(var tn=null,Li=null,rn=xe,Gn=xe=0,Ar=null,Zn=Ne.next();rn!==null&&!Zn.done;Gn++,Zn=Ne.next()){rn.index>Gn?(Ar=rn,rn=null):Ar=rn.sibling;var da=Ut(Oe,rn,Zn.value,bt);if(da===null){rn===null&&(rn=Ar);break}c&&rn&&da.alternate===null&&f(Oe,rn),xe=O(da,xe,Gn),Li===null?tn=da:Li.sibling=da,Li=da,rn=Ar}if(Zn.done)return v(Oe,rn),zn&&Se(Oe,Gn),tn;if(rn===null){for(;!Zn.done;Gn++,Zn=Ne.next())Zn=ut(Oe,Zn.value,bt),Zn!==null&&(xe=O(Zn,xe,Gn),Li===null?tn=Zn:Li.sibling=Zn,Li=Zn);return zn&&Se(Oe,Gn),tn}for(rn=x(rn);!Zn.done;Gn++,Zn=Ne.next())Zn=vn(rn,Oe,Gn,Zn.value,bt),Zn!==null&&(c&&Zn.alternate!==null&&rn.delete(Zn.key===null?Gn:Zn.key),xe=O(Zn,xe,Gn),Li===null?tn=Zn:Li.sibling=Zn,Li=Zn);return c&&rn.forEach(function(n1){return f(Oe,n1)}),zn&&Se(Oe,Gn),tn}function Tl(Oe,xe,Ne,bt){if(typeof Ne=="object"&&Ne!==null&&Ne.type===rc&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case Xa:e:{for(var tn=Ne.key;xe!==null;){if(xe.key===tn){if(tn=Ne.type,tn===rc){if(xe.tag===7){v(Oe,xe.sibling),bt=C(xe,Ne.props.children),bt.return=Oe,Oe=bt;break e}}else if(xe.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===Zr&&mn(tn)===xe.type){v(Oe,xe.sibling),bt=C(xe,Ne.props),Ia(bt,Ne),bt.return=Oe,Oe=bt;break e}v(Oe,xe);break}else f(Oe,xe);xe=xe.sibling}Ne.type===rc?(bt=ea(Ne.props.children,Oe.mode,bt,Ne.key),bt.return=Oe,Oe=bt):(bt=Mo(Ne.type,Ne.key,Ne.props,null,Oe.mode,bt),Ia(bt,Ne),bt.return=Oe,Oe=bt)}return j(Oe);case ic:e:{for(tn=Ne.key;xe!==null;){if(xe.key===tn)if(xe.tag===4&&xe.stateNode.containerInfo===Ne.containerInfo&&xe.stateNode.implementation===Ne.implementation){v(Oe,xe.sibling),bt=C(xe,Ne.children||[]),bt.return=Oe,Oe=bt;break e}else{v(Oe,xe);break}else f(Oe,xe);xe=xe.sibling}bt=Um(Ne,Oe.mode,bt),bt.return=Oe,Oe=bt}return j(Oe);case Zr:return Ne=mn(Ne),Tl(Oe,xe,Ne,bt)}if(dl(Ne))return Zi(Oe,xe,Ne,bt);if(g(Ne)){if(tn=g(Ne),typeof tn!="function")throw Error(r(150));return Ne=tn.call(Ne),Ru(Oe,xe,Ne,bt)}if(typeof Ne.then=="function")return Tl(Oe,xe,Wi(Ne),bt);if(Ne.$$typeof===ta)return Tl(Oe,xe,k(Oe,Ne),bt);Pa(Oe,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,xe!==null&&xe.tag===6?(v(Oe,xe.sibling),bt=C(xe,Ne),bt.return=Oe,Oe=bt):(v(Oe,xe),bt=Nm(Ne,Oe.mode,bt),bt.return=Oe,Oe=bt),j(Oe)):v(Oe,xe)}return function(Oe,xe,Ne,bt){try{pc=0;var tn=Tl(Oe,xe,Ne,bt);return yl=null,tn}catch(rn){if(rn===mr||rn===ca)throw rn;var Li=t(29,rn,null,Oe.mode);return Li.lanes=bt,Li.return=Oe,Li}}}function Na(){for(var c=Ja,f=mc=Ja=0;f<c;){var v=Nr[f];Nr[f++]=null;var x=Nr[f];Nr[f++]=null;var C=Nr[f];Nr[f++]=null;var O=Nr[f];if(Nr[f++]=null,x!==null&&C!==null){var j=x.pending;j===null?C.next=C:(C.next=j.next,j.next=C),x.pending=C}O!==0&&zr(v,C,O)}}function jr(c,f,v,x){Nr[Ja++]=c,Nr[Ja++]=f,Nr[Ja++]=v,Nr[Ja++]=x,mc|=x,c.lanes|=x,c=c.alternate,c!==null&&(c.lanes|=x)}function ws(c,f,v,x){return jr(c,f,v,x),bi(c)}function en(c,f){return jr(c,null,null,f),bi(c)}function zr(c,f,v){c.lanes|=v;var x=c.alternate;x!==null&&(x.lanes|=v);for(var C=!1,O=c.return;O!==null;)O.childLanes|=v,x=O.alternate,x!==null&&(x.childLanes|=v),O.tag===22&&(c=O.stateNode,c===null||c._visibility&1||(C=!0)),c=O,O=O.return;return c.tag===3?(O=c.stateNode,C&&f!==null&&(C=31-fs(v),c=O.hiddenUpdates,x=c[C],x===null?c[C]=[f]:x.push(f),f.lane=v|536870912),O):null}function bi(c){if(50<Xn)throw Xn=0,Yf=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}function H(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Z(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function ue(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Te(c,f,v){var x=c.updateQueue;if(x===null)return null;if(x=x.shared,(Nn&2)!==0){var C=x.pending;return C===null?f.next=f:(f.next=C.next,C.next=f),x.pending=f,f=bi(c),zr(c,null,v),f}return jr(c,x,f,v),bi(c)}function Ue(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194048)!==0)){var x=f.lanes;x&=c.pendingLanes,v|=x,f.lanes=v,P(c,v)}}function Fe(c,f){var v=c.updateQueue,x=c.alternate;if(x!==null&&(x=x.updateQueue,v===x)){var C=null,O=null;if(v=v.firstBaseUpdate,v!==null){do{var j={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};O===null?C=O=j:O=O.next=j,v=v.next}while(v!==null);O===null?C=O=f:O=O.next=f}else C=O=f;v={baseState:x.baseState,firstBaseUpdate:C,lastBaseUpdate:O,shared:x.shared,callbacks:x.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}function at(){if(Hh){var c=pr;if(c!==null)throw c}}function rt(c,f,v,x){Hh=!1;var C=c.updateQueue;Is=!1;var O=C.firstBaseUpdate,j=C.lastBaseUpdate,fe=C.shared.pending;if(fe!==null){C.shared.pending=null;var Le=fe,st=Le.next;Le.next=null,j===null?O=st:j.next=st,j=Le;var Tt=c.alternate;Tt!==null&&(Tt=Tt.updateQueue,fe=Tt.lastBaseUpdate,fe!==j&&(fe===null?Tt.firstBaseUpdate=st:fe.next=st,Tt.lastBaseUpdate=Le))}if(O!==null){var ut=C.baseState;j=0,Tt=st=Le=null,fe=O;do{var Ut=fe.lane&-536870913,vn=Ut!==fe.lane;if(vn?(Fn&Ut)===Ut:(x&Ut)===Ut){Ut!==0&&Ut===Do&&(Hh=!0),Tt!==null&&(Tt=Tt.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var Zi=c,Ru=fe;Ut=f;var Tl=v;switch(Ru.tag){case 1:if(Zi=Ru.payload,typeof Zi=="function"){ut=Zi.call(Tl,ut,Ut);break e}ut=Zi;break e;case 3:Zi.flags=Zi.flags&-65537|128;case 0:if(Zi=Ru.payload,Ut=typeof Zi=="function"?Zi.call(Tl,ut,Ut):Zi,Ut==null)break e;ut=gh({},ut,Ut);break e;case 2:Is=!0}}Ut=fe.callback,Ut!==null&&(c.flags|=64,vn&&(c.flags|=8192),vn=C.callbacks,vn===null?C.callbacks=[Ut]:vn.push(Ut))}else vn={lane:Ut,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},Tt===null?(st=Tt=vn,Le=ut):Tt=Tt.next=vn,j|=Ut;if(fe=fe.next,fe===null){if(fe=C.shared.pending,fe===null)break;vn=fe,fe=vn.next,vn.next=null,C.lastBaseUpdate=vn,C.shared.pending=null}}while(!0);Tt===null&&(Le=ut),C.baseState=Le,C.firstBaseUpdate=st,C.lastBaseUpdate=Tt,O===null&&(C.shared.lanes=0),Io|=j,c.lanes=j,c.memoizedState=ut}}function _t(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function gt(c,f){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)_t(v[c],f)}function St(c,f){c=to,S(_l,c),S(gc,f),to=c|f.baseLanes}function ht(){S(_l,to),S(gc,gc.current)}function $(){to=_l.current,b(gc),b(_l)}function se(c){var f=c.alternate;S(Fi,Fi.current&1),S(hs,c),ps===null&&(f===null||gc.current!==null||f.memoizedState!==null)&&(ps=c)}function ve(c){S(Fi,Fi.current),S(hs,c),ps===null&&(ps=c)}function ye(c){c.tag===22?(S(Fi,Fi.current),S(hs,c),ps===null&&(ps=c)):he()}function he(){S(Fi,Fi.current),S(hs,hs.current)}function $e(c){b(hs),ps===c&&(ps=null),b(Fi)}function ot(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||pl(v)||Eh(v)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Xe(){throw Error(r(321))}function Ct(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!Xi(c[v],f[v]))return!1;return!0}function vt(c,f,v,x,C,O){return Oo=O,bn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Qt.H=c===null||c.memoizedState===null?Ii:eo,Vn=!1,O=v(x,C),Vn=!1,wn&&(O=xt(f,v,x,C)),Ht(c),O}function Ht(c){Qt.H=Ps;var f=Zt!==null&&Zt.next!==null;if(Oo=0,dn=Zt=bn=null,Cn=!1,ua=0,xa=null,f)throw Error(r(300));c===null||xi||(c=c.dependencies,c!==null&&Vt(c)&&(xi=!0))}function xt(c,f,v,x){bn=c;var C=0;do{if(wn&&(xa=null),ua=0,wn=!1,25<=C)throw Error(r(301));if(C+=1,dn=Zt=null,c.updateQueue!=null){var O=c.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Qt.H=bl,O=f(v,x)}while(wn);return O}function Ft(){var c=Qt.H,f=c.useState()[0];return f=typeof f.then=="function"?Dt(f):f,c=c.useState()[0],(Zt!==null?Zt.memoizedState:null)!==c&&(bn.flags|=1024),f}function gn(){var c=Vr!==0;return Vr=0,c}function Yn(c,f,v){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~v}function En(c){if(Cn){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Cn=!1}Oo=0,dn=Zt=bn=null,wn=!1,ua=Vr=0,xa=null}function Lt(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?bn.memoizedState=dn=c:dn=dn.next=c,dn}function dt(){if(Zt===null){var c=bn.alternate;c=c!==null?c.memoizedState:null}else c=Zt.next;var f=dn===null?bn.memoizedState:dn.next;if(f!==null)dn=f,Zt=c;else{if(c===null)throw bn.alternate===null?Error(r(467)):Error(r(310));Zt=c,c={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},dn===null?bn.memoizedState=dn=c:dn=dn.next=c}return dn}function qt(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dt(c){var f=ua;return ua+=1,xa===null&&(xa=[]),c=Xt(xa,c,f),f=bn,(dn===null?f.memoizedState:dn.next)===null&&(f=f.alternate,Qt.H=f===null||f.memoizedState===null?Ii:eo),c}function jn(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Dt(c);if(c.$$typeof===ta)return G(c)}throw Error(r(438,String(c)))}function cr(c){var f=null,v=bn.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var x=bn.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(f={data:x.data.map(function(C){return C.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=qt(),bn.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(c),x=0;x<c;x++)v[x]=Fm;return f.index++,v}function On(c,f){return typeof f=="function"?f(c):f}function Mi(c){var f=dt();return Kn(f,Zt,c)}function Kn(c,f,v){var x=c.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=v;var C=c.baseQueue,O=x.pending;if(O!==null){if(C!==null){var j=C.next;C.next=O.next,O.next=j}f.baseQueue=C=O,x.pending=null}if(O=c.baseState,C===null)c.memoizedState=O;else{f=C.next;var fe=j=null,Le=null,st=f,Tt=!1;do{var ut=st.lane&-536870913;if(ut!==st.lane?(Fn&ut)===ut:(Oo&ut)===ut){var Ut=st.revertLane;if(Ut===0)Le!==null&&(Le=Le.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),ut===Do&&(Tt=!0);else if((Oo&Ut)===Ut){st=st.next,Ut===Do&&(Tt=!0);continue}else ut={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Le===null?(fe=Le=ut,j=O):Le=Le.next=ut,bn.lanes|=Ut,Io|=Ut;ut=st.action,Vn&&v(O,ut),O=st.hasEagerState?st.eagerState:v(O,ut)}else Ut={lane:ut,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Le===null?(fe=Le=Ut,j=O):Le=Le.next=Ut,bn.lanes|=ut,Io|=ut;st=st.next}while(st!==null&&st!==f);if(Le===null?j=O:Le.next=fe,!Xi(O,c.memoizedState)&&(xi=!0,Tt&&(v=pr,v!==null)))throw v;c.memoizedState=O,c.baseState=j,c.baseQueue=Le,x.lastRenderedState=O}return C===null&&(x.lanes=0),[c.memoizedState,x.dispatch]}function ur(c){var f=dt(),v=f.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=c;var x=v.dispatch,C=v.pending,O=f.memoizedState;if(C!==null){v.pending=null;var j=C=C.next;do O=c(O,j.action),j=j.next;while(j!==C);Xi(O,f.memoizedState)||(xi=!0),f.memoizedState=O,f.baseQueue===null&&(f.baseState=O),v.lastRenderedState=O}return[O,x]}function er(c,f,v){var x=bn,C=dt(),O=zn;if(O){if(v===void 0)throw Error(r(407));v=v()}else v=f();var j=!Xi((Zt||C).memoizedState,v);if(j&&(C.memoizedState=v,xi=!0),C=C.queue,Yc(jl.bind(null,x,C,c),[c]),C.getSnapshot!==f||j||dn!==null&&dn.memoizedState.tag&1){if(x.flags|=2048,Ts(9,{destroy:void 0},xr.bind(null,x,C,v,f),null),Rn===null)throw Error(r(349));O||(Oo&127)!==0||br(x,f,v)}return v}function br(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=bn.updateQueue,f===null?(f=qt(),bn.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}function xr(c,f,v,x){f.value=v,f.getSnapshot=x,qs(f)&&Av(c)}function jl(c,f,v){return v(function(){qs(f)&&Av(c)})}function qs(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!Xi(c,v)}catch{return!0}}function Av(c){var f=en(c,2);f!==null&&Di(f,c,2)}function cm(c){var f=Lt();if(typeof c=="function"){var v=c;if(c=v(),Vn){K(!0);try{v()}finally{K(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:c},f}function ff(c,f,v,x){return c.baseState=v,Kn(c,Zt,typeof x=="function"?x:On)}function vo(c,f,v,x,C){if(Zd(c))throw Error(r(485));if(c=f.action,c!==null){var O={payload:C,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){O.listeners.push(j)}};Qt.T!==null?v(!0):O.isTransition=!1,x(O),v=f.pending,v===null?(O.next=f.pending=O,Gd(f,O)):(O.next=v.next,f.pending=v.next=O)}}function Gd(c,f){var v=f.action,x=f.payload,C=c.state;if(f.isTransition){var O=Qt.T,j={};Qt.T=j;try{var fe=v(C,x),Le=Qt.S;Le!==null&&Le(j,fe),Wd(c,f,fe)}catch(st){Jo(c,f,st)}finally{O!==null&&j.types!==null&&(O.types=j.types),Qt.T=O}}else try{O=v(C,x),Wd(c,f,O)}catch(st){Jo(c,f,st)}}function Wd(c,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(x){Xl(c,f,x)},function(x){return Jo(c,f,x)}):Xl(c,f,v)}function Xl(c,f,v){f.status="fulfilled",f.value=v,um(f),c.state=v,f=c.pending,f!==null&&(v=f.next,v===f?c.pending=null:(v=v.next,f.next=v,Gd(c,v)))}function Jo(c,f,v){var x=c.pending;if(c.pending=null,x!==null){x=x.next;do f.status="rejected",f.reason=v,um(f),f=f.next;while(f!==x)}c.action=null}function um(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function $d(c,f){return f}function fm(c,f){if(zn){var v=Rn.formState;if(v!==null){e:{var x=bn;if(zn){if(Ti){var C=xy(Ti,Qr);if(C){Ti=Sy(C),x=ig(C);break e}}yt(x)}x=!1}x&&(f=v[0])}}v=Lt(),v.memoizedState=v.baseState=f,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:f},v.queue=x,v=Pv.bind(null,bn,x),x.dispatch=v,x=cm(!1);var O=Yd.bind(null,bn,!1,x.queue);return x=Lt(),C={state:f,dispatch:null,action:c,pending:null},x.queue=C,v=vo.bind(null,bn,C,O,v),C.dispatch=v,x.memoizedState=c,[f,v,!1]}function Xc(c){var f=dt();return La(f,Zt,c)}function La(c,f,v){if(f=Kn(c,f,$d)[0],c=Mi(On)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var x=Dt(f)}catch(j){throw j===mr?ca:j}else x=f;f=dt();var C=f.queue,O=C.dispatch;return v!==f.memoizedState&&(bn.flags|=2048,Ts(9,{destroy:void 0},dm.bind(null,C,v),null)),[x,O,c]}function dm(c,f){c.action=f}function qc(c){var f=dt(),v=Zt;if(v!==null)return La(f,v,c);dt(),f=f.memoizedState,v=dt();var x=v.queue.dispatch;return v.memoizedState=c,[f,x,!1]}function Ts(c,f,v,x){return c={tag:c,create:v,deps:x,inst:f,next:null},f=bn.updateQueue,f===null&&(f=qt(),bn.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=c.next=c:(x=v.next,v.next=c,c.next=x,f.lastEffect=c),c}function jd(){return dt().memoizedState}function ql(c,f,v,x){var C=Lt();bn.flags|=c,C.memoizedState=Ts(1|f,{destroy:void 0},v,x===void 0?null:x)}function df(c,f,v,x){var C=dt();x=x===void 0?null:x;var O=C.memoizedState.inst;Zt!==null&&x!==null&&Ct(x,Zt.memoizedState.deps)?C.memoizedState=Ts(f,O,v,x):(bn.flags|=c,C.memoizedState=Ts(1|f,O,v,x))}function hf(c,f){ql(8390656,8,c,f)}function Yc(c,f){df(2048,8,c,f)}function Cv(c){bn.flags|=4;var f=bn.updateQueue;if(f===null)f=qt(),bn.updateQueue=f,f.events=[c];else{var v=f.events;v===null?f.events=[c]:v.push(c)}}function Xr(c){var f=dt().memoizedState;return Cv({ref:f,nextImpl:c}),function(){if((Nn&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}function el(c,f){return df(4,2,c,f)}function pf(c,f){return df(4,4,c,f)}function Zc(c,f){if(typeof f=="function"){c=c();var v=f(c);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Rv(c,f,v){v=v!=null?v.concat([c]):null,df(4,4,Zc.bind(null,f,c),v)}function mf(){}function Xd(c,f){var v=dt();f=f===void 0?null:f;var x=v.memoizedState;return f!==null&&Ct(f,x[1])?x[0]:(v.memoizedState=[c,f],c)}function Kc(c,f){var v=dt();f=f===void 0?null:f;var x=v.memoizedState;if(f!==null&&Ct(f,x[1]))return x[0];if(x=c(),Vn){K(!0);try{c()}finally{K(!1)}}return v.memoizedState=[x,f],x}function Qc(c,f,v){return v===void 0||(Oo&1073741824)!==0&&(Fn&261930)===0?c.memoizedState=f:(c.memoizedState=v,c=bo(),bn.lanes|=c,Io|=c,v)}function hm(c,f,v,x){return Xi(v,f)?v:gc.current!==null?(c=Qc(c,v,x),Xi(c,f)||(xi=!0),c):(Oo&42)===0||(Oo&1073741824)!==0&&(Fn&261930)===0?(xi=!0,c.memoizedState=v):(c=bo(),bn.lanes|=c,Io|=c,f)}function Dv(c,f,v,x,C){var O=na();Un(O!==0&&8>O?O:8);var j=Qt.T,fe={};Qt.T=fe,Yd(c,!1,f,v);try{var Le=C(),st=Qt.S;if(st!==null&&st(fe,Le),Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var Tt=Ee(Le,x);gf(c,f,Tt,Ei(c))}else gf(c,f,x,Ei(c))}catch(ut){gf(c,f,{then:function(){},status:"rejected",reason:ut},Ei())}finally{Un(O),j!==null&&fe.types!==null&&(j.types=fe.types),Qt.T=j}}function Ov(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:lc,baseState:lc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:lc},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:v},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function pm(){return G(cc)}function qd(){return dt().memoizedState}function Iv(){return dt().memoizedState}function WS(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var v=Ei();c=ue(v);var x=Te(f,c,v);x!==null&&(Di(x,f,v),Ue(x,f,v)),f={cache:Ae()},c.payload=f;return}f=f.return}}function $S(c,f,v){var x=Ei();v={lane:x,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Zd(c)?Nv(f,v):(v=ws(c,f,v,x),v!==null&&(Di(v,c,x),Lv(v,f,x)))}function Pv(c,f,v){var x=Ei();gf(c,f,v,x)}function gf(c,f,v,x){var C={lane:x,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null};if(Zd(c))Nv(f,C);else{var O=c.alternate;if(c.lanes===0&&(O===null||O.lanes===0)&&(O=f.lastRenderedReducer,O!==null))try{var j=f.lastRenderedState,fe=O(j,v);if(C.hasEagerState=!0,C.eagerState=fe,Xi(fe,j))return jr(c,f,C,0),Rn===null&&Na(),!1}catch{}if(v=ws(c,f,C,x),v!==null)return Di(v,c,x),Lv(v,f,x),!0}return!1}function Yd(c,f,v,x){if(x={lane:2,revertLane:_e(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Zd(c)){if(f)throw Error(r(479))}else f=ws(c,v,x,2),f!==null&&Di(f,c,2)}function Zd(c){var f=c.alternate;return c===bn||f!==null&&f===bn}function Nv(c,f){wn=Cn=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}function Lv(c,f,v){if((v&4194048)!==0){var x=f.lanes;x&=c.pendingLanes,v|=x,f.lanes=v,P(c,v)}}function mm(c,f,v,x){f=c.memoizedState,v=v(x,f),v=v==null?f:gh({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}function Kd(c,f,v,x,C,O,j){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(x,O,j):f.prototype&&f.prototype.isPureReactComponent?!We(v,x)||!We(C,O):!0}function Uv(c,f,v,x){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,x),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,x),f.state!==c&&Wf.enqueueReplaceState(f,f.state,null)}function Yl(c,f){var v=f;if("ref"in f){v={};for(var x in f)x!=="ref"&&(v[x]=f[x])}if(c=c.defaultProps){v===f&&(v=gh({},v));for(var C in c)v[C]===void 0&&(v[C]=c[C])}return v}function Qd(c,f){try{var v=c.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(x){setTimeout(function(){throw x})}}function gm(c,f,v){try{var x=c.onCaughtError;x(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function vm(c,f,v){return v=ue(v),v.tag=3,v.payload={element:null},v.callback=function(){Qd(c,f)},v}function zv(c){return c=ue(c),c.tag=3,c}function Fv(c,f,v,x){var C=v.type.getDerivedStateFromError;if(typeof C=="function"){var O=x.value;c.payload=function(){return C(O)},c.callback=function(){gm(f,v,x)}}var j=v.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(c.callback=function(){gm(f,v,x),typeof C!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var fe=x.stack;this.componentDidCatch(x.value,{componentStack:fe!==null?fe:""})})}function jS(c,f,v,x,C){if(v.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(f=v.alternate,f!==null&&Et(f,v,C,!0),v=hs.current,v!==null){switch(v.tag){case 31:case 13:return ps===null?cu():v.alternate===null&&Ni===0&&(Ni=3),v.flags&=-257,v.flags|=65536,v.lanes=C,x===Qa?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([x]):f.add(x),du(c,x,C)),!1;case 22:return v.flags|=65536,x===Qa?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([x])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([x]):v.add(x)),du(c,x,C)),!1}throw Error(r(435,v.tag))}return du(c,x,C),cu(),!1}if(zn)return f=hs.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=C,x!==Bh&&(c=Error(r(422),{cause:x}),Je(Me(c,v)))):(x!==Bh&&(f=Error(r(423),{cause:x}),Je(Me(f,v))),c=c.current.alternate,c.flags|=65536,C&=-C,c.lanes|=C,x=Me(x,v),C=vm(c.stateNode,x,C),Fe(c,C),Ni!==4&&(Ni=2)),!1;var O=Error(r(520),{cause:x});if(O=Me(O,v),jf===null?jf=[O]:jf.push(O),Ni!==4&&(Ni=2),f===null)return!0;x=Me(x,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,c=C&-C,v.lanes|=c,c=vm(v.stateNode,x,c),Fe(v,c),!1;case 1:if(f=v.type,O=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Po===null||!Po.has(O))))return v.flags|=65536,C&=-C,v.lanes|=C,C=zv(C),Fv(C,c,v,x),Fe(v,C),!1}v=v.return}while(v!==null);return!1}function Dr(c,f,v,x){f.child=c===null?xg(f,null,v,x):Pr(f,c.child,v,x)}function Bv(c,f,v,x,C){v=v.render;var O=f.ref;if("ref"in x){var j={};for(var fe in x)fe!=="ref"&&(j[fe]=x[fe])}else j=x;return lt(f),x=vt(c,f,v,j,O,C),fe=gn(),c!==null&&!xi?(Yn(c,f,C),Ua(c,f,C)):(zn&&fe&&pe(f),f.flags|=1,Dr(c,f,x,C),f.child)}function kv(c,f,v,x,C){if(c===null){var O=v.type;return typeof O=="function"&&!ec(O)&&O.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=O,Vv(c,f,O,x,C)):(c=Mo(v.type,null,x,f,f.mode,C),c.ref=f.ref,c.return=f,f.child=c)}if(O=c.child,!yf(c,C)){var j=O.memoizedProps;if(v=v.compare,v=v!==null?v:We,v(j,x)&&c.ref===f.ref)return Ua(c,f,C)}return f.flags|=1,c=Rs(O,x),c.ref=f.ref,c.return=f,f.child=c}function Vv(c,f,v,x,C){if(c!==null){var O=c.memoizedProps;if(We(O,x)&&c.ref===f.ref)if(xi=!1,f.pendingProps=x=O,yf(c,C))(c.flags&131072)!==0&&(xi=!0);else return f.lanes=c.lanes,Ua(c,f,C)}return eh(c,f,v,x,C)}function Hv(c,f,v,x){var C=x.children,O=c!==null?c.memoizedState:null;if(c===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((f.flags&128)!==0){if(O=O!==null?O.baseLanes|v:v,c!==null){for(x=f.child=c.child,C=0;x!==null;)C=C|x.lanes|x.childLanes,x=x.sibling;x=C&~O}else x=0,f.child=null;return Jc(c,f,O,v,x)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Mt(f,O!==null?O.cachePool:null),O!==null?St(f,O):ht(),ye(f);else return x=f.lanes=536870912,Jc(c,f,O!==null?O.baseLanes|v:v,v,x)}else O!==null?(Mt(f,O.cachePool),St(f,O),he(),f.memoizedState=null):(c!==null&&Mt(f,null),ht(),he());return Dr(c,f,C,v),f.child}function Zl(c,f){return c!==null&&c.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function Jc(c,f,v,x,C){var O=et();return O=O===null?null:{parent:$i?Ai._currentValue:Ai._currentValue2,pool:O},f.memoizedState={baseLanes:v,cachePool:O},c!==null&&Mt(f,null),ht(),ye(f),c!==null&&Et(c,f,x,!0),f.childLanes=C,null}function Jd(c,f){return f=tl({mode:f.mode,children:f.children},c.mode),f.ref=c.ref,c.child=f,f.return=c,f}function ym(c,f,v){return Pr(f,c.child,null,v),c=Jd(f,f.pendingProps),c.flags|=2,$e(f),f.memoizedState=null,c}function Gv(c,f,v){var x=f.pendingProps,C=(f.flags&128)!==0;if(f.flags&=-129,c===null){if(zn){if(x.mode==="hidden")return c=Jd(f,x),f.lanes=536870912,Zl(null,c);if(ve(f),(c=Ti)?(c=sg(c,Qr),c!==null&&(f.memoizedState={dehydrated:c,treeContext:sa!==null?{id:Or,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},v=Lm(c),v.return=f,f.child=v,hr=f,Ti=null)):c=null,c===null)throw yt(f);return f.lanes=536870912,null}return Jd(f,x)}var O=c.memoizedState;if(O!==null){var j=O.dehydrated;if(ve(f),C)if(f.flags&256)f.flags&=-257,f=ym(c,f,v);else if(f.memoizedState!==null)f.child=c.child,f.flags|=128,f=null;else throw Error(r(558));else if(xi||Et(c,f,v,!1),C=(v&c.childLanes)!==0,xi||C){if(x=Rn,x!==null&&(j=U(x,v),j!==0&&j!==O.retryLane))throw O.retryLane=j,en(c,j),Di(x,c,j),es;cu(),f=ym(c,f,v)}else c=O.treeContext,wi&&(Ti=Ty(j),hr=f,zn=!0,Ka=null,Qr=!1,c!==null&&ke(f,c)),f=Jd(f,x),f.flags|=4096;return f}return c=Rs(c.child,{mode:x.mode,children:x.children}),c.ref=f.ref,f.child=c,c.return=f,c}function vf(c,f){var v=f.ref;if(v===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(r(284));(c===null||c.ref!==v)&&(f.flags|=4194816)}}function eh(c,f,v,x,C){return lt(f),v=vt(c,f,v,x,void 0,C),x=gn(),c!==null&&!xi?(Yn(c,f,C),Ua(c,f,C)):(zn&&x&&pe(f),f.flags|=1,Dr(c,f,v,C),f.child)}function _m(c,f,v,x,C,O){return lt(f),f.updateQueue=null,v=xt(f,x,v,C),Ht(c),x=gn(),c!==null&&!xi?(Yn(c,f,O),Ua(c,f,O)):(zn&&x&&pe(f),f.flags|=1,Dr(c,f,v,O),f.child)}function Kl(c,f,v,x,C){if(lt(f),f.stateNode===null){var O=qa,j=v.contextType;typeof j=="object"&&j!==null&&(O=G(j)),O=new v(x,O),f.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Wf,f.stateNode=O,O._reactInternals=f,O=f.stateNode,O.props=x,O.state=f.memoizedState,O.refs={},H(f),j=v.contextType,O.context=typeof j=="object"&&j!==null?G(j):qa,O.state=f.memoizedState,j=v.getDerivedStateFromProps,typeof j=="function"&&(mm(f,v,j,x),O.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(j=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),j!==O.state&&Wf.enqueueReplaceState(O,O.state,null),rt(f,x,O,C),at(),O.state=f.memoizedState),typeof O.componentDidMount=="function"&&(f.flags|=4194308),x=!0}else if(c===null){O=f.stateNode;var fe=f.memoizedProps,Le=Yl(v,fe);O.props=Le;var st=O.context,Tt=v.contextType;j=qa,typeof Tt=="object"&&Tt!==null&&(j=G(Tt));var ut=v.getDerivedStateFromProps;Tt=typeof ut=="function"||typeof O.getSnapshotBeforeUpdate=="function",fe=f.pendingProps!==fe,Tt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(fe||st!==j)&&Uv(f,O,x,j),Is=!1;var Ut=f.memoizedState;O.state=Ut,rt(f,x,O,C),at(),st=f.memoizedState,fe||Ut!==st||Is?(typeof ut=="function"&&(mm(f,v,ut,x),st=f.memoizedState),(Le=Is||Kd(f,v,Le,x,Ut,st,j))?(Tt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(f.flags|=4194308)):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=x,f.memoizedState=st),O.props=x,O.state=st,O.context=j,x=Le):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),x=!1)}else{O=f.stateNode,Z(c,f),j=f.memoizedProps,Tt=Yl(v,j),O.props=Tt,ut=f.pendingProps,Ut=O.context,st=v.contextType,Le=qa,typeof st=="object"&&st!==null&&(Le=G(st)),fe=v.getDerivedStateFromProps,(st=typeof fe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(j!==ut||Ut!==Le)&&Uv(f,O,x,Le),Is=!1,Ut=f.memoizedState,O.state=Ut,rt(f,x,O,C),at();var vn=f.memoizedState;j!==ut||Ut!==vn||Is||c!==null&&c.dependencies!==null&&Vt(c.dependencies)?(typeof fe=="function"&&(mm(f,v,fe,x),vn=f.memoizedState),(Tt=Is||Kd(f,v,Tt,x,Ut,vn,Le)||c!==null&&c.dependencies!==null&&Vt(c.dependencies))?(st||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(x,vn,Le),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(x,vn,Le)),typeof O.componentDidUpdate=="function"&&(f.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof O.componentDidUpdate!="function"||j===c.memoizedProps&&Ut===c.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||j===c.memoizedProps&&Ut===c.memoizedState||(f.flags|=1024),f.memoizedProps=x,f.memoizedState=vn),O.props=x,O.state=vn,O.context=Le,x=Tt):(typeof O.componentDidUpdate!="function"||j===c.memoizedProps&&Ut===c.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||j===c.memoizedProps&&Ut===c.memoizedState||(f.flags|=1024),x=!1)}return O=x,vf(c,f),x=(f.flags&128)!==0,O||x?(O=f.stateNode,v=x&&typeof v.getDerivedStateFromError!="function"?null:O.render(),f.flags|=1,c!==null&&x?(f.child=Pr(f,c.child,null,C),f.child=Pr(f,null,v,C)):Dr(c,f,v,C),f.memoizedState=O.state,c=f.child):c=Ua(c,f,C),c}function Wv(c,f,v,x){return zt(),f.flags|=256,Dr(c,f,v,x),f.child}function bm(c){return{baseLanes:c,cachePool:it()}}function xm(c,f,v){return c=c!==null?c.childLanes&~v:0,f&&(c|=ts),c}function Sm(c,f,v){var x=f.pendingProps,C=!1,O=(f.flags&128)!==0,j;if((j=O)||(j=c!==null&&c.memoizedState===null?!1:(Fi.current&2)!==0),j&&(C=!0,f.flags&=-129),j=(f.flags&32)!==0,f.flags&=-33,c===null){if(zn){if(C?se(f):he(),(c=Ti)?(c=Dy(c,Qr),c!==null&&(f.memoizedState={dehydrated:c,treeContext:sa!==null?{id:Or,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},v=Lm(c),v.return=f,f.child=v,hr=f,Ti=null)):c=null,c===null)throw yt(f);return Eh(c)?f.lanes=32:f.lanes=536870912,null}var fe=x.children;return x=x.fallback,C?(he(),C=f.mode,fe=tl({mode:"hidden",children:fe},C),x=ea(x,C,v,null),fe.return=f,x.return=f,fe.sibling=x,f.child=fe,x=f.child,x.memoizedState=bm(v),x.childLanes=xm(c,j,v),f.memoizedState=vc,Zl(null,x)):(se(f),th(f,fe))}var Le=c.memoizedState;if(Le!==null&&(fe=Le.dehydrated,fe!==null)){if(O)f.flags&256?(se(f),f.flags&=-257,f=Ql(c,f,v)):f.memoizedState!==null?(he(),f.child=c.child,f.flags|=128,f=null):(he(),fe=x.fallback,C=f.mode,x=tl({mode:"visible",children:x.children},C),fe=ea(fe,C,v,null),fe.flags|=2,x.return=f,fe.return=f,x.sibling=fe,f.child=x,Pr(f,c.child,null,v),x=f.child,x.memoizedState=bm(v),x.childLanes=xm(c,j,v),f.memoizedState=vc,f=Zl(null,x));else if(se(f),Eh(fe))j=wh(fe).digest,x=Error(r(419)),x.stack="",x.digest=j,Je({value:x,source:null,stack:null}),f=Ql(c,f,v);else if(xi||Et(c,f,v,!1),j=(v&c.childLanes)!==0,xi||j){if(j=Rn,j!==null&&(x=U(j,v),x!==0&&x!==Le.retryLane))throw Le.retryLane=x,en(c,x),Di(j,c,x),es;pl(fe)||cu(),f=Ql(c,f,v)}else pl(fe)?(f.flags|=192,f.child=c.child,f=null):(c=Le.treeContext,wi&&(Ti=Ay(fe),hr=f,zn=!0,Ka=null,Qr=!1,c!==null&&ke(f,c)),f=th(f,x.children),f.flags|=4096);return f}return C?(he(),fe=x.fallback,C=f.mode,Le=c.child,O=Le.sibling,x=Rs(Le,{mode:"hidden",children:x.children}),x.subtreeFlags=Le.subtreeFlags&65011712,O!==null?fe=Rs(O,fe):(fe=ea(fe,C,v,null),fe.flags|=2),fe.return=f,x.return=f,x.sibling=fe,f.child=x,Zl(null,x),x=f.child,fe=c.child.memoizedState,fe===null?fe=bm(v):(C=fe.cachePool,C!==null?(Le=$i?Ai._currentValue:Ai._currentValue2,C=C.parent!==Le?{parent:Le,pool:Le}:C):C=it(),fe={baseLanes:fe.baseLanes|v,cachePool:C}),x.memoizedState=fe,x.childLanes=xm(c,j,v),f.memoizedState=vc,Zl(c.child,x)):(se(f),v=c.child,c=v.sibling,v=Rs(v,{mode:"visible",children:x.children}),v.return=f,v.sibling=null,c!==null&&(j=f.deletions,j===null?(f.deletions=[c],f.flags|=16):j.push(c)),f.child=v,f.memoizedState=null,v)}function th(c,f){return f=tl({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function tl(c,f){return c=t(22,c,null,f),c.lanes=0,c}function Ql(c,f,v){return Pr(f,c.child,null,v),c=th(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function $v(c,f,v){c.lanes|=f;var x=c.alternate;x!==null&&(x.lanes|=f),te(c.return,f,v)}function eu(c,f,v,x,C,O){var j=c.memoizedState;j===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:x,tail:v,tailMode:C,treeForkCount:O}:(j.isBackwards=f,j.rendering=null,j.renderingStartTime=0,j.last=x,j.tail=v,j.tailMode=C,j.treeForkCount=O)}function Mm(c,f,v){var x=f.pendingProps,C=x.revealOrder,O=x.tail;x=x.children;var j=Fi.current,fe=(j&2)!==0;if(fe?(j=j&1|2,f.flags|=128):j&=1,S(Fi,j),Dr(c,f,x,v),x=zn?Vf:0,!fe&&c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&$v(c,v,f);else if(c.tag===19)$v(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(C){case"forwards":for(v=f.child,C=null;v!==null;)c=v.alternate,c!==null&&ot(c)===null&&(C=v),v=v.sibling;v=C,v===null?(C=f.child,f.child=null):(C=v.sibling,v.sibling=null),eu(f,!1,C,v,O,x);break;case"backwards":case"unstable_legacy-backwards":for(v=null,C=f.child,f.child=null;C!==null;){if(c=C.alternate,c!==null&&ot(c)===null){f.child=C;break}c=C.sibling,C.sibling=v,v=C,C=c}eu(f,!0,v,null,O,x);break;case"together":eu(f,!1,null,null,void 0,x);break;default:f.memoizedState=null}return f.child}function Ua(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),Io|=f.lanes,(v&f.childLanes)===0)if(c!==null){if(Et(c,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,v=Rs(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=Rs(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function yf(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Vt(c)))}function Em(c,f,v){switch(f.tag){case 3:pt(f,f.stateNode.containerInfo),He(f,Ai,c.memoizedState.cache),zt();break;case 27:case 5:Re(f);break;case 4:pt(f,f.stateNode.containerInfo);break;case 10:He(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,ve(f),null;break;case 13:var x=f.memoizedState;if(x!==null)return x.dehydrated!==null?(se(f),f.flags|=128,null):(v&f.child.childLanes)!==0?Sm(c,f,v):(se(f),c=Ua(c,f,v),c!==null?c.sibling:null);se(f);break;case 19:var C=(c.flags&128)!==0;if(x=(v&f.childLanes)!==0,x||(Et(c,f,v,!1),x=(v&f.childLanes)!==0),C){if(x)return Mm(c,f,v);f.flags|=128}if(C=f.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),S(Fi,Fi.current),x)break;return null;case 22:return f.lanes=0,Hv(c,f,v,f.pendingProps);case 24:He(f,Ai,c.memoizedState.cache)}return Ua(c,f,v)}function wm(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps)xi=!0;else{if(!yf(c,v)&&(f.flags&128)===0)return xi=!1,Em(c,f,v);xi=(c.flags&131072)!==0}else xi=!1,zn&&(f.flags&1048576)!==0&&Y(f,Vf,f.index);switch(f.lanes=0,f.tag){case 16:e:{var x=f.pendingProps;if(c=mn(f.elementType),f.type=c,typeof c=="function")ec(c)?(x=Yl(c,x),f.tag=1,f=Kl(null,f,c,x,v)):(f.tag=0,f=eh(null,f,c,x,v));else{if(c!=null){var C=c.$$typeof;if(C===hu){f.tag=11,f=Bv(null,f,c,x,v);break e}else if(C===yh){f.tag=14,f=kv(null,f,c,x,v);break e}}throw f=y(c)||c,Error(r(306,f,""))}}return f;case 0:return eh(c,f,f.type,f.pendingProps,v);case 1:return x=f.type,C=Yl(x,f.pendingProps),Kl(c,f,x,C,v);case 3:e:{if(pt(f,f.stateNode.containerInfo),c===null)throw Error(r(387));var O=f.pendingProps;C=f.memoizedState,x=C.element,Z(c,f),rt(f,O,null,v);var j=f.memoizedState;if(O=j.cache,He(f,Ai,O),O!==C.cache&&kt(f,[Ai],v,!0),at(),O=j.element,wi&&C.isDehydrated)if(C={element:O,isDehydrated:!1,cache:j.cache},f.updateQueue.baseState=C,f.memoizedState=C,f.flags&256){f=Wv(c,f,O,v);break e}else if(O!==x){x=Me(Error(r(424)),f),Je(x),f=Wv(c,f,O,v);break e}else for(wi&&(Ti=wy(f.stateNode.containerInfo),hr=f,zn=!0,Ka=null,Qr=!0),v=xg(f,null,O,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(zt(),O===x){f=Ua(c,f,v);break e}Dr(c,f,O,v)}f=f.child}return f;case 26:if(ia)return vf(c,f),c===null?(v=ug(f.type,null,f.pendingProps,null))?f.memoizedState=v:zn||(f.stateNode=Rh(f.type,f.pendingProps,Ir.current,f)):f.memoizedState=ug(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:if(dr)return Re(f),c===null&&dr&&zn&&(x=f.stateNode=Dh(f.type,f.pendingProps,Ir.current,wr.current,!1),hr=f,Qr=!0,Ti=rg(f.type,x,Ti)),Dr(c,f,f.pendingProps.children,v),vf(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&zn&&(By(f.type,f.pendingProps,wr.current),(C=x=Ti)&&(x=Cy(x,f.type,f.pendingProps,Qr),x!==null?(f.stateNode=x,hr=f,Ti=Ey(x),Qr=!1,C=!0):C=!1),C||yt(f)),Re(f),C=f.type,O=f.pendingProps,j=c!==null?c.memoizedProps:null,x=O.children,Kr(C,O)?x=null:j!==null&&Kr(C,j)&&(f.flags|=32),f.memoizedState!==null&&(C=vt(c,f,Ft,null,null,v),$i?cc._currentValue=C:cc._currentValue2=C),vf(c,f),Dr(c,f,x,v),f.child;case 6:return c===null&&zn&&(cg(f.pendingProps,wr.current),(c=v=Ti)&&(v=Ry(v,f.pendingProps,Qr),v!==null?(f.stateNode=v,hr=f,Ti=null,c=!0):c=!1),c||yt(f)),null;case 13:return Sm(c,f,v);case 4:return pt(f,f.stateNode.containerInfo),x=f.pendingProps,c===null?f.child=Pr(f,null,x,v):Dr(c,f,x,v),f.child;case 11:return Bv(c,f,f.type,f.pendingProps,v);case 7:return Dr(c,f,f.pendingProps,v),f.child;case 8:return Dr(c,f,f.pendingProps.children,v),f.child;case 12:return Dr(c,f,f.pendingProps.children,v),f.child;case 10:return x=f.pendingProps,He(f,f.type,x.value),Dr(c,f,x.children,v),f.child;case 9:return C=f.type._context,x=f.pendingProps.children,lt(f),C=G(C),x=x(C),f.flags|=1,Dr(c,f,x,v),f.child;case 14:return kv(c,f,f.type,f.pendingProps,v);case 15:return Vv(c,f,f.type,f.pendingProps,v);case 19:return Mm(c,f,v);case 31:return Gv(c,f,v);case 22:return Hv(c,f,v,f.pendingProps);case 24:return lt(f),x=G(Ai),c===null?(C=et(),C===null&&(C=Rn,O=Ae(),C.pooledCache=O,O.refCount++,O!==null&&(C.pooledCacheLanes|=v),C=O),f.memoizedState={parent:x,cache:C},H(f),He(f,Ai,C)):((c.lanes&v)!==0&&(Z(c,f),rt(f,null,null,v),at()),C=c.memoizedState,O=f.memoizedState,C.parent!==x?(C={parent:x,cache:x},f.memoizedState=C,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=C),He(f,Ai,x)):(x=O.cache,He(f,Ai,x),x!==C.cache&&kt(f,[Ai],v,!0))),Dr(c,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Ys(c){c.flags|=4}function _f(c){Ds&&(c.flags|=8)}function jv(c,f){if(c!==null&&c.child===f.child)return!1;if((f.flags&16)!==0)return!0;for(c=f.child;c!==null;){if((c.flags&8218)!==0||(c.subtreeFlags&8218)!==0)return!0;c=c.sibling}return!1}function Tm(c,f,v,x){if(kn)for(v=f.child;v!==null;){if(v.tag===5||v.tag===6)Pf(c,v.stateNode);else if(!(v.tag===4||dr&&v.tag===27)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}else if(Ds)for(var C=f.child;C!==null;){if(C.tag===5){var O=C.stateNode;v&&x&&(O=by(O,C.type,C.memoizedProps)),Pf(c,O)}else if(C.tag===6)O=C.stateNode,v&&x&&(O=ng(O,C.memoizedProps)),Pf(c,O);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)O=C.child,O!==null&&(O.return=C),Tm(c,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function Xv(c,f,v,x){var C=!1;if(Ds)for(var O=f.child;O!==null;){if(O.tag===5){var j=O.stateNode;v&&x&&(j=by(j,O.type,O.memoizedProps)),eg(c,j)}else if(O.tag===6)j=O.stateNode,v&&x&&(j=ng(j,O.memoizedProps)),eg(c,j);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)C=O.child,C!==null&&(C.return=O),Xv(c,O,!0,!0),C=!0;else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===f)break;for(;O.sibling===null;){if(O.return===null||O.return===f)return C;O=O.return}O.sibling.return=O.return,O=O.sibling}return C}function qv(c,f){if(Ds&&jv(c,f)){c=f.stateNode;var v=c.containerInfo,x=Jm();Xv(x,f,!1,!1),c.pendingChildren=x,Ys(f),_y(v,x)}}function Am(c,f,v,x){if(kn)c.memoizedProps!==x&&Ys(f);else if(Ds){var C=c.stateNode,O=c.memoizedProps;if((c=jv(c,f))||O!==x){var j=wr.current;O=yy(C,v,O,x,!c,null),O===C?f.stateNode=C:(_f(f),cs(O,v,x,j)&&Ys(f),f.stateNode=O,c&&Tm(O,f,!1,!1))}else f.stateNode=C}}function qr(c,f,v,x,C){if((c.mode&32)!==0&&(v===null?Nf(f,x):yu(f,v,x))){if(c.flags|=16777216,(C&335544128)===C||Hm(f,x))if(Oi(c.stateNode,f,x))c.flags|=8192;else if(Bn())c.flags|=8192;else throw Jr=Qa,Vh}else c.flags&=-16777217}function tu(c,f){if(pg(f)){if(c.flags|=16777216,!mg(f))if(Bn())c.flags|=8192;else throw Jr=Qa,Vh}else c.flags&=-16777217}function bf(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?I():536870912,c.lanes|=f,Au|=f)}function nu(c,f){if(!zn)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:x.sibling=null}}function ui(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,x=0;if(f)for(var C=c.child;C!==null;)v|=C.lanes|C.childLanes,x|=C.subtreeFlags&65011712,x|=C.flags&65011712,C.return=c,C=C.sibling;else for(C=c.child;C!==null;)v|=C.lanes|C.childLanes,x|=C.subtreeFlags,x|=C.flags,C.return=c,C=C.sibling;return c.subtreeFlags|=x,c.childLanes=v,f}function Yv(c,f,v){var x=f.pendingProps;switch(we(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ui(f),null;case 1:return ui(f),null;case 3:return v=f.stateNode,x=null,c!==null&&(x=c.memoizedState.cache),f.memoizedState.cache!==x&&(f.flags|=2048),mt(Ai),ge(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(cn(f)?Ys(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Ve())),qv(c,f),ui(f),null;case 26:if(ia){var C=f.type,O=f.memoizedState;return c===null?(Ys(f),O!==null?(ui(f),tu(f,O)):(ui(f),qr(f,C,null,x,v))):O?O!==c.memoizedState?(Ys(f),ui(f),tu(f,O)):(ui(f),f.flags&=-16777217):(O=c.memoizedProps,kn?O!==x&&Ys(f):Am(c,f,C,x),ui(f),qr(f,C,O,x,v)),null}case 27:if(dr){if(tt(f),v=Ir.current,C=f.type,c!==null&&f.stateNode!=null)kn?c.memoizedProps!==x&&Ys(f):Am(c,f,C,x);else{if(!x){if(f.stateNode===null)throw Error(r(166));return ui(f),null}c=wr.current,cn(f)?Rt(f,c):(c=Dh(C,x,v,c,!0),f.stateNode=c,Ys(f))}return ui(f),null}case 5:if(tt(f),C=f.type,c!==null&&f.stateNode!=null)Am(c,f,C,x);else{if(!x){if(f.stateNode===null)throw Error(r(166));return ui(f),null}if(O=wr.current,cn(f))Rt(f,O),Uy(f.stateNode,C,x,O)&&(f.flags|=64);else{var j=km(C,x,Ir.current,O,f);_f(f),Tm(j,f,!1,!1),f.stateNode=j,cs(j,C,x,O)&&Ys(f)}}return ui(f),qr(f,f.type,c===null?null:c.memoizedProps,f.pendingProps,v),null;case 6:if(c&&f.stateNode!=null)v=c.memoizedProps,kn?v!==x&&Ys(f):Ds&&(v!==x?(c=Ir.current,v=wr.current,_f(f),f.stateNode=To(x,c,v,f)):f.stateNode=c.stateNode);else{if(typeof x!="string"&&f.stateNode===null)throw Error(r(166));if(c=Ir.current,v=wr.current,cn(f)){if(!wi)throw Error(r(176));if(c=f.stateNode,v=f.memoizedProps,x=null,C=hr,C!==null)switch(C.tag){case 27:case 5:x=C.memoizedProps}KS(c,v,f,x)||yt(f,!0)}else _f(f),f.stateNode=To(x,c,v,f)}return ui(f),null;case 31:if(v=f.memoizedState,c===null||c.memoizedState!==null){if(x=cn(f),v!==null){if(c===null){if(!x)throw Error(r(318));if(!wi)throw Error(r(556));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(557));ag(c,f)}else zt(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ui(f),c=!1}else v=Ve(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=v),c=!0;if(!c)return f.flags&256?($e(f),f):($e(f),null);if((f.flags&128)!==0)throw Error(r(558))}return ui(f),null;case 13:if(x=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(C=cn(f),x!==null&&x.dehydrated!==null){if(c===null){if(!C)throw Error(r(318));if(!wi)throw Error(r(344));if(C=f.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));Iy(C,f)}else zt(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ui(f),C=!1}else C=Ve(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=C),C=!0;if(!C)return f.flags&256?($e(f),f):($e(f),null)}return $e(f),(f.flags&128)!==0?(f.lanes=v,f):(v=x!==null,c=c!==null&&c.memoizedState!==null,v&&(x=f.child,C=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(C=x.alternate.memoizedState.cachePool.pool),O=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(O=x.memoizedState.cachePool.pool),O!==C&&(x.flags|=2048)),v!==c&&v&&(f.child.flags|=8192),bf(f,f.updateQueue),ui(f),null);case 4:return ge(),qv(c,f),c===null&&ai(f.stateNode.containerInfo),ui(f),null;case 10:return mt(f.type),ui(f),null;case 19:if(b(Fi),x=f.memoizedState,x===null)return ui(f),null;if(C=(f.flags&128)!==0,O=x.rendering,O===null)if(C)nu(x,!1);else{if(Ni!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(O=ot(c),O!==null){for(f.flags|=128,nu(x,!1),c=O.updateQueue,f.updateQueue=c,bf(f,c),f.subtreeFlags=0,c=v,v=f.child;v!==null;)hh(v,c),v=v.sibling;return S(Fi,Fi.current&1|2),zn&&Se(f,x.treeForkCount),f.child}c=c.sibling}x.tail!==null&&Br()>wl&&(f.flags|=128,C=!0,nu(x,!1),f.lanes=4194304)}else{if(!C)if(c=ot(O),c!==null){if(f.flags|=128,C=!0,c=c.updateQueue,f.updateQueue=c,bf(f,c),nu(x,!0),x.tail===null&&x.tailMode==="hidden"&&!O.alternate&&!zn)return ui(f),null}else 2*Br()-x.renderingStartTime>wl&&v!==536870912&&(f.flags|=128,C=!0,nu(x,!1),f.lanes=4194304);x.isBackwards?(O.sibling=f.child,f.child=O):(c=x.last,c!==null?c.sibling=O:f.child=O,x.last=O)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Br(),c.sibling=null,v=Fi.current,S(Fi,C?v&1|2:v&1),zn&&Se(f,x.treeForkCount),c):(ui(f),null);case 22:case 23:return $e(f),$(),x=f.memoizedState!==null,c!==null?c.memoizedState!==null!==x&&(f.flags|=8192):x&&(f.flags|=8192),x?(v&536870912)!==0&&(f.flags&128)===0&&(ui(f),f.subtreeFlags&6&&(f.flags|=8192)):ui(f),v=f.updateQueue,v!==null&&bf(f,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),x=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),x!==v&&(f.flags|=2048),c!==null&&b(vl),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),mt(Ai),ui(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function Cm(c,f){switch(we(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return mt(Ai),ge(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return tt(f),null;case 31:if(f.memoizedState!==null){if($e(f),f.alternate===null)throw Error(r(340));zt()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 13:if($e(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));zt()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return b(Fi),null;case 4:return ge(),null;case 10:return mt(f.type),null;case 22:case 23:return $e(f),$(),c!==null&&b(vl),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return mt(Ai),null;case 25:return null;default:return null}}function Zv(c,f){switch(we(f),f.tag){case 3:mt(Ai),ge();break;case 26:case 27:case 5:tt(f);break;case 4:ge();break;case 31:f.memoizedState!==null&&$e(f);break;case 13:$e(f);break;case 19:b(Fi);break;case 10:mt(f.type);break;case 22:case 23:$e(f),$(),c!==null&&b(vl);break;case 24:mt(Ai)}}function za(c,f){try{var v=f.updateQueue,x=v!==null?v.lastEffect:null;if(x!==null){var C=x.next;v=C;do{if((v.tag&c)===c){x=void 0;var O=v.create,j=v.inst;x=O(),j.destroy=x}v=v.next}while(v!==C)}}catch(fe){ln(f,f.return,fe)}}function Fa(c,f,v){try{var x=f.updateQueue,C=x!==null?x.lastEffect:null;if(C!==null){var O=C.next;x=O;do{if((x.tag&c)===c){var j=x.inst,fe=j.destroy;if(fe!==void 0){j.destroy=void 0,C=f;var Le=v,st=fe;try{st()}catch(Tt){ln(C,Le,Tt)}}}x=x.next}while(x!==O)}}catch(Tt){ln(f,f.return,Tt)}}function iu(c){var f=c.updateQueue;if(f!==null){var v=c.stateNode;try{gt(f,v)}catch(x){ln(c,c.return,x)}}}function nh(c,f,v){v.props=Yl(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(x){ln(c,f,x)}}function ru(c,f){try{var v=c.ref;if(v!==null){switch(c.tag){case 26:case 27:case 5:var x=mu(c.stateNode);break;case 30:x=c.stateNode;break;default:x=c.stateNode}typeof v=="function"?c.refCleanup=v(x):v.current=x}}catch(C){ln(c,f,C)}}function Fr(c,f){var v=c.ref,x=c.refCleanup;if(v!==null)if(typeof x=="function")try{x()}catch(C){ln(c,f,C)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(C){ln(c,f,C)}else v.current=null}function Jl(c){var f=c.type,v=c.memoizedProps,x=c.stateNode;try{uy(x,f,v,c)}catch(C){ln(c,c.return,C)}}function xf(c,f,v){try{fy(c.stateNode,c.type,v,f,c)}catch(x){ln(c,c.return,x)}}function Rm(c){return c.tag===5||c.tag===3||(ia?c.tag===26:!1)||(dr?c.tag===27&&uc(c.type):!1)||c.tag===4}function yo(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Rm(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(dr&&c.tag===27&&uc(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ih(c,f,v){var x=c.tag;if(x===5||x===6)c=c.stateNode,f?hy(v,c,f):Ym(v,c);else if(x!==4&&(dr&&x===27&&uc(c.type)&&(v=c.stateNode,f=null),c=c.child,c!==null))for(ih(c,f,v),c=c.sibling;c!==null;)ih(c,f,v),c=c.sibling}function Sf(c,f,v){var x=c.tag;if(x===5||x===6)c=c.stateNode,f?dy(v,c,f):qm(v,c);else if(x!==4&&(dr&&x===27&&uc(c.type)&&(v=c.stateNode),c=c.child,c!==null))for(Sf(c,f,v),c=c.sibling;c!==null;)Sf(c,f,v),c=c.sibling}function Dm(c,f,v){c=c.containerInfo;try{tg(c,v)}catch(x){ln(f,f.return,x)}}function Kv(c){var f=c.stateNode,v=c.memoizedProps;try{nr(c.type,v,f,c)}catch(x){ln(c,c.return,x)}}function XS(c,f){for(_h(c.containerInfo),qi=f;qi!==null;)if(c=qi,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,qi=f;else for(;qi!==null;){c=qi;var v=c.alternate;switch(f=c.flags,c.tag){case 0:if((f&4)!==0&&(f=c.updateQueue,f=f!==null?f.events:null,f!==null))for(var x=0;x<f.length;x++){var C=f[x];C.ref.impl=C.nextImpl}break;case 11:case 15:break;case 1:if((f&1024)!==0&&v!==null){f=void 0,x=c,C=v.memoizedProps,v=v.memoizedState;var O=x.stateNode;try{var j=Yl(x.type,C);f=O.getSnapshotBeforeUpdate(j,v),O.__reactInternalSnapshotBeforeUpdate=f}catch(fe){ln(x,x.return,fe)}}break;case 3:(f&1024)!==0&&kn&&Qm(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=c.sibling,f!==null){f.return=c.return,qi=f;break}qi=c.return}}function Qv(c,f,v){var x=v.flags;switch(v.tag){case 0:case 11:case 15:Yr(c,v),x&4&&za(5,v);break;case 1:if(Yr(c,v),x&4)if(c=v.stateNode,f===null)try{c.componentDidMount()}catch(j){ln(v,v.return,j)}else{var C=Yl(v.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(C,f,c.__reactInternalSnapshotBeforeUpdate)}catch(j){ln(v,v.return,j)}}x&64&&iu(v),x&512&&ru(v,v.return);break;case 3:if(Yr(c,v),x&64&&(x=v.updateQueue,x!==null)){if(c=null,v.child!==null)switch(v.child.tag){case 27:case 5:c=mu(v.child.stateNode);break;case 1:c=v.child.stateNode}try{gt(x,c)}catch(j){ln(v,v.return,j)}}break;case 27:dr&&f===null&&x&4&&Kv(v);case 26:case 5:if(Yr(c,v),f===null){if(x&4)Jl(v);else if(x&64){c=v.type,f=v.memoizedProps,C=v.stateNode;try{Ny(C,c,f,v)}catch(j){ln(v,v.return,j)}}}x&512&&ru(v,v.return);break;case 12:Yr(c,v);break;case 31:Yr(c,v),x&4&&Ks(c,v);break;case 13:Yr(c,v),x&4&&Ef(c,v),x&64&&(x=v.memoizedState,x!==null&&(x=x.dehydrated,x!==null&&(v=qS.bind(null,v),Th(x,v))));break;case 22:if(x=v.memoizedState!==null||Bi,!x){f=f!==null&&f.memoizedState!==null||ki,C=Bi;var O=ki;Bi=x,(ki=f)&&!O?Js(c,v,(v.subtreeFlags&8772)!==0):Yr(c,v),Bi=C,ki=O}break;case 30:break;default:Yr(c,v)}}function Om(c){var f=c.alternate;f!==null&&(c.alternate=null,Om(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&bh(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Zs(c,f,v){for(v=v.child;v!==null;)Mf(c,f,v),v=v.sibling}function Mf(c,f,v){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(hc,v)}catch{}switch(v.tag){case 26:if(ia){ki||Fr(v,f),Zs(c,f,v),v.memoizedState?ml(v.memoizedState):v.stateNode&&hg(v.stateNode);break}case 27:if(dr){ki||Fr(v,f);var x=Pi,C=Yi;uc(v.type)&&(Pi=v.stateNode,Yi=!1),Zs(c,f,v),Er(v.stateNode),Pi=x,Yi=C;break}case 5:ki||Fr(v,f);case 6:if(kn){if(x=Pi,C=Yi,Pi=null,Zs(c,f,v),Pi=x,Yi=C,Pi!==null)if(Yi)try{Zm(Pi,v.stateNode)}catch(O){ln(v,f,O)}else try{py(Pi,v.stateNode)}catch(O){ln(v,f,O)}}else Zs(c,f,v);break;case 18:kn&&Pi!==null&&(Yi?Ah(Pi,v.stateNode):lg(Pi,v.stateNode));break;case 4:kn?(x=Pi,C=Yi,Pi=v.stateNode.containerInfo,Yi=!0,Zs(c,f,v),Pi=x,Yi=C):(Ds&&Dm(v.stateNode,v,Jm()),Zs(c,f,v));break;case 0:case 11:case 14:case 15:Fa(2,v,f),ki||Fa(4,v,f),Zs(c,f,v);break;case 1:ki||(Fr(v,f),x=v.stateNode,typeof x.componentWillUnmount=="function"&&nh(v,f,x)),Zs(c,f,v);break;case 21:Zs(c,f,v);break;case 22:ki=(x=ki)||v.memoizedState!==null,Zs(c,f,v),ki=x;break;default:Zs(c,f,v)}}function Ks(c,f){if(wi&&f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{QS(c)}catch(v){ln(f,f.return,v)}}}function Ef(c,f){if(wi&&f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{JS(c)}catch(v){ln(f,f.return,v)}}function Qs(c){switch(c.tag){case 31:case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new Mg),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new Mg),f;default:throw Error(r(435,c.tag))}}function _o(c,f){var v=Qs(c);f.forEach(function(x){if(!v.has(x)){v.add(x);var C=YS.bind(null,c,x);x.then(C,C)}})}function Sr(c,f){var v=f.deletions;if(v!==null)for(var x=0;x<v.length;x++){var C=v[x],O=c,j=f;if(kn){var fe=j;e:for(;fe!==null;){switch(fe.tag){case 27:if(dr){if(uc(fe.type)){Pi=fe.stateNode,Yi=!1;break e}break}case 5:Pi=fe.stateNode,Yi=!1;break e;case 3:case 4:Pi=fe.stateNode.containerInfo,Yi=!0;break e}fe=fe.return}if(Pi===null)throw Error(r(160));Mf(O,j,C),Pi=null,Yi=!1}else Mf(O,j,C);O=C.alternate,O!==null&&(O.return=null),C.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)wf(f,c),f=f.sibling}function wf(c,f){var v=c.alternate,x=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Sr(f,c),Mr(c),x&4&&(Fa(3,c,c.return),za(3,c),Fa(5,c,c.return));break;case 1:Sr(f,c),Mr(c),x&512&&(ki||v===null||Fr(v,v.return)),x&64&&Bi&&(c=c.updateQueue,c!==null&&(x=c.callbacks,x!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?x:v.concat(x))));break;case 26:if(ia){var C=ri;if(Sr(f,c),Mr(c),x&512&&(ki||v===null||Fr(v,v.return)),x&4){x=v!==null?v.memoizedState:null;var O=c.memoizedState;v===null?O===null?c.stateNode===null?c.stateNode=ky(C,c.type,c.memoizedProps,c):dg(C,c.type,c.stateNode):c.stateNode=fg(C,O,c.memoizedProps):x!==O?(x===null?v.stateNode!==null&&hg(v.stateNode):ml(x),O===null?dg(C,c.type,c.stateNode):fg(C,O,c.memoizedProps)):O===null&&c.stateNode!==null&&xf(c,c.memoizedProps,v.memoizedProps)}break}case 27:if(dr){Sr(f,c),Mr(c),x&512&&(ki||v===null||Fr(v,v.return)),v!==null&&x&4&&xf(c,c.memoizedProps,v.memoizedProps);break}case 5:if(Sr(f,c),Mr(c),x&512&&(ki||v===null||Fr(v,v.return)),kn){if(c.flags&32){C=c.stateNode;try{Km(C)}catch(ut){ln(c,c.return,ut)}}x&4&&c.stateNode!=null&&(C=c.memoizedProps,xf(c,C,v!==null?v.memoizedProps:C)),x&1024&&(Su=!0)}else Ds&&c.alternate!==null&&(c.alternate.stateNode=c.stateNode);break;case 6:if(Sr(f,c),Mr(c),x&4&&kn){if(c.stateNode===null)throw Error(r(162));x=c.memoizedProps,v=v!==null?v.memoizedProps:x,C=c.stateNode;try{cy(C,v,x)}catch(ut){ln(c,c.return,ut)}}break;case 3:if(ia?(Vy(),C=ri,ri=zf(f.containerInfo),Sr(f,c),ri=C):Sr(f,c),Mr(c),x&4){if(kn&&wi&&v!==null&&v.memoizedState.isDehydrated)try{Ly(f.containerInfo)}catch(ut){ln(c,c.return,ut)}if(Ds){x=f.containerInfo,v=f.pendingChildren;try{tg(x,v)}catch(ut){ln(c,c.return,ut)}}}Su&&(Su=!1,rh(c));break;case 4:ia?(v=ri,ri=zf(c.stateNode.containerInfo),Sr(f,c),Mr(c),ri=v):(Sr(f,c),Mr(c)),x&4&&Ds&&Dm(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:Sr(f,c),Mr(c);break;case 31:Sr(f,c),Mr(c),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,_o(c,x)));break;case 13:Sr(f,c),Mr(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Xf=Br()),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,_o(c,x)));break;case 22:C=c.memoizedState!==null;var j=v!==null&&v.memoizedState!==null,fe=Bi,Le=ki;if(Bi=fe||C,ki=Le||j,Sr(f,c),ki=Le,Bi=fe,Mr(c),x&8192&&(f=c.stateNode,f._visibility=C?f._visibility&-2:f._visibility|1,C&&(v===null||j||Bi||ki||nl(c)),kn)){e:if(v=null,kn)for(f=c;;){if(f.tag===5||ia&&f.tag===26){if(v===null){j=v=f;try{O=j.stateNode,C?ZS(O):gy(j.stateNode,j.memoizedProps)}catch(ut){ln(j,j.return,ut)}}}else if(f.tag===6){if(v===null){j=f;try{var st=j.stateNode;C?my(st):vy(st,j.memoizedProps)}catch(ut){ln(j,j.return,ut)}}}else if(f.tag===18){if(v===null){j=f;try{var Tt=j.stateNode;C?zy(Tt):Fy(j.stateNode)}catch(ut){ln(j,j.return,ut)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}}x&4&&(x=c.updateQueue,x!==null&&(v=x.retryQueue,v!==null&&(x.retryQueue=null,_o(c,v))));break;case 19:Sr(f,c),Mr(c),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,_o(c,x)));break;case 30:break;case 21:break;default:Sr(f,c),Mr(c)}}function Mr(c){var f=c.flags;if(f&2){try{for(var v,x=c.return;x!==null;){if(Rm(x)){v=x;break}x=x.return}if(kn){if(v==null)throw Error(r(160));switch(v.tag){case 27:if(dr){var C=v.stateNode,O=yo(c);Sf(c,O,C);break}case 5:var j=v.stateNode;v.flags&32&&(Km(j),v.flags&=-33);var fe=yo(c);Sf(c,fe,j);break;case 3:case 4:var Le=v.stateNode.containerInfo,st=yo(c);ih(c,st,Le);break;default:throw Error(r(161))}}}catch(Tt){ln(c,c.return,Tt)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function rh(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;rh(f),f.tag===5&&f.flags&1024&&Wm(f.stateNode),c=c.sibling}}function Yr(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Qv(c,f.alternate,f),f=f.sibling}function nl(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:Fa(4,f,f.return),nl(f);break;case 1:Fr(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&nh(f,f.return,v),nl(f);break;case 27:dr&&Er(f.stateNode);case 26:case 5:Fr(f,f.return),nl(f);break;case 22:f.memoizedState===null&&nl(f);break;case 30:nl(f);break;default:nl(f)}c=c.sibling}}function Js(c,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var x=f.alternate,C=c,O=f,j=O.flags;switch(O.tag){case 0:case 11:case 15:Js(C,O,v),za(4,O);break;case 1:if(Js(C,O,v),x=O,C=x.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(st){ln(x,x.return,st)}if(x=O,C=x.updateQueue,C!==null){var fe=x.stateNode;try{var Le=C.shared.hiddenCallbacks;if(Le!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Le.length;C++)_t(Le[C],fe)}catch(st){ln(x,x.return,st)}}v&&j&64&&iu(O),ru(O,O.return);break;case 27:dr&&Kv(O);case 26:case 5:Js(C,O,v),v&&x===null&&j&4&&Jl(O),ru(O,O.return);break;case 12:Js(C,O,v);break;case 31:Js(C,O,v),v&&j&4&&Ks(C,O);break;case 13:Js(C,O,v),v&&j&4&&Ef(C,O);break;case 22:O.memoizedState===null&&Js(C,O,v),ru(O,O.return);break;case 30:break;default:Js(C,O,v)}f=f.sibling}}function il(c,f){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&Be(v))}function Im(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Be(c))}function Ri(c,f,v,x){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)sh(c,f,v,x),f=f.sibling}function sh(c,f,v,x){var C=f.flags;switch(f.tag){case 0:case 11:case 15:Ri(c,f,v,x),C&2048&&za(9,f);break;case 1:Ri(c,f,v,x);break;case 3:Ri(c,f,v,x),C&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Be(c)));break;case 12:if(C&2048){Ri(c,f,v,x),c=f.stateNode;try{var O=f.memoizedProps,j=O.id,fe=O.onPostCommit;typeof fe=="function"&&fe(j,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Le){ln(f,f.return,Le)}}else Ri(c,f,v,x);break;case 31:Ri(c,f,v,x);break;case 13:Ri(c,f,v,x);break;case 23:break;case 22:O=f.stateNode,j=f.alternate,f.memoizedState!==null?O._visibility&2?Ri(c,f,v,x):su(c,f):O._visibility&2?Ri(c,f,v,x):(O._visibility|=2,as(c,f,v,x,(f.subtreeFlags&10256)!==0||!1)),C&2048&&il(j,f);break;case 24:Ri(c,f,v,x),C&2048&&Im(f.alternate,f);break;default:Ri(c,f,v,x)}}function as(c,f,v,x,C){for(C=C&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var O=c,j=f,fe=v,Le=x,st=j.flags;switch(j.tag){case 0:case 11:case 15:as(O,j,fe,Le,C),za(8,j);break;case 23:break;case 22:var Tt=j.stateNode;j.memoizedState!==null?Tt._visibility&2?as(O,j,fe,Le,C):su(O,j):(Tt._visibility|=2,as(O,j,fe,Le,C)),C&&st&2048&&il(j.alternate,j);break;case 24:as(O,j,fe,Le,C),C&&st&2048&&Im(j.alternate,j);break;default:as(O,j,fe,Le,C)}f=f.sibling}}function su(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=c,x=f,C=x.flags;switch(x.tag){case 22:su(v,x),C&2048&&il(x.alternate,x);break;case 24:su(v,x),C&2048&&Im(x.alternate,x);break;default:su(v,x)}f=f.sibling}}function Ba(c,f,v){if(c.subtreeFlags&Ns)for(c=c.child;c!==null;)rl(c,f,v),c=c.sibling}function rl(c,f,v){switch(c.tag){case 26:if(Ba(c,f,v),c.flags&Ns)if(c.memoizedState!==null)Hy(v,ri,c.memoizedState,c.memoizedProps);else{var x=c.stateNode,C=c.type;c=c.memoizedProps,((f&335544128)===f||Hm(C,c))&&xh(v,x,C,c)}break;case 5:Ba(c,f,v),c.flags&Ns&&(x=c.stateNode,C=c.type,c=c.memoizedProps,((f&335544128)===f||Hm(C,c))&&xh(v,x,C,c));break;case 3:case 4:ia?(x=ri,ri=zf(c.stateNode.containerInfo),Ba(c,f,v),ri=x):Ba(c,f,v);break;case 22:c.memoizedState===null&&(x=c.alternate,x!==null&&x.memoizedState!==null?(x=Ns,Ns=16777216,Ba(c,f,v),Ns=x):Ba(c,f,v));break;default:Ba(c,f,v)}}function ah(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function au(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var x=f[v];qi=x,As(x,c)}ah(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)oh(c),c=c.sibling}function oh(c){switch(c.tag){case 0:case 11:case 15:au(c),c.flags&2048&&Fa(9,c,c.return);break;case 3:au(c);break;case 12:au(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,Tf(c)):au(c);break;default:au(c)}}function Tf(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var x=f[v];qi=x,As(x,c)}ah(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:Fa(8,f,f.return),Tf(f);break;case 22:v=f.stateNode,v._visibility&2&&(v._visibility&=-3,Tf(f));break;default:Tf(f)}c=c.sibling}}function As(c,f){for(;qi!==null;){var v=qi;switch(v.tag){case 0:case 11:case 15:Fa(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var x=v.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Be(v.memoizedState.cache)}if(x=v.child,x!==null)x.return=v,qi=x;else e:for(v=c;qi!==null;){x=qi;var C=x.sibling,O=x.return;if(Om(x),x===v){qi=null;break e}if(C!==null){C.return=O,qi=C;break e}qi=O}}}function sl(c){var f=_n(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(r(364));return f}if(c=ji(c),c===null)throw Error(r(362));return c.stateNode.current}function al(c,f){var v=c.tag;switch(f.$$typeof){case fa:if(c.type===f.value)return!0;break;case Eu:e:{for(f=f.value,c=[c,0],v=0;v<c.length;){var x=c[v++],C=x.tag,O=c[v++],j=f[O];if(C!==5&&C!==26&&C!==27||!hl(x)){for(;j!=null&&al(x,j);)O++,j=f[O];if(O===f.length){f=!0;break e}else for(x=x.child;x!==null;)c.push(x,O),x=x.sibling}}f=!1}return f;case wu:if((v===5||v===26||v===27)&&Xm(c.stateNode,f.value))return!0;break;case xl:if((v===5||v===6||v===26||v===27)&&(c=Lf(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case $f:if((v===5||v===26||v===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function ou(c){switch(c.$$typeof){case fa:return"<"+(y(c.value)||"Unknown")+">";case Eu:return":has("+(ou(c)||"")+")";case wu:return'[role="'+c.value+'"]';case xl:return'"'+c.value+'"';case $f:return'[data-testname="'+c.value+'"]';default:throw Error(r(365))}}function lu(c,f){var v=[];c=[c,0];for(var x=0;x<c.length;){var C=c[x++],O=C.tag,j=c[x++],fe=f[j];if(O!==5&&O!==26&&O!==27||!hl(C)){for(;fe!=null&&al(C,fe);)j++,fe=f[j];if(j===f.length)v.push(C);else for(C=C.child;C!==null;)c.push(C,j),C=C.sibling}}return v}function os(c,f){if(!fr)throw Error(r(363));c=sl(c),c=lu(c,f),f=[],c=Array.from(c);for(var v=0;v<c.length;){var x=c[v++],C=x.tag;if(C===5||C===26||C===27)hl(x)||f.push(x.stateNode);else for(x=x.child;x!==null;)c.push(x),x=x.sibling}return f}function Ei(){return(Nn&2)!==0&&Fn!==0?Fn&-Fn:Qt.T!==null?_e():vu()}function bo(){if(ts===0)if((Fn&536870912)===0||zn){var c=dc;dc<<=1,(dc&3932160)===0&&(dc=262144),ts=c}else ts=536870912;return c=hs.current,c!==null&&(c.flags|=32),ts}function Di(c,f,v){(c===Rn&&(si===2||si===9)||c.cancelPendingCommit!==null)&&(zi(c,0),Va(c,Fn,ts,!1)),N(c,v),((Nn&2)===0||c!==Rn)&&(c===Rn&&((Nn&2)===0&&(El|=v),Ni===4&&Va(c,Fn,ts,!1)),wt(c))}function ya(c,f,v){if((Nn&6)!==0)throw Error(r(327));var x=!v&&(f&127)===0&&(f&c.expiredLanes)===0||R(c,f),C=x?ty(c,f):Ha(c,f,!0),O=x;do{if(C===0){Sl&&!x&&Va(c,f,0,!1);break}else{if(v=c.current.alternate,O&&!Jv(v)){C=Ha(c,f,!1),O=!1;continue}if(C===2){if(O=f,c.errorRecoveryDisabledLanes&O)var j=0;else j=c.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){f=j;e:{var fe=c;C=jf;var Le=wi&&fe.current.memoizedState.isDehydrated;if(Le&&(zi(fe,j).flags|=256),j=Ha(fe,j,!1),j!==2){if(Ml&&!Le){fe.errorRecoveryDisabledLanes|=O,El|=O,C=4;break e}O=ms,ms=C,O!==null&&(ms===null?ms=O:ms.push.apply(ms,O))}C=j}if(O=!1,C!==2)continue}}if(C===1){zi(c,0),Va(c,f,0,!0);break}e:{switch(x=c,O=C,O){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Va(x,f,ts,!Sa);break e;case 2:ms=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(C=Xf+300-Br(),10<C)){if(Va(x,f,ts,!Sa),E(x,0,!0)!==0)break e;no=f,x.timeoutHandle=Vm(ka.bind(null,x,v,ms,qf,Gh,f,ts,El,Au,Sa,O,"Throttled",-0,0),C);break e}ka(x,v,ms,qf,Gh,f,ts,El,Au,Sa,O,null,-0,0)}}break}while(!0);wt(c)}function ka(c,f,v,x,C,O,j,fe,Le,st,Tt,ut,Ut,vn){if(c.timeoutHandle=us,ut=f.subtreeFlags,ut&8192||(ut&16785408)===16785408){ut=Gm(),rl(f,O,ut);var Zi=(O&62914560)===O?Xf-Br():(O&4194048)===O?_c-Br():0;if(Zi=ly(ut,Zi),Zi!==null){no=O,c.cancelPendingCommit=Zi(Wa.bind(null,c,f,O,v,x,C,j,fe,Le,Tt,ut,null,Ut,vn)),Va(c,O,j,!st);return}}Wa(c,f,O,v,x,C,j,fe,Le)}function Jv(c){for(var f=c;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var x=0;x<v.length;x++){var C=v[x],O=C.getSnapshot;C=C.value;try{if(!Xi(O(),C))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Va(c,f,v,x){f&=~Tu,f&=~El,c.suspendedLanes|=f,c.pingedLanes&=~f,x&&(c.warmLanes|=f),x=c.expirationTimes;for(var C=f;0<C;){var O=31-fs(C),j=1<<O;x[O]=-1,C&=~j}v!==0&&V(c,v,f)}function lh(){return(Nn&6)===0?(ft(0),!1):!0}function ch(){if(Ln!==null){if(si===0)var c=Ln.return;else c=Ln,ba=di=null,En(c),yl=null,pc=0,c=Ln;for(;c!==null;)Zv(c.alternate,c),c=c.return;Ln=null}}function zi(c,f){var v=c.timeoutHandle;v!==us&&(c.timeoutHandle=us,oy(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),no=0,ch(),Rn=c,Ln=v=Rs(c.current,null),Fn=f,si=0,ir=null,Sa=!1,Sl=R(c,f),Ml=!1,Au=ts=Tu=El=Io=Ni=0,ms=jf=null,Gh=!1,(f&8)!==0&&(f|=f&32);var x=c.entangledLanes;if(x!==0)for(c=c.entanglements,x&=f;0<x;){var C=31-fs(x),O=1<<C;f|=c[C],x&=~O}return to=f,Na(),v}function fi(c,f){bn=null,Qt.H=Ps,f===mr||f===ca?(f=yn(),si=3):f===Vh?(f=yn(),si=4):si=f===es?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,ir=f,Ln===null&&(Ni=1,Qd(c,Me(f,c.current)))}function Bn(){var c=hs.current;return c===null?!0:(Fn&4194048)===Fn?ps===null:(Fn&62914560)===Fn||(Fn&536870912)!==0?c===ps:!1}function xo(){var c=Qt.H;return Qt.H=Ps,c===null?Ps:c}function Cs(){var c=Qt.A;return Qt.A=Mu,c}function cu(){Ni=4,Sa||(Fn&4194048)!==Fn&&hs.current!==null||(Sl=!0),(Io&134217727)===0&&(El&134217727)===0||Rn===null||Va(Rn,Fn,ts,!1)}function Ha(c,f,v){var x=Nn;Nn|=2;var C=xo(),O=Cs();(Rn!==c||Fn!==f)&&(qf=null,zi(c,f)),f=!1;var j=Ni;e:do try{if(si!==0&&Ln!==null){var fe=Ln,Le=ir;switch(si){case 8:ch(),j=6;break e;case 3:case 2:case 9:case 6:hs.current===null&&(f=!0);var st=si;if(si=0,ir=null,Ga(c,fe,Le,st),v&&Sl){j=0;break e}break;default:st=si,si=0,ir=null,Ga(c,fe,Le,st)}}ey(),j=Ni;break}catch(Tt){fi(c,Tt)}while(!0);return f&&c.shellSuspendCounter++,ba=di=null,Nn=x,Qt.H=C,Qt.A=O,Ln===null&&(Rn=null,Fn=0,Na()),j}function ey(){for(;Ln!==null;)ol(Ln)}function ty(c,f){var v=Nn;Nn|=2;var x=xo(),C=Cs();Rn!==c||Fn!==f?(qf=null,wl=Br()+500,zi(c,f)):Sl=R(c,f);e:do try{if(si!==0&&Ln!==null){f=Ln;var O=ir;t:switch(si){case 1:si=0,ir=null,Ga(c,f,O,1);break;case 2:case 9:if(ct(O)){si=0,ir=null,uh(f);break}f=function(){si!==2&&si!==9||Rn!==c||(si=7),wt(c)},O.then(f,f);break e;case 3:si=7;break e;case 4:si=5;break e;case 7:ct(O)?(si=0,ir=null,uh(f)):(si=0,ir=null,Ga(c,f,O,7));break;case 5:var j=null;switch(Ln.tag){case 26:j=Ln.memoizedState;case 5:case 27:var fe=Ln,Le=fe.type,st=fe.pendingProps;if(j?mg(j):Oi(fe.stateNode,Le,st)){si=0,ir=null;var Tt=fe.sibling;if(Tt!==null)Ln=Tt;else{var ut=fe.return;ut!==null?(Ln=ut,fu(ut)):Ln=null}break t}}si=0,ir=null,Ga(c,f,O,5);break;case 6:si=0,ir=null,Ga(c,f,O,6);break;case 8:ch(),Ni=6;break e;default:throw Error(r(462))}}uu();break}catch(Ut){fi(c,Ut)}while(!0);return ba=di=null,Qt.H=x,Qt.A=C,Nn=v,Ln!==null?0:(Rn=null,Fn=0,Na(),Ni)}function uu(){for(;Ln!==null&&!Wy();)ol(Ln)}function ol(c){var f=wm(c.alternate,c,to);c.memoizedProps=c.pendingProps,f===null?fu(c):Ln=f}function uh(c){var f=c,v=f.alternate;switch(f.tag){case 15:case 0:f=_m(v,f,f.pendingProps,f.type,void 0,Fn);break;case 11:f=_m(v,f,f.pendingProps,f.type.render,f.ref,Fn);break;case 5:En(f);default:Zv(v,f),f=Ln=hh(f,to),f=wm(v,f,to)}c.memoizedProps=c.pendingProps,f===null?fu(c):Ln=f}function Ga(c,f,v,x){ba=di=null,En(f),yl=null,pc=0;var C=f.return;try{if(jS(c,C,f,v,Fn)){Ni=1,Qd(c,Me(v,c.current)),Ln=null;return}}catch(O){if(C!==null)throw Ln=C,O;Ni=1,Qd(c,Me(v,c.current)),Ln=null;return}f.flags&32768?(zn||x===1?c=!0:Sl||(Fn&536870912)!==0?c=!1:(Sa=c=!0,(x===2||x===9||x===3||x===6)&&(x=hs.current,x!==null&&x.tag===13&&(x.flags|=16384))),ll(f,c)):fu(f)}function fu(c){var f=c;do{if((f.flags&32768)!==0){ll(f,Sa);return}c=f.return;var v=Yv(f.alternate,f,to);if(v!==null){Ln=v;return}if(f=f.sibling,f!==null){Ln=f;return}Ln=f=c}while(f!==null);Ni===0&&(Ni=5)}function ll(c,f){do{var v=Cm(c.alternate,c);if(v!==null){v.flags&=32767,Ln=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(c=c.sibling,c!==null)){Ln=c;return}Ln=c=v}while(c!==null);Ni=6,Ln=null}function Wa(c,f,v,x,C,O,j,fe,Le){c.cancelPendingCommit=null;do ja();while(rr!==0);if((Nn&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(O=f.lanes|f.childLanes,O|=mc,F(c,v,O,j,fe,Le),c===Rn&&(Ln=Rn=null,Fn=0),bc=f,No=c,no=v,Cu=O,Wh=C,Eg=x,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,tr(Bf,function(){return Af(),null})):(c.callbackNode=null,c.callbackPriority=0),x=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||x){x=Qt.T,Qt.T=null,C=na(),Un(2),j=Nn,Nn|=4;try{XS(c,f,v)}finally{Nn=j,Un(C),Qt.T=x}}rr=1,So(),$a(),fh()}}function So(){if(rr===1){rr=0;var c=No,f=bc,v=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||v){v=Qt.T,Qt.T=null;var x=na();Un(2);var C=Nn;Nn|=4;try{wf(f,c),ay(c.containerInfo)}finally{Nn=C,Un(x),Qt.T=v}}c.current=f,rr=2}}function $a(){if(rr===2){rr=0;var c=No,f=bc,v=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||v){v=Qt.T,Qt.T=null;var x=na();Un(2);var C=Nn;Nn|=4;try{Qv(c,f.alternate,f)}finally{Nn=C,Un(x),Qt.T=v}}rr=3}}function fh(){if(rr===4||rr===3){rr=0,vg();var c=No,f=bc,v=no,x=Eg;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?rr=5:(rr=0,bc=No=null,dh(c,c.pendingLanes));var C=c.pendingLanes;if(C===0&&(Po=null),Q(v),f=f.stateNode,ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(hc,f,void 0,(f.current.flags&128)===128)}catch{}if(x!==null){f=Qt.T,C=na(),Un(2),Qt.T=null;try{for(var O=c.onRecoverableError,j=0;j<x.length;j++){var fe=x[j];O(fe.value,{componentStack:fe.stack})}}finally{Qt.T=f,Un(C)}}(no&3)!==0&&ja(),wt(c),C=c.pendingLanes,(v&261930)!==0&&(C&42)!==0?c===Yf?Xn++:(Xn=0,Yf=c):Xn=0,wi&&Uf(),ft(0)}}function dh(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Be(f)))}function ja(){return So(),$a(),fh(),Af()}function Af(){if(rr!==5)return!1;var c=No,f=Cu;Cu=0;var v=Q(no),x=32>v?32:v;v=Qt.T;var C=na();try{Un(x),Qt.T=null,x=Wh,Wh=null;var O=No,j=no;if(rr=0,bc=No=null,no=0,(Nn&6)!==0)throw Error(r(331));var fe=Nn;if(Nn|=4,oh(O.current),sh(O,O.current,j,x),Nn=fe,ft(0,!1),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(hc,O)}catch{}return!0}finally{Un(C),Qt.T=v,dh(c,f)}}function cl(c,f,v){f=Me(v,f),f=vm(c.stateNode,f,2),c=Te(c,f,2),c!==null&&(N(c,2),wt(c))}function ln(c,f,v){if(c.tag===3)cl(c,c,v);else for(;f!==null;){if(f.tag===3){cl(f,c,v);break}else if(f.tag===1){var x=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Po===null||!Po.has(x))){c=Me(v,c),v=zv(2),x=Te(f,v,2),x!==null&&(Fv(v,x,f,c),N(x,2),wt(x));break}}f=f.return}}function du(c,f,v){var x=c.pingCache;if(x===null){x=c.pingCache=new Ls;var C=new Set;x.set(f,C)}else C=x.get(f),C===void 0&&(C=new Set,x.set(f,C));C.has(v)||(Ml=!0,C.add(v),c=ny.bind(null,c,f,v),f.then(c,c))}function ny(c,f,v){var x=c.pingCache;x!==null&&x.delete(f),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,Rn===c&&(Fn&v)===v&&(Ni===4||Ni===3&&(Fn&62914560)===Fn&&300>Br()-Xf?(Nn&2)===0&&zi(c,0):Tu|=v,Au===Fn&&(Au=0)),wt(c)}function iy(c,f){f===0&&(f=I()),c=en(c,f),c!==null&&(N(c,f),wt(c))}function qS(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),iy(c,v)}function YS(c,f){var v=0;switch(c.tag){case 31:case 13:var x=c.stateNode,C=c.memoizedState;C!==null&&(v=C.retryLane);break;case 19:x=c.stateNode;break;case 22:x=c.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(f),iy(c,v)}function tr(c,f){return Ff(c,f)}function Pm(c,f,v,x){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ec(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Rs(c,f){var v=c.alternate;return v===null?(v=t(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&65011712,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,f=c.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function hh(c,f){c.flags&=65011714;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,f=v.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Mo(c,f,v,x,C,O){var j=0;if(x=c,typeof c=="function")ec(c)&&(j=1);else if(typeof c=="string")j=ia&&dr?Ch(c,v,wr.current)?26:gg(c)?27:5:ia?Ch(c,v,wr.current)?26:5:dr&&gg(c)?27:5;else e:switch(c){case Of:return c=t(31,v,f,C),c.elementType=Of,c.lanes=O,c;case rc:return ea(v.children,C,O,f);case sc:j=8,C|=24;break;case ac:return c=t(12,v,f,C|2),c.elementType=ac,c.lanes=O,c;case vh:return c=t(13,v,f,C),c.elementType=vh,c.lanes=O,c;case Eo:return c=t(19,v,f,C),c.elementType=Eo,c.lanes=O,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case ta:j=10;break e;case Df:j=9;break e;case hu:j=11;break e;case yh:j=14;break e;case Zr:j=16,x=null;break e}j=29,v=Error(r(130,c===null?"null":typeof c,"")),x=null}return f=t(j,v,f,C),f.elementType=c,f.type=x,f.lanes=O,f}function ea(c,f,v,x){return c=t(7,c,x,f),c.lanes=v,c}function Nm(c,f,v){return c=t(6,c,null,f),c.lanes=v,c}function Lm(c){var f=t(18,null,null,0);return f.stateNode=c,f}function Um(c,f,v){return f=t(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function ry(c,f,v,x,C,O,j,fe,Le){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=us,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=x,this.onUncaughtError=C,this.onCaughtError=O,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Le,this.incompleteTransitions=new Map}function ul(c,f,v,x,C,O,j,fe,Le,st,Tt,ut){return c=new ry(c,f,v,j,Le,st,Tt,ut,fe),f=1,O===!0&&(f|=24),O=t(3,null,null,f),c.current=O,O.stateNode=c,f=Ae(),f.refCount++,c.pooledCache=f,f.refCount++,O.memoizedState={element:x,isDehydrated:v,cache:f},H(O),c}function ph(c){return c?(c=qa,c):qa}function Cf(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=u(f),c=c!==null?h(c):null,c===null?null:mu(c.stateNode)}function zm(c,f,v,x,C,O){C=ph(C),x.context===null?x.context=C:x.pendingContext=C,x=ue(f),x.payload={element:v},O=O===void 0?null:O,O!==null&&(x.callback=O),v=Te(c,x,f),v!==null&&(Di(v,c,f),Ue(v,c,f))}function tc(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function Rf(c,f){tc(c,f),(c=c.alternate)&&tc(c,f)}var An={},mh=ce,ls=WV,gh=Object.assign,nc=Symbol.for("react.element"),Xa=Symbol.for("react.transitional.element"),ic=Symbol.for("react.portal"),rc=Symbol.for("react.fragment"),sc=Symbol.for("react.strict_mode"),ac=Symbol.for("react.profiler"),Df=Symbol.for("react.consumer"),ta=Symbol.for("react.context"),hu=Symbol.for("react.forward_ref"),vh=Symbol.for("react.suspense"),Eo=Symbol.for("react.suspense_list"),yh=Symbol.for("react.memo"),Zr=Symbol.for("react.lazy"),Of=Symbol.for("react.activity"),Fm=Symbol.for("react.memo_cache_sentinel"),wo=Symbol.iterator,fl=Symbol.for("react.client.reference"),dl=Array.isArray,Qt=mh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Bm=e.rendererVersion,If=e.rendererPackageName,pu=e.extraDevToolsConfig,mu=e.getPublicInstance,sy=e.getRootHostContext,gu=e.getChildHostContext,_h=e.prepareForCommit,ay=e.resetAfterCommit,km=e.createInstance;e.cloneMutableInstance;var Pf=e.appendInitialChild,cs=e.finalizeInitialChildren,Kr=e.shouldSetTextContent,To=e.createTextInstance;e.cloneMutableTextInstance;var Vm=e.scheduleTimeout,oy=e.cancelTimeout,us=e.noTimeout,$i=e.isPrimaryRenderer;e.warnsIfNotActing;var kn=e.supportsMutation,Ds=e.supportsPersistence,wi=e.supportsHydration,_n=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var ai=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Un=e.setCurrentUpdatePriority,na=e.getCurrentUpdatePriority,vu=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var oc=e.shouldAttemptEagerTransition,bh=e.detachDeletedInstance;e.requestPostPaintCallback;var Nf=e.maySuspendCommit,yu=e.maySuspendCommitOnUpdate,Hm=e.maySuspendCommitInSyncRender,Oi=e.preloadInstance,Gm=e.startSuspendingCommit,xh=e.suspendInstance;e.suspendOnActiveViewTransition;var ly=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var lc=e.NotPendingTransition,cc=e.HostTransitionContext,Wm=e.resetFormInstance;e.bindToConsole;var $m=e.supportsMicrotasks,jm=e.scheduleMicrotask,fr=e.supportsTestSelectors,ji=e.findFiberRoot,Sh=e.getBoundingRect,Lf=e.getTextContent,hl=e.isHiddenSubtree,Xm=e.matchAccessibilityRole,Ao=e.setFocusIfFocusable,Mh=e.setupIntersectionObserver,qm=e.appendChild,Ym=e.appendChildToContainer,cy=e.commitTextUpdate,uy=e.commitMount,fy=e.commitUpdate,dy=e.insertBefore,hy=e.insertInContainerBefore,py=e.removeChild,Zm=e.removeChildFromContainer,Km=e.resetTextContent,ZS=e.hideInstance,my=e.hideTextInstance,gy=e.unhideInstance,vy=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Qm=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var yy=e.cloneInstance,Jm=e.createContainerChildSet,eg=e.appendChildToContainerChildSet,_y=e.finalizeContainerChildren,tg=e.replaceContainerChildren,by=e.cloneHiddenInstance,ng=e.cloneHiddenTextInstance,pl=e.isSuspenseInstancePending,Eh=e.isSuspenseInstanceFallback,wh=e.getSuspenseInstanceFallbackErrorDetails,Th=e.registerSuspenseInstanceRetry,xy=e.canHydrateFormStateMarker,ig=e.isFormStateMarkerMatching,Sy=e.getNextHydratableSibling,My=e.getNextHydratableSiblingAfterSingleton,Ey=e.getFirstHydratableChild,wy=e.getFirstHydratableChildWithinContainer,Ty=e.getFirstHydratableChildWithinActivityInstance,Ay=e.getFirstHydratableChildWithinSuspenseInstance,rg=e.getFirstHydratableChildWithinSingleton,Cy=e.canHydrateInstance,Ry=e.canHydrateTextInstance,sg=e.canHydrateActivityInstance,Dy=e.canHydrateSuspenseInstance,Oy=e.hydrateInstance,KS=e.hydrateTextInstance,ag=e.hydrateActivityInstance,Iy=e.hydrateSuspenseInstance,Py=e.getNextHydratableInstanceAfterActivityInstance,og=e.getNextHydratableInstanceAfterSuspenseInstance,Ny=e.commitHydratedInstance,Ly=e.commitHydratedContainer,QS=e.commitHydratedActivityInstance,JS=e.commitHydratedSuspenseInstance,Uy=e.finalizeHydratedChildren,Uf=e.flushHydrationEvents;e.clearActivityBoundary;var lg=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Ah=e.clearSuspenseBoundaryFromContainer,zy=e.hideDehydratedBoundary,Fy=e.unhideDehydratedBoundary,_u=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var By=e.validateHydratableInstance,cg=e.validateHydratableTextInstance,ia=e.supportsResources,Ch=e.isHostHoistableType,zf=e.getHoistableRoot,ug=e.getResource,fg=e.acquireResource,ml=e.releaseResource,ky=e.hydrateHoistable,dg=e.mountHoistable,hg=e.unmountHoistable,Rh=e.createHoistableInstance,Vy=e.prepareToCommitHoistables,pg=e.mayResourceSuspendCommit,mg=e.preloadResource,Hy=e.suspendResource,dr=e.supportsSingletons,Dh=e.resolveSingletonInstance,nr=e.acquireSingletonInstance,Er=e.releaseSingletonInstance,gg=e.isHostSingletonType,uc=e.isSingletonScope,Oh=[],fc=-1,qa={},fs=Math.clz32?Math.clz32:A,Ih=Math.log,Gy=Math.LN2,Ph=256,dc=262144,bu=4194304,Ff=ls.unstable_scheduleCallback,Nh=ls.unstable_cancelCallback,Wy=ls.unstable_shouldYield,vg=ls.unstable_requestPaint,Br=ls.unstable_now,Lh=ls.unstable_ImmediatePriority,$y=ls.unstable_UserBlockingPriority,Bf=ls.unstable_NormalPriority,Uh=ls.unstable_IdlePriority,yg=ls.log,jy=ls.unstable_setDisableYieldValue,hc=null,ds=null,Xi=typeof Object.is=="function"?Object.is:ne,zh=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},e1=Object.prototype.hasOwnProperty,Fh,Ya,kf=!1,_g=new WeakMap,Co=[],Za=0,oi=null,Vf=0,ra=[],Os=0,sa=null,Or=1,_a="",wr=_(null),Ro=_(null),Ir=_(null),Hf=_(null),hr=null,Ti=null,zn=!1,Ka=null,Qr=!1,Bh=Error(r(519)),aa=_(null),di=null,ba=null,Xy=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(v,x){c.push(x)}};this.abort=function(){f.aborted=!0,c.forEach(function(v){return v()})}},Tr=ls.unstable_scheduleCallback,t1=ls.unstable_NormalPriority,Ai={$$typeof:ta,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Gf=null,ii=null,kr=!1,oa=!1,kh=!1,gl=0,xu=null,bg=0,Do=0,pr=null,la=Qt.S;Qt.S=function(c,f){_c=Br(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&nt(c,f),la!==null&&la(c,f)};var vl=_(null),mr=Error(r(460)),Vh=Error(r(474)),ca=Error(r(542)),Qa={then:function(){}},Jr=null,yl=null,pc=0,Pr=Xs(!0),xg=Xs(!1),Nr=[],Ja=0,mc=0,Is=!1,Hh=!1,gc=_(null),_l=_(0),hs=_(null),ps=null,Fi=_(0),Oo=0,bn=null,Zt=null,dn=null,Cn=!1,wn=!1,Vn=!1,Vr=0,ua=0,xa=null,Sg=0,Ps={readContext:G,use:jn,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};Ps.useEffectEvent=Xe;var Ii={readContext:G,use:jn,useCallback:function(c,f){return Lt().memoizedState=[c,f===void 0?null:f],c},useContext:G,useEffect:hf,useImperativeHandle:function(c,f,v){v=v!=null?v.concat([c]):null,ql(4194308,4,Zc.bind(null,f,c),v)},useLayoutEffect:function(c,f){return ql(4194308,4,c,f)},useInsertionEffect:function(c,f){ql(4,2,c,f)},useMemo:function(c,f){var v=Lt();f=f===void 0?null:f;var x=c();if(Vn){K(!0);try{c()}finally{K(!1)}}return v.memoizedState=[x,f],x},useReducer:function(c,f,v){var x=Lt();if(v!==void 0){var C=v(f);if(Vn){K(!0);try{v(f)}finally{K(!1)}}}else C=f;return x.memoizedState=x.baseState=C,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:C},x.queue=c,c=c.dispatch=$S.bind(null,bn,c),[x.memoizedState,c]},useRef:function(c){var f=Lt();return c={current:c},f.memoizedState=c},useState:function(c){c=cm(c);var f=c.queue,v=Pv.bind(null,bn,f);return f.dispatch=v,[c.memoizedState,v]},useDebugValue:mf,useDeferredValue:function(c,f){var v=Lt();return Qc(v,c,f)},useTransition:function(){var c=cm(!1);return c=Dv.bind(null,bn,c.queue,!0,!1),Lt().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,v){var x=bn,C=Lt();if(zn){if(v===void 0)throw Error(r(407));v=v()}else{if(v=f(),Rn===null)throw Error(r(349));(Fn&127)!==0||br(x,f,v)}C.memoizedState=v;var O={value:v,getSnapshot:f};return C.queue=O,hf(jl.bind(null,x,O,c),[c]),x.flags|=2048,Ts(9,{destroy:void 0},xr.bind(null,x,O,v,f),null),v},useId:function(){var c=Lt(),f=Rn.identifierPrefix;if(zn){var v=_a,x=Or;v=(x&~(1<<32-fs(x)-1)).toString(32)+v,f="_"+f+"R_"+v,v=Vr++,0<v&&(f+="H"+v.toString(32)),f+="_"}else v=Sg++,f="_"+f+"r_"+v.toString(32)+"_";return c.memoizedState=f},useHostTransitionStatus:pm,useFormState:fm,useActionState:fm,useOptimistic:function(c){var f=Lt();f.memoizedState=f.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=Yd.bind(null,bn,!0,v),v.dispatch=f,[c,f]},useMemoCache:cr,useCacheRefresh:function(){return Lt().memoizedState=WS.bind(null,bn)},useEffectEvent:function(c){var f=Lt(),v={impl:c};return f.memoizedState=v,function(){if((Nn&2)!==0)throw Error(r(440));return v.impl.apply(void 0,arguments)}}},eo={readContext:G,use:jn,useCallback:Xd,useContext:G,useEffect:Yc,useImperativeHandle:Rv,useInsertionEffect:el,useLayoutEffect:pf,useMemo:Kc,useReducer:Mi,useRef:jd,useState:function(){return Mi(On)},useDebugValue:mf,useDeferredValue:function(c,f){var v=dt();return hm(v,Zt.memoizedState,c,f)},useTransition:function(){var c=Mi(On)[0],f=dt().memoizedState;return[typeof c=="boolean"?c:Dt(c),f]},useSyncExternalStore:er,useId:qd,useHostTransitionStatus:pm,useFormState:Xc,useActionState:Xc,useOptimistic:function(c,f){var v=dt();return ff(v,Zt,c,f)},useMemoCache:cr,useCacheRefresh:Iv};eo.useEffectEvent=Xr;var bl={readContext:G,use:jn,useCallback:Xd,useContext:G,useEffect:Yc,useImperativeHandle:Rv,useInsertionEffect:el,useLayoutEffect:pf,useMemo:Kc,useReducer:ur,useRef:jd,useState:function(){return ur(On)},useDebugValue:mf,useDeferredValue:function(c,f){var v=dt();return Zt===null?Qc(v,c,f):hm(v,Zt.memoizedState,c,f)},useTransition:function(){var c=ur(On)[0],f=dt().memoizedState;return[typeof c=="boolean"?c:Dt(c),f]},useSyncExternalStore:er,useId:qd,useHostTransitionStatus:pm,useFormState:qc,useActionState:qc,useOptimistic:function(c,f){var v=dt();return Zt!==null?ff(v,Zt,c,f):(v.baseState=c,[c,v.queue.dispatch])},useMemoCache:cr,useCacheRefresh:Iv};bl.useEffectEvent=Xr;var Wf={enqueueSetState:function(c,f,v){c=c._reactInternals;var x=Ei(),C=ue(x);C.payload=f,v!=null&&(C.callback=v),f=Te(c,C,x),f!==null&&(Di(f,c,x),Ue(f,c,x))},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var x=Ei(),C=ue(x);C.tag=1,C.payload=f,v!=null&&(C.callback=v),f=Te(c,C,x),f!==null&&(Di(f,c,x),Ue(f,c,x))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=Ei(),x=ue(v);x.tag=2,f!=null&&(x.callback=f),f=Te(c,x,v),f!==null&&(Di(f,c,v),Ue(f,c,v))}},es=Error(r(461)),xi=!1,vc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Bi=!1,ki=!1,Su=!1,Mg=typeof WeakSet=="function"?WeakSet:Set,qi=null,Pi=null,Yi=!1,ri=null,Ns=8192,Mu={getCacheForType:function(c){var f=G(Ai),v=f.data.get(c);return v===void 0&&(v=c(),f.data.set(c,v)),v},cacheSignal:function(){return G(Ai).controller.signal}},fa=0,Eu=1,wu=2,$f=3,xl=4;if(typeof Symbol=="function"&&Symbol.for){var yc=Symbol.for;fa=yc("selector.component"),Eu=yc("selector.has_pseudo_class"),wu=yc("selector.role"),$f=yc("selector.test_id"),xl=yc("selector.text")}var Ls=typeof WeakMap=="function"?WeakMap:Map,Nn=0,Rn=null,Ln=null,Fn=0,si=0,ir=null,Sa=!1,Sl=!1,Ml=!1,to=0,Ni=0,Io=0,El=0,Tu=0,ts=0,Au=0,jf=null,ms=null,Gh=!1,Xf=0,_c=0,wl=1/0,qf=null,Po=null,rr=0,No=null,bc=null,no=0,Cu=0,Wh=null,Eg=null,Xn=0,Yf=null;return An.attemptContinuousHydration=function(c){if(c.tag===13||c.tag===31){var f=en(c,67108864);f!==null&&Di(f,c,67108864),Rf(c,67108864)}},An.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13||c.tag===31){var f=Ei();f=W(f);var v=en(c,f);v!==null&&Di(v,c,f),Rf(c,f)}},An.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=w(c.pendingLanes);if(f!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;f;){var v=1<<31-fs(f);c.entanglements[1]|=v,f&=~v}wt(c),(Nn&6)===0&&(wl=Br()+500,ft(0))}}break;case 31:case 13:f=en(c,2),f!==null&&Di(f,c,2),lh(),Rf(c,2)}},An.batchedUpdates=function(c,f){return c(f)},An.createComponentSelector=function(c){return{$$typeof:fa,value:c}},An.createContainer=function(c,f,v,x,C,O,j,fe,Le,st){return ul(c,f,!1,null,v,x,O,null,j,fe,Le,st)},An.createHasPseudoClassSelector=function(c){return{$$typeof:Eu,value:c}},An.createHydrationContainer=function(c,f,v,x,C,O,j,fe,Le,st,Tt,ut,Ut,vn){var Zi;return c=ul(v,x,!0,c,C,O,fe,vn,Le,st,Tt,ut),c.context=ph(null),v=c.current,x=Ei(),x=W(x),C=ue(x),C.callback=(Zi=f)!=null?Zi:null,Te(v,C,x),f=x,c.current.lanes=f,N(c,f),wt(c),c},An.createPortal=function(c,f,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ic,key:x==null?null:""+x,children:c,containerInfo:f,implementation:v}},An.createRoleSelector=function(c){return{$$typeof:wu,value:c}},An.createTestNameSelector=function(c){return{$$typeof:$f,value:c}},An.createTextSelector=function(c){return{$$typeof:xl,value:c}},An.defaultOnCaughtError=function(c){console.error(c)},An.defaultOnRecoverableError=function(c){zh(c)},An.defaultOnUncaughtError=function(c){zh(c)},An.deferredUpdates=function(c){var f=Qt.T,v=na();try{return Un(32),Qt.T=null,c()}finally{Un(v),Qt.T=f}},An.discreteUpdates=function(c,f,v,x,C){var O=Qt.T,j=na();try{return Un(2),Qt.T=null,c(f,v,x,C)}finally{Un(j),Qt.T=O,Nn===0&&(wl=Br()+500)}},An.findAllNodes=os,An.findBoundingRects=function(c,f){if(!fr)throw Error(r(363));f=os(c,f),c=[];for(var v=0;v<f.length;v++)c.push(Sh(f[v]));for(f=c.length-1;0<f;f--){v=c[f];for(var x=v.x,C=x+v.width,O=v.y,j=O+v.height,fe=f-1;0<=fe;fe--)if(f!==fe){var Le=c[fe],st=Le.x,Tt=st+Le.width,ut=Le.y,Ut=ut+Le.height;if(x>=st&&O>=ut&&C<=Tt&&j<=Ut){c.splice(f,1);break}else if(x!==st||v.width!==Le.width||Ut<O||ut>j){if(!(O!==ut||v.height!==Le.height||Tt<x||st>C)){st>x&&(Le.width+=st-x,Le.x=x),Tt<C&&(Le.width=C-st),c.splice(f,1);break}}else{ut>O&&(Le.height+=ut-O,Le.y=O),Ut<j&&(Le.height=j-ut),c.splice(f,1);break}}}return c},An.findHostInstance=Cf,An.findHostInstanceWithNoPortals=function(c){return c=u(c),c=c!==null?p(c):null,c===null?null:mu(c.stateNode)},An.findHostInstanceWithWarning=function(c){return Cf(c)},An.flushPassiveEffects=ja,An.flushSyncFromReconciler=function(c){var f=Nn;Nn|=1;var v=Qt.T,x=na();try{if(Un(2),Qt.T=null,c)return c()}finally{Un(x),Qt.T=v,Nn=f,(Nn&6)===0&&ft(0)}},An.flushSyncWork=lh,An.focusWithin=function(c,f){if(!fr)throw Error(r(363));for(c=sl(c),f=lu(c,f),f=Array.from(f),c=0;c<f.length;){var v=f[c++],x=v.tag;if(!hl(v)){if((x===5||x===26||x===27)&&Ao(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.sibling}}return!1},An.getFindAllNodesFailureDescription=function(c,f){if(!fr)throw Error(r(363));var v=0,x=[];c=[sl(c),0];for(var C=0;C<c.length;){var O=c[C++],j=O.tag,fe=c[C++],Le=f[fe];if((j!==5&&j!==26&&j!==27||!hl(O))&&(al(O,Le)&&(x.push(ou(Le)),fe++,fe>v&&(v=fe)),fe<f.length))for(O=O.child;O!==null;)c.push(O,fe),O=O.sibling}if(v<f.length){for(c=[];v<f.length;v++)c.push(ou(f[v]));return`findAllNodes was able to match part of the selector:
  `+(x.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},An.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return mu(c.child.stateNode);default:return c.child.stateNode}},An.injectIntoDevTools=function(){var c={bundleType:0,version:Bm,rendererPackageName:If,currentDispatcherRef:Qt,reconcilerVersion:"19.2.0"};if(pu!==null&&(c.rendererConfig=pu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{hc=f.inject(c),ds=f}catch{}c=!!f.checkDCE}}return c},An.isAlreadyRendering=function(){return(Nn&6)!==0},An.observeVisibleRects=function(c,f,v,x){if(!fr)throw Error(r(363));c=os(c,f);var C=Mh(c,v,x).disconnect;return{disconnect:function(){C()}}},An.shouldError=function(){return null},An.shouldSuspend=function(){return!1},An.startHostTransition=function(c,f,v,x){if(c.tag!==5)throw Error(r(476));var C=Ov(c).queue;Dv(c,C,f,lc,v===null?i:function(){var O=Ov(c);return O.next===null&&(O=c.alternate.memoizedState),gf(c,O.next.queue,{},Ei()),v(x)})},An.updateContainer=function(c,f,v,x){var C=f.current,O=Ei();return zm(C,O,c,f,v,x),O},An.updateContainerSync=function(c,f,v,x){return zm(f.current,2,c,f,v,x),2},An},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(HR)),HR.exports}var WR;function yH(){return WR||(WR=1,VR.exports=vH()),VR.exports}var _H=yH();const bH=gH(_H);function xH(n){const e=bH(n);return e.injectIntoDevTools(),e}const aP=0,qp={},SH=/^three(?=[A-Z])/,ES=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let MH=0;const EH=n=>typeof n=="function";function oP(n){if(EH(n)){const e=`${MH++}`;return qp[e]=n,e}else Object.assign(qp,n)}function lP(n,e){const t=ES(n),i=qp[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function wH(n,e,t){var i;return n=ES(n)in qp?n:n.replace(SH,""),lP(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,px(e.object,t,n,e)}function TH(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?gx(n.parent,n):ks(n.object)&&(n.object.visible=!1),n.isHidden=!0,nm(n)}}function cP(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?mx(n.parent,n):ks(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,nm(n)}}function vT(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,a;const l=qp[ES(e.type)];e.object=(r=e.props.object)!=null?r:new l(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Ho(e.object,e.props),e.props.attach)mx(n,e);else if(ks(e.object)&&ks(n.object)){const l=n.object.children.indexOf(t?.object);if(t&&l!==-1){const u=n.object.children.indexOf(e.object);if(u!==-1){n.object.children.splice(u,1);const h=u<l?l-1:l;n.object.children.splice(h,0,e.object)}else e.object.parent=n.object,n.object.children.splice(l,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const l of e.children)vT(e,l);nm(e)}}function MM(n,e){e&&(e.parent=n,n.children.push(e),vT(n,e))}function $R(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),vT(n,e,t)}function uP(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():PE.unstable_scheduleCallback(PE.unstable_IdlePriority,e)}}function LE(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?gx(n,e):ks(e.object)&&ks(n.object)&&(n.object.remove(e.object),oH(JI(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const l=e.children[a];LE(e,l,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&uP(e.object),t===void 0&&nm(e)}function AH(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const yb=[];function CH(){for(const[t]of yb){const i=t.parent;if(i){t.props.attach?gx(i,t):ks(t.object)&&ks(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?gx(t,r):ks(r.object)&&ks(t.object)&&t.object.remove(r.object)}t.isHidden&&cP(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&uP(t.object)}for(const[t,i,r]of yb){t.props=i;const a=t.parent;if(a){var n,e;const l=qp[ES(t.type)];t.object=(n=t.props.object)!=null?n:new l(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,AH(r,t.object),Ho(t.object,t.props),t.props.attach?mx(a,t):ks(t.object)&&ks(a.object)&&a.object.add(t.object);for(const u of t.children)u.props.attach?mx(t,u):ks(u.object)&&ks(t.object)&&t.object.add(u.object);nm(t)}}yb.length=0}const EM=()=>{},jR={};let tb=aP;const RH=0,DH=4,vx=xH({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:wH,removeChild:LE,appendChild:MM,appendInitialChild:MM,insertBefore:$R,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||MM(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||LE(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||$R(i,e,t)},getRootHostContext:()=>jR,getChildHostContext:()=>jR,commitUpdate(n,e,t,i,r){var a,l,u;lP(e,i);let h=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((l=t.args)==null?void 0:l.length)||(u=i.args)!=null&&u.some((g,y)=>{var _;return g!==((_=t.args)==null?void 0:_[y])}))&&(h=!0),h)yb.push([n,{...i},r]);else{const g=rH(n,i);Object.keys(g).length&&(Object.assign(n.props,g),Ho(n.object,g))}(r.sibling===null||(r.flags&DH)===RH)&&CH()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>px(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:TH,unhideInstance:cP,createTextInstance:EM,hideTextInstance:EM,unhideTextInstance:EM,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:B.createContext(null),setCurrentUpdatePriority(n){tb=n},getCurrentUpdatePriority(){return tb},resolveUpdatePriority(){var n;if(tb!==aP)return tb;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return pH;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return dH;default:return hH}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:mH.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),Id=new Map,vp={objects:"shallow",strict:!1};function OH(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function IH(n){const e=Id.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||cH(FE,qR),l=t||vx.createContainer(a,fH,null,!1,null,"",r,r,r,null);e||Id.set(n,{fiber:l,store:a});let u,h,p=!1,g=null;return{async configure(y={}){let _;g=new Promise(Y=>_=Y);let{gl:b,size:S,scene:A,events:w,onCreated:E,shadows:R=!1,linear:D=!1,flat:I=!1,legacy:L=!1,orthographic:N=!1,frameloop:F="always",dpr:V=[1,2],performance:P,raycaster:U,camera:W,onPointerMissed:Q}=y,K=a.getState(),ne=K.gl;if(!K.gl){const Y={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},pe=typeof b=="function"?await b(Y):b;BR(pe)?ne=pe:ne=new uT({...Y,...b}),K.set({gl:ne})}let re=K.raycaster;re||K.set({raycaster:re=new lT});const{params:X,...J}=U||{};if(Vi.equ(J,re,vp)||Ho(re,{...J}),Vi.equ(X,re.params,vp)||Ho(re,{params:{...re.params,...X}}),!K.camera||K.camera===h&&!Vi.equ(h,W,vp)){h=W;const Y=W?.isCamera,pe=Y?W:N?new Fl(0,0,0,0,.1,1e3):new vr(75,0,.1,1e3);Y||(pe.position.z=5,W&&(Ho(pe,W),pe.manual||("aspect"in W||"left"in W||"right"in W||"bottom"in W||"top"in W)&&(pe.manual=!0,pe.updateProjectionMatrix())),!K.camera&&!(W!=null&&W.rotation)&&pe.lookAt(0,0,0)),K.set({camera:pe}),re.camera=pe}if(!K.scene){let Y;A!=null&&A.isScene?(Y=A,px(Y,a,"",{})):(Y=new av,px(Y,a,"",{}),A&&Ho(Y,A)),K.set({scene:Y})}w&&!K.events.handlers&&K.set({events:w(a)});const ae=OH(n,S);if(Vi.equ(ae,K.size,vp)||K.setSize(ae.width,ae.height,ae.top,ae.left),V&&K.viewport.dpr!==tP(V)&&K.setDpr(V),K.frameloop!==F&&K.setFrameloop(F),K.onPointerMissed||K.set({onPointerMissed:Q}),P&&!Vi.equ(P,K.performance,vp)&&K.set(Y=>({performance:{...Y.performance,...P}})),!K.xr){var Me;const Y=(ke,pt)=>{const ge=a.getState();ge.frameloop!=="never"&&qR(ke,!0,ge,pt)},pe=()=>{const ke=a.getState();ke.gl.xr.enabled=ke.gl.xr.isPresenting,ke.gl.xr.setAnimationLoop(ke.gl.xr.isPresenting?Y:null),ke.gl.xr.isPresenting||FE(ke)},we={connect(){const ke=a.getState().gl;ke.xr.addEventListener("sessionstart",pe),ke.xr.addEventListener("sessionend",pe)},disconnect(){const ke=a.getState().gl;ke.xr.removeEventListener("sessionstart",pe),ke.xr.removeEventListener("sessionend",pe)}};typeof((Me=ne.xr)==null?void 0:Me.addEventListener)=="function"&&we.connect(),K.set({xr:we})}if(ne.shadowMap){const Y=ne.shadowMap.enabled,pe=ne.shadowMap.type;if(ne.shadowMap.enabled=!!R,Vi.boo(R))ne.shadowMap.type=o0;else if(Vi.str(R)){var Se;const we={basic:rO,percentage:Cp,soft:o0,variance:gd};ne.shadowMap.type=(Se=we[R])!=null?Se:o0}else Vi.obj(R)&&Object.assign(ne.shadowMap,R);(Y!==ne.shadowMap.enabled||pe!==ne.shadowMap.type)&&(ne.shadowMap.needsUpdate=!0)}return $n.enabled=!L,p||(ne.outputColorSpace=D?Xo:Wr,ne.toneMapping=I?ho:Vx),K.legacy!==L&&K.set(()=>({legacy:L})),K.linear!==D&&K.set(()=>({linear:D})),K.flat!==I&&K.set(()=>({flat:I})),b&&!Vi.fun(b)&&!BR(b)&&!Vi.equ(b,ne,vp)&&Ho(ne,b),u=E,p=!0,_(),this},render(y){return!p&&!g&&this.configure(),g.then(()=>{vx.updateContainer(je.jsx(PH,{store:a,children:y,onCreated:u,rootElement:n}),l,null,()=>{})}),a},unmount(){fP(n)}}}function PH({store:n,children:e,onCreated:t,rootElement:i}){return pv(()=>{const r=n.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),je.jsx(pT.Provider,{value:n,children:e})}function fP(n,e){const t=Id.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),vx.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,l,u,h;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(l=a.renderLists)==null||l.dispose==null||l.dispose(),(u=r.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(h=r.gl)!=null&&h.xr&&r.xr.disconnect(),tH(r.scene),Id.delete(n)}catch{}},500)})}}function NH(n,e,t){return je.jsx(LH,{children:n,container:e,state:t})}function LH({state:n={},children:e,container:t}){const{events:i,size:r,...a}=n,l=mT(),[u]=B.useState(()=>new lT),[h]=B.useState(()=>new Ye),p=hT((y,_)=>{let b;if(_.camera&&r){const S=_.camera;b=y.viewport.getCurrentViewport(S,new ee,r),S!==y.camera&&iP(S,r)}return{...y,..._,scene:t,raycaster:u,pointer:h,mouse:h,previousRoot:l,events:{...y.events,..._.events,...i},size:{...y.size,...r},viewport:{...y.viewport,...b},setEvents:S=>_.set(A=>({...A,events:{...A.events,...S}}))}}),g=B.useMemo(()=>{const y=XI((b,S)=>({...a,set:b,get:S})),_=b=>y.setState(S=>p.current(b,S));return _(l.getState()),l.subscribe(_),y},[l,t]);return je.jsx(je.Fragment,{children:vx.createPortal(je.jsx(pT.Provider,{value:g,children:e}),g,null)})}function UH(n,e){const t={callback:n};return e.add(t),()=>{e.delete(t)}}const dP=new Set,zH=new Set,FH=new Set,BH=n=>UH(n,dP);function wM(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function g0(n,e){switch(n){case"before":return wM(dP,e);case"after":return wM(zH,e);case"tail":return wM(FH,e)}}let TM,AM;function UE(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),TM=e.internal.subscribers;for(let r=0;r<TM.length;r++)AM=TM[r],AM.ref.current(AM.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let yx=!1,zE=!1,CM,XR,yp;function hP(n){XR=requestAnimationFrame(hP),yx=!0,CM=0,g0("before",n),zE=!0;for(const t of Id.values()){var e;yp=t.store.getState(),yp.internal.active&&(yp.frameloop==="always"||yp.internal.frames>0)&&!((e=yp.gl.xr)!=null&&e.isPresenting)&&(CM+=UE(n,yp))}if(zE=!1,g0("after",n),CM===0)return g0("tail",n),yx=!1,cancelAnimationFrame(XR)}function FE(n,e=1){var t;if(!n)return Id.forEach(i=>FE(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):zE?n.internal.frames=2:n.internal.frames=1,yx||(yx=!0,requestAnimationFrame(hP)))}function qR(n,e=!0,t,i){if(e&&g0("before",n),t)UE(n,t,i);else for(const r of Id.values())UE(n,r.store.getState());e&&g0("after",n)}const RM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function kH(n){const{handlePointer:e}=lH(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(RM).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const l=r.handlers[a],[u,h]=RM[a];t.addEventListener(u,l,{passive:h})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[l]=RM[r];i.connected.removeEventListener(l,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function YR(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function VH({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,l]=B.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=B.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),h=n?typeof n=="number"?n:n.scroll:null,p=n?typeof n=="number"?n:n.resize:null,g=B.useRef(!1);B.useEffect(()=>(g.current=!0,()=>{g.current=!1}));const[y,_,b]=B.useMemo(()=>{const E=()=>{if(!u.current.element)return;const{left:R,top:D,width:I,height:L,bottom:N,right:F,x:V,y:P}=u.current.element.getBoundingClientRect(),U={left:R,top:D,width:I,height:L,bottom:N,right:F,x:V,y:P};u.current.element instanceof HTMLElement&&i&&(U.height=u.current.element.offsetHeight,U.width=u.current.element.offsetWidth),Object.freeze(U),g.current&&!$H(u.current.lastBounds,U)&&l(u.current.lastBounds=U)};return[E,p?YR(E,p):E,h?YR(E,h):E]},[l,i,h,p]);function S(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",b,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function A(){u.current.element&&(u.current.resizeObserver=new r(b),u.current.resizeObserver.observe(u.current.element),e&&u.current.scrollContainers&&u.current.scrollContainers.forEach(E=>E.addEventListener("scroll",b,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const w=E=>{!E||E===u.current.element||(S(),u.current.element=E,u.current.scrollContainers=pP(E),A())};return GH(b,!!e),HH(_),B.useEffect(()=>{S(),A()},[e,b,_]),B.useEffect(()=>S,[]),[w,a,y]}function HH(n){B.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[n])}function GH(n,e){B.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[n,e])}function pP(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...pP(n.parentElement)]}const WH=["x","y","top","bottom","left","right","width","height"],$H=(n,e)=>WH.every(t=>n[t]===e[t]);function jH({ref:n,children:e,fallback:t,resize:i,style:r,gl:a,events:l=kH,eventSource:u,eventPrefix:h,shadows:p,linear:g,flat:y,legacy:_,orthographic:b,frameloop:S,dpr:A,performance:w,raycaster:E,camera:R,scene:D,onPointerMissed:I,onCreated:L,...N}){B.useMemo(()=>oP(jI),[]);const F=KV(),[V,P]=VH({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=B.useRef(null),W=B.useRef(null);B.useImperativeHandle(n,()=>U.current);const Q=hT(I),[K,ne]=B.useState(!1),[re,X]=B.useState(!1);if(K)throw K;if(re)throw re;const J=B.useRef(null);pv(()=>{const Me=U.current;if(P.width>0&&P.height>0&&Me){J.current||(J.current=IH(Me));async function Se(){await J.current.configure({gl:a,scene:D,events:l,shadows:p,linear:g,flat:y,legacy:_,orthographic:b,frameloop:S,dpr:A,performance:w,raycaster:E,camera:R,size:P,onPointerMissed:(...Y)=>Q.current==null?void 0:Q.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(u?YV(u)?u.current:u:W.current),h&&Y.setEvents({compute:(pe,we)=>{const ke=pe[h+"X"],pt=pe[h+"Y"];we.pointer.set(ke/we.size.width*2-1,-(pt/we.size.height)*2+1),we.raycaster.setFromCamera(we.pointer,we.camera)}}),L?.(Y)}}),J.current.render(je.jsx(F,{children:je.jsx(JV,{set:X,children:je.jsx(B.Suspense,{fallback:je.jsx(QV,{set:ne}),children:e??null})})}))}Se()}}),B.useEffect(()=>{const Me=U.current;if(Me)return()=>fP(Me)},[]);const ae=u?"none":"auto";return je.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ae,...r},...N,children:je.jsx("div",{ref:V,style:{width:"100%",height:"100%"},children:je.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}function XH(n){return je.jsx(KI,{children:je.jsx(jH,{...n})})}var yT=eO();const qH=Ud(yT);function ZR(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Vd(...n){return e=>{let t=!1;const i=n.map(r=>{const a=ZR(r,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():ZR(n[r],null)}}}}function Hd(...n){return B.useCallback(Vd(...n),n)}var YH=Symbol.for("react.lazy"),_x=bw[" use ".trim().toString()];function ZH(n){return typeof n=="object"&&n!==null&&"then"in n}function mP(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===YH&&"_payload"in n&&ZH(n._payload)}function KH(n){const e=QH(n),t=B.forwardRef((i,r)=>{let{children:a,...l}=i;mP(a)&&typeof _x=="function"&&(a=_x(a._payload));const u=B.Children.toArray(a),h=u.find(e2);if(h){const p=h.props.children,g=u.map(y=>y===h?B.Children.count(p)>1?B.Children.only(null):B.isValidElement(p)?p.props.children:null:y);return je.jsx(e,{...l,ref:r,children:B.isValidElement(p)?B.cloneElement(p,void 0,g):null})}return je.jsx(e,{...l,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function QH(n){const e=B.forwardRef((t,i)=>{let{children:r,...a}=t;if(mP(r)&&typeof _x=="function"&&(r=_x(r._payload)),B.isValidElement(r)){const l=n2(r),u=t2(a,r.props);return r.type!==B.Fragment&&(u.ref=i?Vd(i,l):l),B.cloneElement(r,u)}return B.Children.count(r)>1?B.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var JH=Symbol("radix.slottable");function e2(n){return B.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===JH}function t2(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...u)=>{const h=a(...u);return r(...u),h}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function n2(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var i2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],r2=i2.reduce((n,e)=>{const t=KH(`Primitive.${e}`),i=B.forwardRef((r,a)=>{const{asChild:l,...u}=r,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),je.jsx(h,{...u,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),rf=globalThis?.document?B.useLayoutEffect:()=>{},s2="Portal",gP=B.forwardRef((n,e)=>{const{container:t,...i}=n,[r,a]=B.useState(!1);rf(()=>a(!0),[]);const l=t||r&&globalThis?.document?.body;return l?qH.createPortal(je.jsx(r2.div,{...i,ref:e}),l):null});gP.displayName=s2;var a2=gP,KR=Object.prototype.hasOwnProperty;function k0(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&k0(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(KR.call(n,t)&&++i&&!KR.call(e,t)||!(t in e)||!k0(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function wS(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var TS=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};TS.prototype._test=function(e){var t=this.fn;try{Dp(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Dp(this.modifiers.slice(),t,this)(e)}catch{return!1}};TS.prototype._check=function(e){try{Dp(this.modifiers.slice(),this.fn,this)(e)}catch{if(Dp(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!Dp(this.modifiers.slice(),this.fn,this)(e))throw null};TS.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){yP(t.modifiers.slice(),t.fn,t)(e).then(function(a){a?i(e):r(null)}).catch(function(a){return r(a)})})};function vP(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Dp(n,e,t){if(n.length){var i=n.shift(),r=Dp(n,e,t);return i.perform(r,t)}else return vP(e)}function yP(n,e,t){if(n.length){var i=n.shift(),r=yP(n,e,t);return i.performAsync(r,t)}else return function(a){return Promise.resolve(vP(e,"async")(a))}}var o2=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},_T=(function(n){function e(t,i,r,a){for(var l=[],u=arguments.length-4;u-- >0;)l[u]=arguments[u+4];n.call(this,l),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=a}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e})(Error),Vl=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Vl.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];return i.chain.push(new TS(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};Vl.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new o2(t,e.simple,e.async)),this};Vl.prototype._clone=function(){return new Vl(this.chain.slice(),this.nextRuleModifiers.slice())};Vl.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Vl.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new _T(i,e,r))}}),t};Vl.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new _T(t,e,i)}})};Vl.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){_P(e,t.chain.slice(),i,r)})};function _P(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){_P(n,e,t,i)},function(a){i(new _T(r,n,a))})}else t(n)}var QR=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function l2(n,e){return e===void 0&&(e=!1),{simple:function(t){return QR(t,e)||n.check(t)===void 0},async:function(t){return QR(t,e)||n.testAsync(t)}}}function va(){return typeof Proxy<"u"?bP(new Vl):BE(new Vl)}var V0={};va.extend=function(n){Object.assign(V0,n)};va.clearCustomRules=function(){V0={}};function bP(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=bP(n._clone());if(i in bx)return r._applyModifier(bx[i],i);if(i in V0)return r._applyRule(V0[i],i);if(i in kE)return r._applyRule(kE[i],i)}})}function BE(n){var e=function(r,a){return Object.keys(r).forEach(function(l){a[l]=function(){for(var u=[],h=arguments.length;h--;)u[h]=arguments[h];var p=BE(a._clone()),g=p._applyRule(r[l],l).apply(void 0,u);return g}}),a},t=e(kE,n),i=e(V0,t);return Object.keys(bx).forEach(function(r){Object.defineProperty(i,r,{get:function(){var a=BE(i._clone());return a._applyModifier(bx[r],r)}})}),i}var bx={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return nb(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(nb(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&nb(e).every(n)}},async:function(n){return function(e){return Promise.all(nb(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return JR(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return JR(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function JR(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function nb(n){return typeof n=="string"?n.split(""):n}var kE={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||c2;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return _p("string")},boolean:function(){return _p("boolean")},undefined:function(){return _p("undefined")},null:function(){return _p("null")},array:function(){return _p("array")},object:function(){return _p("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return u2(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:l2};function _p(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function c2(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function u2(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(a){a.target=i,t.push(a)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var a=n[r];return a.testAsync((e||{})[r]).catch(function(l){l.target=r,t.push(l)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var mi="colors",zs="sizes",$t="space",f2={gap:$t,gridGap:$t,columnGap:$t,gridColumnGap:$t,rowGap:$t,gridRowGap:$t,inset:$t,insetBlock:$t,insetBlockEnd:$t,insetBlockStart:$t,insetInline:$t,insetInlineEnd:$t,insetInlineStart:$t,margin:$t,marginTop:$t,marginRight:$t,marginBottom:$t,marginLeft:$t,marginBlock:$t,marginBlockEnd:$t,marginBlockStart:$t,marginInline:$t,marginInlineEnd:$t,marginInlineStart:$t,padding:$t,paddingTop:$t,paddingRight:$t,paddingBottom:$t,paddingLeft:$t,paddingBlock:$t,paddingBlockEnd:$t,paddingBlockStart:$t,paddingInline:$t,paddingInlineEnd:$t,paddingInlineStart:$t,top:$t,right:$t,bottom:$t,left:$t,scrollMargin:$t,scrollMarginTop:$t,scrollMarginRight:$t,scrollMarginBottom:$t,scrollMarginLeft:$t,scrollMarginX:$t,scrollMarginY:$t,scrollMarginBlock:$t,scrollMarginBlockEnd:$t,scrollMarginBlockStart:$t,scrollMarginInline:$t,scrollMarginInlineEnd:$t,scrollMarginInlineStart:$t,scrollPadding:$t,scrollPaddingTop:$t,scrollPaddingRight:$t,scrollPaddingBottom:$t,scrollPaddingLeft:$t,scrollPaddingX:$t,scrollPaddingY:$t,scrollPaddingBlock:$t,scrollPaddingBlockEnd:$t,scrollPaddingBlockStart:$t,scrollPaddingInline:$t,scrollPaddingInlineEnd:$t,scrollPaddingInlineStart:$t,fontSize:"fontSizes",background:mi,backgroundColor:mi,backgroundImage:mi,borderImage:mi,border:mi,borderBlock:mi,borderBlockEnd:mi,borderBlockStart:mi,borderBottom:mi,borderBottomColor:mi,borderColor:mi,borderInline:mi,borderInlineEnd:mi,borderInlineStart:mi,borderLeft:mi,borderLeftColor:mi,borderRight:mi,borderRightColor:mi,borderTop:mi,borderTopColor:mi,caretColor:mi,color:mi,columnRuleColor:mi,fill:mi,outline:mi,outlineColor:mi,stroke:mi,textDecorationColor:mi,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:zs,minBlockSize:zs,maxBlockSize:zs,inlineSize:zs,minInlineSize:zs,maxInlineSize:zs,width:zs,minWidth:zs,maxWidth:zs,height:zs,minHeight:zs,maxHeight:zs,flexBasis:zs,gridTemplateColumns:zs,gridTemplateRows:zs,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},d2=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,im=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(a=>JSON.stringify(a,d2))(e);return r in n?n[r]:n[r]=t(e,...i)}},Td=Symbol.for("sxs.internal"),bT=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),e3=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:h2}=Object.prototype,VE=n=>n.includes("-")?n:n.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),p2=/\s+(?![^()]*\))/,bp=n=>e=>n(...typeof e=="string"?String(e).split(p2):[e]),t3={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:bp(((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n}))),marginInline:bp(((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n}))),maxSize:bp(((n,e)=>({maxBlockSize:n,maxInlineSize:e||n}))),minSize:bp(((n,e)=>({minBlockSize:n,minInlineSize:e||n}))),paddingBlock:bp(((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n}))),paddingInline:bp(((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n})))},DM=/([\d.]+)([^]*)/,m2=(n,e)=>n.length?n.reduce(((t,i)=>(t.push(...e.map((r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r))),t)),[]):e,g2=(n,e)=>n in v2&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,i,r,a)=>i+(r==="stretch"?`-moz-available${a};${VE(n)}:${i}-webkit-fill-available`:`-moz-fit-content${a};${VE(n)}:${i}fit-content`)+a)):String(e),v2={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Bc=n=>n?n+"-":"",xP=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((i,r,a,l,u)=>l=="$"==!!a?i:(r||l=="--"?"calc(":"")+"var(--"+(l==="$"?Bc(e)+(u.includes("$")?"":Bc(t))+u.replace(/\$/g,"-"):u)+")"+(r||l=="--"?"*"+(r||"")+(a||"1")+")":""))),y2=/\s*,\s*(?![^()]*\))/,_2=Object.prototype.toString,Ap=(n,e,t,i,r)=>{let a,l,u;const h=(p,g,y)=>{let _,b;const S=A=>{for(_ in A){const R=_.charCodeAt(0)===64,D=R&&Array.isArray(A[_])?A[_]:[A[_]];for(b of D){const I=/[A-Z]/.test(E=_)?E:E.replace(/-[^]/g,(N=>N[1].toUpperCase())),L=typeof b=="object"&&b&&b.toString===_2&&(!i.utils[I]||!g.length);if(I in i.utils&&!L){const N=i.utils[I];if(N!==l){l=N,S(N(b)),l=null;continue}}else if(I in t3){const N=t3[I];if(N!==u){u=N,S(N(b)),u=null;continue}}if(R&&(w=_.slice(1)in i.media?"@media "+i.media[_.slice(1)]:_,_=w.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((N,F,V,P,U,W)=>{const Q=DM.test(F),K=.0625*(Q?-1:1),[ne,re]=Q?[P,F]:[F,P];return"("+(V[0]==="="?"":V[0]===">"===Q?"max-":"min-")+ne+":"+(V[0]!=="="&&V.length===1?re.replace(DM,((X,J,ae)=>Number(J)+K*(V===">"?1:-1)+ae)):re)+(U?") and ("+(U[0]===">"?"min-":"max-")+ne+":"+(U.length===1?W.replace(DM,((X,J,ae)=>Number(J)+K*(U===">"?-1:1)+ae)):W):"")+")"}))),L){const N=R?y.concat(_):[...y],F=R?[...g]:m2(g,_.split(y2));a!==void 0&&r(n3(...a)),a=void 0,h(b,F,N)}else a===void 0&&(a=[[],g,y]),_=R||_.charCodeAt(0)!==36?_:`--${Bc(i.prefix)}${_.slice(1).replace(/\$/g,"-")}`,b=L?b:typeof b=="number"?b&&I in b2?String(b)+"px":String(b):xP(g2(I,b??""),i.prefix,i.themeMap[I]),a[0].push(`${R?`${_} `:`${VE(_)}:`}${b}`)}}var w,E};S(p),a!==void 0&&r(n3(...a)),a=void 0};h(n,e,t)},n3=(n,e,t)=>`${t.map((i=>`${i}{`)).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,b2={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},i3=n=>String.fromCharCode(n+(n>25?39:97)),Ad=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=i3(t%52)+i;return i3(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),s0=["themed","global","styled","onevar","resonevar","allvar","inline"],x2=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},S2=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,((a,l)=>{const{cssText:u}=a;let h="";if(u.startsWith("--sxs"))return"";if(r[l-1]&&(h=r[l-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(const p in e.rules)if(e.rules[p].group===a)return`--sxs{--sxs:${[...e.rules[p].cache].join(" ")}}${u}`;return a.cssRules.length?`${h}${u}`:""}return u})).join("")},i=()=>{if(e){const{rules:u,sheet:h}=e;if(!h.deleteRule){for(;Object(Object(h.cssRules)[0]).type===3;)h.cssRules.splice(0,1);h.cssRules=[]}for(const p in u)delete u[p]}const r=Object(n).styleSheets||[];for(const u of r)if(x2(u)){for(let h=0,p=u.cssRules;p[h];++h){const g=Object(p[h]);if(g.type!==1)continue;const y=Object(p[h+1]);if(y.type!==4)continue;++h;const{cssText:_}=g;if(!_.startsWith("--sxs"))continue;const b=_.slice(14,-3).trim().split(/\s+/),S=s0[b[0]];S&&(e||(e={sheet:u,reset:i,rules:{},toString:t}),e.rules[S]={group:y,index:h,cache:new Set(b)})}if(e)break}if(!e){const u=(h,p)=>({type:p,cssRules:[],insertRule(g,y){this.cssRules.splice(y,0,u(g,{import:3,undefined:1}[(g.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return h==="@media{}"?`@media{${[].map.call(this.cssRules,(g=>g.cssText)).join("")}}`:h}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:u("","text/css"),rules:{},reset:i,toString:t}}const{sheet:a,rules:l}=e;for(let u=s0.length-1;u>=0;--u){const h=s0[u];if(!l[h]){const p=s0[u+1],g=l[p]?l[p].index:a.cssRules.length;a.insertRule("@media{}",g),a.insertRule(`--sxs{--sxs:${u}}`,g),l[h]={group:a.cssRules[g+1],index:g,cache:new Set([u])}}M2(l[h])}};return i(),e},M2=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},qg=Symbol(),E2=im(),r3=(n,e)=>E2(n,(()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[Td]){i.type==null&&(i.type=r[Td].type);for(const a of r[Td].composers)i.composers.add(a)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(w2(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),T2(n,i,e)})),w2=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const a=`${Bc(r.prefix)}c-${Ad(i)}`,l=[],u=[],h=Object.create(null),p=[];for(const _ in t)h[_]=String(t[_]);if(typeof n=="object"&&n)for(const _ in n){g=h,y=_,h2.call(g,y)||(h[_]="undefined");const b=n[_];for(const S in b){const A={[_]:String(S)};String(S)==="undefined"&&p.push(_);const w=b[S],E=[A,w,!e3(w)];l.push(E)}}var g,y;if(typeof e=="object"&&e)for(const _ of e){let{css:b,...S}=_;b=typeof b=="object"&&b||{};for(const w in S)S[w]=String(S[w]);const A=[S,b,!e3(b)];u.push(A)}return[a,i,l,u,h,p]},T2=(n,e,t)=>{const[i,r,a,l]=A2(e.composers),u=typeof e.type=="function"||e.type.$$typeof?(y=>{function _(){for(let b=0;b<_[qg].length;b++){const[S,A]=_[qg][b];y.rules[S].apply(A)}return _[qg]=[],null}return _[qg]=[],_.rules={},s0.forEach((b=>_.rules[b]={apply:S=>_[qg].push([b,S])})),_})(t):null,h=(u||t).rules,p=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,g=y=>{y=typeof y=="object"&&y||C2;const{css:_,...b}=y,S={};for(const E in a)if(delete b[E],E in y){let R=y[E];typeof R=="object"&&R?S[E]={"@initial":a[E],...R}:(R=String(R),S[E]=R!=="undefined"||l.has(E)?R:a[E])}else S[E]=a[E];const A=new Set([...r]);for(const[E,R,D,I]of e.composers){t.rules.styled.cache.has(E)||(t.rules.styled.cache.add(E),Ap(R,[`.${E}`],[],n,(F=>{h.styled.apply(F)})));const L=s3(D,S,n.media),N=s3(I,S,n.media,!0);for(const F of L)if(F!==void 0)for(const[V,P,U]of F){const W=`${E}-${Ad(P)}-${V}`;A.add(W);const Q=(U?t.rules.resonevar:t.rules.onevar).cache,K=U?h.resonevar:h.onevar;Q.has(W)||(Q.add(W),Ap(P,[`.${W}`],[],n,(ne=>{K.apply(ne)})))}for(const F of N)if(F!==void 0)for(const[V,P]of F){const U=`${E}-${Ad(P)}-${V}`;A.add(U),t.rules.allvar.cache.has(U)||(t.rules.allvar.cache.add(U),Ap(P,[`.${U}`],[],n,(W=>{h.allvar.apply(W)})))}}if(typeof _=="object"&&_){const E=`${i}-i${Ad(_)}-css`;A.add(E),t.rules.inline.cache.has(E)||(t.rules.inline.cache.add(E),Ap(_,[`.${E}`],[],n,(R=>{h.inline.apply(R)})))}for(const E of String(y.className||"").trim().split(/\s+/))E&&A.add(E);const w=b.className=[...A].join(" ");return{type:e.type,className:w,selector:p,props:b,toString:()=>w,deferredInjector:u}};return bT(g,{className:i,selector:p,[Td]:e,toString:()=>(t.rules.styled.cache.has(i)||g(),i)})},A2=n=>{let e="";const t=[],i={},r=[];for(const[a,,,,l,u]of n){e===""&&(e=a),t.push(a),r.push(...u);for(const h in l){const p=l[h];(i[h]===void 0||p!=="undefined"||u.includes(p))&&(i[h]=p)}}return[e,t,i,new Set(r)]},s3=(n,e,t,i)=>{const r=[];e:for(let[a,l,u]of n){if(u)continue;let h,p=0,g=!1;for(h in a){const y=a[h];let _=e[h];if(_!==y){if(typeof _!="object"||!_)continue e;{let b,S,A=0;for(const w in _){if(y===String(_[w])){if(w!=="@initial"){const E=w.slice(1);(S=S||[]).push(E in t?t[E]:w.replace(/^@media ?/,"")),g=!0}p+=A,b=!0}++A}if(S&&S.length&&(l={["@media "+S.join(", ")]:l}),!b)continue e}}}(r[p]=r[p]||[]).push([i?"cv":`${h}-${a[h]}`,l,g])}return r},C2={},R2=im(),D2=(n,e)=>R2(n,(()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let a=Ad(r);if(!e.rules.global.cache.has(a)){if(e.rules.global.cache.add(a),"@import"in r){let l=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let u of[].concat(r["@import"]))u=u.includes('"')||u.includes("'")?u:`"${u}"`,e.sheet.insertRule(`@import ${u};`,l++);delete r["@import"]}Ap(r,[],[],n,(l=>{e.rules.global.apply(l)}))}}return""};return bT(i,{toString:i})})),O2=im(),I2=(n,e)=>O2(n,(()=>t=>{const i=`${Bc(n.prefix)}k-${Ad(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const a=[];Ap(t,[],[],n,(u=>a.push(u)));const l=`@keyframes ${i}{${a.join("")}}`;e.rules.global.apply(l)}return i};return bT(r,{get name(){return r()},toString:r})})),P2=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Bc(this.prefix)+Bc(this.scale)+this.token}toString(){return this.computedValue}},N2=im(),L2=(n,e)=>N2(n,(()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${Bc(n.prefix)}t-${Ad(i)}`}`,a={},l=[];for(const h in i){a[h]={};for(const p in i[h]){const g=`--${Bc(n.prefix)}${h}-${p}`,y=xP(String(i[h][p]),n.prefix,h);a[h][p]=new P2(p,y,h,n.prefix),l.push(`${g}:${y}`)}}const u=()=>{if(l.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const h=`${i===n.theme?":root,":""}.${t}{${l.join(";")}}`;e.rules.themed.apply(h)}return t};return{...a,get className(){return u()},selector:r,toString:u}})),U2=im(),z2=im(),F2=n=>{const e=(t=>{let i=!1;const r=U2(t,(a=>{i=!0;const l="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",u=typeof a.media=="object"&&a.media||{},h=typeof a.root=="object"?a.root||null:globalThis.document||null,p=typeof a.theme=="object"&&a.theme||{},g={prefix:l,media:u,theme:p,themeMap:typeof a.themeMap=="object"&&a.themeMap||{...f2},utils:typeof a.utils=="object"&&a.utils||{}},y=S2(h),_={css:r3(g,y),globalCss:D2(g,y),keyframes:I2(g,y),createTheme:L2(g,y),reset(){y.reset(),_.theme.toString()},theme:{},sheet:y,config:g,prefix:l,getCssText:y.toString,toString:y.toString};return String(_.theme=_.createTheme(p)),_}));return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>z2(t,(()=>{const r=r3(t,i);return(...a)=>{const l=r(...a),u=l[Td].type,h=ce.forwardRef(((p,g)=>{const y=p&&p.as||u,{props:_,deferredInjector:b}=l(p);return delete _.as,_.ref=g,b?ce.createElement(ce.Fragment,null,ce.createElement(y,_),ce.createElement(b,null)):ce.createElement(y,_)}));return h.className=l.className,h.displayName=`Styled.${u.displayName||u.name||u}`,h.selector=l.selector,h.toString=()=>l.selector,h[Td]=l[Td],h}})))(e),e};function B2(n,e,t){return Math.max(e,Math.min(n,t))}const bs={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function a3(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function o3(n,e,t,i=.15){return i===0?B2(n,e,t):n<e?-a3(e-n,t-e,i)+e:n>t?+a3(n-t,t-e,i)+t:n}function k2(n,[e,t],[i,r]){const[[a,l],[u,h]]=n;return[o3(e,a,l,i),o3(t,u,h,r)]}function V2(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function H2(n){var e=V2(n,"string");return typeof e=="symbol"?e:String(e)}function ma(n,e,t){return e=H2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function l3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ji(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l3(Object(t),!0).forEach(function(i){ma(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l3(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const SP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function c3(n){return n?n[0].toUpperCase()+n.slice(1):""}const G2=["enter","leave"];function W2(n=!1,e){return n&&!G2.includes(e)}function $2(n,e="",t=!1){const i=SP[n],r=i&&i[e]||e;return"on"+c3(n)+c3(r)+(W2(t,r)?"Capture":"")}const j2=["gotpointercapture","lostpointercapture"];function X2(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=j2.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function q2(n,e=""){const t=SP[n],i=t&&t[e]||e;return n+i}function AS(n){return"touches"in n}function MP(n){return AS(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Y2(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function Z2(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function EP(n){return AS(n)?Z2(n)[0]:n}function K2(n){return Y2(n).map(e=>e.identifier)}function OM(n){const e=EP(n);return AS(n)?e.identifier:e.pointerId}function u3(n){const e=EP(n);return[e.clientX,e.clientY]}function Q2(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:a}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:a})}return e}function xx(n,...e){return typeof n=="function"?n(...e):n}function J2(){}function e9(...n){return n.length===0?J2:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function f3(n,e){return Object.assign({},e,n||{})}const t9=32;class n9{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?xx(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let a=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Q2(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const N=t._delta.map(Math.abs);bs.addTo(t._distance,N)}this.axisIntent&&this.axisIntent(e);const[l,u]=t._movement,[h,p]=i.threshold,{_step:g,values:y}=t;if(i.hasCustomTransform?(g[0]===!1&&(g[0]=Math.abs(l)>=h&&y[0]),g[1]===!1&&(g[1]=Math.abs(u)>=p&&y[1])):(g[0]===!1&&(g[0]=Math.abs(l)>=h&&Math.sign(l)*h),g[1]===!1&&(g[1]=Math.abs(u)>=p&&Math.sign(u)*p)),t.intentional=g[0]!==!1||g[1]!==!1,!t.intentional)return;const _=[0,0];if(i.hasCustomTransform){const[N,F]=y;_[0]=g[0]!==!1?N-g[0]:0,_[1]=g[1]!==!1?F-g[1]:0}else _[0]=g[0]!==!1?l-g[0]:0,_[1]=g[1]!==!1?u-g[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(_);const b=t.offset,S=t._active&&!t._blocked||t.active;S&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=xx(i.bounds,t)),this.setup&&this.setup()),t.movement=_,this.computeOffset()));const[A,w]=t.offset,[[E,R],[D,I]]=t._bounds;t.overflow=[A<E?-1:A>R?1:0,w<D?-1:w>I?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const L=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=k2(t._bounds,t.offset,L),t.delta=bs.sub(t.offset,b),this.computeMovement(),S&&(!t.last||a>t9)){t.delta=bs.sub(t.offset,b);const N=t.delta.map(Math.abs);bs.addTo(t.distance,N),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[N[0]/a,N[1]/a],t.timeDelta=a)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Ji(Ji(Ji({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function i9([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class r9 extends n9{constructor(...e){super(...e),ma(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=bs.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=bs.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[MP(e)]:i.axisThreshold;t.axis=i9(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const s9=n=>n,d3=.15,wP={enabled(n=!0){return n},eventOptions(n,e,t){return Ji(Ji({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[d3,d3];case!1:return[0,0];default:return bs.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return bs.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||s9},threshold(n){return bs.toVector(n,0)}},a9=0,mv=Ji(Ji({},wP),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=a9){return n},bounds(n={}){if(typeof n=="function")return a=>mv.bounds(n(a));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),h3={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class o9 extends r9{constructor(...e){super(...e),ma(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=mv.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=OM(e),i._pointerActive=!0,this.computeValues(u3(e)),this.computeInitial(),t.preventScrollAxis&&MP(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=OM(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const a=u3(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=bs.sub(a,t._values),this.computeValues(a)),bs.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=OM(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,l]=t._distance;if(t.tap=a<=i.tapsThreshold&&l<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[u,h]=t._delta,[p,g]=t._movement,[y,_]=i.swipe.velocity,[b,S]=i.swipe.distance,A=i.swipe.duration;if(t.elapsedTime<A){const w=Math.abs(u/t.timeDelta),E=Math.abs(h/t.timeDelta);w>y&&Math.abs(p)>b&&(t.swipe[0]=Math.sign(u)),E>_&&Math.abs(g)>S&&(t.swipe[1]=Math.sign(h))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,l9(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=h3[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,bs.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in h3&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function l9(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const gv=typeof window<"u"&&window.document&&window.document.createElement;function TP(){return gv&&"ontouchstart"in window}function c9(){return TP()||gv&&window.navigator.maxTouchPoints>1}function u9(){return gv&&"onpointerdown"in window}function f9(){return gv&&"exitPointerLock"in window.document}function d9(){try{return"constructor"in GestureEvent}catch{return!1}}const oo={isBrowser:gv,gesture:d9(),touch:TP(),touchscreen:c9(),pointer:u9(),pointerLock:f9()},h9=250,p9=180,m9=.5,g9=50,v9=250,y9=10,p3={mouse:0,touch:0,pen:8},_9=Ji(Ji({},mv),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&oo.pointerLock,oo.touch&&t?"touch":this.pointerLock?"mouse":oo.pointer&&!r?"pointer":oo.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?h9:void 0,!(!oo.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const a=bs.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,a},swipe({velocity:n=m9,distance:e=g9,duration:t=v9}={}){return{velocity:this.transform(bs.toVector(n)),distance:this.transform(bs.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return p9;case!1:return 0;default:return n}},axisThreshold(n){return n?Ji(Ji({},p3),n):p3},keyboardDisplacement(n=y9){return n}});Ji(Ji({},wP),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!oo.touch&&oo.gesture)return"gesture";if(oo.touch&&i)return"touch";if(oo.touchscreen){if(oo.pointer)return"pointer";if(oo.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=l=>{const u=f3(xx(t,l),{min:-1/0,max:1/0});return[u.min,u.max]},a=l=>{const u=f3(xx(i,l),{min:-1/0,max:1/0});return[u.min,u.max]};return typeof t!="function"&&typeof i!="function"?[r(),a()]:l=>[r(l),a(l)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",bs.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Ji(Ji({},mv),{},{mouseOnly:(n=!0)=>n});Ji(Ji({},mv),{},{mouseOnly:(n=!0)=>n});const AP=new Map,HE=new Map;function b9(n){AP.set(n.key,n.engine),HE.set(n.key,n.resolver)}const x9={key:"drag",engine:o9,resolver:_9};function S9(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function M9(n,e){if(n==null)return{};var t=S9(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const E9={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=oo.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},w9=["target","eventOptions","window","enabled","transform"];function _b(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=_b(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function T9(n,e,t={}){const i=n,{target:r,eventOptions:a,window:l,enabled:u,transform:h}=i,p=M9(i,w9);if(t.shared=_b({target:r,eventOptions:a,window:l,enabled:u,transform:h},E9),e){const g=HE.get(e);t[e]=_b(Ji({shared:t.shared},p),g)}else for(const g in p){const y=HE.get(g);y&&(t[g]=_b(Ji({shared:t.shared},p[g]),y))}return t}class CP{constructor(e,t){ma(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,a){const l=this._listeners,u=q2(t,i),h=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},p=Ji(Ji({},h),a);e.addEventListener(u,r,p);const g=()=>{e.removeEventListener(u,r,p),l.delete(g)};return l.add(g),g}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class A9{constructor(){ma(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>{window.clearTimeout(e)}),this._timeouts.clear()}}let C9=class{constructor(e){ma(this,"gestures",new Set),ma(this,"_targetEventStore",new CP(this)),ma(this,"gestureEventStores",{}),ma(this,"gestureTimeoutStores",{}),ma(this,"handlers",{}),ma(this,"config",{}),ma(this,"pointerIds",new Set),ma(this,"touchIds",new Set),ma(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),R9(this,e)}setEventIds(e){if(AS(e))return this.touchIds=new Set(K2(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=T9(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const l of this.gestures){const u=this.config[l],h=m3(i,u.eventOptions,!!r);if(u.enabled){const p=AP.get(l);new p(this,e,l).bind(h)}}const a=m3(i,t.eventOptions,!!r);for(const l in this.nativeHandlers)a(l,"",u=>this.nativeHandlers[l](Ji(Ji({},this.state.shared),{},{event:u,args:e})),void 0,!0)}for(const a in i)i[a]=e9(...i[a]);if(!r)return i;for(const a in i){const{device:l,capture:u,passive:h}=X2(a);this._targetEventStore.add(r,l,"",i[a],{capture:u,passive:h})}}}};function xp(n,e){n.gestures.add(e),n.gestureEventStores[e]=new CP(n,e),n.gestureTimeoutStores[e]=new A9}function R9(n,e){e.drag&&xp(n,"drag"),e.wheel&&xp(n,"wheel"),e.scroll&&xp(n,"scroll"),e.move&&xp(n,"move"),e.pinch&&xp(n,"pinch"),e.hover&&xp(n,"hover")}const m3=(n,e,t)=>(i,r,a,l={},u=!1)=>{var h,p;const g=(h=l.capture)!==null&&h!==void 0?h:e.capture,y=(p=l.passive)!==null&&p!==void 0?p:e.passive;let _=u?i:$2(i,r,g);t&&y&&(_+="Passive"),n[_]=n[_]||[],n[_].push(a)};function D9(n,e={},t,i){const r=ce.useMemo(()=>new C9(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),ce.useEffect(r.effect.bind(r)),ce.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function O9(n,e){return b9(x9),D9({drag:n},e||{},"drag")}function Oc(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}function RP(n,e=[]){let t=[];function i(a,l){const u=B.createContext(l),h=t.length;t=[...t,l];const p=y=>{const{scope:_,children:b,...S}=y,A=_?.[n]?.[h]||u,w=B.useMemo(()=>S,Object.values(S));return je.jsx(A.Provider,{value:w,children:b})};p.displayName=a+"Provider";function g(y,_){const b=_?.[n]?.[h]||u,S=B.useContext(b);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[p,g]}const r=()=>{const a=t.map(l=>B.createContext(l));return function(u){const h=u?.[n]||a;return B.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return r.scopeName=n,[i,I9(r,...e)]}function I9(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const l=i.reduce((u,{useScope:h,scopeName:p})=>{const y=h(a)[`__scope${p}`];return{...u,...y}},{});return B.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function P9(n){const e=N9(n),t=B.forwardRef((i,r)=>{const{children:a,...l}=i,u=B.Children.toArray(a),h=u.find(U9);if(h){const p=h.props.children,g=u.map(y=>y===h?B.Children.count(p)>1?B.Children.only(null):B.isValidElement(p)?p.props.children:null:y);return je.jsx(e,{...l,ref:r,children:B.isValidElement(p)?B.cloneElement(p,void 0,g):null})}return je.jsx(e,{...l,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function N9(n){const e=B.forwardRef((t,i)=>{const{children:r,...a}=t;if(B.isValidElement(r)){const l=F9(r),u=z9(a,r.props);return r.type!==B.Fragment&&(u.ref=i?Vd(i,l):l),B.cloneElement(r,u)}return B.Children.count(r)>1?B.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var L9=Symbol("radix.slottable");function U9(n){return B.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===L9}function z9(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...u)=>{const h=a(...u);return r(...u),h}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function F9(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var B9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],DP=B9.reduce((n,e)=>{const t=P9(`Primitive.${e}`),i=B.forwardRef((r,a)=>{const{asChild:l,...u}=r,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),je.jsx(h,{...u,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function k9(n,e){n&&yT.flushSync(()=>n.dispatchEvent(e))}function CS(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n}),B.useMemo(()=>(...t)=>e.current?.(...t),[])}function V9(n,e=globalThis?.document){const t=CS(n);B.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var H9="DismissableLayer",GE="dismissableLayer.update",G9="dismissableLayer.pointerDownOutside",W9="dismissableLayer.focusOutside",g3,OP=B.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),IP=B.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...h}=n,p=B.useContext(OP),[g,y]=B.useState(null),_=g?.ownerDocument??globalThis?.document,[,b]=B.useState({}),S=Hd(e,F=>y(F)),A=Array.from(p.layers),[w]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),E=A.indexOf(w),R=g?A.indexOf(g):-1,D=p.layersWithOutsidePointerEventsDisabled.size>0,I=R>=E,L=X9(F=>{const V=F.target,P=[...p.branches].some(U=>U.contains(V));!I||P||(r?.(F),l?.(F),F.defaultPrevented||u?.())},_),N=q9(F=>{const V=F.target;[...p.branches].some(U=>U.contains(V))||(a?.(F),l?.(F),F.defaultPrevented||u?.())},_);return V9(F=>{R===p.layers.size-1&&(i?.(F),!F.defaultPrevented&&u&&(F.preventDefault(),u()))},_),B.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(g3=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),v3(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=g3)}},[g,_,t,p]),B.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),v3())},[g,p]),B.useEffect(()=>{const F=()=>b({});return document.addEventListener(GE,F),()=>document.removeEventListener(GE,F)},[]),je.jsx(DP.div,{...h,ref:S,style:{pointerEvents:D?I?"auto":"none":void 0,...n.style},onFocusCapture:Oc(n.onFocusCapture,N.onFocusCapture),onBlurCapture:Oc(n.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Oc(n.onPointerDownCapture,L.onPointerDownCapture)})});IP.displayName=H9;var $9="DismissableLayerBranch",j9=B.forwardRef((n,e)=>{const t=B.useContext(OP),i=B.useRef(null),r=Hd(e,i);return B.useEffect(()=>{const a=i.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),je.jsx(DP.div,{...n,ref:r})});j9.displayName=$9;function X9(n,e=globalThis?.document){const t=CS(n),i=B.useRef(!1),r=B.useRef(()=>{});return B.useEffect(()=>{const a=u=>{if(u.target&&!i.current){let h=function(){PP(G9,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=h,e.addEventListener("click",r.current,{once:!0})):h()}else e.removeEventListener("click",r.current);i.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function q9(n,e=globalThis?.document){const t=CS(n),i=B.useRef(!1);return B.useEffect(()=>{const r=a=>{a.target&&!i.current&&PP(W9,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function v3(){const n=new CustomEvent(GE);document.dispatchEvent(n)}function PP(n,e,t,{discrete:i}){const r=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?k9(r,a):r.dispatchEvent(a)}var Y9=bw[" useId ".trim().toString()]||(()=>{}),Z9=0;function K9(n){const[e,t]=B.useState(Y9());return rf(()=>{t(i=>i??String(Z9++))},[n]),e?`radix-${e}`:""}const Q9=["top","right","bottom","left"],sf=Math.min,wa=Math.max,Sx=Math.round,ib=Math.floor,Bl=n=>({x:n,y:n}),J9={left:"right",right:"left",bottom:"top",top:"bottom"},eG={start:"end",end:"start"};function WE(n,e,t){return wa(n,sf(e,t))}function kc(n,e){return typeof n=="function"?n(e):n}function Vc(n){return n.split("-")[0]}function rm(n){return n.split("-")[1]}function xT(n){return n==="x"?"y":"x"}function ST(n){return n==="y"?"height":"width"}const tG=new Set(["top","bottom"]);function zl(n){return tG.has(Vc(n))?"y":"x"}function MT(n){return xT(zl(n))}function nG(n,e,t){t===void 0&&(t=!1);const i=rm(n),r=MT(n),a=ST(r);let l=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=Mx(l)),[l,Mx(l)]}function iG(n){const e=Mx(n);return[$E(n),e,$E(e)]}function $E(n){return n.replace(/start|end/g,e=>eG[e])}const y3=["left","right"],_3=["right","left"],rG=["top","bottom"],sG=["bottom","top"];function aG(n,e,t){switch(n){case"top":case"bottom":return t?e?_3:y3:e?y3:_3;case"left":case"right":return e?rG:sG;default:return[]}}function oG(n,e,t,i){const r=rm(n);let a=aG(Vc(n),t==="start",i);return r&&(a=a.map(l=>l+"-"+r),e&&(a=a.concat(a.map($E)))),a}function Mx(n){return n.replace(/left|right|bottom|top/g,e=>J9[e])}function lG(n){return{top:0,right:0,bottom:0,left:0,...n}}function NP(n){return typeof n!="number"?lG(n):{top:n,right:n,bottom:n,left:n}}function Ex(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}function b3(n,e,t){let{reference:i,floating:r}=n;const a=zl(e),l=MT(e),u=ST(l),h=Vc(e),p=a==="y",g=i.x+i.width/2-r.width/2,y=i.y+i.height/2-r.height/2,_=i[u]/2-r[u]/2;let b;switch(h){case"top":b={x:g,y:i.y-r.height};break;case"bottom":b={x:g,y:i.y+i.height};break;case"right":b={x:i.x+i.width,y};break;case"left":b={x:i.x-r.width,y};break;default:b={x:i.x,y:i.y}}switch(rm(e)){case"start":b[l]-=_*(t&&p?-1:1);break;case"end":b[l]+=_*(t&&p?-1:1);break}return b}const cG=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:l}=t,u=a.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(e));let p=await l.getElementRects({reference:n,floating:e,strategy:r}),{x:g,y}=b3(p,i,h),_=i,b={},S=0;for(let A=0;A<u.length;A++){const{name:w,fn:E}=u[A],{x:R,y:D,data:I,reset:L}=await E({x:g,y,initialPlacement:i,placement:_,strategy:r,middlewareData:b,rects:p,platform:l,elements:{reference:n,floating:e}});g=R??g,y=D??y,b={...b,[w]:{...b[w],...I}},L&&S<=50&&(S++,typeof L=="object"&&(L.placement&&(_=L.placement),L.rects&&(p=L.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:r}):L.rects),{x:g,y}=b3(p,_,h)),A=-1)}return{x:g,y,placement:_,strategy:r,middlewareData:b}};async function H0(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:l,elements:u,strategy:h}=n,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:_=!1,padding:b=0}=kc(e,n),S=NP(b),w=u[_?y==="floating"?"reference":"floating":y],E=Ex(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(w)))==null||t?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:p,rootBoundary:g,strategy:h})),R=y==="floating"?{x:i,y:r,width:l.floating.width,height:l.floating.height}:l.reference,D=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),I=await(a.isElement==null?void 0:a.isElement(D))?await(a.getScale==null?void 0:a.getScale(D))||{x:1,y:1}:{x:1,y:1},L=Ex(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:R,offsetParent:D,strategy:h}):R);return{top:(E.top-L.top+S.top)/I.y,bottom:(L.bottom-E.bottom+S.bottom)/I.y,left:(E.left-L.left+S.left)/I.x,right:(L.right-E.right+S.right)/I.x}}const uG=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:a,platform:l,elements:u,middlewareData:h}=e,{element:p,padding:g=0}=kc(n,e)||{};if(p==null)return{};const y=NP(g),_={x:t,y:i},b=MT(r),S=ST(b),A=await l.getDimensions(p),w=b==="y",E=w?"top":"left",R=w?"bottom":"right",D=w?"clientHeight":"clientWidth",I=a.reference[S]+a.reference[b]-_[b]-a.floating[S],L=_[b]-a.reference[b],N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let F=N?N[D]:0;(!F||!await(l.isElement==null?void 0:l.isElement(N)))&&(F=u.floating[D]||a.floating[S]);const V=I/2-L/2,P=F/2-A[S]/2-1,U=sf(y[E],P),W=sf(y[R],P),Q=U,K=F-A[S]-W,ne=F/2-A[S]/2+V,re=WE(Q,ne,K),X=!h.arrow&&rm(r)!=null&&ne!==re&&a.reference[S]/2-(ne<Q?U:W)-A[S]/2<0,J=X?ne<Q?ne-Q:ne-K:0;return{[b]:_[b]+J,data:{[b]:re,centerOffset:ne-re-J,...X&&{alignmentOffset:J}},reset:X}}}),fG=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:a,rects:l,initialPlacement:u,platform:h,elements:p}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:_,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:A=!0,...w}=kc(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const E=Vc(r),R=zl(u),D=Vc(u)===u,I=await(h.isRTL==null?void 0:h.isRTL(p.floating)),L=_||(D||!A?[Mx(u)]:iG(u)),N=S!=="none";!_&&N&&L.push(...oG(u,A,S,I));const F=[u,...L],V=await H0(e,w),P=[];let U=((i=a.flip)==null?void 0:i.overflows)||[];if(g&&P.push(V[E]),y){const ne=nG(r,l,I);P.push(V[ne[0]],V[ne[1]])}if(U=[...U,{placement:r,overflows:P}],!P.every(ne=>ne<=0)){var W,Q;const ne=(((W=a.flip)==null?void 0:W.index)||0)+1,re=F[ne];if(re&&(!(y==="alignment"?R!==zl(re):!1)||U.every(ae=>zl(ae.placement)===R?ae.overflows[0]>0:!0)))return{data:{index:ne,overflows:U},reset:{placement:re}};let X=(Q=U.filter(J=>J.overflows[0]<=0).sort((J,ae)=>J.overflows[1]-ae.overflows[1])[0])==null?void 0:Q.placement;if(!X)switch(b){case"bestFit":{var K;const J=(K=U.filter(ae=>{if(N){const Me=zl(ae.placement);return Me===R||Me==="y"}return!0}).map(ae=>[ae.placement,ae.overflows.filter(Me=>Me>0).reduce((Me,Se)=>Me+Se,0)]).sort((ae,Me)=>ae[1]-Me[1])[0])==null?void 0:K[0];J&&(X=J);break}case"initialPlacement":X=u;break}if(r!==X)return{reset:{placement:X}}}return{}}}};function x3(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function S3(n){return Q9.some(e=>n[e]>=0)}const dG=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...r}=kc(n,e);switch(i){case"referenceHidden":{const a=await H0(e,{...r,elementContext:"reference"}),l=x3(a,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:S3(l)}}}case"escaped":{const a=await H0(e,{...r,altBoundary:!0}),l=x3(a,t.floating);return{data:{escapedOffsets:l,escaped:S3(l)}}}default:return{}}}}},LP=new Set(["left","top"]);async function hG(n,e){const{placement:t,platform:i,elements:r}=n,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),l=Vc(t),u=rm(t),h=zl(t)==="y",p=LP.has(l)?-1:1,g=a&&h?-1:1,y=kc(e,n);let{mainAxis:_,crossAxis:b,alignmentAxis:S}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof S=="number"&&(b=u==="end"?S*-1:S),h?{x:b*g,y:_*p}:{x:_*p,y:b*g}}const pG=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:r,y:a,placement:l,middlewareData:u}=e,h=await hG(e,n);return l===((t=u.offset)==null?void 0:t.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:r+h.x,y:a+h.y,data:{...h,placement:l}}}}},mG=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:u={fn:w=>{let{x:E,y:R}=w;return{x:E,y:R}}},...h}=kc(n,e),p={x:t,y:i},g=await H0(e,h),y=zl(Vc(r)),_=xT(y);let b=p[_],S=p[y];if(a){const w=_==="y"?"top":"left",E=_==="y"?"bottom":"right",R=b+g[w],D=b-g[E];b=WE(R,b,D)}if(l){const w=y==="y"?"top":"left",E=y==="y"?"bottom":"right",R=S+g[w],D=S-g[E];S=WE(R,S,D)}const A=u.fn({...e,[_]:b,[y]:S});return{...A,data:{x:A.x-t,y:A.y-i,enabled:{[_]:a,[y]:l}}}}}},gG=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:a,middlewareData:l}=e,{offset:u=0,mainAxis:h=!0,crossAxis:p=!0}=kc(n,e),g={x:t,y:i},y=zl(r),_=xT(y);let b=g[_],S=g[y];const A=kc(u,e),w=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(h){const D=_==="y"?"height":"width",I=a.reference[_]-a.floating[D]+w.mainAxis,L=a.reference[_]+a.reference[D]-w.mainAxis;b<I?b=I:b>L&&(b=L)}if(p){var E,R;const D=_==="y"?"width":"height",I=LP.has(Vc(r)),L=a.reference[y]-a.floating[D]+(I&&((E=l.offset)==null?void 0:E[y])||0)+(I?0:w.crossAxis),N=a.reference[y]+a.reference[D]+(I?0:((R=l.offset)==null?void 0:R[y])||0)-(I?w.crossAxis:0);S<L?S=L:S>N&&(S=N)}return{[_]:b,[y]:S}}}},vG=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:r,rects:a,platform:l,elements:u}=e,{apply:h=()=>{},...p}=kc(n,e),g=await H0(e,p),y=Vc(r),_=rm(r),b=zl(r)==="y",{width:S,height:A}=a.floating;let w,E;y==="top"||y==="bottom"?(w=y,E=_===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(E=y,w=_==="end"?"top":"bottom");const R=A-g.top-g.bottom,D=S-g.left-g.right,I=sf(A-g[w],R),L=sf(S-g[E],D),N=!e.middlewareData.shift;let F=I,V=L;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(V=D),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(F=R),N&&!_){const U=wa(g.left,0),W=wa(g.right,0),Q=wa(g.top,0),K=wa(g.bottom,0);b?V=S-2*(U!==0||W!==0?U+W:wa(g.left,g.right)):F=A-2*(Q!==0||K!==0?Q+K:wa(g.top,g.bottom))}await h({...e,availableWidth:V,availableHeight:F});const P=await l.getDimensions(u.floating);return S!==P.width||A!==P.height?{reset:{rects:!0}}:{}}}};function RS(){return typeof window<"u"}function sm(n){return UP(n)?(n.nodeName||"").toLowerCase():"#document"}function Ra(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function $l(n){var e;return(e=(UP(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function UP(n){return RS()?n instanceof Node||n instanceof Ra(n).Node:!1}function qo(n){return RS()?n instanceof Element||n instanceof Ra(n).Element:!1}function Hl(n){return RS()?n instanceof HTMLElement||n instanceof Ra(n).HTMLElement:!1}function M3(n){return!RS()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ra(n).ShadowRoot}const yG=new Set(["inline","contents"]);function vv(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=Yo(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!yG.has(r)}const _G=new Set(["table","td","th"]);function bG(n){return _G.has(sm(n))}const xG=[":popover-open",":modal"];function DS(n){return xG.some(e=>{try{return n.matches(e)}catch{return!1}})}const SG=["transform","translate","scale","rotate","perspective"],MG=["transform","translate","scale","rotate","perspective","filter"],EG=["paint","layout","strict","content"];function ET(n){const e=wT(),t=qo(n)?Yo(n):n;return SG.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||MG.some(i=>(t.willChange||"").includes(i))||EG.some(i=>(t.contain||"").includes(i))}function wG(n){let e=af(n);for(;Hl(e)&&!Yp(e);){if(ET(e))return e;if(DS(e))return null;e=af(e)}return null}function wT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TG=new Set(["html","body","#document"]);function Yp(n){return TG.has(sm(n))}function Yo(n){return Ra(n).getComputedStyle(n)}function OS(n){return qo(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function af(n){if(sm(n)==="html")return n;const e=n.assignedSlot||n.parentNode||M3(n)&&n.host||$l(n);return M3(e)?e.host:e}function zP(n){const e=af(n);return Yp(e)?n.ownerDocument?n.ownerDocument.body:n.body:Hl(e)&&vv(e)?e:zP(e)}function G0(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=zP(n),a=r===((i=n.ownerDocument)==null?void 0:i.body),l=Ra(r);if(a){const u=jE(l);return e.concat(l,l.visualViewport||[],vv(r)?r:[],u&&t?G0(u):[])}return e.concat(r,G0(r,[],t))}function jE(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function FP(n){const e=Yo(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Hl(n),a=r?n.offsetWidth:t,l=r?n.offsetHeight:i,u=Sx(t)!==a||Sx(i)!==l;return u&&(t=a,i=l),{width:t,height:i,$:u}}function TT(n){return qo(n)?n:n.contextElement}function Op(n){const e=TT(n);if(!Hl(e))return Bl(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:a}=FP(e);let l=(a?Sx(t.width):t.width)/i,u=(a?Sx(t.height):t.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const AG=Bl(0);function BP(n){const e=Ra(n);return!wT()||!e.visualViewport?AG:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CG(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ra(n)?!1:e}function Pd(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),a=TT(n);let l=Bl(1);e&&(i?qo(i)&&(l=Op(i)):l=Op(n));const u=CG(a,t,i)?BP(a):Bl(0);let h=(r.left+u.x)/l.x,p=(r.top+u.y)/l.y,g=r.width/l.x,y=r.height/l.y;if(a){const _=Ra(a),b=i&&qo(i)?Ra(i):i;let S=_,A=jE(S);for(;A&&i&&b!==S;){const w=Op(A),E=A.getBoundingClientRect(),R=Yo(A),D=E.left+(A.clientLeft+parseFloat(R.paddingLeft))*w.x,I=E.top+(A.clientTop+parseFloat(R.paddingTop))*w.y;h*=w.x,p*=w.y,g*=w.x,y*=w.y,h+=D,p+=I,S=Ra(A),A=jE(S)}}return Ex({width:g,height:y,x:h,y:p})}function IS(n,e){const t=OS(n).scrollLeft;return e?e.left+t:Pd($l(n)).left+t}function kP(n,e){const t=n.getBoundingClientRect(),i=t.left+e.scrollLeft-IS(n,t),r=t.top+e.scrollTop;return{x:i,y:r}}function RG(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const a=r==="fixed",l=$l(i),u=e?DS(e.floating):!1;if(i===l||u&&a)return t;let h={scrollLeft:0,scrollTop:0},p=Bl(1);const g=Bl(0),y=Hl(i);if((y||!y&&!a)&&((sm(i)!=="body"||vv(l))&&(h=OS(i)),Hl(i))){const b=Pd(i);p=Op(i),g.x=b.x+i.clientLeft,g.y=b.y+i.clientTop}const _=l&&!y&&!a?kP(l,h):Bl(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-h.scrollLeft*p.x+g.x+_.x,y:t.y*p.y-h.scrollTop*p.y+g.y+_.y}}function DG(n){return Array.from(n.getClientRects())}function OG(n){const e=$l(n),t=OS(n),i=n.ownerDocument.body,r=wa(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=wa(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let l=-t.scrollLeft+IS(n);const u=-t.scrollTop;return Yo(i).direction==="rtl"&&(l+=wa(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:l,y:u}}const E3=25;function IG(n,e){const t=Ra(n),i=$l(n),r=t.visualViewport;let a=i.clientWidth,l=i.clientHeight,u=0,h=0;if(r){a=r.width,l=r.height;const g=wT();(!g||g&&e==="fixed")&&(u=r.offsetLeft,h=r.offsetTop)}const p=IS(i);if(p<=0){const g=i.ownerDocument,y=g.body,_=getComputedStyle(y),b=g.compatMode==="CSS1Compat"&&parseFloat(_.marginLeft)+parseFloat(_.marginRight)||0,S=Math.abs(i.clientWidth-y.clientWidth-b);S<=E3&&(a-=S)}else p<=E3&&(a+=p);return{width:a,height:l,x:u,y:h}}const PG=new Set(["absolute","fixed"]);function NG(n,e){const t=Pd(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,a=Hl(n)?Op(n):Bl(1),l=n.clientWidth*a.x,u=n.clientHeight*a.y,h=r*a.x,p=i*a.y;return{width:l,height:u,x:h,y:p}}function w3(n,e,t){let i;if(e==="viewport")i=IG(n,t);else if(e==="document")i=OG($l(n));else if(qo(e))i=NG(e,t);else{const r=BP(n);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Ex(i)}function VP(n,e){const t=af(n);return t===e||!qo(t)||Yp(t)?!1:Yo(t).position==="fixed"||VP(t,e)}function LG(n,e){const t=e.get(n);if(t)return t;let i=G0(n,[],!1).filter(u=>qo(u)&&sm(u)!=="body"),r=null;const a=Yo(n).position==="fixed";let l=a?af(n):n;for(;qo(l)&&!Yp(l);){const u=Yo(l),h=ET(l);!h&&u.position==="fixed"&&(r=null),(a?!h&&!r:!h&&u.position==="static"&&!!r&&PG.has(r.position)||vv(l)&&!h&&VP(n,l))?i=i.filter(g=>g!==l):r=u,l=af(l)}return e.set(n,i),i}function UG(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const l=[...t==="clippingAncestors"?DS(e)?[]:LG(e,this._c):[].concat(t),i],u=l[0],h=l.reduce((p,g)=>{const y=w3(e,g,r);return p.top=wa(y.top,p.top),p.right=sf(y.right,p.right),p.bottom=sf(y.bottom,p.bottom),p.left=wa(y.left,p.left),p},w3(e,u,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function zG(n){const{width:e,height:t}=FP(n);return{width:e,height:t}}function FG(n,e,t){const i=Hl(e),r=$l(e),a=t==="fixed",l=Pd(n,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=Bl(0);function p(){h.x=IS(r)}if(i||!i&&!a)if((sm(e)!=="body"||vv(r))&&(u=OS(e)),i){const b=Pd(e,!0,a,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else r&&p();a&&!i&&r&&p();const g=r&&!i&&!a?kP(r,u):Bl(0),y=l.left+u.scrollLeft-h.x-g.x,_=l.top+u.scrollTop-h.y-g.y;return{x:y,y:_,width:l.width,height:l.height}}function IM(n){return Yo(n).position==="static"}function T3(n,e){if(!Hl(n)||Yo(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return $l(n)===t&&(t=t.ownerDocument.body),t}function HP(n,e){const t=Ra(n);if(DS(n))return t;if(!Hl(n)){let r=af(n);for(;r&&!Yp(r);){if(qo(r)&&!IM(r))return r;r=af(r)}return t}let i=T3(n,e);for(;i&&bG(i)&&IM(i);)i=T3(i,e);return i&&Yp(i)&&IM(i)&&!ET(i)?t:i||wG(n)||t}const BG=async function(n){const e=this.getOffsetParent||HP,t=this.getDimensions,i=await t(n.floating);return{reference:FG(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function kG(n){return Yo(n).direction==="rtl"}const VG={convertOffsetParentRelativeRectToViewportRelativeRect:RG,getDocumentElement:$l,getClippingRect:UG,getOffsetParent:HP,getElementRects:BG,getClientRects:DG,getDimensions:zG,getScale:Op,isElement:qo,isRTL:kG};function GP(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function HG(n,e){let t=null,i;const r=$l(n);function a(){var u;clearTimeout(i),(u=t)==null||u.disconnect(),t=null}function l(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const p=n.getBoundingClientRect(),{left:g,top:y,width:_,height:b}=p;if(u||e(),!_||!b)return;const S=ib(y),A=ib(r.clientWidth-(g+_)),w=ib(r.clientHeight-(y+b)),E=ib(g),D={rootMargin:-S+"px "+-A+"px "+-w+"px "+-E+"px",threshold:wa(0,sf(1,h))||1};let I=!0;function L(N){const F=N[0].intersectionRatio;if(F!==h){if(!I)return l();F?l(!1,F):i=setTimeout(()=>{l(!1,1e-7)},1e3)}F===1&&!GP(p,n.getBoundingClientRect())&&l(),I=!1}try{t=new IntersectionObserver(L,{...D,root:r.ownerDocument})}catch{t=new IntersectionObserver(L,D)}t.observe(n)}return l(!0),a}function GG(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=i,p=TT(n),g=r||a?[...p?G0(p):[],...G0(e)]:[];g.forEach(E=>{r&&E.addEventListener("scroll",t,{passive:!0}),a&&E.addEventListener("resize",t)});const y=p&&u?HG(p,t):null;let _=-1,b=null;l&&(b=new ResizeObserver(E=>{let[R]=E;R&&R.target===p&&b&&(b.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var D;(D=b)==null||D.observe(e)})),t()}),p&&!h&&b.observe(p),b.observe(e));let S,A=h?Pd(n):null;h&&w();function w(){const E=Pd(n);A&&!GP(A,E)&&t(),A=E,S=requestAnimationFrame(w)}return t(),()=>{var E;g.forEach(R=>{r&&R.removeEventListener("scroll",t),a&&R.removeEventListener("resize",t)}),y?.(),(E=b)==null||E.disconnect(),b=null,h&&cancelAnimationFrame(S)}}const WG=pG,$G=mG,jG=fG,XG=vG,qG=dG,A3=uG,YG=gG,ZG=(n,e,t)=>{const i=new Map,r={platform:VG,...t},a={...r.platform,_c:i};return cG(n,e,{...r,platform:a})};var KG=typeof document<"u",QG=function(){},bb=KG?B.useLayoutEffect:QG;function wx(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!wx(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const a=r[i];if(!(a==="_owner"&&n.$$typeof)&&!wx(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function WP(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function C3(n,e){const t=WP(n);return Math.round(e*t)/t}function PM(n){const e=B.useRef(n);return bb(()=>{e.current=n}),e}function JG(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:l}={},transform:u=!0,whileElementsMounted:h,open:p}=n,[g,y]=B.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[_,b]=B.useState(i);wx(_,i)||b(i);const[S,A]=B.useState(null),[w,E]=B.useState(null),R=B.useCallback(ae=>{ae!==N.current&&(N.current=ae,A(ae))},[]),D=B.useCallback(ae=>{ae!==F.current&&(F.current=ae,E(ae))},[]),I=a||S,L=l||w,N=B.useRef(null),F=B.useRef(null),V=B.useRef(g),P=h!=null,U=PM(h),W=PM(r),Q=PM(p),K=B.useCallback(()=>{if(!N.current||!F.current)return;const ae={placement:e,strategy:t,middleware:_};W.current&&(ae.platform=W.current),ZG(N.current,F.current,ae).then(Me=>{const Se={...Me,isPositioned:Q.current!==!1};ne.current&&!wx(V.current,Se)&&(V.current=Se,yT.flushSync(()=>{y(Se)}))})},[_,e,t,W,Q]);bb(()=>{p===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,y(ae=>({...ae,isPositioned:!1})))},[p]);const ne=B.useRef(!1);bb(()=>(ne.current=!0,()=>{ne.current=!1}),[]),bb(()=>{if(I&&(N.current=I),L&&(F.current=L),I&&L){if(U.current)return U.current(I,L,K);K()}},[I,L,K,U,P]);const re=B.useMemo(()=>({reference:N,floating:F,setReference:R,setFloating:D}),[R,D]),X=B.useMemo(()=>({reference:I,floating:L}),[I,L]),J=B.useMemo(()=>{const ae={position:t,left:0,top:0};if(!X.floating)return ae;const Me=C3(X.floating,g.x),Se=C3(X.floating,g.y);return u?{...ae,transform:"translate("+Me+"px, "+Se+"px)",...WP(X.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Me,top:Se}},[t,u,X.floating,g.x,g.y]);return B.useMemo(()=>({...g,update:K,refs:re,elements:X,floatingStyles:J}),[g,K,re,X,J])}const e7=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:r}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?A3({element:i.current,padding:r}).fn(t):{}:i?A3({element:i,padding:r}).fn(t):{}}}},t7=(n,e)=>({...WG(n),options:[n,e]}),n7=(n,e)=>({...$G(n),options:[n,e]}),i7=(n,e)=>({...YG(n),options:[n,e]}),r7=(n,e)=>({...jG(n),options:[n,e]}),s7=(n,e)=>({...XG(n),options:[n,e]}),a7=(n,e)=>({...qG(n),options:[n,e]}),o7=(n,e)=>({...e7(n),options:[n,e]});function l7(n){const e=c7(n),t=B.forwardRef((i,r)=>{const{children:a,...l}=i,u=B.Children.toArray(a),h=u.find(f7);if(h){const p=h.props.children,g=u.map(y=>y===h?B.Children.count(p)>1?B.Children.only(null):B.isValidElement(p)?p.props.children:null:y);return je.jsx(e,{...l,ref:r,children:B.isValidElement(p)?B.cloneElement(p,void 0,g):null})}return je.jsx(e,{...l,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function c7(n){const e=B.forwardRef((t,i)=>{const{children:r,...a}=t;if(B.isValidElement(r)){const l=h7(r),u=d7(a,r.props);return r.type!==B.Fragment&&(u.ref=i?Vd(i,l):l),B.cloneElement(r,u)}return B.Children.count(r)>1?B.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var u7=Symbol("radix.slottable");function f7(n){return B.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===u7}function d7(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...u)=>{const h=a(...u);return r(...u),h}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function h7(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var p7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],m7=p7.reduce((n,e)=>{const t=l7(`Primitive.${e}`),i=B.forwardRef((r,a)=>{const{asChild:l,...u}=r,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),je.jsx(h,{...u,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),g7="Arrow",$P=B.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...a}=n;return je.jsx(m7.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:je.jsx("polygon",{points:"0,0 30,0 15,10"})})});$P.displayName=g7;var v7=$P;function y7(n){const e=_7(n),t=B.forwardRef((i,r)=>{const{children:a,...l}=i,u=B.Children.toArray(a),h=u.find(x7);if(h){const p=h.props.children,g=u.map(y=>y===h?B.Children.count(p)>1?B.Children.only(null):B.isValidElement(p)?p.props.children:null:y);return je.jsx(e,{...l,ref:r,children:B.isValidElement(p)?B.cloneElement(p,void 0,g):null})}return je.jsx(e,{...l,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function _7(n){const e=B.forwardRef((t,i)=>{const{children:r,...a}=t;if(B.isValidElement(r)){const l=M7(r),u=S7(a,r.props);return r.type!==B.Fragment&&(u.ref=i?Vd(i,l):l),B.cloneElement(r,u)}return B.Children.count(r)>1?B.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var b7=Symbol("radix.slottable");function x7(n){return B.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===b7}function S7(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...u)=>{const h=a(...u);return r(...u),h}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function M7(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var E7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jP=E7.reduce((n,e)=>{const t=y7(`Primitive.${e}`),i=B.forwardRef((r,a)=>{const{asChild:l,...u}=r,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),je.jsx(h,{...u,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function w7(n){const[e,t]=B.useState(void 0);return rf(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let l,u;if("borderBoxSize"in a){const h=a.borderBoxSize,p=Array.isArray(h)?h[0]:h;l=p.inlineSize,u=p.blockSize}else l=n.offsetWidth,u=n.offsetHeight;t({width:l,height:u})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var AT="Popper",[XP,qP]=RP(AT),[T7,YP]=XP(AT),ZP=n=>{const{__scopePopper:e,children:t}=n,[i,r]=B.useState(null);return je.jsx(T7,{scope:e,anchor:i,onAnchorChange:r,children:t})};ZP.displayName=AT;var KP="PopperAnchor",QP=B.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,a=YP(KP,t),l=B.useRef(null),u=Hd(e,l),h=B.useRef(null);return B.useEffect(()=>{const p=h.current;h.current=i?.current||l.current,p!==h.current&&a.onAnchorChange(h.current)}),i?null:je.jsx(jP.div,{...r,ref:u})});QP.displayName=KP;var CT="PopperContent",[A7,C7]=XP(CT),JP=B.forwardRef((n,e)=>{const{__scopePopper:t,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:_=!1,updatePositionStrategy:b="optimized",onPlaced:S,...A}=n,w=YP(CT,t),[E,R]=B.useState(null),D=Hd(e,Re=>R(Re)),[I,L]=B.useState(null),N=w7(I),F=N?.width??0,V=N?.height??0,P=i+(a!=="center"?"-"+a:""),U=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},W=Array.isArray(p)?p:[p],Q=W.length>0,K={padding:U,boundary:W.filter(D7),altBoundary:Q},{refs:ne,floatingStyles:re,placement:X,isPositioned:J,middlewareData:ae}=JG({strategy:"fixed",placement:P,whileElementsMounted:(...Re)=>GG(...Re,{animationFrame:b==="always"}),elements:{reference:w.anchor},middleware:[t7({mainAxis:r+V,alignmentAxis:l}),h&&n7({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?i7():void 0,...K}),h&&r7({...K}),s7({...K,apply:({elements:Re,rects:tt,availableWidth:yt,availableHeight:Rt})=>{const{width:nn,height:cn}=tt.reference,zt=Re.floating.style;zt.setProperty("--radix-popper-available-width",`${yt}px`),zt.setProperty("--radix-popper-available-height",`${Rt}px`),zt.setProperty("--radix-popper-anchor-width",`${nn}px`),zt.setProperty("--radix-popper-anchor-height",`${cn}px`)}}),I&&o7({element:I,padding:u}),O7({arrowWidth:F,arrowHeight:V}),_&&a7({strategy:"referenceHidden",...K})]}),[Me,Se]=nN(X),Y=CS(S);rf(()=>{J&&Y?.()},[J,Y]);const pe=ae.arrow?.x,we=ae.arrow?.y,ke=ae.arrow?.centerOffset!==0,[pt,ge]=B.useState();return rf(()=>{E&&ge(window.getComputedStyle(E).zIndex)},[E]),je.jsx("div",{ref:ne.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:J?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pt,"--radix-popper-transform-origin":[ae.transformOrigin?.x,ae.transformOrigin?.y].join(" "),...ae.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:je.jsx(A7,{scope:t,placedSide:Me,onArrowChange:L,arrowX:pe,arrowY:we,shouldHideArrow:ke,children:je.jsx(jP.div,{"data-side":Me,"data-align":Se,...A,ref:D,style:{...A.style,animation:J?void 0:"none"}})})})});JP.displayName=CT;var eN="PopperArrow",R7={top:"bottom",right:"left",bottom:"top",left:"right"},tN=B.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,a=C7(eN,i),l=R7[a.placedSide];return je.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:je.jsx(v7,{...r,ref:t,style:{...r.style,display:"block"}})})});tN.displayName=eN;function D7(n){return n!==null}var O7=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:i,middlewareData:r}=e,l=r.arrow?.centerOffset!==0,u=l?0:n.arrowWidth,h=l?0:n.arrowHeight,[p,g]=nN(t),y={start:"0%",center:"50%",end:"100%"}[g],_=(r.arrow?.x??0)+u/2,b=(r.arrow?.y??0)+h/2;let S="",A="";return p==="bottom"?(S=l?y:`${_}px`,A=`${-h}px`):p==="top"?(S=l?y:`${_}px`,A=`${i.floating.height+h}px`):p==="right"?(S=`${-h}px`,A=l?y:`${b}px`):p==="left"&&(S=`${i.floating.width+h}px`,A=l?y:`${b}px`),{data:{x:S,y:A}}}});function nN(n){const[e,t="center"]=n.split("-");return[e,t]}var I7=ZP,P7=QP,N7=JP,L7=tN;function U7(n){const e=z7(n),t=B.forwardRef((i,r)=>{const{children:a,...l}=i,u=B.Children.toArray(a),h=u.find(B7);if(h){const p=h.props.children,g=u.map(y=>y===h?B.Children.count(p)>1?B.Children.only(null):B.isValidElement(p)?p.props.children:null:y);return je.jsx(e,{...l,ref:r,children:B.isValidElement(p)?B.cloneElement(p,void 0,g):null})}return je.jsx(e,{...l,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function z7(n){const e=B.forwardRef((t,i)=>{const{children:r,...a}=t;if(B.isValidElement(r)){const l=V7(r),u=k7(a,r.props);return r.type!==B.Fragment&&(u.ref=i?Vd(i,l):l),B.cloneElement(r,u)}return B.Children.count(r)>1?B.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var iN=Symbol("radix.slottable");function F7(n){const e=({children:t})=>je.jsx(je.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=iN,e}function B7(n){return B.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===iN}function k7(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...u)=>{const h=a(...u);return r(...u),h}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function V7(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var H7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G7=H7.reduce((n,e)=>{const t=U7(`Primitive.${e}`),i=B.forwardRef((r,a)=>{const{asChild:l,...u}=r,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),je.jsx(h,{...u,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function W7(n,e){return B.useReducer((t,i)=>e[t][i]??t,n)}var rN=n=>{const{present:e,children:t}=n,i=$7(e),r=typeof t=="function"?t({present:i.isPresent}):B.Children.only(t),a=Hd(i.ref,j7(r));return typeof t=="function"||i.isPresent?B.cloneElement(r,{ref:a}):null};rN.displayName="Presence";function $7(n){const[e,t]=B.useState(),i=B.useRef(null),r=B.useRef(n),a=B.useRef("none"),l=n?"mounted":"unmounted",[u,h]=W7(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return B.useEffect(()=>{const p=rb(i.current);a.current=u==="mounted"?p:"none"},[u]),rf(()=>{const p=i.current,g=r.current;if(g!==n){const _=a.current,b=rb(p);n?h("MOUNT"):b==="none"||p?.display==="none"?h("UNMOUNT"):h(g&&_!==b?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,h]),rf(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,y=b=>{const A=rb(i.current).includes(CSS.escape(b.animationName));if(b.target===e&&A&&(h("ANIMATION_END"),!r.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},_=b=>{b.target===e&&(a.current=rb(i.current))};return e.addEventListener("animationstart",_),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",_),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:B.useCallback(p=>{i.current=p?getComputedStyle(p):null,t(p)},[])}}function rb(n){return n?.animationName||"none"}function j7(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var X7=bw[" useInsertionEffect ".trim().toString()]||rf;function q7({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[r,a,l]=Y7({defaultProp:e,onChange:t}),u=n!==void 0,h=u?n:r;{const g=B.useRef(n!==void 0);B.useEffect(()=>{const y=g.current;y!==u&&console.warn(`${i} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,i])}const p=B.useCallback(g=>{if(u){const y=Z7(g)?g(n):g;y!==n&&l.current?.(y)}else a(g)},[u,n,a,l]);return[h,p]}function Y7({defaultProp:n,onChange:e}){const[t,i]=B.useState(n),r=B.useRef(t),a=B.useRef(e);return X7(()=>{a.current=e},[e]),B.useEffect(()=>{r.current!==t&&(a.current?.(t),r.current=t)},[t,r]),[t,i,a]}function Z7(n){return typeof n=="function"}function K7(n){const e=Q7(n),t=B.forwardRef((i,r)=>{const{children:a,...l}=i,u=B.Children.toArray(a),h=u.find(eW);if(h){const p=h.props.children,g=u.map(y=>y===h?B.Children.count(p)>1?B.Children.only(null):B.isValidElement(p)?p.props.children:null:y);return je.jsx(e,{...l,ref:r,children:B.isValidElement(p)?B.cloneElement(p,void 0,g):null})}return je.jsx(e,{...l,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function Q7(n){const e=B.forwardRef((t,i)=>{const{children:r,...a}=t;if(B.isValidElement(r)){const l=nW(r),u=tW(a,r.props);return r.type!==B.Fragment&&(u.ref=i?Vd(i,l):l),B.cloneElement(r,u)}return B.Children.count(r)>1?B.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var J7=Symbol("radix.slottable");function eW(n){return B.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===J7}function tW(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...u)=>{const h=a(...u);return r(...u),h}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function nW(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var iW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rW=iW.reduce((n,e)=>{const t=K7(`Primitive.${e}`),i=B.forwardRef((r,a)=>{const{asChild:l,...u}=r,h=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),je.jsx(h,{...u,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),sW=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),aW="VisuallyHidden",sN=B.forwardRef((n,e)=>je.jsx(rW.span,{...n,ref:e,style:{...sW,...n.style}}));sN.displayName=aW;var oW=sN,[PS]=RP("Tooltip",[qP]),NS=qP(),aN="TooltipProvider",lW=700,XE="tooltip.open",[cW,RT]=PS(aN),oN=n=>{const{__scopeTooltip:e,delayDuration:t=lW,skipDelayDuration:i=300,disableHoverableContent:r=!1,children:a}=n,l=B.useRef(!0),u=B.useRef(!1),h=B.useRef(0);return B.useEffect(()=>{const p=h.current;return()=>window.clearTimeout(p)},[]),je.jsx(cW,{scope:e,isOpenDelayedRef:l,delayDuration:t,onOpen:B.useCallback(()=>{window.clearTimeout(h.current),l.current=!1},[]),onClose:B.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>l.current=!0,i)},[i]),isPointerInTransitRef:u,onPointerInTransitChange:B.useCallback(p=>{u.current=p},[]),disableHoverableContent:r,children:a})};oN.displayName=aN;var W0="Tooltip",[uW,LS]=PS(W0),lN=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r,onOpenChange:a,disableHoverableContent:l,delayDuration:u}=n,h=RT(W0,n.__scopeTooltip),p=NS(e),[g,y]=B.useState(null),_=K9(),b=B.useRef(0),S=l??h.disableHoverableContent,A=u??h.delayDuration,w=B.useRef(!1),[E,R]=q7({prop:i,defaultProp:r??!1,onChange:F=>{F?(h.onOpen(),document.dispatchEvent(new CustomEvent(XE))):h.onClose(),a?.(F)},caller:W0}),D=B.useMemo(()=>E?w.current?"delayed-open":"instant-open":"closed",[E]),I=B.useCallback(()=>{window.clearTimeout(b.current),b.current=0,w.current=!1,R(!0)},[R]),L=B.useCallback(()=>{window.clearTimeout(b.current),b.current=0,R(!1)},[R]),N=B.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{w.current=!0,R(!0),b.current=0},A)},[A,R]);return B.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),je.jsx(I7,{...p,children:je.jsx(uW,{scope:e,contentId:_,open:E,stateAttribute:D,trigger:g,onTriggerChange:y,onTriggerEnter:B.useCallback(()=>{h.isOpenDelayedRef.current?N():I()},[h.isOpenDelayedRef,N,I]),onTriggerLeave:B.useCallback(()=>{S?L():(window.clearTimeout(b.current),b.current=0)},[L,S]),onOpen:I,onClose:L,disableHoverableContent:S,children:t})})};lN.displayName=W0;var qE="TooltipTrigger",cN=B.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=LS(qE,t),a=RT(qE,t),l=NS(t),u=B.useRef(null),h=Hd(e,u,r.onTriggerChange),p=B.useRef(!1),g=B.useRef(!1),y=B.useCallback(()=>p.current=!1,[]);return B.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),je.jsx(P7,{asChild:!0,...l,children:je.jsx(G7.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...i,ref:h,onPointerMove:Oc(n.onPointerMove,_=>{_.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(r.onTriggerEnter(),g.current=!0)}),onPointerLeave:Oc(n.onPointerLeave,()=>{r.onTriggerLeave(),g.current=!1}),onPointerDown:Oc(n.onPointerDown,()=>{r.open&&r.onClose(),p.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Oc(n.onFocus,()=>{p.current||r.onOpen()}),onBlur:Oc(n.onBlur,r.onClose),onClick:Oc(n.onClick,r.onClose)})})});cN.displayName=qE;var fW="TooltipPortal",[kK,dW]=PS(fW,{forceMount:void 0}),Zp="TooltipContent",uN=B.forwardRef((n,e)=>{const t=dW(Zp,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...a}=n,l=LS(Zp,n.__scopeTooltip);return je.jsx(rN,{present:i||l.open,children:l.disableHoverableContent?je.jsx(fN,{side:r,...a,ref:e}):je.jsx(hW,{side:r,...a,ref:e})})}),hW=B.forwardRef((n,e)=>{const t=LS(Zp,n.__scopeTooltip),i=RT(Zp,n.__scopeTooltip),r=B.useRef(null),a=Hd(e,r),[l,u]=B.useState(null),{trigger:h,onClose:p}=t,g=r.current,{onPointerInTransitChange:y}=i,_=B.useCallback(()=>{u(null),y(!1)},[y]),b=B.useCallback((S,A)=>{const w=S.currentTarget,E={x:S.clientX,y:S.clientY},R=vW(E,w.getBoundingClientRect()),D=yW(E,R),I=_W(A.getBoundingClientRect()),L=xW([...D,...I]);u(L),y(!0)},[y]);return B.useEffect(()=>()=>_(),[_]),B.useEffect(()=>{if(h&&g){const S=w=>b(w,g),A=w=>b(w,h);return h.addEventListener("pointerleave",S),g.addEventListener("pointerleave",A),()=>{h.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",A)}}},[h,g,b,_]),B.useEffect(()=>{if(l){const S=A=>{const w=A.target,E={x:A.clientX,y:A.clientY},R=h?.contains(w)||g?.contains(w),D=!bW(E,l);R?_():D&&(_(),p())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[h,g,l,p,_]),je.jsx(fN,{...n,ref:a})}),[pW,mW]=PS(W0,{isInside:!1}),gW=F7("TooltipContent"),fN=B.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:l,...u}=n,h=LS(Zp,t),p=NS(t),{onClose:g}=h;return B.useEffect(()=>(document.addEventListener(XE,g),()=>document.removeEventListener(XE,g)),[g]),B.useEffect(()=>{if(h.trigger){const y=_=>{_.target?.contains(h.trigger)&&g()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,g]),je.jsx(IP,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:y=>y.preventDefault(),onDismiss:g,children:je.jsxs(N7,{"data-state":h.stateAttribute,...p,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[je.jsx(gW,{children:i}),je.jsx(pW,{scope:t,isInside:!0,children:je.jsx(oW,{id:h.contentId,role:"tooltip",children:r||i})})]})})});uN.displayName=Zp;var dN="TooltipArrow",hN=B.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=NS(t);return mW(dN,t).isInside?null:je.jsx(L7,{...r,...i,ref:e})});hN.displayName=dN;function vW(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,i,r,a)){case a:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function yW(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function _W(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function bW(n,e){const{x:t,y:i}=n;let r=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const u=e[a],h=e[l],p=u.x,g=u.y,y=h.x,_=h.y;g>i!=_>i&&t<(y-p)*(i-g)/(_-g)+p&&(r=!r)}return r}function xW(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),SW(e)}function SW(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const a=e[e.length-1],l=e[e.length-2];if((a.x-l.x)*(r.y-l.y)>=(a.y-l.y)*(r.x-l.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const a=t[t.length-1],l=t[t.length-2];if((a.x-l.x)*(r.y-l.y)>=(a.y-l.y)*(r.x-l.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var MW=oN,EW=lN,wW=cN,TW=uN,AW=hN;function CW(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function yi(n,e){if(n==null)return{};var t,i,r=CW(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}let Rr=(function(n){return n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY",n})({});const RW={[Rr.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Rr.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Rr.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Rr.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Rr.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Rr.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Rr.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Rr.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Rr.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Rr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function pN(n,e,...t){const i=RW[e],[r,...a]=i(...t);console[n]("LEVA: "+r,...a)}const Nc=pN.bind(null,"warn"),DW=pN.bind(null,"log"),OW=["value"],IW=["schema"],PW=["value"],mN=[],Nd={};function R3(n){let{value:e}=n,t=yi(n,OW);for(let i of mN){const r=i(e,t);if(r)return r}}function $c(n,e){let{schema:t}=e,i=yi(e,IW);if(n in Nd){Nc(Rr.ALREADY_REGISTERED_TYPE,n);return}mN.push((r,a)=>t(r,a)&&n),Nd[n]=i}function NM(n,e,t,i){const{normalize:r}=Nd[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:a}=e,l=yi(e,PW);return{value:a,settings:l}}function NW(n,e,t,i,r,a){const{sanitize:l}=Nd[n];return l?l(e,t,i,r,a):e}function D3(n,e,t){const{format:i}=Nd[n];return i?i(e,t):e}function LW(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function UW(n){var e=LW(n,"string");return typeof e=="symbol"?e:e+""}function zW(n,e,t){return(e=UW(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function un(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O3(Object(t),!0).forEach(function(i){zW(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O3(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const of=(n,e,t)=>n>t?t:n<e?e:n,FW=n=>{if(n===""||typeof n=="number")return n;try{const e=Mp(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},BW=Math.log(10);function I3(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/BW)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const Tx=(n,e,t)=>t===e?0:(of(n,e,t)-e)/(t-e),Ax=(n,e,t)=>n*(t-e)+e,kW=()=>"_"+Math.random().toString(36).substr(2,9),P3=/\(([^\(\)]+)\)/,N3=/(-?\d+(?:\.\d+)?)\s*\^\s*(-?\d+(?:\.\d+)?)/,L3=/(-?\d+(?:\.\d+)?)\s*([*/])\s*(-?\d+(?:\.\d+)?)/,U3=/(-?\d+(?:\.\d+)?)\s*([+-])\s*(-?\d+(?:\.\d+)?)/;function Mp(n){return n=n.replace(/\s+/g,""),P3.test(n)?Mp(n.replace(P3,(e,t)=>Mp(t).toString())):N3.test(n)?Mp(n.replace(N3,(e,t,i)=>Math.pow(Number(t),Number(i)).toString())):L3.test(n)?Mp(n.replace(L3,(e,t,i,r)=>i==="*"?(Number(t)*Number(r)).toString():Number(r)===0?(()=>{throw new Error("Division by zero")})():(Number(t)/Number(r)).toString())):U3.test(n)?Mp(n.replace(U3,(e,t,i,r)=>i==="+"?(Number(t)+Number(r)).toString():(Number(t)-Number(r)).toString())):Number(n)}function VW(n,e){return e.reduce((t,i)=>(n&&n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}function HW(n,e){const t=un({},n);return e.forEach(i=>i in n&&delete t[i]),t}function GW(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function gN(n){return Object.prototype.toString.call(n)==="[object Object]"}const WW=n=>gN(n)&&Object.keys(n).length===0;let Uc=(function(n){return n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER",n})({}),jc=(function(n){return n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D",n})({});const $W=["type","__customInput"],jW=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],XW=["type"];function vN(n,e,t={},i){var r,a;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:un({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:L,__customInput:N}=n,F=yi(n,$W);return vN(N,e,F,L)}const{render:l,label:u,optional:h,order:p=0,disabled:g,hint:y,onChange:_,onEditStart:b,onEditEnd:S,transient:A}=n,w=yi(n,jW),E=un({render:l,key:e,label:u??e,hint:y,transient:A??!!_,onEditStart:b,onEditEnd:S,disabled:g,optional:h,order:p},t);let{type:R}=w,D=yi(w,XW);if(R=i??R,R in Uc)return{type:R,input:D,options:E};let I;return i&&gN(D)&&"value"in D?I=D.value:I=WW(D)?void 0:D,{type:R,input:I,options:un(un({},E),{},{onChange:_,optional:(r=E.optional)!==null&&r!==void 0?r:!1,disabled:(a=E.disabled)!==null&&a!==void 0?a:!1})}}function qW(n,e,t,i){const r=vN(n,e),{type:a,input:l,options:u}=r;if(a)return a in Uc?r:{type:a,input:NM(a,l,t,i),options:u};let h=R3(l);return h?{type:h,input:NM(h,l,t,i),options:u}:(h=R3({value:l}),h?{type:h,input:NM(h,{value:l},t,i),options:u}:!1)}function z3(n,e,t,i,r){const{value:a,type:l,settings:u}=n;n.value=yN({type:l,value:a,settings:u},e,t,i),n.fromPanel=r}const YW=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function yN({type:n,value:e,settings:t},i,r,a){const l=n!=="SELECT"&&typeof i=="function"?i(e):i;let u;try{u=NW(n,l,t,e,r,a)}catch(h){throw new YW(`The value \`${i}\` did not result in a correct value.`,e,h)}return k0(u,e)?e:u}const _N=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,a=t&&!i,l=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(l,e),a&&l()}},bN=n=>n.shiftKey?5:n.altKey?1/5:1,ZW=["value"],KW=["min","max"],QW=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},xN=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const a=of(r,e,t);return i?a+i:a},JW=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},SN=n=>{let{value:e}=n,t=yi(n,ZW);const{min:i=-1/0,max:r=1/0}=t,a=yi(t,KW);let l=parseFloat(e);const u=typeof e=="string"?e.substring((""+l).length):void 0;l=of(l,i,r);let h=t.step;h||(Number.isFinite(i)?Number.isFinite(r)?h=+(Math.abs(r-i)/100).toPrecision(1):h=+(Math.abs(l-i)/100).toPrecision(1):Number.isFinite(r)&&(h=+(Math.abs(r-l)/100).toPrecision(1)));const p=h?I3(h)*10:I3(l);h=h||p/10;const g=Math.round(of(Math.log10(1/p),0,2));return{value:u?l+u:l,settings:un({initialValue:l,step:h,pad:g,min:i,max:r,suffix:u},a)}},MN=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var EN=Object.freeze({__proto__:null,schema:QW,sanitize:xN,format:JW,normalize:SN,sanitizeStep:MN});function lr(){return lr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},lr.apply(null,arguments)}const wN=B.createContext({});function Es(){return B.useContext(wN)}const DT=B.createContext(null),TN=B.createContext(null),AN=B.createContext(null);function yv(){return B.useContext(TN)}function e$(){return B.useContext(AN)}const CN=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function sb(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const Yg={$inputStyle:()=>n=>sb(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>sb(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>sb(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>sb(n,{key:"$active",borderColor:"$accent1",inset:!0})},_v=F2({prefix:"leva",theme:CN(),utils:un(un({},Yg),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Yg.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Yg.$focusStyle()(n)}),$hover:n=>({"&:hover":Yg.$hoverStyle()(n)}),$active:n=>({"&:active":Yg.$activeStyle()(n)})})}),an=_v.styled;_v.css;const t$=_v.createTheme,n$=_v.globalCss;_v.keyframes;const i$=n$({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function r$(n){const e=CN();if(!n)return{theme:e,className:""};Object.keys(n).forEach(i=>{Object.assign(e[i],n[i])});const t=t$(e);return{theme:e,className:t.className}}function zc(n,e){const{theme:t}=B.useContext(DT);if(!(n in t)||!(e in t[n]))return Nc(Rr.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const RN=an("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),DN=an("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${RN}`]:{paddingLeft:0}}),s$=an(DN,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),a$=an("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),o$=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],l$=["onUpdate"];function OT(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:a,type:l,id:u,inputType:h="text",rows:p=0}=n,g=yi(n,o$);const{id:y,emitOnEditStart:_,emitOnEditEnd:b,disabled:S}=Es(),A=u||y,w=B.useRef(null),E=p>0,R=E?"textarea":"input",D=B.useCallback(N=>F=>{const V=F.currentTarget.value;N(V)},[]);ce.useEffect(()=>{const N=w.current,F=D(V=>{i(V),b()});return N?.addEventListener("blur",F),()=>N?.removeEventListener("blur",F)},[D,i,b]);const I=B.useCallback(N=>{N.key==="Enter"&&D(i)(N)},[D,i]),L=Object.assign({as:R},E?{rows:p}:{},g);return ce.createElement(a$,{textArea:E},e&&typeof e=="string"?ce.createElement(DN,null,e):e,ce.createElement(RN,lr({levaType:l,ref:w,id:A,type:h,autoComplete:"off",spellCheck:"false",value:t,onChange:D(r),onFocus:()=>_(),onKeyPress:I,onKeyDown:a,disabled:S},L)))}function c$(n){let{onUpdate:e}=n,t=yi(n,l$);const i=B.useCallback(a=>e(FW(a)),[e]),r=B.useCallback(a=>{const l=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(l){a.preventDefault();const u=a.altKey?.1:a.shiftKey?10:1;e(h=>parseFloat(h)+l*u)}},[e]);return ce.createElement(OT,lr({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const Cx=an("div",{}),YE=an("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),u$=an("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${YE}::after`]:{opacity:.6},[`${Cx}:hover > & + ${YE}::after`]:{opacity:.6},[`${Cx}:hover > & > svg`]:{opacity:1}}),ON=an("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Cx}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),IN=an("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${ON} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),PN=an(IN,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),f$=an("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),d$=an("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),ZE=an("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),h$=an("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${ZE}`]:{pointerEvents:"auto"}}}}}),NN=an("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),p$=an("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),m$=an(AW,{fill:"$toolTipBackground"});function IT({children:n,container:e=(t=>globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body)()}){const{className:t}=B.useContext(DT);return ce.createElement(a2,{className:t,container:e},n)}const g$=["align"];function v$(){const{id:n,disable:e,disabled:t}=Es();return ce.createElement(ce.Fragment,null,ce.createElement(d$,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),ce.createElement("label",{htmlFor:n+"__disable"}))}function y$(n){const{id:e,optional:t,hint:i}=Es(),r=n.htmlFor||e||void 0,a=!i&&typeof n.children=="string"?n.children:void 0;return ce.createElement(ce.Fragment,null,t&&ce.createElement(v$,null),i!==void 0?ce.createElement(EW,null,ce.createElement(wW,{asChild:!0},ce.createElement(ZE,lr({htmlFor:r},n))),ce.createElement(TW,{side:"top",sideOffset:2},ce.createElement(p$,null,i,ce.createElement(m$,null)))):ce.createElement(ZE,lr({htmlFor:r,title:a},n)))}function Qo(n){let{align:e}=n,t=yi(n,g$);const{value:i,label:r,key:a,disabled:l}=Es(),{hideCopyButton:u}=e$(),h=!u&&a!==void 0,[p,g]=B.useState(!1),y=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:i??""})),g(!0)}catch{Nc(Rr.CLIPBOARD_ERROR,{[a]:i})}};return ce.createElement(f$,{align:e,onPointerLeave:()=>g(!1)},ce.createElement(y$,t),h&&!l&&ce.createElement("div",{title:`Click to copy ${typeof r=="string"?r:a} value`},p?ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ce.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),ce.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):ce.createElement("svg",{onClick:y,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ce.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),ce.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const _$=["toggled"],b$=an("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function PT(n){let{toggled:e}=n,t=yi(n,_$);return ce.createElement(b$,lr({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),ce.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const x$=["input"];function go(n){let{input:e}=n,t=yi(n,x$);return e?ce.createElement(PN,t):ce.createElement(IN,t)}function LN({value:n,type:e,settings:t,setValue:i}){const[r,a]=B.useState(D3(e,n,t)),l=B.useRef(n),u=B.useRef(t);u.current=t;const h=B.useCallback(g=>a(D3(e,g,u.current)),[e]),p=B.useCallback(g=>{try{i(g)}catch(y){const{type:_,previousValue:b}=y;if(_!=="LEVA_ERROR")throw y;h(b)}},[h,i]);return B.useEffect(()=>{k0(n,l.current)||h(n),l.current=n},[n,h]),{displayValue:r,onChange:a,onUpdate:p}}function bv(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=Es();return O9(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t?.());const a=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i?.()),a},e)}function S$(n){const e=B.useRef(null),t=B.useRef(null),i=B.useRef(!1);return B.useEffect(()=>{const r=_N(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),B.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function UN(){const n=B.useRef(null),e=B.useRef({x:0,y:0}),t=B.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const M$=["__refCount"],LM=(n,e)=>{if(!n[e])return null;const t=n[e];return yi(t,M$)};function E$(n){const e=yv(),[t,i]=B.useState(LM(e.getData(),n)),r=B.useCallback(p=>e.setValueAtPath(n,p,!0),[n,e]),a=B.useCallback(p=>e.setSettingsAtPath(n,p),[n,e]),l=B.useCallback(p=>e.disableInputAtPath(n,p),[n,e]),u=B.useCallback(()=>e.emitOnEditStart(n),[n,e]),h=B.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return B.useEffect(()=>{i(LM(e.getData(),n));const p=e.useStore.subscribe(g=>LM(g.data,n),i,{equalityFn:wS});return()=>p()},[e,n]),[t,{set:r,setSettings:a,disable:l,storeId:e.storeId,emitOnEditStart:u,emitOnEditEnd:h}]}const w$=an("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),zN=an("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),KE=an("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),FN=an("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),BN=an("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function T$({value:n,min:e,max:t,onDrag:i,step:r,initialValue:a}){const l=B.useRef(null),u=B.useRef(null),h=B.useRef(0),p=zc("sizes","scrubberWidth"),g=bv(({event:_,first:b,xy:[S],movement:[A],memo:w})=>{if(b){const{width:R,left:D}=l.current.getBoundingClientRect();h.current=R-parseFloat(p),w=_?.target===u.current?n:Ax((S-D)/R,e,t)}const E=w+Ax(A/h.current,0,t-e);return i(MN(E,{step:r,initialValue:a})),w}),y=Tx(n,e,t);return ce.createElement(FN,lr({ref:l},g()),ce.createElement(zN,null,ce.createElement(BN,{style:{left:0,right:`${(1-y)*100}%`}})),ce.createElement(KE,{ref:u,style:{left:`calc(${y} * (100% - ${p}))`}}))}const A$=ce.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,a]=B.useState(!1),l=bv(({active:u,delta:[h],event:p,memo:g=0,first:y,last:_,target:b})=>(y&&b.requestPointerLock(),_&&document.exitPointerLock(),a(u),g+=h/2,Math.abs(g)>=1&&(e(S=>parseFloat(S)+Math.floor(g)*t*bN(p)),g=0),g));return ce.createElement(s$,lr({dragging:r,title:n.length>1?n:""},l()),n.slice(0,i))});function kN({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:a,innerLabelTrim:l=1}){const u=l>0&&ce.createElement(A$,{label:n,step:a.step,onUpdate:i,innerLabelTrim:l});return ce.createElement(c$,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:u})}function C$(){const n=Es(),{label:e,value:t,onUpdate:i,settings:r,id:a}=n,{min:l,max:u}=r,h=u!==1/0&&l!==-1/0;return ce.createElement(go,{input:!0},ce.createElement(Qo,null,e),ce.createElement(w$,{hasRange:h},h&&ce.createElement(T$,lr({value:parseFloat(t),onDrag:i},r)),ce.createElement(kN,lr({},n,{id:a,label:"value",innerLabelTrim:h?0:1}))))}const{sanitizeStep:R$}=EN,D$=yi(EN,["sanitizeStep"]);var O$=un({component:C$},D$);const I$=(n,e)=>va().schema({options:va().passesAnyOf(va().object(),va().array())}).test(e),P$=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},N$=(n,{values:e})=>e.indexOf(n),L$=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(a=>String(a))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var U$=Object.freeze({__proto__:null,schema:I$,sanitize:P$,format:N$,normalize:L$});const z$=an("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),QE=an("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),F$=an("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${QE}:focus + &`]:{$focusStyle:""},[`${QE}:hover + &`]:{$hoverStyle:""}});function B$({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:a}){const{keys:l,values:u}=r,h=B.useRef();return e===u[n]&&(h.current=l[n]),ce.createElement(z$,null,ce.createElement(QE,{id:i,value:n,onChange:p=>t(u[Number(p.currentTarget.value)]),disabled:a},l.map((p,g)=>ce.createElement("option",{key:p,value:g},p))),ce.createElement(F$,null,h.current),ce.createElement(PT,{toggled:!0}))}function k$(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:a,settings:l}=Es();return ce.createElement(go,{input:!0},ce.createElement(Qo,null,n),ce.createElement(B$,{id:r,value:e,displayValue:t,onUpdate:i,settings:l,disabled:a}))}var V$=un({component:k$},U$);const H$=n=>va().string().test(n),G$=n=>{if(typeof n!="string")throw Error("Invalid string");return n},W$=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var $$=Object.freeze({__proto__:null,schema:H$,sanitize:G$,normalize:W$});const j$=["displayValue","onUpdate","onChange","editable"],X$=an("div",{whiteSpace:"pre-wrap"});function q$(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,a=yi(n,j$);return r?ce.createElement(OT,lr({value:e,onUpdate:t,onChange:i},a)):ce.createElement(X$,null,e)}function Y$(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=Es();return ce.createElement(go,{input:!0},ce.createElement(Qo,null,n),ce.createElement(q$,lr({displayValue:t,onUpdate:i,onChange:r},e)))}var Z$=un({component:Y$},$$);const K$=n=>va().boolean().test(n),Q$=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var J$=Object.freeze({__proto__:null,schema:K$,sanitize:Q$});const ej=an("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function tj({value:n,onUpdate:e,id:t,disabled:i}){return ce.createElement(ej,null,ce.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),ce.createElement("label",{htmlFor:t},ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ce.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function nj(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=Es();return ce.createElement(go,{input:!0},ce.createElement(Qo,null,n),ce.createElement(tj,{value:e,onUpdate:t,id:r,disabled:i}))}var ij=un({component:nj},J$);const rj=["locked"];function sj({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:a}){const l=B.useRef(n[t]);l.current=n[t];const u=B.useCallback(p=>r({[t]:yN({type:"NUMBER",value:l.current,settings:i},p)}),[r,i,t]),h=LN({type:"NUMBER",value:n[t],settings:i,setValue:u});return ce.createElement(kN,{id:e,label:t,value:n[t],displayValue:h.displayValue,onUpdate:h.onUpdate,onChange:h.onChange,settings:i,innerLabelTrim:a})}const aj=an("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function oj(n){let{locked:e}=n,t=yi(n,rj);return ce.createElement("svg",lr({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?ce.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):ce.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function NT({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:a}=Es(),{lock:l,locked:u}=t;return ce.createElement(aj,{withLock:l},l&&ce.createElement(oj,{locked:u,onClick:()=>a({locked:!u})}),Object.keys(n).map((h,p)=>ce.createElement(sj,{id:p===0?r:`${r}.${h}`,key:h,valueKey:h,value:n,settings:t[h],onUpdate:e,innerLabelTrim:i})))}const VN=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([a,l])=>{t[a]=SN(un({value:l},e[a])).settings,i=Math.max(i,t[a].step),r=Math.min(r,t[a].pad)});for(let a in t){const{step:l,min:u,max:h}=e[a]||{};!isFinite(l)&&(!isFinite(u)||!isFinite(h))&&(t[a].step=i,t[a].pad=r)}return t},lj=["lock"],cj=["value"];function uj(n){const e=va().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(a=>isFinite(a))};return i=>e.test(i)||t(i)}function fj(n){return Array.isArray(n)?"array":"object"}function v0(n,e,t){return fj(n)===e?n:e==="array"?Object.values(n):GW(n,t)}const dj=(n,e,t)=>{const i=v0(n,"object",e.keys);for(let l in i)i[l]=xN(i[l],e[l]);const r=Object.keys(i);let a={};if(r.length===e.keys.length)a=i;else{const l=v0(t,"object",e.keys);if(r.length===1&&e.locked){const u=r[0],h=i[u],p=l[u],g=p!==0?h/p:1;for(let y in l)y===u?a[u]=h:a[y]=l[y]*g}else a=un(un({},l),i)}return v0(a,e.format,e.keys)},hj=(n,e)=>v0(n,"object",e.keys),pj=n=>!!n&&("step"in n||"min"in n||"max"in n);function mj(n,e,t=[]){const{lock:i=!1}=e,r=yi(e,lj),a=Array.isArray(n)?"array":"object",l=a==="object"?Object.keys(n):t,u=v0(n,"object",l),h=pj(r)?l.reduce((g,y)=>Object.assign(g,{[y]:r}),{}):r,p=VN(u,h);return{value:a==="array"?n:u,settings:un(un({},p),{},{format:a,keys:l,lock:i,locked:!1})}}function HN(n){return{schema:uj(n.length),normalize:e=>{let{value:t}=e,i=yi(e,cj);return mj(t,i,n)},format:(e,t)=>hj(e,t),sanitize:(e,t,i)=>dj(e,t,i)}}var gj={grad:.9,turn:360,rad:360/(2*Math.PI)},Cc=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Gr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},uo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},GN=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},F3=function(n){return{r:uo(n.r,0,255),g:uo(n.g,0,255),b:uo(n.b,0,255),a:uo(n.a)}},UM=function(n){return{r:Gr(n.r),g:Gr(n.g),b:Gr(n.b),a:Gr(n.a,3)}},vj=/^#([0-9a-f]{3,8})$/i,ab=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},WN=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,a=Math.max(e,t,i),l=a-Math.min(e,t,i),u=l?a===e?(t-i)/l:a===t?2+(i-e)/l:4+(e-t)/l:0;return{h:60*(u<0?u+6:u),s:a?l/a*100:0,v:a/255*100,a:r}},$N=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var a=Math.floor(e),l=i*(1-t),u=i*(1-(e-a)*t),h=i*(1-(1-e+a)*t),p=a%6;return{r:255*[i,u,l,l,h,i][p],g:255*[h,i,i,u,l,l][p],b:255*[l,l,h,i,i,u][p],a:r}},B3=function(n){return{h:GN(n.h),s:uo(n.s,0,100),l:uo(n.l,0,100),a:uo(n.a)}},k3=function(n){return{h:Gr(n.h),s:Gr(n.s),l:Gr(n.l),a:Gr(n.a,3)}},V3=function(n){return $N((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},y0=function(n){return{h:(e=WN(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},yj=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_j=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bj=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xj=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,JE={string:[[function(n){var e=vj.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Gr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Gr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=bj.exec(n)||xj.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:F3({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=yj.exec(n)||_j.exec(n);if(!e)return null;var t,i,r=B3({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(gj[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return V3(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,a=r===void 0?1:r;return Cc(e)&&Cc(t)&&Cc(i)?F3({r:Number(e),g:Number(t),b:Number(i),a:Number(a)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,a=r===void 0?1:r;if(!Cc(e)||!Cc(t)||!Cc(i))return null;var l=B3({h:Number(e),s:Number(t),l:Number(i),a:Number(a)});return V3(l)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,a=r===void 0?1:r;if(!Cc(e)||!Cc(t)||!Cc(i))return null;var l=(function(u){return{h:GN(u.h),s:uo(u.s,0,100),v:uo(u.v,0,100),a:uo(u.a)}})({h:Number(e),s:Number(t),v:Number(i),a:Number(a)});return $N(l)},"hsv"]]},H3=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},jN=function(n){return typeof n=="string"?H3(n.trim(),JE.string):typeof n=="object"&&n!==null?H3(n,JE.object):[null,void 0]},Sj=function(n){return jN(n)[1]},zM=function(n,e){var t=y0(n);return{h:t.h,s:uo(t.s+100*e,0,100),l:t.l,a:t.a}},FM=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},G3=function(n,e){var t=y0(n);return{h:t.h,s:t.s,l:uo(t.l+100*e,0,100),a:t.a}},ew=(function(){function n(e){this.parsed=jN(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Gr(FM(this.rgba),2)},n.prototype.isDark=function(){return FM(this.rgba)<.5},n.prototype.isLight=function(){return FM(this.rgba)>=.5},n.prototype.toHex=function(){return e=UM(this.rgba),t=e.r,i=e.g,r=e.b,l=(a=e.a)<1?ab(Gr(255*a)):"","#"+ab(t)+ab(i)+ab(r)+l;var e,t,i,r,a,l},n.prototype.toRgb=function(){return UM(this.rgba)},n.prototype.toRgbString=function(){return e=UM(this.rgba),t=e.r,i=e.g,r=e.b,(a=e.a)<1?"rgba("+t+", "+i+", "+r+", "+a+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,a},n.prototype.toHsl=function(){return k3(y0(this.rgba))},n.prototype.toHslString=function(){return e=k3(y0(this.rgba)),t=e.h,i=e.s,r=e.l,(a=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+a+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,a},n.prototype.toHsv=function(){return e=WN(this.rgba),{h:Gr(e.h),s:Gr(e.s),v:Gr(e.v),a:Gr(e.a,3)};var e},n.prototype.invert=function(){return Bs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Bs(zM(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Bs(zM(this.rgba,-e))},n.prototype.grayscale=function(){return Bs(zM(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Bs(G3(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Bs(G3(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Bs({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Gr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=y0(this.rgba);return typeof e=="number"?Bs({h:e,s:t.s,l:t.l,a:t.a}):Gr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Bs(e).toHex()},n})(),Bs=function(n){return n instanceof ew?n:new ew(n)},W3=[],Mj=function(n){n.forEach(function(e){W3.indexOf(e)<0&&(e(ew,JE),W3.push(e))})};function Ej(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var a={};n.prototype.toName=function(l){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,h,p=i[this.toHex()];if(p)return p;if(l?.closest){var g=this.toRgb(),y=1/0,_="black";if(!a.length)for(var b in t)a[b]=new n(t[b]).toRgb();for(var S in t){var A=(u=g,h=a[S],Math.pow(u.r-h.r,2)+Math.pow(u.g-h.g,2)+Math.pow(u.b-h.b,2));A<y&&(y=A,_=S)}return _}},e.string.push([function(l){var u=l.toLowerCase(),h=u==="transparent"?"#0000":t[u];return h?new n(h).toRgb():null},"name"])}function am(){return(am=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function LT(n,e){if(n==null)return{};var t,i,r={},a=Object.keys(n);for(i=0;i<a.length;i++)e.indexOf(t=a[i])>=0||(r[t]=n[t]);return r}function tw(n){var e=B.useRef(n),t=B.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var Kp=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},_0=function(n){return"touches"in n},nw=function(n){return n&&n.ownerDocument.defaultView||self},$3=function(n,e,t){var i=n.getBoundingClientRect(),r=_0(e)?(function(a,l){for(var u=0;u<a.length;u++)if(a[u].identifier===l)return a[u];return a[0]})(e.touches,t):e;return{left:Kp((r.pageX-(i.left+nw(n).pageXOffset))/i.width),top:Kp((r.pageY-(i.top+nw(n).pageYOffset))/i.height)}},j3=function(n){!_0(n)&&n.preventDefault()},UT=ce.memo(function(n){var e=n.onMove,t=n.onKey,i=LT(n,["onMove","onKey"]),r=B.useRef(null),a=tw(e),l=tw(t),u=B.useRef(null),h=B.useRef(!1),p=B.useMemo(function(){var b=function(w){j3(w),(_0(w)?w.touches.length>0:w.buttons>0)&&r.current?a($3(r.current,w,u.current)):A(!1)},S=function(){return A(!1)};function A(w){var E=h.current,R=nw(r.current),D=w?R.addEventListener:R.removeEventListener;D(E?"touchmove":"mousemove",b),D(E?"touchend":"mouseup",S)}return[function(w){var E=w.nativeEvent,R=r.current;if(R&&(j3(E),!(function(I,L){return L&&!_0(I)})(E,h.current)&&R)){if(_0(E)){h.current=!0;var D=E.changedTouches||[];D.length&&(u.current=D[0].identifier)}R.focus(),a($3(R,E,u.current)),A(!0)}},function(w){var E=w.which||w.keyCode;E<37||E>40||(w.preventDefault(),l({left:E===39?.05:E===37?-.05:0,top:E===40?.05:E===38?-.05:0}))},A]},[l,a]),g=p[0],y=p[1],_=p[2];return B.useEffect(function(){return _},[_]),ce.createElement("div",am({},i,{onTouchStart:g,onMouseDown:g,className:"react-colorful__interactive",ref:r,onKeyDown:y,tabIndex:0,role:"slider"}))}),xv=function(n){return n.filter(Boolean).join(" ")},zT=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,a=xv(["react-colorful__pointer",n.className]);return ce.createElement("div",{className:a,style:{top:100*r+"%",left:100*t+"%"}},ce.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Gs=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},XN=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:Gs(n.h),s:Gs(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:Gs(r/2),a:Gs(i,2)}},iw=function(n){var e=XN(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},BM=function(n){var e=XN(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},qN=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var a=Math.floor(e),l=i*(1-t),u=i*(1-(e-a)*t),h=i*(1-(1-e+a)*t),p=a%6;return{r:Gs(255*[i,u,l,l,h,i][p]),g:Gs(255*[h,i,i,u,l,l][p]),b:Gs(255*[l,l,h,i,i,u][p]),a:Gs(r,2)}},YN=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,a=Math.max(e,t,i),l=a-Math.min(e,t,i),u=l?a===e?(t-i)/l:a===t?2+(i-e)/l:4+(e-t)/l:0;return{h:Gs(60*(u<0?u+6:u)),s:Gs(a?l/a*100:0),v:Gs(a/255*100),a:r}},ZN=ce.memo(function(n){var e=n.hue,t=n.onChange,i=xv(["react-colorful__hue",n.className]);return ce.createElement("div",{className:i},ce.createElement(UT,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:Kp(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":Gs(e),"aria-valuemax":"360","aria-valuemin":"0"},ce.createElement(zT,{className:"react-colorful__hue-pointer",left:e/360,color:iw({h:e,s:100,v:100,a:1})})))}),KN=ce.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:iw({h:e.h,s:100,v:100,a:1})};return ce.createElement("div",{className:"react-colorful__saturation",style:i},ce.createElement(UT,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:Kp(e.s+100*r.left,0,100),v:Kp(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Gs(e.s)+"%, Brightness "+Gs(e.v)+"%"},ce.createElement(zT,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:iw(e)})))}),FT=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function QN(n,e,t){var i=tw(t),r=B.useState(function(){return n.toHsva(e)}),a=r[0],l=r[1],u=B.useRef({color:e,hsva:a});B.useEffect(function(){if(!n.equal(e,u.current.color)){var p=n.toHsva(e);u.current={hsva:p,color:e},l(p)}},[e,n]),B.useEffect(function(){var p;FT(a,u.current.hsva)||n.equal(p=n.fromHsva(a),u.current.color)||(u.current={hsva:a,color:p},i(p))},[a,n,i]);var h=B.useCallback(function(p){l(function(g){return Object.assign({},g,p)})},[]);return[a,h]}var wj=typeof window<"u"?B.useLayoutEffect:B.useEffect,Tj=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},X3=new Map,JN=function(n){wj(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!X3.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,X3.set(e,t);var i=Tj();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},Aj=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,a=n.onChange,l=LT(n,["className","colorModel","color","onChange"]),u=B.useRef(null);JN(u);var h=QN(t,r,a),p=h[0],g=h[1],y=xv(["react-colorful",e]);return ce.createElement("div",am({},l,{ref:u,className:y}),ce.createElement(KN,{hsva:p,onChange:g}),ce.createElement(ZN,{hue:p.h,onChange:g,className:"react-colorful__last-control"}))},Cj=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+BM(Object.assign({},t,{a:0}))+", "+BM(Object.assign({},t,{a:1}))+")"},a=xv(["react-colorful__alpha",e]),l=Gs(100*t.a);return ce.createElement("div",{className:a},ce.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),ce.createElement(UT,{onMove:function(u){i({a:u.left})},onKey:function(u){i({a:Kp(t.a+u.left)})},"aria-label":"Alpha","aria-valuetext":l+"%","aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":"100"},ce.createElement(zT,{className:"react-colorful__alpha-pointer",left:t.a,color:BM(t)})))},Rj=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,a=n.onChange,l=LT(n,["className","colorModel","color","onChange"]),u=B.useRef(null);JN(u);var h=QN(t,r,a),p=h[0],g=h[1],y=xv(["react-colorful",e]);return ce.createElement("div",am({},l,{ref:u,className:y}),ce.createElement(KN,{hsva:p,onChange:g}),ce.createElement(ZN,{hue:p.h,onChange:g}),ce.createElement(Cj,{hsva:p,onChange:g,className:"react-colorful__last-control"}))},Dj={defaultColor:{r:0,g:0,b:0,a:1},toHsva:YN,fromHsva:qN,equal:FT},Oj=function(n){return ce.createElement(Rj,am({},n,{colorModel:Dj}))},Ij={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return YN({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=qN(n)).r,g:e.g,b:e.b};var e},equal:FT},Pj=function(n){return ce.createElement(Aj,am({},n,{colorModel:Ij}))},kM={exports:{}},VM,q3;function Nj(){if(q3)return VM;q3=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return VM=n,VM}var HM,Y3;function Lj(){if(Y3)return HM;Y3=1;var n=Nj();function e(){}function t(){}return t.resetWarningCache=e,HM=function(){function i(l,u,h,p,g,y){if(y!==n){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},HM}var Z3;function Uj(){return Z3||(Z3=1,kM.exports=Lj()()),kM.exports}var zj=Uj();const Ci=Ud(zj);function om(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{p(i.next(g))}catch(y){l(y)}}function h(g){try{p(i.throw(g))}catch(y){l(y)}}function p(g){g.done?a(g.value):r(g.value).then(u,h)}p((i=i.apply(n,e||[])).next())})}function lm(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(p){return function(g){return h([p,g])}}function h(p){if(i)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(t=0)),t;)try{if(i=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,r=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){t.label=p[1];break}if(p[0]===6&&t.label<a[1]){t.label=a[1],a=p;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(p);break}a[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(g){p=[6,g],r=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Fj(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,a=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){l={error:u}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return a}function Bj(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Fj(arguments[e]));return n}var kj=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Sv(n,e){var t=Vj(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Vj(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=kj.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var Hj=[".DS_Store","Thumbs.db"];function Gj(n){return om(this,void 0,void 0,function(){return lm(this,function(e){return Rx(n)&&Wj(n)?[2,qj(n.dataTransfer,n.type)]:$j(n)?[2,jj(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Xj(n)]:[2,[]]})})}function Wj(n){return Rx(n.dataTransfer)}function $j(n){return Rx(n)&&Rx(n.target)}function Rx(n){return typeof n=="object"&&n!==null}function jj(n){return rw(n.target.files).map(function(e){return Sv(e)})}function Xj(n){return om(this,void 0,void 0,function(){var e;return lm(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return Sv(i)})]}})})}function qj(n,e){return om(this,void 0,void 0,function(){var t,i;return lm(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=rw(n.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Yj))]):[3,2];case 1:return i=r.sent(),[2,K3(eL(i))];case 2:return[2,K3(rw(n.files).map(function(a){return Sv(a)}))]}})})}function K3(n){return n.filter(function(e){return Hj.indexOf(e.name)===-1})}function rw(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function Yj(n){if(typeof n.webkitGetAsEntry!="function")return Q3(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?tL(e):Q3(n)}function eL(n){return n.reduce(function(e,t){return Bj(e,Array.isArray(t)?eL(t):[t])},[])}function Q3(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=Sv(e);return Promise.resolve(t)}function Zj(n){return om(this,void 0,void 0,function(){return lm(this,function(e){return[2,n.isDirectory?tL(n):Kj(n)]})})}function tL(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function a(){var l=this;e.readEntries(function(u){return om(l,void 0,void 0,function(){var h,p,g;return lm(this,function(y){switch(y.label){case 0:if(u.length)return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return h=y.sent(),t(h),[3,4];case 3:return p=y.sent(),i(p),[3,4];case 4:return[3,6];case 5:g=Promise.all(u.map(Zj)),r.push(g),a(),y.label=6;case 6:return[2]}})})},function(u){i(u)})}a()})}function Kj(n){return om(this,void 0,void 0,function(){return lm(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var a=Sv(r,n.fullPath);t(a)},function(r){i(r)})})]})})}var ob={},J3;function Qj(){return J3||(J3=1,ob.__esModule=!0,ob.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return t.some(function(l){var u=l.trim().toLowerCase();return u.charAt(0)==="."?i.toLowerCase().endsWith(u):u.endsWith("/*")?a===u.replace(/\/.*$/,""):r===u})}return!0}),ob}var Jj=Qj();const eX=Ud(Jj);function eD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function tD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eD(Object(t),!0).forEach(function(i){nL(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function nL(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nD(n,e){return rX(n)||iX(n,e)||nX(n,e)||tX()}function tX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nX(n,e){if(n){if(typeof n=="string")return iD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return iD(n,e)}}function iD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function iX(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,a=!1,l,u;try{for(t=t.call(n);!(r=(l=t.next()).done)&&(i.push(l.value),!(e&&i.length===e));r=!0);}catch(h){a=!0,u=h}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw u}}return i}}function rX(n){if(Array.isArray(n))return n}var sX="file-invalid-type",aX="file-too-large",oX="file-too-small",lX="too-many-files",cX=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:sX,message:"File type must be ".concat(t)}},rD=function(e){return{code:aX,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},sD=function(e){return{code:oX,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},uX={code:lX,message:"Too many files"};function iL(n,e){var t=n.type==="application/x-moz-file"||eX(n,e);return[t,t?null:cX(e)]}function rL(n,e,t){if(Zg(n.size))if(Zg(e)&&Zg(t)){if(n.size>t)return[!1,rD(t)];if(n.size<e)return[!1,sD(e)]}else{if(Zg(e)&&n.size<e)return[!1,sD(e)];if(Zg(t)&&n.size>t)return[!1,rD(t)]}return[!0,null]}function Zg(n){return n!=null}function fX(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,a=n.multiple,l=n.maxFiles;return!a&&e.length>1||a&&l>=1&&e.length>l?!1:e.every(function(u){var h=iL(u,t),p=nD(h,1),g=p[0],y=rL(u,i,r),_=nD(y,1),b=_[0];return g&&b})}function Dx(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function lb(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function aD(n){n.preventDefault()}function dX(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function hX(n){return n.indexOf("Edge/")!==-1}function pX(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return dX(n)||hX(n)}function Dl(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return e.some(function(u){return!Dx(i)&&u&&u.apply(void 0,[i].concat(a)),Dx(i)})}}function mX(){return"showOpenFilePicker"in window}function gX(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return tD(tD({},e),{},nL({},t,[]))},{}):{}}]}function vX(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function yX(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var _X=["children"],bX=["open"],xX=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],SX=["refKey","onChange","onClick"];function MX(n){return TX(n)||wX(n)||sL(n)||EX()}function EX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wX(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function TX(n){if(Array.isArray(n))return sw(n)}function GM(n,e){return RX(n)||CX(n,e)||sL(n,e)||AX()}function AX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sL(n,e){if(n){if(typeof n=="string")return sw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sw(n,e)}}function sw(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function CX(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,a=!1,l,u;try{for(t=t.call(n);!(r=(l=t.next()).done)&&(i.push(l.value),!(e&&i.length===e));r=!0);}catch(h){a=!0,u=h}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw u}}return i}}function RX(n){if(Array.isArray(n))return n}function oD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ki(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(t),!0).forEach(function(i){aw(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function aw(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ox(n,e){if(n==null)return{};var t=DX(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function DX(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var BT=B.forwardRef(function(n,e){var t=n.children,i=Ox(n,_X),r=oL(i),a=r.open,l=Ox(r,bX);return B.useImperativeHandle(e,function(){return{open:a}},[a]),ce.createElement(B.Fragment,null,t(Ki(Ki({},l),{},{open:a})))});BT.displayName="Dropzone";var aL={disabled:!1,getFilesFromEvent:Gj,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};BT.defaultProps=aL;BT.propTypes={children:Ci.func,accept:Ci.oneOfType([Ci.string,Ci.arrayOf(Ci.string)]),multiple:Ci.bool,preventDropOnDocument:Ci.bool,noClick:Ci.bool,noKeyboard:Ci.bool,noDrag:Ci.bool,noDragEventsBubbling:Ci.bool,minSize:Ci.number,maxSize:Ci.number,maxFiles:Ci.number,disabled:Ci.bool,getFilesFromEvent:Ci.func,onFileDialogCancel:Ci.func,onFileDialogOpen:Ci.func,useFsAccessApi:Ci.bool,onDragEnter:Ci.func,onDragLeave:Ci.func,onDragOver:Ci.func,onDrop:Ci.func,onDropAccepted:Ci.func,onDropRejected:Ci.func,validator:Ci.func};var ow={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function oL(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ki(Ki({},aL),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,a=e.maxSize,l=e.minSize,u=e.multiple,h=e.maxFiles,p=e.onDragEnter,g=e.onDragLeave,y=e.onDragOver,_=e.onDrop,b=e.onDropAccepted,S=e.onDropRejected,A=e.onFileDialogCancel,w=e.onFileDialogOpen,E=e.useFsAccessApi,R=e.preventDropOnDocument,D=e.noClick,I=e.noKeyboard,L=e.noDrag,N=e.noDragEventsBubbling,F=e.validator,V=B.useMemo(function(){return typeof w=="function"?w:lD},[w]),P=B.useMemo(function(){return typeof A=="function"?A:lD},[A]),U=B.useRef(null),W=B.useRef(null),Q=B.useReducer(OX,ow),K=GM(Q,2),ne=K[0],re=K[1],X=ne.isFocused,J=ne.isFileDialogActive,ae=ne.draggedFiles,Me=B.useRef(typeof window<"u"&&window.isSecureContext&&E&&mX()),Se=function(){!Me.current&&J&&setTimeout(function(){if(W.current){var k=W.current.files;k.length||(re({type:"closeDialog"}),P())}},300)};B.useEffect(function(){return window.addEventListener("focus",Se,!1),function(){window.removeEventListener("focus",Se,!1)}},[W,J,P,Me]);var Y=B.useRef([]),pe=function(k){U.current&&U.current.contains(k.target)||(k.preventDefault(),Y.current=[])};B.useEffect(function(){return R&&(document.addEventListener("dragover",aD,!1),document.addEventListener("drop",pe,!1)),function(){R&&(document.removeEventListener("dragover",aD),document.removeEventListener("drop",pe))}},[U,R]);var we=B.useCallback(function(G){G.preventDefault(),G.persist(),He(G),Y.current=[].concat(MX(Y.current),[G.target]),lb(G)&&Promise.resolve(r(G)).then(function(k){Dx(G)&&!N||(re({draggedFiles:k,isDragActive:!0,type:"setDraggedFiles"}),p&&p(G))})},[r,p,N]),ke=B.useCallback(function(G){G.preventDefault(),G.persist(),He(G);var k=lb(G);if(k&&G.dataTransfer)try{G.dataTransfer.dropEffect="copy"}catch{}return k&&y&&y(G),!1},[y,N]),pt=B.useCallback(function(G){G.preventDefault(),G.persist(),He(G);var k=Y.current.filter(function(Ae){return U.current&&U.current.contains(Ae)}),de=k.indexOf(G.target);de!==-1&&k.splice(de,1),Y.current=k,!(k.length>0)&&(re({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),lb(G)&&g&&g(G))},[U,g,N]),ge=B.useCallback(function(G,k){var de=[],Ae=[];G.forEach(function(Be){var Ie=iL(Be,t),wt=GM(Ie,2),ft=wt[0],Pt=wt[1],jt=rL(Be,l,a),Ze=GM(jt,2),Ke=Ze[0],At=Ze[1],ie=F?F(Be):null;if(ft&&Ke&&!ie)de.push(Be);else{var _e=[Pt,At];ie&&(_e=_e.concat(ie)),Ae.push({file:Be,errors:_e.filter(function(nt){return nt})})}}),(!u&&de.length>1||u&&h>=1&&de.length>h)&&(de.forEach(function(Be){Ae.push({file:Be,errors:[uX]})}),de.splice(0)),re({acceptedFiles:de,fileRejections:Ae,type:"setFiles"}),_&&_(de,Ae,k),Ae.length>0&&S&&S(Ae,k),de.length>0&&b&&b(de,k)},[re,u,t,l,a,h,_,b,S,F]),Re=B.useCallback(function(G){G.preventDefault(),G.persist(),He(G),Y.current=[],lb(G)&&Promise.resolve(r(G)).then(function(k){Dx(G)&&!N||ge(k,G)}),re({type:"reset"})},[r,ge,N]),tt=B.useCallback(function(){if(Me.current){re({type:"openDialog"}),V();var G={multiple:u,types:gX(t)};window.showOpenFilePicker(G).then(function(k){return r(k)}).then(function(k){ge(k,null),re({type:"closeDialog"})}).catch(function(k){vX(k)?(P(k),re({type:"closeDialog"})):yX(k)&&(Me.current=!1,W.current&&(W.current.value=null,W.current.click()))});return}W.current&&(re({type:"openDialog"}),V(),W.current.value=null,W.current.click())},[re,V,P,E,ge,t,u]),yt=B.useCallback(function(G){!U.current||!U.current.isEqualNode(G.target)||(G.key===" "||G.key==="Enter"||G.keyCode===32||G.keyCode===13)&&(G.preventDefault(),tt())},[U,tt]),Rt=B.useCallback(function(){re({type:"focus"})},[]),nn=B.useCallback(function(){re({type:"blur"})},[]),cn=B.useCallback(function(){D||(pX()?setTimeout(tt,0):tt())},[D,tt]),zt=function(k){return i?null:k},Ve=function(k){return I?null:zt(k)},Je=function(k){return L?null:zt(k)},He=function(k){N&&k.stopPropagation()},mt=B.useMemo(function(){return function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=G.refKey,de=k===void 0?"ref":k,Ae=G.role,Be=G.onKeyDown,Ie=G.onFocus,wt=G.onBlur,ft=G.onClick,Pt=G.onDragEnter,jt=G.onDragOver,Ze=G.onDragLeave,Ke=G.onDrop,At=Ox(G,xX);return Ki(Ki(aw({onKeyDown:Ve(Dl(Be,yt)),onFocus:Ve(Dl(Ie,Rt)),onBlur:Ve(Dl(wt,nn)),onClick:zt(Dl(ft,cn)),onDragEnter:Je(Dl(Pt,we)),onDragOver:Je(Dl(jt,ke)),onDragLeave:Je(Dl(Ze,pt)),onDrop:Je(Dl(Ke,Re)),role:typeof Ae=="string"&&Ae!==""?Ae:"button"},de,U),!i&&!I?{tabIndex:0}:{}),At)}},[U,yt,Rt,nn,cn,we,ke,pt,Re,I,L,i]),te=B.useCallback(function(G){G.stopPropagation()},[]),kt=B.useMemo(function(){return function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=G.refKey,de=k===void 0?"ref":k,Ae=G.onChange,Be=G.onClick,Ie=Ox(G,SX),wt=aw({accept:t,multiple:u,type:"file",style:{display:"none"},onChange:zt(Dl(Ae,Re)),onClick:zt(Dl(Be,te)),tabIndex:-1},de,W);return Ki(Ki({},wt),Ie)}},[W,t,u,Re,i]),Et=ae.length,Vt=Et>0&&fX({files:ae,accept:t,minSize:l,maxSize:a,multiple:u,maxFiles:h}),lt=Et>0&&!Vt;return Ki(Ki({},ne),{},{isDragAccept:Vt,isDragReject:lt,isFocused:X&&!i,getRootProps:mt,getInputProps:kt,rootRef:U,inputRef:W,open:zt(tt)})}function OX(n,e){switch(e.type){case"focus":return Ki(Ki({},n),{},{isFocused:!0});case"blur":return Ki(Ki({},n),{},{isFocused:!1});case"openDialog":return Ki(Ki({},ow),{},{isFileDialogActive:!0});case"closeDialog":return Ki(Ki({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return Ki(Ki({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return Ki(Ki({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Ki({},ow);default:return n}}function lD(){}function IX(n){let e;const t=new Set,i=(p,g)=>{const y=typeof p=="function"?p(e):p;if(y!==e){const _=e;e=g?y:Object.assign({},e,y),t.forEach(b=>b(e,_))}},r=()=>e,a=(p,g=r,y=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let _=g(e);function b(){const S=g(e);if(!y(_,S)){const A=_;p(_=S,A)}}return t.add(b),()=>t.delete(b)},h={setState:i,getState:r,subscribe:(p,g,y)=>g||y?a(p,g,y):(t.add(p),()=>t.delete(p)),destroy:()=>t.clear()};return e=n(i,r,h),h}const PX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),cD=PX?B.useEffect:B.useLayoutEffect;function NX(n){const e=typeof n=="function"?IX(n):n,t=(i=e.getState,r=Object.is)=>{const[,a]=B.useReducer(w=>w+1,0),l=e.getState(),u=B.useRef(l),h=B.useRef(i),p=B.useRef(r),g=B.useRef(!1),y=B.useRef();y.current===void 0&&(y.current=i(l));let _,b=!1;(u.current!==l||h.current!==i||p.current!==r||g.current)&&(_=i(l),b=!r(y.current,_)),cD(()=>{b&&(y.current=_),u.current=l,h.current=i,p.current=r,g.current=!1});const S=B.useRef(l);cD(()=>{const w=()=>{try{const R=e.getState(),D=h.current(R);p.current(y.current,D)||(u.current=R,y.current=D,a())}catch{g.current=!0,a()}},E=e.subscribe(w);return e.getState()!==S.current&&w(),E},[]);const A=b?_:y.current;return B.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const LX=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(l,u,h)=>{let p=l;if(u){const g=h?.equalityFn||Object.is;let y=l(i.getState());p=_=>{const b=l(_);if(!g(y,b)){const S=y;u(y=b,S)}},h?.fireImmediately&&u(y,y)}return r(p)},n(e,t,i)};var WM,uD;function UX(){return uD||(uD=1,WM=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),WM}var $M,fD;function lL(){if(fD)return $M;fD=1;var n=UX();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return $M=function(i){var r,a;return!(e(i)===!1||(r=i.constructor,typeof r!="function")||(a=r.prototype,e(a)===!1)||a.hasOwnProperty("isPrototypeOf")===!1)},$M}var jM,dD;function kT(){if(dD)return jM;dD=1;var n=lL();return jM=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},jM}var XM,hD;function zX(){return hD||(hD=1,XM=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break}),XM}var qM,pD;function FX(){if(pD)return qM;pD=1;var n=kT(),e=zX();function t(l,u){for(var h=arguments.length,p=0;++p<h;){var g=arguments[p];r(g)&&e(g,i,l)}return l}function i(l,u){if(a(u)){var h=this[u];r(l)&&r(h)?t(h,l):this[u]=l}}function r(l){return n(l)&&!Array.isArray(l)}function a(l){return l!=="__proto__"&&l!=="constructor"&&l!=="prototype"}return qM=t,qM}var YM,mD;function BX(){if(mD)return YM;mD=1,YM=function(t,i,r,a,l){if(!n(t)||!i)return t;if(i=e(i),r&&(i+="."+e(r)),a&&(i+="."+e(a)),l&&(i+="."+e(l)),i in t)return t[i];for(var u=i.split("."),h=u.length,p=-1;t&&++p<h;){for(var g=u[p];g[g.length-1]==="\\";)g=g.slice(0,-1)+"."+u[++p];t=t[g]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return YM}var ZM,gD;function kX(){return gD||(gD=1,ZM=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,a=0;++a<r;)for(var l=Object(arguments[a]),u=Object.getOwnPropertySymbols(l),h=0;h<u.length;h++){var p=u[h];t.call(l,p)&&(i[p]=l[p])}return i}),ZM}var KM,vD;function VX(){if(vD)return KM;vD=1;var n=kT(),e=kX();KM=Object.assign||function(u){if(u===null||typeof u>"u")throw new TypeError("Cannot convert undefined or null to object");a(u)||(u={});for(var h=1;h<arguments.length;h++){var p=arguments[h];i(p)&&(p=r(p)),a(p)&&(t(u,p),e(u,p))}return u};function t(u,h){for(var p in h)l(h,p)&&(u[p]=h[p])}function i(u){return u&&typeof u=="string"}function r(u){var h={};for(var p in u)h[p]=u[p];return h}function a(u){return u&&typeof u=="object"||n(u)}function l(u,h){return Object.prototype.hasOwnProperty.call(u,h)}return KM}var QM,yD;function HX(){if(yD)return QM;yD=1;var n=VX();QM=function(r,a,l){if(typeof r!="string")throw new TypeError("expected a string");typeof a=="function"&&(l=a,a=null),typeof a=="string"&&(a={sep:a});var u=n({sep:"."},a),h=u.quotes||['"',"'","`"],p;u.brackets===!0?p={"<":">","(":")","[":"]","{":"}"}:u.brackets&&(p=u.brackets);var g=[],y=[],_=[""],b=u.sep,S=r.length,A=-1,w;function E(){if(p&&y.length)return p[y[y.length-1]]}for(;++A<S;){var R=r[A],D=r[A+1],I={val:R,idx:A,arr:_,str:r};if(g.push(I),R==="\\"){I.val=i(u,r,A)===!0?R+D:D,I.escaped=!0,typeof l=="function"&&l(I),_[_.length-1]+=I.val,A++;continue}if(p&&p[R]){y.push(R);var L=E(),N=A+1;if(r.indexOf(L,N+1)!==-1)for(;y.length&&N<S;){var F=r[++N];if(F==="\\"){F++;continue}if(h.indexOf(F)!==-1){N=e(r,F,N+1);continue}if(L=E(),y.length&&r.indexOf(L,N+1)===-1)break;if(p[F]){y.push(F);continue}L===F&&y.pop()}if(w=N,w===-1){_[_.length-1]+=R;continue}R=r.slice(A,w+1),I.val=R,I.idx=A=w}if(h.indexOf(R)!==-1){if(w=e(r,R,A+1),w===-1){_[_.length-1]+=R;continue}t(R,u)===!0?R=r.slice(A,w+1):R=r.slice(A+1,w),I.val=R,I.idx=A=w}if(typeof l=="function"&&(l(I,g),R=I.val,A=I.idx),I.val===b&&I.split!==!1){_.push("");continue}_[_.length-1]+=I.val}return _};function e(r,a,l,u){var h=r.indexOf(a,l);return r.charAt(h-1)==="\\"?e(r,a,h+1):h}function t(r,a){return a.keepDoubleQuotes===!0&&r==='"'||a.keepSingleQuotes===!0&&r==="'"?!0:a.keepQuotes}function i(r,a,l){return typeof r.keepEscaping=="function"?r.keepEscaping(a,l):r.keepEscaping===!0||a[l+1]==="\\"}return QM}var JM,_D;function GX(){return _D||(_D=1,JM=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),JM}var eE,bD;function WX(){if(bD)return eE;bD=1;var n=GX();eE=function(r){n(r)||(r={});for(var a=arguments.length,l=1;l<a;l++){var u=arguments[l];n(u)&&e(r,u)}return r};function e(i,r){for(var a in r)t(r,a)&&(i[a]=r[a])}function t(i,r){return Object.prototype.hasOwnProperty.call(i,r)}return eE}var tE,xD;function $X(){return xD||(xD=1,tE=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),tE}var nE,SD;function jX(){if(SD)return nE;SD=1;var n=HX(),e=WX(),t=lL(),i=$X();nE=function(a,l,u){if(!i(a)||(Array.isArray(l)&&(l=[].concat.apply([],l).join(".")),typeof l!="string"))return a;for(var h=n(l,{sep:".",brackets:!0}).filter(r),p=h.length,g=-1,y=a;++g<p;){var _=h[g];if(g!==p-1){i(y[_])||(y[_]={}),y=y[_];continue}t(y[_])&&t(u)?y[_]=e({},y[_],u):y[_]=u}return a};function r(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"}return nE}var iE,MD;function XX(){if(MD)return iE;MD=1;var n=kT(),e=FX(),t=BX(),i=jX();return iE=function(a,l,u){if(!n(a))throw new TypeError("expected an object");if(typeof l!="string"||u==null)return e.apply(null,arguments);if(typeof u=="string")return i(a,l,u),a;var h=t(a,l);return n(u)&&n(h)&&(u=e({},h,u)),i(a,l,u),a},iE}var qX=XX();const YX=Ud(qX),VT=(...n)=>n.filter(Boolean).join(".");function ZX(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function KX(n,e){return Object.entries(VW(n,e)).reduce((t,[,{value:i,disabled:r,key:a}])=>(t[a]=r?void 0:i,t),{})}function QX(n,e){const t=B.useRef();return k0(n,t.current)||(t.current=n),t.current}function cL(n,e){var t;return B.useMemo(n,(t=QX(e))!==null&&t!==void 0?t:[])}function JX(n){const e=B.useRef(null),t=B.useRef(null),i=B.useRef(!0);return B.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),B.useEffect(()=>{if(i.current){i.current=!1;return}let r;const a=e.current,l=()=>{n&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",l,{once:!0});const{height:u}=t.current.getBoundingClientRect();return a.style.height=u+"px",n||(a.style.overflow="hidden",r=window.setTimeout(()=>a.style.height="0px",50)),()=>{a.removeEventListener("transitionend",l),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const eq=n=>{const[e,t]=B.useState(n.getVisiblePaths());return B.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:wS});return()=>i()},[n]),e};function tq(n,e,t){return n.useStore(r=>{const a=un(un({},t),r.data);return KX(a,e)},wS)}function uL(n=3){const e=B.useRef(null),t=B.useRef(null),[i,r]=B.useState(!1),a=B.useCallback(()=>r(!0),[]),l=B.useCallback(()=>r(!1),[]);return B.useLayoutEffect(()=>{if(i){const{bottom:u,top:h,left:p}=e.current.getBoundingClientRect(),{height:g}=t.current.getBoundingClientRect(),y=u+g>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=p+"px",y==="down"?t.current.style.top=u+n+"px":t.current.style.bottom=window.innerHeight-h+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:a,hide:l}}Mj([Ej]);const nq={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};va.extend({color:()=>n=>Bs(n).isValid()});const iq=n=>va().color().test(n);function fL(n,{format:e,hasAlpha:t,isString:i}){const r=nq[e]+(i&&e!=="hex"?"String":""),a=n[r]();return typeof a=="object"&&!t?HW(a,["a"]):a}const dL=(n,e)=>{const t=Bs(n);if(!t.isValid())throw Error("Invalid color");return fL(t,e)},rq=(n,e)=>fL(Bs(n),un(un({},e),{},{isString:!0,format:"hex"})),sq=({value:n})=>{const e=Sj(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:dL(n,r),settings:r}};var aq=Object.freeze({__proto__:null,schema:iq,sanitize:dL,format:rq,normalize:sq});const oq=an("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),lq=an("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),cq=an("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function ED(n,e){return e!=="rgb"?Bs(n).toRgb():n}function uq({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:a}=Es(),{format:l,hasAlpha:u}=t,{popinRef:h,wrapperRef:p,shown:g,show:y,hide:_}=uL(),b=B.useRef(0),[S,A]=B.useState(()=>ED(n,l)),w=u?Oj:Pj,E=()=>{A(ED(n,l)),y(),r()},R=()=>{_(),a(),window.clearTimeout(b.current)},D=()=>{b.current=window.setTimeout(R,500)};return B.useEffect(()=>()=>window.clearTimeout(b.current),[]),ce.createElement(ce.Fragment,null,ce.createElement(oq,{ref:h,active:g,onClick:()=>E(),style:{color:e}}),g&&ce.createElement(IT,null,ce.createElement(NN,{onPointerUp:R}),ce.createElement(cq,{ref:p,onMouseEnter:()=>window.clearTimeout(b.current),onMouseLeave:I=>I.buttons===0&&D()},ce.createElement(w,{color:S,onChange:i}))))}function fq(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:a}=Es();return ce.createElement(go,{input:!0},ce.createElement(Qo,null,t),ce.createElement(lq,null,ce.createElement(uq,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:a}),ce.createElement(OT,{value:e,onChange:i,onUpdate:r})))}var dq=un({component:fq},aq);function hq(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Es();return ce.createElement(go,{input:!0},ce.createElement(Qo,null,n),ce.createElement(NT,{value:e,settings:i,onUpdate:t}))}var pq=un({component:hq},HN(["x","y","z"]));const mq=an("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),gq=an("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function vq({value:n,settings:e,onUpdate:t}){const i=B.useRef(),r=B.useRef(0),a=B.useRef(0),l=B.useRef(1),[u,h]=B.useState(!1),[p,g]=B.useState(!1),[y,_]=UN(),b=B.useRef(null),S=B.useRef(null);B.useLayoutEffect(()=>{if(u){const{top:Q,left:K,width:ne,height:re}=b.current.getBoundingClientRect();S.current.style.left=K+ne/2+"px",S.current.style.top=Q+re/2+"px"}},[u]);const{keys:[A,w],joystick:E}=e,R=E==="invertY"?1:-1,{[A]:{step:D},[w]:{step:I}}=e,L=zc("sizes","joystickWidth"),N=zc("sizes","joystickHeight"),F=parseFloat(L)*.8/2,V=parseFloat(N)*.8/2,P=B.useCallback(()=>{i.current||(g(!0),r.current&&_({x:r.current*F}),a.current&&_({y:a.current*-V}),i.current=window.setInterval(()=>{t(Q=>{const K=D*r.current*l.current,ne=R*I*a.current*l.current;return Array.isArray(Q)?{[A]:Q[0]+K,[w]:Q[1]+ne}:{[A]:Q[A]+K,[w]:Q[w]+ne}})},16))},[F,V,t,_,D,I,A,w,R]),U=B.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,g(!1)},[]);B.useEffect(()=>{function Q(K){l.current=bN(K)}return window.addEventListener("keydown",Q),window.addEventListener("keyup",Q),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",Q),window.removeEventListener("keyup",Q)}},[]);const W=bv(({first:Q,active:K,delta:[ne,re],movement:[X,J]})=>{Q&&h(!0);const ae=of(X,-F,F),Me=of(J,-V,V);r.current=Math.abs(X)>Math.abs(ae)?Math.sign(X-ae):0,a.current=Math.abs(J)>Math.abs(Me)?Math.sign(Me-J):0;let Se=n[A],Y=n[w];K?(r.current||(Se+=ne*D*l.current,_({x:ae})),a.current||(Y-=R*re*I*l.current,_({y:Me})),r.current||a.current?P():U(),t({[A]:Se,[w]:Y})):(h(!1),r.current=0,a.current=0,_({x:0,y:0}),U())});return ce.createElement(mq,lr({ref:b},W()),u&&ce.createElement(IT,null,ce.createElement(gq,{ref:S,isOutOfBounds:p},ce.createElement("div",null),ce.createElement("span",{ref:y}))))}const yq=an("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function _q(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Es();return ce.createElement(go,{input:!0},ce.createElement(Qo,null,n),ce.createElement(yq,{withJoystick:!!i.joystick},i.joystick&&ce.createElement(vq,{value:e,settings:i,onUpdate:t}),ce.createElement(NT,{value:e,settings:i,onUpdate:t})))}const bq=["joystick"],hL=HN(["x","y"]),xq=n=>{let{joystick:e=!0}=n,t=yi(n,bq);const{value:i,settings:r}=hL.normalize(t);return{value:i,settings:un(un({},r),{},{joystick:e})}};var Sq=un(un({component:_q},hL),{},{normalize:xq});const Mq=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},Eq=(n,e)=>typeof e=="object"&&"image"in e,wq=({image:n})=>({value:n});var Tq=Object.freeze({__proto__:null,sanitize:Mq,schema:Eq,normalize:wq});const Aq=an("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Cq=an("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Rq=an("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Dq=an("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Oq=an("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Iq=an("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Pq(){const{label:n,value:e,onUpdate:t,disabled:i}=Es(),{popinRef:r,wrapperRef:a,shown:l,show:u,hide:h}=uL(),p=B.useCallback(S=>{S.length&&t(S[0])},[t]),g=B.useCallback(S=>{S.stopPropagation(),t(void 0)},[t]),{getRootProps:y,getInputProps:_,isDragAccept:b}=oL({maxFiles:1,accept:"image/*",onDrop:p,disabled:i});return ce.createElement(go,{input:!0},ce.createElement(Qo,null,n),ce.createElement(Aq,null,ce.createElement(Rq,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&u(),onPointerUp:h,style:{backgroundImage:e?`url(${e})`:"none"}}),l&&!!e&&ce.createElement(IT,null,ce.createElement(NN,{onPointerUp:h,style:{cursor:"pointer"}}),ce.createElement(Dq,{ref:a,style:{backgroundImage:`url(${e})`}})),ce.createElement(Cq,y({isDragAccept:b}),ce.createElement("input",_()),ce.createElement(Oq,null,b?"drop image":"click or drop")),ce.createElement(Iq,{onClick:g,disabled:!e})))}var Nq=un({component:Pq},Tq);const wD=va().number(),Lq=(n,e)=>va().array().length(2).every.number().test(n)&&va().schema({min:wD,max:wD}).test(e),Ix=n=>({min:n[0],max:n[1]}),pL=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?Ix(n):n,a={min:i[0],max:i[1]},{min:l,max:u}=un(un({},a),r);return[of(Number(l),e,Math.max(e,u)),of(Number(u),Math.min(t,l),t)]},Uq=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=VN(Ix(n),{min:i,max:i}),a=[e,t],l=un(un({},r),{},{bounds:a});return{value:pL(Ix(n),l,n),settings:l}};var zq=Object.freeze({__proto__:null,schema:Lq,format:Ix,sanitize:pL,normalize:Uq});const Fq=["value","bounds","onDrag"],Bq=["bounds"],kq=an("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Vq(n){let{value:e,bounds:[t,i],onDrag:r}=n,a=yi(n,Fq);const l=B.useRef(null),u=B.useRef(null),h=B.useRef(null),p=B.useRef(0),g=zc("sizes","scrubberWidth"),y=bv(({event:S,first:A,xy:[w],movement:[E],memo:R={}})=>{if(A){const{width:I,left:L}=l.current.getBoundingClientRect();p.current=I-parseFloat(g);const N=S?.target===u.current||S?.target===h.current;R.pos=Ax((w-L)/I,t,i);const F=Math.abs(R.pos-e.min)-Math.abs(R.pos-e.max);R.key=F<0||F===0&&R.pos<=e.min?"min":"max",N&&(R.pos=e[R.key])}const D=R.pos+Ax(E/p.current,0,i-t);return r({[R.key]:R$(D,a[R.key])}),R}),_=`calc(${Tx(e.min,t,i)} * (100% - ${g} - 8px) + 4px)`,b=`calc(${1-Tx(e.max,t,i)} * (100% - ${g} - 8px) + 4px)`;return ce.createElement(FN,lr({ref:l},y()),ce.createElement(zN,null,ce.createElement(BN,{style:{left:_,right:b}})),ce.createElement(KE,{position:"left",ref:u,style:{left:_}}),ce.createElement(KE,{position:"right",ref:h,style:{right:b}}))}function Hq(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Es(),r=yi(i,Bq);return ce.createElement(ce.Fragment,null,ce.createElement(go,{input:!0},ce.createElement(Qo,null,n),ce.createElement(kq,null,ce.createElement(Vq,lr({value:e},i,{onDrag:t})),ce.createElement(NT,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var Gq=un({component:Hq},zq);const Wq=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},$q=["type","value"],jq=["onChange","transient","onEditStart","onEditEnd"],Xq=function(){const e=NX(LX(()=>({data:{}}))),t=Wq();this.storeId=kW(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const l=this.getData(),u=Object.keys(l),h=[];Object.entries(i).forEach(([g,y])=>{y.render&&u.some(_=>_.indexOf(g)===0)&&!y.render(this.get)&&h.push(g+".")});const p=[];return r.forEach(g=>{g in l&&l[g].__refCount>0&&h.every(y=>g.indexOf(y)===-1)&&(!l[g].render||l[g].render(this.get))&&p.push(g)}),p},this.setOrderedPaths=l=>{l.forEach(u=>r.add(u))},this.orderPaths=l=>(this.setOrderedPaths(l),l),this.disposePaths=l=>{e.setState(u=>{const h=u.data;return l.forEach(p=>{if(p in h){const g=h[p];g.__refCount--,g.__refCount===0&&g.type in Uc&&delete h[p]}}),{data:h}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=l=>i[l]||{},this.getData=()=>e.getState().data,this.addData=(l,u)=>{e.setState(h=>{const p=h.data;return Object.entries(l).forEach(([g,y])=>{let _=p[g];if(_){const{type:b,value:S}=y,A=yi(y,$q);b!==_.type?Nc(Rr.INPUT_TYPE_OVERRIDE,g,_.type,b):((_.__refCount===0||u)&&Object.assign(_,A),_.__refCount++)}else p[g]=un(un({},y),{},{__refCount:1})}),{data:p}})},this.setValueAtPath=(l,u,h)=>{e.setState(p=>{const g=p.data;return z3(g[l],u,l,this,h),{data:g}})},this.setSettingsAtPath=(l,u)=>{e.setState(h=>{const p=h.data;return p[l].settings=un(un({},p[l].settings),u),{data:p}})},this.disableInputAtPath=(l,u)=>{e.setState(h=>{const p=h.data;return p[l].disabled=u,{data:p}})},this.set=(l,u)=>{e.setState(h=>{const p=h.data;return Object.entries(l).forEach(([g,y])=>{try{z3(p[g],y,void 0,void 0,u)}catch{}}),{data:p}})},this.getInput=l=>{try{return this.getData()[l]}catch{Nc(Rr.PATH_DOESNT_EXIST,l)}},this.get=l=>{var u;return(u=this.getInput(l))===null||u===void 0?void 0:u.value},this.emitOnEditStart=l=>{t.emit(`onEditStart:${l}`,this.get(l),l,un(un({},this.getInput(l)),{},{get:this.get}))},this.emitOnEditEnd=l=>{t.emit(`onEditEnd:${l}`,this.get(l),l,un(un({},this.getInput(l)),{},{get:this.get}))},this.subscribeToEditStart=(l,u)=>{const h=`onEditStart:${l}`;return t.on(h,u),()=>t.off(h,u)},this.subscribeToEditEnd=(l,u)=>{const h=`onEditEnd:${l}`;return t.on(h,u),()=>t.off(h,u)};const a=(l,u,h)=>{const p={};return Object.entries(l).forEach(([g,y])=>{if(g==="")return Nc(Rr.EMPTY_KEY);let _=VT(u,g);if(y.type===Uc.FOLDER){const b=a(y.schema,_,h);Object.assign(p,b),_ in i||(i[_]=y.settings)}else if(g in h)Nc(Rr.DUPLICATE_KEYS,g,_,h[g].path);else{const b=qW(y,g,_,p);if(b){const{type:S,options:A,input:w}=b,{onChange:E,transient:R,onEditStart:D,onEditEnd:I}=A,L=yi(A,jq);p[_]=un(un(un({type:S},L),w),{},{fromPanel:!0}),h[g]={path:_,onChange:E,transient:R,onEditStart:D,onEditEnd:I}}else Nc(Rr.UNKNOWN_INPUT,_,y)}}),p};this.getDataFromSchema=l=>{const u={};return[a(l,"",u),u]}},mL=new Xq,qq={collapsed:!1};function Yq(n,e){return{type:Uc.FOLDER,schema:n,settings:un(un({},qq),e)}}const TD=n=>"__levaInput"in n,Zq=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[a,l]=ZX(r);(!i||a.toLowerCase().indexOf(i)>-1)&&YX(t,l,{[a]:{__levaInput:!0,path:r}})}),t},Kq=["type","label","path","valueKey","value","settings","setValue","disabled"];function Qq(n){let{type:e,label:t,path:i,valueKey:r,value:a,settings:l,setValue:u,disabled:h}=n,p=yi(n,Kq);const{displayValue:g,onChange:y,onUpdate:_}=LN({type:e,value:a,settings:l,setValue:u}),b=Nd[e].component;return b?ce.createElement(wN.Provider,{value:un({key:r,path:i,id:""+i,label:t,displayValue:g,value:a,onChange:y,onUpdate:_,settings:l,setValue:u,disabled:h},p)},ce.createElement(h$,{disabled:h},ce.createElement(b,null))):(Nc(Rr.NO_COMPONENT_FOR_TYPE,e,i),null)}const Jq=an("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function eY({onClick:n,settings:e,label:t}){const i=yv();return ce.createElement(go,null,ce.createElement(Jq,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const tY=an("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),nY=an("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),iY=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function rY(n){const{label:e,opts:t}=iY(n),i=yv();return ce.createElement(go,{input:!!e},e&&ce.createElement(Qo,null,e),ce.createElement(tY,null,Object.entries(t).map(([r,a])=>ce.createElement(nY,{key:r,onClick:()=>a(i.get)},r))))}const sY=an("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),gL=100;function aY(n,e){n.push(e),n.length>gL&&n.shift()}const oY=B.forwardRef(function({initialValue:n},e){const t=zc("colors","highlight3"),i=zc("colors","elevation2"),r=zc("colors","highlight1"),[a,l]=B.useMemo(()=>[Bs(r).alpha(.4).toRgbString(),Bs(r).alpha(.1).toRgbString()],[r]),u=B.useRef([n]),h=B.useRef(n),p=B.useRef(n),g=B.useRef(),y=B.useCallback((S,A)=>{if(!S)return;const{width:w,height:E}=S,R=new Path2D,D=w/gL,I=E*.05;for(let F=0;F<u.current.length;F++){const V=Tx(u.current[F],h.current,p.current),P=D*F,U=E-V*(E-I*2)-I;R.lineTo(P,U)}A.clearRect(0,0,w,E);const L=new Path2D(R);L.lineTo(D*(u.current.length+1),E),L.lineTo(0,E),L.lineTo(0,0);const N=A.createLinearGradient(0,0,0,E);N.addColorStop(0,a),N.addColorStop(1,l),A.fillStyle=N,A.fill(L),A.strokeStyle=i,A.lineJoin="round",A.lineWidth=14,A.stroke(R),A.strokeStyle=t,A.lineWidth=2,A.stroke(R)},[t,i,a,l]),[_,b]=S$(y);return B.useImperativeHandle(e,()=>({frame:S=>{(h.current===void 0||S<h.current)&&(h.current=S),(p.current===void 0||S>p.current)&&(p.current=S),aY(u.current,S),g.current=requestAnimationFrame(()=>y(_.current,b.current))}}),[_,b,y]),B.useEffect(()=>()=>cancelAnimationFrame(g.current),[]),ce.createElement(sY,{ref:_})}),AD=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),lY=B.forwardRef(function({initialValue:n},e){const[t,i]=B.useState(AD(n));return B.useImperativeHandle(e,()=>({frame:r=>i(AD(r))}),[]),ce.createElement("div",null,t)});function CD(n){return typeof n=="function"?n():n.current}function cY({label:n,objectOrFn:e,settings:t}){const i=B.useRef(),r=B.useRef(CD(e));return B.useEffect(()=>{const a=window.setInterval(()=>{var l;document.hidden||(l=i.current)===null||l===void 0||l.frame(CD(e))},t.interval);return()=>window.clearInterval(a)},[e,t.interval]),ce.createElement(go,{input:!0},ce.createElement(Qo,{align:"top"},n),t.graph?ce.createElement(oY,{ref:i,initialValue:r.current}):ce.createElement(lY,{ref:i,initialValue:r.current}))}const uY=["type","label","key"],fY={[Uc.BUTTON]:eY,[Uc.BUTTON_GROUP]:rY,[Uc.MONITOR]:cY},dY=ce.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:a,emitOnEditStart:l,emitOnEditEnd:u}]=E$(n);if(!e)return null;const{type:h,label:p,key:g}=e,y=yi(e,uY);if(h in Uc){const _=fY[h];return ce.createElement(_,lr({label:p,path:n},y))}return h in Nd?ce.createElement(Qq,lr({key:a+n,type:h,label:p,storeId:a,path:n,valueKey:g,setValue:t,setSettings:i,disable:r,emitOnEditStart:l,emitOnEditEnd:u},y)):(DW(Rr.UNSUPPORTED_INPUT,h,n),null)});function hY({toggle:n,toggled:e,name:t}){return ce.createElement(u$,{onClick:()=>n()},ce.createElement(PT,{toggled:e}),ce.createElement("div",null,t))}const pY=({name:n,path:e,tree:t})=>{const i=yv(),r=VT(e,n),{collapsed:a,color:l}=i.getFolderSettings(r),[u,h]=B.useState(!a),p=B.useRef(null),g=zc("colors","folderWidgetColor"),y=zc("colors","folderTextColor");return B.useLayoutEffect(()=>{p.current.style.setProperty("--leva-colors-folderWidgetColor",l||g),p.current.style.setProperty("--leva-colors-folderTextColor",l||y)},[l,g,y]),ce.createElement(Cx,{ref:p},ce.createElement(hY,{name:n,toggled:u,toggle:()=>h(_=>!_)}),ce.createElement(vL,{parent:r,tree:t,toggled:u}))},vL=ce.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:a})=>{const{wrapperRef:l,contentRef:u}=JX(a),h=yv(),p=([y,_])=>{var b;return(TD(_)?(b=h.getInput(_.path))===null||b===void 0?void 0:b.order:h.getFolderSettings(VT(i,y)).order)||0},g=Object.entries(r).sort((y,_)=>p(y)-p(_));return ce.createElement(YE,{ref:l,isRoot:n,fill:e,flat:t},ce.createElement(ON,{ref:u,isRoot:n,toggled:a},g.map(([y,_])=>TD(_)?ce.createElement(dY,{key:_.path,valueKey:_.valueKey,path:_.path}):ce.createElement(pY,{key:y,name:y,path:i,tree:_}))))}),mY=an("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${PN}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),yL=40,Px=an("i",{$flexCenter:"",width:yL,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),gY=an("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),vY=an("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Px}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),yY=an("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),_Y=an("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:yL}}}}),bY=ce.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=B.useState(""),a=B.useMemo(()=>_N(n,250),[n]),l=()=>{n(""),r("")},u=h=>{const p=h.currentTarget.value;e(!0),r(p)};return B.useEffect(()=>{a(i)},[i,a]),ce.createElement(ce.Fragment,null,ce.createElement(yY,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:h=>h.stopPropagation(),onChange:u}),ce.createElement(Px,{onClick:()=>l(),style:{visibility:i?"visible":"hidden"}},ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},ce.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function xY({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:a,title:l,drag:u,filterEnabled:h,from:p}){const[g,y]=B.useState(!1),_=B.useRef(null);B.useEffect(()=>{var S,A;g?(S=_.current)===null||S===void 0||S.focus():(A=_.current)===null||A===void 0||A.blur()},[g]);const b=bv(({offset:[S,A],first:w,last:E})=>{e({x:S,y:A}),w&&t({x:S,y:A}),E&&i({x:S,y:A})},{filterTaps:!0,from:({offset:[S,A]})=>[p?.x||S,p?.y||A]});return B.useEffect(()=>{const S=A=>{A.key==="L"&&A.shiftKey&&A.metaKey&&y(w=>!w)};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[]),ce.createElement(ce.Fragment,null,ce.createElement(gY,{mode:u?"drag":void 0},ce.createElement(Px,{active:!a,onClick:()=>r()},ce.createElement(PT,{toggled:a,width:12,height:8})),ce.createElement(_Y,lr({},u?b():{},{drag:u,filterEnabled:h}),l===void 0&&u?ce.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},ce.createElement("circle",{cx:"2",cy:"2",r:"2"}),ce.createElement("circle",{cx:"14",cy:"2",r:"2"}),ce.createElement("circle",{cx:"26",cy:"2",r:"2"}),ce.createElement("circle",{cx:"2",cy:"12",r:"2"}),ce.createElement("circle",{cx:"14",cy:"12",r:"2"}),ce.createElement("circle",{cx:"26",cy:"12",r:"2"})):l),h&&ce.createElement(Px,{active:g,onClick:()=>y(S=>!S)},ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},ce.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),ce.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),ce.createElement(vY,{toggled:g},ce.createElement(bY,{ref:_,setFilter:n,toggle:r})))}const SY=["store","hidden","theme","collapsed"];function MY(n){let{store:e,hidden:t=!1,theme:i,collapsed:r=!1}=n,a=yi(n,SY);const l=cL(()=>r$(i),[i]),[u,h]=B.useState(!r),p=typeof r=="object"?!r.collapsed:u,g=B.useMemo(()=>typeof r=="object"?y=>{typeof y=="function"?r.onChange(!y(!r.collapsed)):r.onChange(!y)}:h,[r]);return!e||t?null:ce.createElement(DT.Provider,{value:l},ce.createElement(EY,lr({store:e},a,{toggled:p,setToggle:g,rootClass:l.className})))}const EY=ce.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:a=!1,titleBar:l={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:u=!1,toggled:h,setToggle:p})=>{var g,y;const _=eq(n),[b,S]=B.useState(""),A=B.useMemo(()=>Zq(_,b),[_,b]),[w,E]=UN(),R=r||_.length>0,D=typeof l=="object"&&l.title||void 0,I=typeof l=="object"&&(g=l.drag)!==null&&g!==void 0?g:!0,L=typeof l=="object"&&(y=l.filter)!==null&&y!==void 0?y:!0,N=typeof l=="object"&&l.position||void 0,F=typeof l=="object"&&l.onDrag||void 0,V=typeof l=="object"&&l.onDragStart||void 0,P=typeof l=="object"&&l.onDragEnd||void 0;return ce.useEffect(()=>{E({x:N?.x,y:N?.y})},[N,E]),i$(),ce.createElement(MW,null,ce.createElement(AN.Provider,{value:{hideCopyButton:u}},ce.createElement(mY,{ref:w,className:e,fill:t,flat:i,oneLineLabels:a,hideTitleBar:!l,style:{display:R?"block":"none"}},l&&ce.createElement(xY,{onDrag:U=>{E(U),F?.(U)},onDragStart:U=>V?.(U),onDragEnd:U=>P?.(U),setFilter:S,toggle:U=>p(W=>U??!W),toggled:h,title:D,drag:I,filterEnabled:L,from:N}),R&&ce.createElement(TN.Provider,{value:n},ce.createElement(vL,{isRoot:!0,fill:t,flat:i,tree:A,toggled:h})))))}),wY=["isRoot"];let Nx=!1,Sd=null;function _L(n){let{isRoot:e=!1}=n,t=yi(n,wY);return B.useEffect(()=>(Nx=!0,!e&&Sd&&(Sd.remove(),Sd=null),()=>{e||(Nx=!1)}),[e]),ce.createElement(MY,lr({store:mL},t))}function TY(n){B.useEffect(()=>{n&&!Nx&&(Sd||(Sd=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Sd),tO.createRoot(Sd).render(ce.createElement(_L,{isRoot:!0})))),Nx=!0)},[n])}function AY(n,e,t,i,r){let a,l,u,h,p;return typeof n=="string"?(l=n,a=e,Array.isArray(t)&&(p=t)):(a=n,Array.isArray(e)?p=e:(h=e,p=t)),{schema:a,folderName:l,folderSettings:u,hookSettings:h,deps:p||[]}}function ud(n,e,t,i,r){const{folderName:a,schema:l,folderSettings:u,hookSettings:h,deps:p}=AY(n,e,t),g=typeof l=="function",y=B.useRef(!1),_=B.useRef(!0),b=cL(()=>{y.current=!0;const W=typeof l=="function"?l():l;return a?{[a]:Yq(W,u)}:W},p),S=!(h!=null&&h.store);TY(S);const[A]=B.useState(()=>h?.store||mL),[w,E]=B.useMemo(()=>A.getDataFromSchema(b),[A,b]),[R,D,I,L,N]=B.useMemo(()=>{const W=[],Q=[],K={},ne={},re={};return Object.values(E).forEach(({path:X,onChange:J,onEditStart:ae,onEditEnd:Me,transient:Se})=>{W.push(X),J?(K[X]=J,Se||Q.push(X)):Q.push(X),ae&&(ne[X]=ae),Me&&(re[X]=Me)}),[W,Q,K,ne,re]},[E]),F=B.useMemo(()=>A.orderPaths(R),[R,A]),V=tq(A,D,w),P=B.useCallback(W=>{const Q=Object.entries(W).reduce((K,[ne,re])=>Object.assign(K,{[E[ne].path]:re}),{});A.set(Q,!1)},[A,E]),U=B.useCallback(W=>A.get(E[W].path),[A,E]);return B.useEffect(()=>{const W=!_.current&&y.current;return A.addData(w,W),_.current=!1,y.current=!1,()=>A.disposePaths(F)},[A,F,w]),B.useEffect(()=>{const W=[];return Object.entries(I).forEach(([Q,K])=>{K(A.get(Q),Q,un({initial:!0,get:A.get},A.getInput(Q)));const ne=A.useStore.subscribe(re=>{const X=re.data[Q];return[X.disabled?void 0:X.value,X]},([re,X])=>K(re,Q,un({initial:!1,get:A.get},X)),{equalityFn:wS});W.push(ne)}),()=>W.forEach(Q=>Q())},[A,I]),B.useEffect(()=>{const W=[];return Object.entries(L).forEach(([Q,K])=>W.push(A.subscribeToEditStart(Q,K))),Object.entries(N).forEach(([Q,K])=>W.push(A.subscribeToEditEnd(Q,K))),()=>W.forEach(Q=>Q())},[L,N,A]),g?[V,P,U]:V}$c(jc.SELECT,V$);$c(jc.IMAGE,Nq);$c(jc.NUMBER,O$);$c(jc.COLOR,dq);$c(jc.STRING,Z$);$c(jc.BOOLEAN,ij);$c(jc.INTERVAL,Gq);$c(jc.VECTOR3D,pq);$c(jc.VECTOR2D,Sq);function $0(){return $0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$0.apply(null,arguments)}const bL=parseInt(ev.replace(/\D+/g,""));var lo=Uint8Array,Yu=Uint16Array,lw=Uint32Array,xL=new lo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),SL=new lo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),CY=new lo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ML=function(n,e){for(var t=new Yu(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new lw(t[30]),i=1;i<30;++i)for(var a=t[i];a<t[i+1];++a)r[a]=a-t[i]<<5|i;return[t,r]},EL=ML(xL,2),wL=EL[0],RY=EL[1];wL[28]=258,RY[258]=28;var DY=ML(SL,0),OY=DY[0],cw=new Yu(32768);for(var Ui=0;Ui<32768;++Ui){var Gu=(Ui&43690)>>>1|(Ui&21845)<<1;Gu=(Gu&52428)>>>2|(Gu&13107)<<2,Gu=(Gu&61680)>>>4|(Gu&3855)<<4,cw[Ui]=((Gu&65280)>>>8|(Gu&255)<<8)>>>1}var b0=(function(n,e,t){for(var i=n.length,r=0,a=new Yu(e);r<i;++r)++a[n[r]-1];var l=new Yu(e);for(r=0;r<e;++r)l[r]=l[r-1]+a[r-1]<<1;var u;if(t){u=new Yu(1<<e);var h=15-e;for(r=0;r<i;++r)if(n[r])for(var p=r<<4|n[r],g=e-n[r],y=l[n[r]-1]++<<g,_=y|(1<<g)-1;y<=_;++y)u[cw[y]>>>h]=p}else for(u=new Yu(i),r=0;r<i;++r)n[r]&&(u[r]=cw[l[n[r]-1]++]>>>15-n[r]);return u}),Mv=new lo(288);for(var Ui=0;Ui<144;++Ui)Mv[Ui]=8;for(var Ui=144;Ui<256;++Ui)Mv[Ui]=9;for(var Ui=256;Ui<280;++Ui)Mv[Ui]=7;for(var Ui=280;Ui<288;++Ui)Mv[Ui]=8;var TL=new lo(32);for(var Ui=0;Ui<32;++Ui)TL[Ui]=5;var IY=b0(Mv,9,1),PY=b0(TL,5,1),rE=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Fo=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},sE=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},NY=function(n){return(n/8|0)+(n&7&&1)},LY=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Yu?Yu:n instanceof lw?lw:lo)(t-e);return i.set(n.subarray(e,t)),i},UY=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new lo(0);var r=!e||t,a=!t||t.i;t||(t={}),e||(e=new lo(i*3));var l=function(ge){var Re=e.length;if(ge>Re){var tt=new lo(Math.max(Re*2,ge));tt.set(e),e=tt}},u=t.f||0,h=t.p||0,p=t.b||0,g=t.l,y=t.d,_=t.m,b=t.n,S=i*8;do{if(!g){t.f=u=Fo(n,h,1);var A=Fo(n,h+1,3);if(h+=3,A)if(A==1)g=IY,y=PY,_=9,b=5;else if(A==2){var D=Fo(n,h,31)+257,I=Fo(n,h+10,15)+4,L=D+Fo(n,h+5,31)+1;h+=14;for(var N=new lo(L),F=new lo(19),V=0;V<I;++V)F[CY[V]]=Fo(n,h+V*3,7);h+=I*3;for(var P=rE(F),U=(1<<P)-1,W=b0(F,P,1),V=0;V<L;){var Q=W[Fo(n,h,U)];h+=Q&15;var w=Q>>>4;if(w<16)N[V++]=w;else{var K=0,ne=0;for(w==16?(ne=3+Fo(n,h,3),h+=2,K=N[V-1]):w==17?(ne=3+Fo(n,h,7),h+=3):w==18&&(ne=11+Fo(n,h,127),h+=7);ne--;)N[V++]=K}}var re=N.subarray(0,D),X=N.subarray(D);_=rE(re),b=rE(X),g=b0(re,_,1),y=b0(X,b,1)}else throw"invalid block type";else{var w=NY(h)+4,E=n[w-4]|n[w-3]<<8,R=w+E;if(R>i){if(a)throw"unexpected EOF";break}r&&l(p+E),e.set(n.subarray(w,R),p),t.b=p+=E,t.p=h=R*8;continue}if(h>S){if(a)throw"unexpected EOF";break}}r&&l(p+131072);for(var J=(1<<_)-1,ae=(1<<b)-1,Me=h;;Me=h){var K=g[sE(n,h)&J],Se=K>>>4;if(h+=K&15,h>S){if(a)throw"unexpected EOF";break}if(!K)throw"invalid length/literal";if(Se<256)e[p++]=Se;else if(Se==256){Me=h,g=null;break}else{var Y=Se-254;if(Se>264){var V=Se-257,pe=xL[V];Y=Fo(n,h,(1<<pe)-1)+wL[V],h+=pe}var we=y[sE(n,h)&ae],ke=we>>>4;if(!we)throw"invalid distance";h+=we&15;var X=OY[ke];if(ke>3){var pe=SL[ke];X+=sE(n,h)&(1<<pe)-1,h+=pe}if(h>S){if(a)throw"unexpected EOF";break}r&&l(p+131072);for(var pt=p+Y;p<pt;p+=4)e[p]=e[p-X],e[p+1]=e[p+1-X],e[p+2]=e[p+2-X],e[p+3]=e[p+3-X];p=pt}}t.l=g,t.p=Me,t.b=p,g&&(u=1,t.m=_,t.d=y,t.n=b)}while(!u);return p==e.length?e:LY(e,0,p)},zY=new lo(0),FY=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function cb(n,e){return UY((FY(n),n.subarray(2,-4)),e)}var BY=typeof TextDecoder<"u"&&new TextDecoder,kY=0;try{BY.decode(zY,{stream:!0}),kY=1}catch{}const VY=n=>n&&n.isCubeTexture;class HY extends Gi{constructor(e,t){var i,r;const a=VY(e),u=((r=a?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,h=Math.floor(Math.log2(u)),p=Math.pow(2,h),g=3*Math.max(p,112),y=4*p,_=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/g}`,`#define CUBEUV_TEXEL_HEIGHT ${1/y}`,`#define CUBEUV_MAX_MIP ${h}.0`],b=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,S=_.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,A={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},w=new cv(1,16),E=new ss({uniforms:A,fragmentShader:S,vertexShader:b,side:Vo});super(w,E)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var GY=Object.defineProperty,WY=(n,e,t)=>e in n?GY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$Y=(n,e,t)=>(WY(n,e+"",t),t);class jY{constructor(){$Y(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,l=r.length;a<l;a++)r[a].call(this,e);e.target=null}}}var XY=Object.defineProperty,qY=(n,e,t)=>e in n?XY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sn=(n,e,t)=>(qY(n,typeof e!="symbol"?e+"":e,t),t);const ub=new zd,RD=new Dc,YY=Math.cos(70*(Math.PI/180)),DD=(n,e)=>(n%e+e)%e;let ZY=class extends jY{constructor(e,t){super(),sn(this,"object"),sn(this,"domElement"),sn(this,"enabled",!0),sn(this,"target",new ee),sn(this,"minDistance",0),sn(this,"maxDistance",1/0),sn(this,"minZoom",0),sn(this,"maxZoom",1/0),sn(this,"minPolarAngle",0),sn(this,"maxPolarAngle",Math.PI),sn(this,"minAzimuthAngle",-1/0),sn(this,"maxAzimuthAngle",1/0),sn(this,"enableDamping",!1),sn(this,"dampingFactor",.05),sn(this,"enableZoom",!0),sn(this,"zoomSpeed",1),sn(this,"enableRotate",!0),sn(this,"rotateSpeed",1),sn(this,"enablePan",!0),sn(this,"panSpeed",1),sn(this,"screenSpacePanning",!0),sn(this,"keyPanSpeed",7),sn(this,"zoomToCursor",!1),sn(this,"autoRotate",!1),sn(this,"autoRotateSpeed",2),sn(this,"reverseOrbit",!1),sn(this,"reverseHorizontalOrbit",!1),sn(this,"reverseVerticalOrbit",!1),sn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),sn(this,"mouseButtons",{LEFT:fd.ROTATE,MIDDLE:fd.DOLLY,RIGHT:fd.PAN}),sn(this,"touches",{ONE:dd.ROTATE,TWO:dd.DOLLY_PAN}),sn(this,"target0"),sn(this,"position0"),sn(this,"zoom0"),sn(this,"_domElementKeyEvents",null),sn(this,"getPolarAngle"),sn(this,"getAzimuthalAngle"),sn(this,"setPolarAngle"),sn(this,"setAzimuthalAngle"),sn(this,"getDistance"),sn(this,"getZoomScale"),sn(this,"listenToKeyEvents"),sn(this,"stopListenToKeyEvents"),sn(this,"saveState"),sn(this,"reset"),sn(this,"update"),sn(this,"connect"),sn(this,"dispose"),sn(this,"dollyIn"),sn(this,"dollyOut"),sn(this,"getScale"),sn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=ie=>{let _e=DD(ie,2*Math.PI),nt=g.phi;nt<0&&(nt+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let oe=Math.abs(_e-nt);2*Math.PI-oe<oe&&(_e<nt?_e+=2*Math.PI:nt+=2*Math.PI),y.phi=_e-nt,i.update()},this.setAzimuthalAngle=ie=>{let _e=DD(ie,2*Math.PI),nt=g.theta;nt<0&&(nt+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let oe=Math.abs(_e-nt);2*Math.PI-oe<oe&&(_e<nt?_e+=2*Math.PI:nt+=2*Math.PI),y.theta=_e-nt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ie=>{ie.addEventListener("keydown",Ie),this._domElementKeyEvents=ie},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ie),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),h=u.NONE},this.update=(()=>{const ie=new ee,_e=new ee(0,1,0),nt=new xs().setFromUnitVectors(e.up,_e),oe=nt.clone().invert(),Ee=new ee,et=new xs,Mt=2*Math.PI;return function(){const We=i.object.position;nt.setFromUnitVectors(e.up,_e),oe.copy(nt).invert(),ie.copy(We).sub(i.target),ie.applyQuaternion(nt),g.setFromVector3(ie),i.autoRotate&&h===u.NONE&&ne(Q()),i.enableDamping?(g.theta+=y.theta*i.dampingFactor,g.phi+=y.phi*i.dampingFactor):(g.theta+=y.theta,g.phi+=y.phi);let ct=i.minAzimuthAngle,Xt=i.maxAzimuthAngle;isFinite(ct)&&isFinite(Xt)&&(ct<-Math.PI?ct+=Mt:ct>Math.PI&&(ct-=Mt),Xt<-Math.PI?Xt+=Mt:Xt>Math.PI&&(Xt-=Mt),ct<=Xt?g.theta=Math.max(ct,Math.min(Xt,g.theta)):g.theta=g.theta>(ct+Xt)/2?Math.max(ct,g.theta):Math.min(Xt,g.theta)),g.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,g.phi)),g.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(b,i.dampingFactor):i.target.add(b),i.zoomToCursor&&P||i.object.isOrthographicCamera?g.radius=we(g.radius):g.radius=we(g.radius*_),ie.setFromSpherical(g),ie.applyQuaternion(oe),We.copy(i.target).add(ie),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(y.theta*=1-i.dampingFactor,y.phi*=1-i.dampingFactor,b.multiplyScalar(1-i.dampingFactor)):(y.set(0,0,0),b.set(0,0,0));let mn=!1;if(i.zoomToCursor&&P){let yn=null;if(i.object instanceof vr&&i.object.isPerspectiveCamera){const _i=ie.length();yn=we(_i*_);const Wi=_i-yn;i.object.position.addScaledVector(F,Wi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const _i=new ee(V.x,V.y,0);_i.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/_)),i.object.updateProjectionMatrix(),mn=!0;const Wi=new ee(V.x,V.y,0);Wi.unproject(i.object),i.object.position.sub(Wi).add(_i),i.object.updateMatrixWorld(),yn=ie.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;yn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(yn).add(i.object.position):(ub.origin.copy(i.object.position),ub.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(ub.direction))<YY?e.lookAt(i.target):(RD.setFromNormalAndCoplanarPoint(i.object.up,i.target),ub.intersectPlane(RD,i.target))))}else i.object instanceof Fl&&i.object.isOrthographicCamera&&(mn=_!==1,mn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/_)),i.object.updateProjectionMatrix()));return _=1,P=!1,mn||Ee.distanceToSquared(i.object.position)>p||8*(1-et.dot(i.object.quaternion))>p?(i.dispatchEvent(r),Ee.copy(i.object.position),et.copy(i.object.quaternion),mn=!1,!0):!1}})(),this.connect=ie=>{i.domElement=ie,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Pt),i.domElement.addEventListener("pointerdown",lt),i.domElement.addEventListener("pointercancel",k),i.domElement.addEventListener("wheel",Be)},this.dispose=()=>{var ie,_e,nt,oe,Ee,et;i.domElement&&(i.domElement.style.touchAction="auto"),(ie=i.domElement)==null||ie.removeEventListener("contextmenu",Pt),(_e=i.domElement)==null||_e.removeEventListener("pointerdown",lt),(nt=i.domElement)==null||nt.removeEventListener("pointercancel",k),(oe=i.domElement)==null||oe.removeEventListener("wheel",Be),(Ee=i.domElement)==null||Ee.ownerDocument.removeEventListener("pointermove",G),(et=i.domElement)==null||et.ownerDocument.removeEventListener("pointerup",k),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Ie)};const i=this,r={type:"change"},a={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const p=1e-6,g=new CE,y=new CE;let _=1;const b=new ee,S=new Ye,A=new Ye,w=new Ye,E=new Ye,R=new Ye,D=new Ye,I=new Ye,L=new Ye,N=new Ye,F=new ee,V=new Ye;let P=!1;const U=[],W={};function Q(){return 2*Math.PI/60/60*i.autoRotateSpeed}function K(){return Math.pow(.95,i.zoomSpeed)}function ne(ie){i.reverseOrbit||i.reverseHorizontalOrbit?y.theta+=ie:y.theta-=ie}function re(ie){i.reverseOrbit||i.reverseVerticalOrbit?y.phi+=ie:y.phi-=ie}const X=(()=>{const ie=new ee;return function(nt,oe){ie.setFromMatrixColumn(oe,0),ie.multiplyScalar(-nt),b.add(ie)}})(),J=(()=>{const ie=new ee;return function(nt,oe){i.screenSpacePanning===!0?ie.setFromMatrixColumn(oe,1):(ie.setFromMatrixColumn(oe,0),ie.crossVectors(i.object.up,ie)),ie.multiplyScalar(nt),b.add(ie)}})(),ae=(()=>{const ie=new ee;return function(nt,oe){const Ee=i.domElement;if(Ee&&i.object instanceof vr&&i.object.isPerspectiveCamera){const et=i.object.position;ie.copy(et).sub(i.target);let Mt=ie.length();Mt*=Math.tan(i.object.fov/2*Math.PI/180),X(2*nt*Mt/Ee.clientHeight,i.object.matrix),J(2*oe*Mt/Ee.clientHeight,i.object.matrix)}else Ee&&i.object instanceof Fl&&i.object.isOrthographicCamera?(X(nt*(i.object.right-i.object.left)/i.object.zoom/Ee.clientWidth,i.object.matrix),J(oe*(i.object.top-i.object.bottom)/i.object.zoom/Ee.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Me(ie){i.object instanceof vr&&i.object.isPerspectiveCamera||i.object instanceof Fl&&i.object.isOrthographicCamera?_=ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Se(ie){Me(_/ie)}function Y(ie){Me(_*ie)}function pe(ie){if(!i.zoomToCursor||!i.domElement)return;P=!0;const _e=i.domElement.getBoundingClientRect(),nt=ie.clientX-_e.left,oe=ie.clientY-_e.top,Ee=_e.width,et=_e.height;V.x=nt/Ee*2-1,V.y=-(oe/et)*2+1,F.set(V.x,V.y,1).unproject(i.object).sub(i.object.position).normalize()}function we(ie){return Math.max(i.minDistance,Math.min(i.maxDistance,ie))}function ke(ie){S.set(ie.clientX,ie.clientY)}function pt(ie){pe(ie),I.set(ie.clientX,ie.clientY)}function ge(ie){E.set(ie.clientX,ie.clientY)}function Re(ie){A.set(ie.clientX,ie.clientY),w.subVectors(A,S).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(ne(2*Math.PI*w.x/_e.clientHeight),re(2*Math.PI*w.y/_e.clientHeight)),S.copy(A),i.update()}function tt(ie){L.set(ie.clientX,ie.clientY),N.subVectors(L,I),N.y>0?Se(K()):N.y<0&&Y(K()),I.copy(L),i.update()}function yt(ie){R.set(ie.clientX,ie.clientY),D.subVectors(R,E).multiplyScalar(i.panSpeed),ae(D.x,D.y),E.copy(R),i.update()}function Rt(ie){pe(ie),ie.deltaY<0?Y(K()):ie.deltaY>0&&Se(K()),i.update()}function nn(ie){let _e=!1;switch(ie.code){case i.keys.UP:ae(0,i.keyPanSpeed),_e=!0;break;case i.keys.BOTTOM:ae(0,-i.keyPanSpeed),_e=!0;break;case i.keys.LEFT:ae(i.keyPanSpeed,0),_e=!0;break;case i.keys.RIGHT:ae(-i.keyPanSpeed,0),_e=!0;break}_e&&(ie.preventDefault(),i.update())}function cn(){if(U.length==1)S.set(U[0].pageX,U[0].pageY);else{const ie=.5*(U[0].pageX+U[1].pageX),_e=.5*(U[0].pageY+U[1].pageY);S.set(ie,_e)}}function zt(){if(U.length==1)E.set(U[0].pageX,U[0].pageY);else{const ie=.5*(U[0].pageX+U[1].pageX),_e=.5*(U[0].pageY+U[1].pageY);E.set(ie,_e)}}function Ve(){const ie=U[0].pageX-U[1].pageX,_e=U[0].pageY-U[1].pageY,nt=Math.sqrt(ie*ie+_e*_e);I.set(0,nt)}function Je(){i.enableZoom&&Ve(),i.enablePan&&zt()}function He(){i.enableZoom&&Ve(),i.enableRotate&&cn()}function mt(ie){if(U.length==1)A.set(ie.pageX,ie.pageY);else{const nt=At(ie),oe=.5*(ie.pageX+nt.x),Ee=.5*(ie.pageY+nt.y);A.set(oe,Ee)}w.subVectors(A,S).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(ne(2*Math.PI*w.x/_e.clientHeight),re(2*Math.PI*w.y/_e.clientHeight)),S.copy(A)}function te(ie){if(U.length==1)R.set(ie.pageX,ie.pageY);else{const _e=At(ie),nt=.5*(ie.pageX+_e.x),oe=.5*(ie.pageY+_e.y);R.set(nt,oe)}D.subVectors(R,E).multiplyScalar(i.panSpeed),ae(D.x,D.y),E.copy(R)}function kt(ie){const _e=At(ie),nt=ie.pageX-_e.x,oe=ie.pageY-_e.y,Ee=Math.sqrt(nt*nt+oe*oe);L.set(0,Ee),N.set(0,Math.pow(L.y/I.y,i.zoomSpeed)),Se(N.y),I.copy(L)}function Et(ie){i.enableZoom&&kt(ie),i.enablePan&&te(ie)}function Vt(ie){i.enableZoom&&kt(ie),i.enableRotate&&mt(ie)}function lt(ie){var _e,nt;i.enabled!==!1&&(U.length===0&&((_e=i.domElement)==null||_e.ownerDocument.addEventListener("pointermove",G),(nt=i.domElement)==null||nt.ownerDocument.addEventListener("pointerup",k)),jt(ie),ie.pointerType==="touch"?wt(ie):de(ie))}function G(ie){i.enabled!==!1&&(ie.pointerType==="touch"?ft(ie):Ae(ie))}function k(ie){var _e,nt,oe;Ze(ie),U.length===0&&((_e=i.domElement)==null||_e.releasePointerCapture(ie.pointerId),(nt=i.domElement)==null||nt.ownerDocument.removeEventListener("pointermove",G),(oe=i.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",k)),i.dispatchEvent(l),h=u.NONE}function de(ie){let _e;switch(ie.button){case 0:_e=i.mouseButtons.LEFT;break;case 1:_e=i.mouseButtons.MIDDLE;break;case 2:_e=i.mouseButtons.RIGHT;break;default:_e=-1}switch(_e){case fd.DOLLY:if(i.enableZoom===!1)return;pt(ie),h=u.DOLLY;break;case fd.ROTATE:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(i.enablePan===!1)return;ge(ie),h=u.PAN}else{if(i.enableRotate===!1)return;ke(ie),h=u.ROTATE}break;case fd.PAN:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(i.enableRotate===!1)return;ke(ie),h=u.ROTATE}else{if(i.enablePan===!1)return;ge(ie),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(a)}function Ae(ie){if(i.enabled!==!1)switch(h){case u.ROTATE:if(i.enableRotate===!1)return;Re(ie);break;case u.DOLLY:if(i.enableZoom===!1)return;tt(ie);break;case u.PAN:if(i.enablePan===!1)return;yt(ie);break}}function Be(ie){i.enabled===!1||i.enableZoom===!1||h!==u.NONE&&h!==u.ROTATE||(ie.preventDefault(),i.dispatchEvent(a),Rt(ie),i.dispatchEvent(l))}function Ie(ie){i.enabled===!1||i.enablePan===!1||nn(ie)}function wt(ie){switch(Ke(ie),U.length){case 1:switch(i.touches.ONE){case dd.ROTATE:if(i.enableRotate===!1)return;cn(),h=u.TOUCH_ROTATE;break;case dd.PAN:if(i.enablePan===!1)return;zt(),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(i.touches.TWO){case dd.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Je(),h=u.TOUCH_DOLLY_PAN;break;case dd.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;He(),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(a)}function ft(ie){switch(Ke(ie),h){case u.TOUCH_ROTATE:if(i.enableRotate===!1)return;mt(ie),i.update();break;case u.TOUCH_PAN:if(i.enablePan===!1)return;te(ie),i.update();break;case u.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Et(ie),i.update();break;case u.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Vt(ie),i.update();break;default:h=u.NONE}}function Pt(ie){i.enabled!==!1&&ie.preventDefault()}function jt(ie){U.push(ie)}function Ze(ie){delete W[ie.pointerId];for(let _e=0;_e<U.length;_e++)if(U[_e].pointerId==ie.pointerId){U.splice(_e,1);return}}function Ke(ie){let _e=W[ie.pointerId];_e===void 0&&(_e=new Ye,W[ie.pointerId]=_e),_e.set(ie.pageX,ie.pageY)}function At(ie){const _e=ie.pointerId===U[0].pointerId?U[1]:U[0];return W[_e.pointerId]}this.dollyIn=(ie=K())=>{Y(ie),i.update()},this.dollyOut=(ie=K())=>{Se(ie),i.update()},this.getScale=()=>_,this.setScale=ie=>{Me(ie),i.update()},this.getZoomScale=()=>K(),t!==void 0&&this.connect(t),this.update()}};const KY={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},QY={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class JY extends eT{constructor(e){super(e),this.type=or}parse(e){const l=function(V,P){switch(V){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(P||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(P||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(P||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(P||""))}},y=function(V,P,U){P=P||1024;let Q=V.pos,K=-1,ne=0,re="",X=String.fromCharCode.apply(null,new Uint16Array(V.subarray(Q,Q+128)));for(;0>(K=X.indexOf(`
`))&&ne<P&&Q<V.byteLength;)re+=X,ne+=X.length,Q+=128,X+=String.fromCharCode.apply(null,new Uint16Array(V.subarray(Q,Q+128)));return-1<K?(V.pos+=ne+K+1,re+X.slice(0,K)):!1},_=function(V){const P=/^#\?(\S+)/,U=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,W=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Q=/^\s*FORMAT=(\S+)\s*$/,K=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ne={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let re,X;for((V.pos>=V.byteLength||!(re=y(V)))&&l(1,"no header found"),(X=re.match(P))||l(3,"bad initial token"),ne.valid|=1,ne.programtype=X[1],ne.string+=re+`
`;re=y(V),re!==!1;){if(ne.string+=re+`
`,re.charAt(0)==="#"){ne.comments+=re+`
`;continue}if((X=re.match(U))&&(ne.gamma=parseFloat(X[1])),(X=re.match(W))&&(ne.exposure=parseFloat(X[1])),(X=re.match(Q))&&(ne.valid|=2,ne.format=X[1]),(X=re.match(K))&&(ne.valid|=4,ne.height=parseInt(X[1],10),ne.width=parseInt(X[2],10)),ne.valid&2&&ne.valid&4)break}return ne.valid&2||l(3,"missing format specifier"),ne.valid&4||l(3,"missing image size specifier"),ne},b=function(V,P,U){const W=P;if(W<8||W>32767||V[0]!==2||V[1]!==2||V[2]&128)return new Uint8Array(V);W!==(V[2]<<8|V[3])&&l(3,"wrong scanline width");const Q=new Uint8Array(4*P*U);Q.length||l(4,"unable to allocate buffer space");let K=0,ne=0;const re=4*W,X=new Uint8Array(4),J=new Uint8Array(re);let ae=U;for(;ae>0&&ne<V.byteLength;){ne+4>V.byteLength&&l(1),X[0]=V[ne++],X[1]=V[ne++],X[2]=V[ne++],X[3]=V[ne++],(X[0]!=2||X[1]!=2||(X[2]<<8|X[3])!=W)&&l(3,"bad rgbe scanline format");let Me=0,Se;for(;Me<re&&ne<V.byteLength;){Se=V[ne++];const pe=Se>128;if(pe&&(Se-=128),(Se===0||Me+Se>re)&&l(3,"bad scanline data"),pe){const we=V[ne++];for(let ke=0;ke<Se;ke++)J[Me++]=we}else J.set(V.subarray(ne,ne+Se),Me),Me+=Se,ne+=Se}const Y=W;for(let pe=0;pe<Y;pe++){let we=0;Q[K]=J[pe+we],we+=W,Q[K+1]=J[pe+we],we+=W,Q[K+2]=J[pe+we],we+=W,Q[K+3]=J[pe+we],K+=4}ae--}return Q},S=function(V,P,U,W){const Q=V[P+3],K=Math.pow(2,Q-128)/255;U[W+0]=V[P+0]*K,U[W+1]=V[P+1]*K,U[W+2]=V[P+2]*K,U[W+3]=1},A=function(V,P,U,W){const Q=V[P+3],K=Math.pow(2,Q-128)/255;U[W+0]=_d.toHalfFloat(Math.min(V[P+0]*K,65504)),U[W+1]=_d.toHalfFloat(Math.min(V[P+1]*K,65504)),U[W+2]=_d.toHalfFloat(Math.min(V[P+2]*K,65504)),U[W+3]=_d.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const E=_(w),R=E.width,D=E.height,I=b(w.subarray(w.pos),R,D);let L,N,F;switch(this.type){case Hi:F=I.length/4;const V=new Float32Array(F*4);for(let U=0;U<F;U++)S(I,U*4,V,U*4);L=V,N=Hi;break;case or:F=I.length/4;const P=new Uint16Array(F*4);for(let U=0;U<F;U++)A(I,U*4,P,U*4);L=P,N=or;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:R,height:D,data:L,header:E.string,gamma:E.gamma,exposure:E.exposure,type:N}}setDataType(e){return this.type=e,this}load(e,t,i,r){function a(l,u){switch(l.type){case Hi:case or:"colorSpace"in l?l.colorSpace="srgb-linear":l.encoding=3e3,l.minFilter=qn,l.magFilter=qn,l.generateMipmaps=!1,l.flipY=!0;break}t&&t(l,u)}return super.load(e,a,i,r)}}const Kg=bL>=152;class eZ extends eT{constructor(e){super(e),this.type=or}parse(e){const P=Math.pow(2.7182818,2.2);function U(H,Z){for(var ue=0,Te=0;Te<65536;++Te)(Te==0||H[Te>>3]&1<<(Te&7))&&(Z[ue++]=Te);for(var Ue=ue-1;ue<65536;)Z[ue++]=0;return Ue}function W(H){for(var Z=0;Z<16384;Z++)H[Z]={},H[Z].len=0,H[Z].lit=0,H[Z].p=null}const Q={l:0,c:0,lc:0};function K(H,Z,ue,Te,Ue){for(;ue<H;)Z=Z<<8|At(Te,Ue),ue+=8;ue-=H,Q.l=Z>>ue&(1<<H)-1,Q.c=Z,Q.lc=ue}const ne=new Array(59);function re(H){for(var Z=0;Z<=58;++Z)ne[Z]=0;for(var Z=0;Z<65537;++Z)ne[H[Z]]+=1;for(var ue=0,Z=58;Z>0;--Z){var Te=ue+ne[Z]>>1;ne[Z]=ue,ue=Te}for(var Z=0;Z<65537;++Z){var Ue=H[Z];Ue>0&&(H[Z]=Ue|ne[Ue]++<<6)}}function X(H,Z,ue,Te,Ue,Fe,at){for(var rt=ue,_t=0,gt=0;Ue<=Fe;Ue++){if(rt.value-ue.value>Te)return!1;K(6,_t,gt,H,rt);var St=Q.l;if(_t=Q.c,gt=Q.lc,at[Ue]=St,St==63){if(rt.value-ue.value>Te)throw"Something wrong with hufUnpackEncTable";K(8,_t,gt,H,rt);var ht=Q.l+6;if(_t=Q.c,gt=Q.lc,Ue+ht>Fe+1)throw"Something wrong with hufUnpackEncTable";for(;ht--;)at[Ue++]=0;Ue--}else if(St>=59){var ht=St-59+2;if(Ue+ht>Fe+1)throw"Something wrong with hufUnpackEncTable";for(;ht--;)at[Ue++]=0;Ue--}}re(at)}function J(H){return H&63}function ae(H){return H>>6}function Me(H,Z,ue,Te){for(;Z<=ue;Z++){var Ue=ae(H[Z]),Fe=J(H[Z]);if(Ue>>Fe)throw"Invalid table entry";if(Fe>14){var at=Te[Ue>>Fe-14];if(at.len)throw"Invalid table entry";if(at.lit++,at.p){var rt=at.p;at.p=new Array(at.lit);for(var _t=0;_t<at.lit-1;++_t)at.p[_t]=rt[_t]}else at.p=new Array(1);at.p[at.lit-1]=Z}else if(Fe)for(var gt=0,_t=1<<14-Fe;_t>0;_t--){var at=Te[(Ue<<14-Fe)+gt];if(at.len||at.p)throw"Invalid table entry";at.len=Fe,at.lit=Z,gt++}}return!0}const Se={c:0,lc:0};function Y(H,Z,ue,Te){H=H<<8|At(ue,Te),Z+=8,Se.c=H,Se.lc=Z}const pe={c:0,lc:0};function we(H,Z,ue,Te,Ue,Fe,at,rt,_t,gt){if(H==Z){Te<8&&(Y(ue,Te,Ue,at),ue=Se.c,Te=Se.lc),Te-=8;var St=ue>>Te,St=new Uint8Array([St])[0];if(_t.value+St>gt)return!1;for(var ht=rt[_t.value-1];St-- >0;)rt[_t.value++]=ht}else if(_t.value<gt)rt[_t.value++]=H;else return!1;pe.c=ue,pe.lc=Te}function ke(H){return H&65535}function pt(H){var Z=ke(H);return Z>32767?Z-65536:Z}const ge={a:0,b:0};function Re(H,Z){var ue=pt(H),Te=pt(Z),Ue=Te,Fe=ue+(Ue&1)+(Ue>>1),at=Fe,rt=Fe-Ue;ge.a=at,ge.b=rt}function tt(H,Z){var ue=ke(H),Te=ke(Z),Ue=ue-(Te>>1)&65535,Fe=Te+Ue-32768&65535;ge.a=Fe,ge.b=Ue}function yt(H,Z,ue,Te,Ue,Fe,at){for(var rt=at<16384,_t=ue>Ue?Ue:ue,gt=1,St;gt<=_t;)gt<<=1;for(gt>>=1,St=gt,gt>>=1;gt>=1;){for(var ht=0,$=ht+Fe*(Ue-St),se=Fe*gt,ve=Fe*St,ye=Te*gt,he=Te*St,$e,ot,Xe,Ct;ht<=$;ht+=ve){for(var vt=ht,Ht=ht+Te*(ue-St);vt<=Ht;vt+=he){var xt=vt+ye,Ft=vt+se,gn=Ft+ye;rt?(Re(H[vt+Z],H[Ft+Z]),$e=ge.a,Xe=ge.b,Re(H[xt+Z],H[gn+Z]),ot=ge.a,Ct=ge.b,Re($e,ot),H[vt+Z]=ge.a,H[xt+Z]=ge.b,Re(Xe,Ct),H[Ft+Z]=ge.a,H[gn+Z]=ge.b):(tt(H[vt+Z],H[Ft+Z]),$e=ge.a,Xe=ge.b,tt(H[xt+Z],H[gn+Z]),ot=ge.a,Ct=ge.b,tt($e,ot),H[vt+Z]=ge.a,H[xt+Z]=ge.b,tt(Xe,Ct),H[Ft+Z]=ge.a,H[gn+Z]=ge.b)}if(ue&gt){var Ft=vt+se;rt?Re(H[vt+Z],H[Ft+Z]):tt(H[vt+Z],H[Ft+Z]),$e=ge.a,H[Ft+Z]=ge.b,H[vt+Z]=$e}}if(Ue&gt)for(var vt=ht,Ht=ht+Te*(ue-St);vt<=Ht;vt+=he){var xt=vt+ye;rt?Re(H[vt+Z],H[xt+Z]):tt(H[vt+Z],H[xt+Z]),$e=ge.a,H[xt+Z]=ge.b,H[vt+Z]=$e}St=gt,gt>>=1}return ht}function Rt(H,Z,ue,Te,Ue,Fe,at,rt,_t,gt){for(var St=0,ht=0,$=rt,se=Math.trunc(Ue.value+(Fe+7)/8);Ue.value<se;)for(Y(St,ht,ue,Ue),St=Se.c,ht=Se.lc;ht>=14;){var ve=St>>ht-14&16383,ye=Z[ve];if(ye.len)ht-=ye.len,we(ye.lit,at,St,ht,ue,Te,Ue,_t,gt,$),St=pe.c,ht=pe.lc;else{if(!ye.p)throw"hufDecode issues";var he;for(he=0;he<ye.lit;he++){for(var $e=J(H[ye.p[he]]);ht<$e&&Ue.value<se;)Y(St,ht,ue,Ue),St=Se.c,ht=Se.lc;if(ht>=$e&&ae(H[ye.p[he]])==(St>>ht-$e&(1<<$e)-1)){ht-=$e,we(ye.p[he],at,St,ht,ue,Te,Ue,_t,gt,$),St=pe.c,ht=pe.lc;break}}if(he==ye.lit)throw"hufDecode issues"}}var ot=8-Fe&7;for(St>>=ot,ht-=ot;ht>0;){var ye=Z[St<<14-ht&16383];if(ye.len)ht-=ye.len,we(ye.lit,at,St,ht,ue,Te,Ue,_t,gt,$),St=pe.c,ht=pe.lc;else throw"hufDecode issues"}return!0}function nn(H,Z,ue,Te,Ue,Fe){var at={value:0},rt=ue.value,_t=Ke(Z,ue),gt=Ke(Z,ue);ue.value+=4;var St=Ke(Z,ue);if(ue.value+=4,_t<0||_t>=65537||gt<0||gt>=65537)throw"Something wrong with HUF_ENCSIZE";var ht=new Array(65537),$=new Array(16384);W($);var se=Te-(ue.value-rt);if(X(H,Z,ue,se,_t,gt,ht),St>8*(Te-(ue.value-rt)))throw"Something wrong with hufUncompress";Me(ht,_t,gt,$),Rt(ht,$,H,Z,ue,St,gt,Fe,Ue,at)}function cn(H,Z,ue){for(var Te=0;Te<ue;++Te)Z[Te]=H[Z[Te]]}function zt(H){for(var Z=1;Z<H.length;Z++){var ue=H[Z-1]+H[Z]-128;H[Z]=ue}}function Ve(H,Z){for(var ue=0,Te=Math.floor((H.length+1)/2),Ue=0,Fe=H.length-1;!(Ue>Fe||(Z[Ue++]=H[ue++],Ue>Fe));)Z[Ue++]=H[Te++]}function Je(H){for(var Z=H.byteLength,ue=new Array,Te=0,Ue=new DataView(H);Z>0;){var Fe=Ue.getInt8(Te++);if(Fe<0){var at=-Fe;Z-=at+1;for(var rt=0;rt<at;rt++)ue.push(Ue.getUint8(Te++))}else{var at=Fe;Z-=2;for(var _t=Ue.getUint8(Te++),rt=0;rt<at+1;rt++)ue.push(_t)}}return ue}function He(H,Z,ue,Te,Ue,Fe){var xt=new DataView(Fe.buffer),at=ue[H.idx[0]].width,rt=ue[H.idx[0]].height,_t=3,gt=Math.floor(at/8),St=Math.ceil(at/8),ht=Math.ceil(rt/8),$=at-(St-1)*8,se=rt-(ht-1)*8,ve={value:0},ye=new Array(_t),he=new Array(_t),$e=new Array(_t),ot=new Array(_t),Xe=new Array(_t);for(let Lt=0;Lt<_t;++Lt)Xe[Lt]=Z[H.idx[Lt]],ye[Lt]=Lt<1?0:ye[Lt-1]+St*ht,he[Lt]=new Float32Array(64),$e[Lt]=new Uint16Array(64),ot[Lt]=new Uint16Array(St*64);for(let Lt=0;Lt<ht;++Lt){var Ct=8;Lt==ht-1&&(Ct=se);var vt=8;for(let qt=0;qt<St;++qt){qt==St-1&&(vt=$);for(let Dt=0;Dt<_t;++Dt)$e[Dt].fill(0),$e[Dt][0]=Ue[ye[Dt]++],mt(ve,Te,$e[Dt]),te($e[Dt],he[Dt]),kt(he[Dt]);Et(he);for(let Dt=0;Dt<_t;++Dt)Vt(he[Dt],ot[Dt],qt*64)}let dt=0;for(let qt=0;qt<_t;++qt){const Dt=ue[H.idx[qt]].type;for(let jn=8*Lt;jn<8*Lt+Ct;++jn){dt=Xe[qt][jn];for(let cr=0;cr<gt;++cr){const On=cr*64+(jn&7)*8;xt.setUint16(dt+0*Dt,ot[qt][On+0],!0),xt.setUint16(dt+2*Dt,ot[qt][On+1],!0),xt.setUint16(dt+4*Dt,ot[qt][On+2],!0),xt.setUint16(dt+6*Dt,ot[qt][On+3],!0),xt.setUint16(dt+8*Dt,ot[qt][On+4],!0),xt.setUint16(dt+10*Dt,ot[qt][On+5],!0),xt.setUint16(dt+12*Dt,ot[qt][On+6],!0),xt.setUint16(dt+14*Dt,ot[qt][On+7],!0),dt+=16*Dt}}if(gt!=St)for(let jn=8*Lt;jn<8*Lt+Ct;++jn){const cr=Xe[qt][jn]+8*gt*2*Dt,On=gt*64+(jn&7)*8;for(let Mi=0;Mi<vt;++Mi)xt.setUint16(cr+Mi*2*Dt,ot[qt][On+Mi],!0)}}}for(var Ht=new Uint16Array(at),xt=new DataView(Fe.buffer),Ft=0;Ft<_t;++Ft){ue[H.idx[Ft]].decoded=!0;var gn=ue[H.idx[Ft]].type;if(ue[Ft].type==2)for(var Yn=0;Yn<rt;++Yn){const Lt=Xe[Ft][Yn];for(var En=0;En<at;++En)Ht[En]=xt.getUint16(Lt+En*2*gn,!0);for(var En=0;En<at;++En)xt.setFloat32(Lt+En*2*gn,Ee(Ht[En]),!0)}}}function mt(H,Z,ue){for(var Te,Ue=1;Ue<64;)Te=Z[H.value],Te==65280?Ue=64:Te>>8==255?Ue+=Te&255:(ue[Ue]=Te,Ue++),H.value++}function te(H,Z){Z[0]=Ee(H[0]),Z[1]=Ee(H[1]),Z[2]=Ee(H[5]),Z[3]=Ee(H[6]),Z[4]=Ee(H[14]),Z[5]=Ee(H[15]),Z[6]=Ee(H[27]),Z[7]=Ee(H[28]),Z[8]=Ee(H[2]),Z[9]=Ee(H[4]),Z[10]=Ee(H[7]),Z[11]=Ee(H[13]),Z[12]=Ee(H[16]),Z[13]=Ee(H[26]),Z[14]=Ee(H[29]),Z[15]=Ee(H[42]),Z[16]=Ee(H[3]),Z[17]=Ee(H[8]),Z[18]=Ee(H[12]),Z[19]=Ee(H[17]),Z[20]=Ee(H[25]),Z[21]=Ee(H[30]),Z[22]=Ee(H[41]),Z[23]=Ee(H[43]),Z[24]=Ee(H[9]),Z[25]=Ee(H[11]),Z[26]=Ee(H[18]),Z[27]=Ee(H[24]),Z[28]=Ee(H[31]),Z[29]=Ee(H[40]),Z[30]=Ee(H[44]),Z[31]=Ee(H[53]),Z[32]=Ee(H[10]),Z[33]=Ee(H[19]),Z[34]=Ee(H[23]),Z[35]=Ee(H[32]),Z[36]=Ee(H[39]),Z[37]=Ee(H[45]),Z[38]=Ee(H[52]),Z[39]=Ee(H[54]),Z[40]=Ee(H[20]),Z[41]=Ee(H[22]),Z[42]=Ee(H[33]),Z[43]=Ee(H[38]),Z[44]=Ee(H[46]),Z[45]=Ee(H[51]),Z[46]=Ee(H[55]),Z[47]=Ee(H[60]),Z[48]=Ee(H[21]),Z[49]=Ee(H[34]),Z[50]=Ee(H[37]),Z[51]=Ee(H[47]),Z[52]=Ee(H[50]),Z[53]=Ee(H[56]),Z[54]=Ee(H[59]),Z[55]=Ee(H[61]),Z[56]=Ee(H[35]),Z[57]=Ee(H[36]),Z[58]=Ee(H[48]),Z[59]=Ee(H[49]),Z[60]=Ee(H[57]),Z[61]=Ee(H[58]),Z[62]=Ee(H[62]),Z[63]=Ee(H[63])}function kt(H){const Z=.5*Math.cos(.7853975),ue=.5*Math.cos(3.14159/16),Te=.5*Math.cos(3.14159/8),Ue=.5*Math.cos(3*3.14159/16),Fe=.5*Math.cos(5*3.14159/16),at=.5*Math.cos(3*3.14159/8),rt=.5*Math.cos(7*3.14159/16);for(var _t=new Array(4),gt=new Array(4),St=new Array(4),ht=new Array(4),$=0;$<8;++$){var se=$*8;_t[0]=Te*H[se+2],_t[1]=at*H[se+2],_t[2]=Te*H[se+6],_t[3]=at*H[se+6],gt[0]=ue*H[se+1]+Ue*H[se+3]+Fe*H[se+5]+rt*H[se+7],gt[1]=Ue*H[se+1]-rt*H[se+3]-ue*H[se+5]-Fe*H[se+7],gt[2]=Fe*H[se+1]-ue*H[se+3]+rt*H[se+5]+Ue*H[se+7],gt[3]=rt*H[se+1]-Fe*H[se+3]+Ue*H[se+5]-ue*H[se+7],St[0]=Z*(H[se+0]+H[se+4]),St[3]=Z*(H[se+0]-H[se+4]),St[1]=_t[0]+_t[3],St[2]=_t[1]-_t[2],ht[0]=St[0]+St[1],ht[1]=St[3]+St[2],ht[2]=St[3]-St[2],ht[3]=St[0]-St[1],H[se+0]=ht[0]+gt[0],H[se+1]=ht[1]+gt[1],H[se+2]=ht[2]+gt[2],H[se+3]=ht[3]+gt[3],H[se+4]=ht[3]-gt[3],H[se+5]=ht[2]-gt[2],H[se+6]=ht[1]-gt[1],H[se+7]=ht[0]-gt[0]}for(var ve=0;ve<8;++ve)_t[0]=Te*H[16+ve],_t[1]=at*H[16+ve],_t[2]=Te*H[48+ve],_t[3]=at*H[48+ve],gt[0]=ue*H[8+ve]+Ue*H[24+ve]+Fe*H[40+ve]+rt*H[56+ve],gt[1]=Ue*H[8+ve]-rt*H[24+ve]-ue*H[40+ve]-Fe*H[56+ve],gt[2]=Fe*H[8+ve]-ue*H[24+ve]+rt*H[40+ve]+Ue*H[56+ve],gt[3]=rt*H[8+ve]-Fe*H[24+ve]+Ue*H[40+ve]-ue*H[56+ve],St[0]=Z*(H[ve]+H[32+ve]),St[3]=Z*(H[ve]-H[32+ve]),St[1]=_t[0]+_t[3],St[2]=_t[1]-_t[2],ht[0]=St[0]+St[1],ht[1]=St[3]+St[2],ht[2]=St[3]-St[2],ht[3]=St[0]-St[1],H[0+ve]=ht[0]+gt[0],H[8+ve]=ht[1]+gt[1],H[16+ve]=ht[2]+gt[2],H[24+ve]=ht[3]+gt[3],H[32+ve]=ht[3]-gt[3],H[40+ve]=ht[2]-gt[2],H[48+ve]=ht[1]-gt[1],H[56+ve]=ht[0]-gt[0]}function Et(H){for(var Z=0;Z<64;++Z){var ue=H[0][Z],Te=H[1][Z],Ue=H[2][Z];H[0][Z]=ue+1.5747*Ue,H[1][Z]=ue-.1873*Te-.4682*Ue,H[2][Z]=ue+1.8556*Te}}function Vt(H,Z,ue){for(var Te=0;Te<64;++Te)Z[ue+Te]=_d.toHalfFloat(lt(H[Te]))}function lt(H){return H<=1?Math.sign(H)*Math.pow(Math.abs(H),2.2):Math.sign(H)*Math.pow(P,Math.abs(H)-1)}function G(H){return new DataView(H.array.buffer,H.offset.value,H.size)}function k(H){var Z=H.viewer.buffer.slice(H.offset.value,H.offset.value+H.size),ue=new Uint8Array(Je(Z)),Te=new Uint8Array(ue.length);return zt(ue),Ve(ue,Te),new DataView(Te.buffer)}function de(H){var Z=H.array.slice(H.offset.value,H.offset.value+H.size),ue=cb(Z),Te=new Uint8Array(ue.length);return zt(ue),Ve(ue,Te),new DataView(Te.buffer)}function Ae(H){for(var Z=H.viewer,ue={value:H.offset.value},Te=new Uint16Array(H.width*H.scanlineBlockSize*(H.channels*H.type)),Ue=new Uint8Array(8192),Fe=0,at=new Array(H.channels),rt=0;rt<H.channels;rt++)at[rt]={},at[rt].start=Fe,at[rt].end=at[rt].start,at[rt].nx=H.width,at[rt].ny=H.lines,at[rt].size=H.type,Fe+=at[rt].nx*at[rt].ny*at[rt].size;var _t=et(Z,ue),gt=et(Z,ue);if(gt>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(_t<=gt)for(var rt=0;rt<gt-_t+1;rt++)Ue[rt+_t]=ie(Z,ue);var St=new Uint16Array(65536),ht=U(Ue,St),$=Ke(Z,ue);nn(H.array,Z,ue,$,Te,Fe);for(var rt=0;rt<H.channels;++rt)for(var se=at[rt],ve=0;ve<at[rt].size;++ve)yt(Te,se.start+ve,se.nx,se.size,se.ny,se.nx*se.size,ht);cn(St,Te,Fe);for(var ye=0,he=new Uint8Array(Te.buffer.byteLength),$e=0;$e<H.lines;$e++)for(var ot=0;ot<H.channels;ot++){var se=at[ot],Xe=se.nx*se.size,Ct=new Uint8Array(Te.buffer,se.end*2,Xe*2);he.set(Ct,ye),ye+=Xe*2,se.end+=Xe}return new DataView(he.buffer)}function Be(H){var Z=H.array.slice(H.offset.value,H.offset.value+H.size),ue=cb(Z);const Te=H.lines*H.channels*H.width,Ue=H.type==1?new Uint16Array(Te):new Uint32Array(Te);let Fe=0,at=0;const rt=new Array(4);for(let _t=0;_t<H.lines;_t++)for(let gt=0;gt<H.channels;gt++){let St=0;switch(H.type){case 1:rt[0]=Fe,rt[1]=rt[0]+H.width,Fe=rt[1]+H.width;for(let ht=0;ht<H.width;++ht){const $=ue[rt[0]++]<<8|ue[rt[1]++];St+=$,Ue[at]=St,at++}break;case 2:rt[0]=Fe,rt[1]=rt[0]+H.width,rt[2]=rt[1]+H.width,Fe=rt[2]+H.width;for(let ht=0;ht<H.width;++ht){const $=ue[rt[0]++]<<24|ue[rt[1]++]<<16|ue[rt[2]++]<<8;St+=$,Ue[at]=St,at++}break}}return new DataView(Ue.buffer)}function Ie(H){var Z=H.viewer,ue={value:H.offset.value},Te=new Uint8Array(H.width*H.lines*(H.channels*H.type*2)),Ue={version:_e(Z,ue),unknownUncompressedSize:_e(Z,ue),unknownCompressedSize:_e(Z,ue),acCompressedSize:_e(Z,ue),dcCompressedSize:_e(Z,ue),rleCompressedSize:_e(Z,ue),rleUncompressedSize:_e(Z,ue),rleRawSize:_e(Z,ue),totalAcUncompressedCount:_e(Z,ue),totalDcUncompressedCount:_e(Z,ue),acCompression:_e(Z,ue)};if(Ue.version<2)throw"EXRLoader.parse: "+ws.compression+" version "+Ue.version+" is unsupported";for(var Fe=new Array,at=et(Z,ue)-2;at>0;){var rt=wt(Z.buffer,ue),_t=ie(Z,ue),gt=_t>>2&3,St=(_t>>4)-1,ht=new Int8Array([St])[0],$=ie(Z,ue);Fe.push({name:rt,index:ht,type:$,compression:gt}),at-=rt.length+3}for(var se=ws.channels,ve=new Array(H.channels),ye=0;ye<H.channels;++ye){var he=ve[ye]={},$e=se[ye];he.name=$e.name,he.compression=0,he.decoded=!1,he.type=$e.pixelType,he.pLinear=$e.pLinear,he.width=H.width,he.height=H.lines}for(var ot={idx:new Array(3)},Xe=0;Xe<H.channels;++Xe)for(var he=ve[Xe],ye=0;ye<Fe.length;++ye){var Ct=Fe[ye];he.name==Ct.name&&(he.compression=Ct.compression,Ct.index>=0&&(ot.idx[Ct.index]=Xe),he.offset=Xe)}if(Ue.acCompressedSize>0)switch(Ue.acCompression){case 0:var xt=new Uint16Array(Ue.totalAcUncompressedCount);nn(H.array,Z,ue,Ue.acCompressedSize,xt,Ue.totalAcUncompressedCount);break;case 1:var vt=H.array.slice(ue.value,ue.value+Ue.totalAcUncompressedCount),Ht=cb(vt),xt=new Uint16Array(Ht.buffer);ue.value+=Ue.totalAcUncompressedCount;break}if(Ue.dcCompressedSize>0){var Ft={array:H.array,offset:ue,size:Ue.dcCompressedSize},gn=new Uint16Array(de(Ft).buffer);ue.value+=Ue.dcCompressedSize}if(Ue.rleRawSize>0){var vt=H.array.slice(ue.value,ue.value+Ue.rleCompressedSize),Ht=cb(vt),Yn=Je(Ht.buffer);ue.value+=Ue.rleCompressedSize}for(var En=0,Lt=new Array(ve.length),ye=0;ye<Lt.length;++ye)Lt[ye]=new Array;for(var dt=0;dt<H.lines;++dt)for(var qt=0;qt<ve.length;++qt)Lt[qt].push(En),En+=ve[qt].width*H.type*2;He(ot,Lt,ve,xt,gn,Te);for(var ye=0;ye<ve.length;++ye){var he=ve[ye];if(!he.decoded)switch(he.compression){case 2:for(var Dt=0,jn=0,dt=0;dt<H.lines;++dt){for(var cr=Lt[ye][Dt],On=0;On<he.width;++On){for(var Mi=0;Mi<2*he.type;++Mi)Te[cr++]=Yn[jn+Mi*he.width*he.height];jn++}Dt++}break;default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Te.buffer)}function wt(H,Z){for(var ue=new Uint8Array(H),Te=0;ue[Z.value+Te]!=0;)Te+=1;var Ue=new TextDecoder().decode(ue.slice(Z.value,Z.value+Te));return Z.value=Z.value+Te+1,Ue}function ft(H,Z,ue){var Te=new TextDecoder().decode(new Uint8Array(H).slice(Z.value,Z.value+ue));return Z.value=Z.value+ue,Te}function Pt(H,Z){var ue=Ze(H,Z),Te=Ke(H,Z);return[ue,Te]}function jt(H,Z){var ue=Ke(H,Z),Te=Ke(H,Z);return[ue,Te]}function Ze(H,Z){var ue=H.getInt32(Z.value,!0);return Z.value=Z.value+4,ue}function Ke(H,Z){var ue=H.getUint32(Z.value,!0);return Z.value=Z.value+4,ue}function At(H,Z){var ue=H[Z.value];return Z.value=Z.value+1,ue}function ie(H,Z){var ue=H.getUint8(Z.value);return Z.value=Z.value+1,ue}const _e=function(H,Z){let ue;return"getBigInt64"in DataView.prototype?ue=Number(H.getBigInt64(Z.value,!0)):ue=H.getUint32(Z.value+4,!0)+Number(H.getUint32(Z.value,!0)<<32),Z.value+=8,ue};function nt(H,Z){var ue=H.getFloat32(Z.value,!0);return Z.value+=4,ue}function oe(H,Z){return _d.toHalfFloat(nt(H,Z))}function Ee(H){var Z=(H&31744)>>10,ue=H&1023;return(H>>15?-1:1)*(Z?Z===31?ue?NaN:1/0:Math.pow(2,Z-15)*(1+ue/1024):6103515625e-14*(ue/1024))}function et(H,Z){var ue=H.getUint16(Z.value,!0);return Z.value+=2,ue}function Mt(H,Z){return Ee(et(H,Z))}function it(H,Z,ue,Te){for(var Ue=ue.value,Fe=[];ue.value<Ue+Te-1;){var at=wt(Z,ue),rt=Ze(H,ue),_t=ie(H,ue);ue.value+=3;var gt=Ze(H,ue),St=Ze(H,ue);Fe.push({name:at,pixelType:rt,pLinear:_t,xSampling:gt,ySampling:St})}return ue.value+=1,Fe}function We(H,Z){var ue=nt(H,Z),Te=nt(H,Z),Ue=nt(H,Z),Fe=nt(H,Z),at=nt(H,Z),rt=nt(H,Z),_t=nt(H,Z),gt=nt(H,Z);return{redX:ue,redY:Te,greenX:Ue,greenY:Fe,blueX:at,blueY:rt,whiteX:_t,whiteY:gt}}function ct(H,Z){var ue=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Te=ie(H,Z);return ue[Te]}function Xt(H,Z){var ue=Ke(H,Z),Te=Ke(H,Z),Ue=Ke(H,Z),Fe=Ke(H,Z);return{xMin:ue,yMin:Te,xMax:Ue,yMax:Fe}}function mn(H,Z){var ue=["INCREASING_Y"],Te=ie(H,Z);return ue[Te]}function yn(H,Z){var ue=nt(H,Z),Te=nt(H,Z);return[ue,Te]}function _i(H,Z){var ue=nt(H,Z),Te=nt(H,Z),Ue=nt(H,Z);return[ue,Te,Ue]}function Wi(H,Z,ue,Te,Ue){if(Te==="string"||Te==="stringvector"||Te==="iccProfile")return ft(Z,ue,Ue);if(Te==="chlist")return it(H,Z,ue,Ue);if(Te==="chromaticities")return We(H,ue);if(Te==="compression")return ct(H,ue);if(Te==="box2i")return Xt(H,ue);if(Te==="lineOrder")return mn(H,ue);if(Te==="float")return nt(H,ue);if(Te==="v2f")return yn(H,ue);if(Te==="v3f")return _i(H,ue);if(Te==="int")return Ze(H,ue);if(Te==="rational")return Pt(H,ue);if(Te==="timecode")return jt(H,ue);if(Te==="preview")return ue.value+=Ue,"skipped";ue.value+=Ue}function Ia(H,Z,ue){const Te={};if(H.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Te.version=H.getUint8(4);const Ue=H.getUint8(5);Te.spec={singleTile:!!(Ue&2),longName:!!(Ue&4),deepFormat:!!(Ue&8),multiPart:!!(Ue&16)},ue.value=8;for(var Fe=!0;Fe;){var at=wt(Z,ue);if(at==0)Fe=!1;else{var rt=wt(Z,ue),_t=Ke(H,ue),gt=Wi(H,Z,ue,rt,_t);gt===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${rt}'.`):Te[at]=gt}}if((Ue&-5)!=0)throw console.error("EXRHeader:",Te),"THREE.EXRLoader: provided file is currently unsupported.";return Te}function Pa(H,Z,ue,Te,Ue){const Fe={size:0,viewer:Z,array:ue,offset:Te,width:H.dataWindow.xMax-H.dataWindow.xMin+1,height:H.dataWindow.yMax-H.dataWindow.yMin+1,channels:H.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:H.channels[0].pixelType,uncompress:null,getter:null,format:null,[Kg?"colorSpace":"encoding"]:null};switch(H.compression){case"NO_COMPRESSION":Fe.lines=1,Fe.uncompress=G;break;case"RLE_COMPRESSION":Fe.lines=1,Fe.uncompress=k;break;case"ZIPS_COMPRESSION":Fe.lines=1,Fe.uncompress=de;break;case"ZIP_COMPRESSION":Fe.lines=16,Fe.uncompress=de;break;case"PIZ_COMPRESSION":Fe.lines=32,Fe.uncompress=Ae;break;case"PXR24_COMPRESSION":Fe.lines=16,Fe.uncompress=Be;break;case"DWAA_COMPRESSION":Fe.lines=32,Fe.uncompress=Ie;break;case"DWAB_COMPRESSION":Fe.lines=256,Fe.uncompress=Ie;break;default:throw"EXRLoader.parse: "+H.compression+" is unsupported"}if(Fe.scanlineBlockSize=Fe.lines,Fe.type==1)switch(Ue){case Hi:Fe.getter=Mt,Fe.inputSize=2;break;case or:Fe.getter=et,Fe.inputSize=2;break}else if(Fe.type==2)switch(Ue){case Hi:Fe.getter=nt,Fe.inputSize=4;break;case or:Fe.getter=oe,Fe.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Fe.type+" for "+H.compression+".";Fe.blockCount=(H.dataWindow.yMax+1)/Fe.scanlineBlockSize;for(var at=0;at<Fe.blockCount;at++)_e(Z,Te);Fe.outputChannels=Fe.channels==3?4:Fe.channels;const rt=Fe.width*Fe.height*Fe.outputChannels;switch(Ue){case Hi:Fe.byteArray=new Float32Array(rt),Fe.channels<Fe.outputChannels&&Fe.byteArray.fill(1,0,rt);break;case or:Fe.byteArray=new Uint16Array(rt),Fe.channels<Fe.outputChannels&&Fe.byteArray.fill(15360,0,rt);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ue);break}return Fe.bytesPerLine=Fe.width*Fe.inputSize*Fe.channels,Fe.outputChannels==4?Fe.format=_r:Fe.format=iv,Kg?Fe.colorSpace="srgb-linear":Fe.encoding=3e3,Fe}const Xs=new DataView(e),Na=new Uint8Array(e),jr={value:0},ws=Ia(Xs,e,jr),en=Pa(ws,Xs,Na,jr,this.type),zr={value:0},bi={R:0,G:1,B:2,A:3,Y:0};for(let H=0;H<en.height/en.scanlineBlockSize;H++){const Z=Ke(Xs,jr);en.size=Ke(Xs,jr),en.lines=Z+en.scanlineBlockSize>en.height?en.height-Z:en.scanlineBlockSize;const Te=en.size<en.lines*en.bytesPerLine?en.uncompress(en):G(en);jr.value+=en.size;for(let Ue=0;Ue<en.scanlineBlockSize;Ue++){const Fe=Ue+H*en.scanlineBlockSize;if(Fe>=en.height)break;for(let at=0;at<en.channels;at++){const rt=bi[ws.channels[at].name];for(let _t=0;_t<en.width;_t++){zr.value=(Ue*(en.channels*en.width)+at*en.width+_t)*en.inputSize;const gt=(en.height-1-Fe)*(en.width*en.outputChannels)+_t*en.outputChannels+rt;en.byteArray[gt]=en.getter(Te,zr)}}}}return{header:ws,width:en.width,height:en.height,data:en.byteArray,format:en.format,[Kg?"colorSpace":"encoding"]:en[Kg?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function a(l,u){Kg?l.colorSpace=u.colorSpace:l.encoding=u.encoding,l.minFilter=qn,l.magFilter=qn,l.generateMipmaps=!1,l.flipY=!1,t&&t(l,u)}return super.load(e,a,i,r)}}const tZ=B.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:l,onStart:u,onEnd:h,...p},g)=>{const y=Vs(N=>N.invalidate),_=Vs(N=>N.camera),b=Vs(N=>N.gl),S=Vs(N=>N.events),A=Vs(N=>N.setEvents),w=Vs(N=>N.set),E=Vs(N=>N.get),R=Vs(N=>N.performance),D=e||_,I=i||S.connected||b.domElement,L=B.useMemo(()=>new ZY(D),[D]);return gT(()=>{L.enabled&&L.update()},-1),B.useEffect(()=>(a&&L.connect(a===!0?I:a),L.connect(I),()=>{L.dispose()}),[a,I,t,L,y]),B.useEffect(()=>{const N=P=>{y(),t&&R.regress(),l&&l(P)},F=P=>{u&&u(P)},V=P=>{h&&h(P)};return L.addEventListener("change",N),L.addEventListener("start",F),L.addEventListener("end",V),()=>{L.removeEventListener("start",F),L.removeEventListener("end",V),L.removeEventListener("change",N)}},[l,u,h,L,y,A]),B.useEffect(()=>{if(n){const N=E().controls;return w({controls:L}),()=>w({controls:N})}},[n,L]),B.createElement("primitive",$0({ref:g,object:L,enableDamping:r},p))}),AL=(n,e,t)=>{let i;switch(n){case $r:i=new Uint8ClampedArray(e*t*4);break;case or:i=new Uint16Array(e*t*4);break;case Da:i=new Uint32Array(e*t*4);break;case Hx:i=new Int8Array(e*t*4);break;case Gx:i=new Int16Array(e*t*4);break;case nv:i=new Int32Array(e*t*4);break;case Hi:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let fb;const nZ=(n,e,t,i)=>{if(fb!==void 0)return fb;const r=new is(1,1,i);e.setRenderTarget(r);const a=new Gi(new Wc,new Gc({color:16777215}));e.render(a,t),e.setRenderTarget(null);const l=AL(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,l),r.dispose(),a.geometry.dispose(),a.material.dispose(),fb=l[0]!==0,fb};class HT{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(e){this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:_r,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:e.renderTargetOptions?.anisotropy!==void 0?e.renderTargetOptions?.anisotropy:1,generateMipmaps:e.renderTargetOptions?.generateMipmaps!==void 0?e.renderTargetOptions?.generateMipmaps:!1,magFilter:e.renderTargetOptions?.magFilter!==void 0?e.renderTargetOptions?.magFilter:qn,minFilter:e.renderTargetOptions?.minFilter!==void 0?e.renderTargetOptions?.minFilter:qn,samples:e.renderTargetOptions?.samples!==void 0?e.renderTargetOptions?.samples:void 0,wrapS:e.renderTargetOptions?.wrapS!==void 0?e.renderTargetOptions?.wrapS:ar,wrapT:e.renderTargetOptions?.wrapT!==void 0?e.renderTargetOptions?.wrapT:ar};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=HT.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new av,this._camera=new Fl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!nZ(this._type,this._renderer,this._camera,t)){let i;this._type===or&&(i=this._renderer.extensions.has("EXT_color_buffer_float")?Hi:void 0),i!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Hi}`),this._type=i):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Gi(new Wc,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new is(this.width,this.height,t),this._renderTarget.texture.mapping=e.renderTargetOptions?.mapping!==void 0?e.renderTargetOptions?.mapping:Ju}static instantiateRenderer(){const e=new uT;return e.setSize(128,128),e}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=AL(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new po(this.toArray(),this.width,this.height,_r,this._type,e?.mapping||Ju,e?.wrapS||ar,e?.wrapT||ar,e?.magFilter||qn,e?.minFilter||qn,e?.anisotropy||1,Xo);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ss&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof gi&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof gi&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class CL extends Error{}class RL extends Error{}const Qg=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const a=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(l=>l.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},iZ=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const a=Qg(r,"hdrgm:GainMapMin","0"),l=Qg(r,"hdrgm:GainMapMax"),u=Qg(r,"hdrgm:Gamma","1"),h=Qg(r,"hdrgm:OffsetSDR","0.015625"),p=Qg(r,"hdrgm:OffsetHDR","0.015625"),g=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),y=g?g[1]:"0",_=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!_)throw new Error("Incomplete gainmap metadata");const b=_[1];return{gainMapMin:Array.isArray(a)?a.map(S=>parseFloat(S)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(l)?l.map(S=>parseFloat(S)):[parseFloat(l),parseFloat(l),parseFloat(l)],gamma:Array.isArray(u)?u.map(S=>parseFloat(S)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetSdr:Array.isArray(h)?h.map(S=>parseFloat(S)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetHdr:Array.isArray(p)?p.map(S=>parseFloat(S)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(y),hdrCapacityMax:parseFloat(b)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class rZ{options;constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const l=a.byteLength;let u=2,h=0,p;for(;u<l;){if(++h>250){i(new Error(`Found no marker after ${h} loops `));return}if(a.getUint8(u)!==255){i(new Error(`Not a valid marker at offset 0x${u.toString(16)}, found: 0x${a.getUint8(u).toString(16)}`));return}if(p=a.getUint8(u+1),r&&console.log(`Marker: ${p.toString(16)}`),p===226){r&&console.log("Found APP2 marker (0xffe2)");const g=u+4;if(a.getUint32(g)===1297106432){const y=g+4;let _;if(a.getUint16(y)===18761)_=!1;else if(a.getUint16(y)===19789)_=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(y+2,!_)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const b=a.getUint32(y+4,!_);if(b<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const S=y+b,A=a.getUint16(S,!_),w=S+2;let E=0;for(let L=w;L<w+12*A;L+=12)a.getUint16(L,!_)===45057&&(E=a.getUint32(L+8,!_));const D=S+2+A*12+4,I=[];for(let L=D;L<D+E*16;L+=16){const N={MPType:a.getUint32(L,!_),size:a.getUint32(L+4,!_),dataOffset:a.getUint32(L+8,!_),dependantImages:a.getUint32(L+12,!_),start:-1,end:-1,isFII:!1};N.dataOffset?(N.start=y+N.dataOffset,N.isFII=!1):(N.start=0,N.isFII=!0),N.end=N.start+N.size,I.push(N)}if(this.options.extractNonFII&&I.length){const L=new Blob([a]),N=[];for(const F of I){if(F.isFII&&!this.options.extractFII)continue;const V=L.slice(F.start,F.end+1,"image/jpeg");N.push(V)}t(N)}}}u+=2+a.getUint16(u+2)}})}}const sZ=async n=>{const e=iZ(n);if(!e)throw new RL("Gain map XMP metadata not found");const i=await new rZ({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new CL("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},OD=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class aZ extends js{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(e,t){super(t),this._config=e,e.renderer&&(this._renderer=e.renderer),this._internalLoadingManager=new bS}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new gi,sdr:new gi});return this._config.createQuadRenderer({width:16,height:16,type:or,colorSpace:Xo,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(e,t,i){const r=t?new Blob([t],{type:"image/jpeg"}):void 0,a=new Blob([e],{type:"image/jpeg"});let l,u,h=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([r?OD(r):Promise.resolve(void 0),OD(a)]);u=p[0],l=p[1],h=i==="flipY"}else{const p=await Promise.all([r?createImageBitmap(r,{imageOrientation:i||"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:i||"flipY"})]);u=p[0],l=p[1]}return{sdrImage:l,gainMapImage:u,needsFlip:h}}createTextures(e,t,i){const r=new gi(t||new ImageData(2,2),Ju,ar,ar,qn,_E,_r,$r,1,Xo);r.flipY=i,r.needsUpdate=!0;const a=new gi(e,Ju,ar,ar,qn,_E,_r,$r,1,Wr);return a.flipY=i,a.needsUpdate=!0,{gainMap:r,sdr:a}}updateQuadRenderer(e,t,i,r,a){e.width=t.width,e.height=t.height,e.material.gainMap=i,e.material.sdr=r,e.material.gainMapMin=a.gainMapMin,e.material.gainMapMax=a.gainMapMax,e.material.offsetHdr=a.offsetHdr,e.material.offsetSdr=a.offsetSdr,e.material.gamma=a.gamma,e.material.hdrCapacityMin=a.hdrCapacityMin,e.material.hdrCapacityMax=a.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,a.hdrCapacityMax),e.material.needsUpdate=!0}}const oZ=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,lZ=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class cZ extends ss{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:a,maxDisplayBoost:l,hdrCapacityMin:u,hdrCapacityMax:h,sdr:p,gainMap:g}){super({name:"GainMapDecoderMaterial",vertexShader:oZ,fragmentShader:lZ,uniforms:{sdr:{value:p},gainMap:{value:g},gamma:{value:new ee(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ee().fromArray(t)},offsetSdr:{value:new ee().fromArray(i)},gainMapMin:{value:new ee().fromArray(r)},gainMapMax:{value:new ee().fromArray(a)},weightFactor:{value:(Math.log2(l)-u)/(h-u)}},blending:$o,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=l,this._hdrCapacityMin=u,this._hdrCapacityMax=h,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class DL extends aZ{constructor(e,t){super({renderer:e,createMaterial:i=>new cZ(i),createQuadRenderer:i=>new HT(i)},t)}async render(e,t,i,r){const{sdrImage:a,gainMapImage:l,needsFlip:u}=await this.processImages(i,r,"flipY"),{gainMap:h,sdr:p}=this.createTextures(a,l,u);this.updateQuadRenderer(e,a,h,p,t),e.render()}}class uZ extends DL{load([e,t,i],r,a,l){const u=this.prepareQuadRenderer();let h,p,g;const y=async()=>{if(h&&p&&g){try{await this.render(u,g,h,p)}catch(P){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof l=="function"&&l(P),u.disposeOnDemandRenderer();return}typeof r=="function"&&r(u),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),u.disposeOnDemandRenderer()}};let _=!0,b=0,S=0,A=!0,w=0,E=0,R=!0,D=0,I=0;const L=()=>{if(typeof a=="function"){const P=b+w+D,U=S+E+I,W=_&&A&&R;a(new ProgressEvent("progress",{lengthComputable:W,loaded:U,total:P}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const N=new Ca(this._internalLoadingManager);N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(e,async P=>{if(typeof P=="string")throw new Error("Invalid sdr buffer");h=P,await y()},P=>{_=P.lengthComputable,S=P.loaded,b=P.total,L()},P=>{this.manager.itemError(e),typeof l=="function"&&l(P)});const F=new Ca(this._internalLoadingManager);F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(t,async P=>{if(typeof P=="string")throw new Error("Invalid gainmap buffer");p=P,await y()},P=>{A=P.lengthComputable,E=P.loaded,w=P.total,L()},P=>{this.manager.itemError(t),typeof l=="function"&&l(P)});const V=new Ca(this._internalLoadingManager);return V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(i,async P=>{if(typeof P!="string")throw new Error("Invalid metadata string");g=JSON.parse(P),await y()},P=>{R=P.lengthComputable,I=P.loaded,D=P.total,L()},P=>{this.manager.itemError(i),typeof l=="function"&&l(P)}),u}}class fZ extends DL{load(e,t,i,r){const a=this.prepareQuadRenderer(),l=new Ca(this._internalLoadingManager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(this.withCredentials),this.manager.itemStart(e),l.load(e,async u=>{if(typeof u=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const h=new Uint8Array(u);let p,g,y;try{const _=await sZ(h);p=_.sdr,g=_.gainMap,y=_.metadata}catch(_){if(_ instanceof RL||_ instanceof CL)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),y={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=h;else throw _}try{await this.render(a,y,p.buffer,g?.buffer)}catch(_){this.manager.itemError(e),typeof r=="function"&&r(_),a.disposeOnDemandRenderer();return}typeof t=="function"&&t(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},i,u=>{this.manager.itemError(e),typeof r=="function"&&r(u)}),a}}const j0={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},OL="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Ip=n=>Array.isArray(n),GT=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function US({files:n=GT,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:r}={}){t&&(WT(t),n=j0[t],e=OL);const a=Ip(n),{extension:l,isCubemap:u}=$T(n),h=jT(l);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+n);const p=Vs(b=>b.gl);B.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function b(){Xp.clear(h,a?[n]:n)}p.domElement.addEventListener("webglcontextlost",b,{once:!0})},[n,p.domElement]);const g=Xp(h,a?[n]:n,b=>{(l==="webp"||l==="jpg"||l==="jpeg")&&b.setRenderer(p),b.setPath==null||b.setPath(e),r&&r(b)});let y=a?g[0]:g;if(l==="jpg"||l==="jpeg"||l==="webp"){var _;y=(_=y.renderTarget)==null?void 0:_.texture}return y.mapping=u?jo:Lp,y.colorSpace=i??(u?"srgb":"srgb-linear"),y}const dZ={files:GT,path:"",preset:void 0,extensions:void 0};US.preload=n=>{const e={...dZ,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:a}=e;r&&(WT(r),t=j0[r],i=OL);const{extension:l}=$T(t);if(l==="webp"||l==="jpg"||l==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const u=jT(l);if(!u)throw new Error("useEnvironment: Unrecognized file extension: "+t);Xp.preload(u,Ip(t)?[t]:t,h=>{h.setPath==null||h.setPath(i),a&&a(h)})};const hZ={files:GT,preset:void 0};US.clear=n=>{const e={...hZ,...n};let{files:t}=e;const{preset:i}=e;i&&(WT(i),t=j0[i]);const{extension:r}=$T(t),a=jT(r);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Xp.clear(a,Ip(t)?[t]:t)};function WT(n){if(!(n in j0))throw new Error("Preset must be one of: "+Object.keys(j0).join(", "))}function $T(n){var e;const t=Ip(n)&&n.length===6,i=Ip(n)&&n.length===3&&n.some(l=>l.endsWith("json")),r=Ip(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function jT(n){return n==="cube"?wI:n==="hdr"?JY:n==="exr"?eZ:n==="jpg"||n==="jpeg"?fZ:n==="webp"?uZ:null}const pZ=n=>n.current&&n.current.isScene,mZ=n=>pZ(n)?n.current:n;function XT(n,e,t,i,r={}){var a,l,u,h;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const p=mZ(e||t),g=p.background,y=p.environment,_={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(a=(l=p.backgroundRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(u=(h=p.environmentRotation)==null||h.clone==null?void 0:h.clone())!==null&&u!==void 0?u:[0,0,0]};return n!=="only"&&(p.environment=i),n&&(p.background=i),Ho(p,r),()=>{n!=="only"&&(p.environment=y),n&&(p.background=g),Ho(p,_)}}function qT({scene:n,background:e=!1,map:t,...i}){const r=Vs(a=>a.scene);return B.useLayoutEffect(()=>{if(t)return XT(e,n,r,t,i)}),null}function IL({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:l,environmentRotation:u,...h}){const p=US(h),g=Vs(y=>y.scene);return B.useLayoutEffect(()=>XT(n,e,g,p,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:l,environmentRotation:u})),B.useEffect(()=>()=>{p.dispose()},[p]),null}function gZ({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:a,background:l=!1,blur:u,backgroundBlurriness:h,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:y,environmentRotation:_,scene:b,files:S,path:A,preset:w=void 0,extensions:E}){const R=Vs(V=>V.gl),D=Vs(V=>V.scene),I=B.useRef(null),[L]=B.useState(()=>new av),N=B.useMemo(()=>{const V=new eS(i);return V.texture.type=or,V},[i]);B.useEffect(()=>()=>{N.dispose()},[N]),B.useLayoutEffect(()=>{if(r===1){const V=R.autoClear;R.autoClear=!0,I.current.update(R,L),R.autoClear=V}return XT(l,b,D,N.texture,{backgroundBlurriness:u??h,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:y,environmentRotation:_})},[n,L,N.texture,b,D,l,r,R]);let F=1;return gT(()=>{if(r===1/0||F<r){const V=R.autoClear;R.autoClear=!0,I.current.update(R,L),R.autoClear=V,F++}}),B.createElement(B.Fragment,null,NH(B.createElement(B.Fragment,null,n,B.createElement("cubeCamera",{ref:I,args:[e,t,N]}),S||w?B.createElement(IL,{background:!0,files:S,preset:w,path:A,extensions:E}):a?B.createElement(qT,{background:!0,map:a,extensions:E}):null),L))}function vZ(n){var e,t,i,r;const a=US(n),l=n.map||a;B.useMemo(()=>oP({GroundProjectedEnvImpl:HY}),[]),B.useEffect(()=>()=>{a.dispose()},[a]);const u=B.useMemo(()=>[l],[l]),h=(e=n.ground)==null?void 0:e.height,p=(t=n.ground)==null?void 0:t.radius,g=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return B.createElement(B.Fragment,null,B.createElement(qT,$0({},n,{map:l})),B.createElement("groundProjectedEnvImpl",{args:u,scale:g,height:h,radius:p}))}function yZ(n){return n.ground?B.createElement(vZ,n):n.map?B.createElement(qT,n):n.children?B.createElement(gZ,n):B.createElement(IL,n)}const _Z=B.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:i=1,height:r=1,blur:a=1,near:l=0,far:u=10,resolution:h=512,smooth:p=!0,color:g="#000000",depthWrite:y=!1,renderOrder:_,...b},S)=>{const A=B.useRef(null),w=Vs(ne=>ne.scene),E=Vs(ne=>ne.gl),R=B.useRef(null);i=i*(Array.isArray(n)?n[0]:n||1),r=r*(Array.isArray(n)?n[1]:n||1);const[D,I,L,N,F,V,P]=B.useMemo(()=>{const ne=new is(h,h),re=new is(h,h);re.texture.generateMipmaps=ne.texture.generateMipmaps=!1;const X=new Wc(i,r).rotateX(Math.PI/2),J=new Gi(X),ae=new _S;ae.depthTest=ae.depthWrite=!1,ae.onBeforeCompile=Y=>{Y.uniforms={...Y.uniforms,ucolor:{value:new Bt(g)}},Y.fragmentShader=Y.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Y.fragmentShader=Y.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Me=new ss(KY),Se=new ss(QY);return Se.depthTest=Me.depthTest=!1,[ne,X,ae,J,Me,Se,re]},[h,i,r,n,g]),U=ne=>{N.visible=!0,N.material=F,F.uniforms.tDiffuse.value=D.texture,F.uniforms.h.value=ne*1/256,E.setRenderTarget(P),E.render(N,R.current),N.material=V,V.uniforms.tDiffuse.value=P.texture,V.uniforms.v.value=ne*1/256,E.setRenderTarget(D),E.render(N,R.current),N.visible=!1};let W=0,Q,K;return gT(()=>{R.current&&(e===1/0||W<e)&&(W++,Q=w.background,K=w.overrideMaterial,A.current.visible=!1,w.background=null,w.overrideMaterial=L,E.setRenderTarget(D),E.render(w,R.current),U(a),p&&U(a*.4),E.setRenderTarget(null),A.current.visible=!0,w.overrideMaterial=K,w.background=Q)}),B.useImperativeHandle(S,()=>A.current,[]),B.createElement("group",$0({"rotation-x":Math.PI/2},b,{ref:A}),B.createElement("mesh",{renderOrder:_,geometry:I,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},B.createElement("meshBasicMaterial",{transparent:!0,map:D.texture,opacity:t,depthWrite:y})),B.createElement("orthographicCamera",{ref:R,args:[-i/2,i/2,r/2,-r/2,l,u]}))});var YT=wv(),Sn=n=>Ev(n,YT),ZT=wv();Sn.write=n=>Ev(n,ZT);var zS=wv();Sn.onStart=n=>Ev(n,zS);var KT=wv();Sn.onFrame=n=>Ev(n,KT);var QT=wv();Sn.onFinish=n=>Ev(n,QT);var Pp=[];Sn.setTimeout=(n,e)=>{const t=Sn.now()+e,i=()=>{const a=Pp.findIndex(l=>l.cancel==i);~a&&Pp.splice(a,1),Ku-=~a?1:0},r={time:t,handler:n,cancel:i};return Pp.splice(PL(t),0,r),Ku+=1,NL(),r};var PL=n=>~(~Pp.findIndex(e=>e.time>n)||~Pp.length);Sn.cancel=n=>{zS.delete(n),KT.delete(n),QT.delete(n),YT.delete(n),ZT.delete(n)};Sn.sync=n=>{uw=!0,Sn.batchedUpdates(n),uw=!1};Sn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,Sn.onStart(t)}return i.handler=n,i.cancel=()=>{zS.delete(t),e=null},i};var JT=typeof window<"u"?window.requestAnimationFrame:(()=>{});Sn.use=n=>JT=n;Sn.now=typeof performance<"u"?()=>performance.now():Date.now;Sn.batchedUpdates=n=>n();Sn.catch=console.error;Sn.frameLoop="always";Sn.advance=()=>{Sn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):UL()};var Zu=-1,Ku=0,uw=!1;function Ev(n,e){uw?(e.delete(n),n(0)):(e.add(n),NL())}function NL(){Zu<0&&(Zu=0,Sn.frameLoop!=="demand"&&JT(LL))}function bZ(){Zu=-1}function LL(){~Zu&&(JT(LL),Sn.batchedUpdates(UL))}function UL(){const n=Zu;Zu=Sn.now();const e=PL(Zu);if(e&&(zL(Pp.splice(0,e),t=>t.handler()),Ku-=e),!Ku){bZ();return}zS.flush(),YT.flush(n?Math.min(64,Zu-n):16.667),KT.flush(),ZT.flush(),QT.flush()}function wv(){let n=new Set,e=n;return{add(t){Ku+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Ku-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Ku-=e.size,zL(e,i=>i(t)&&n.add(i)),Ku+=n.size,e=n)}}}function zL(n,e){n.forEach(t=>{try{e(t)}catch(i){Sn.catch(i)}})}var xZ=Object.defineProperty,SZ=(n,e)=>{for(var t in e)xZ(n,t,{get:e[t],enumerable:!0})},Zo={};SZ(Zo,{assign:()=>EZ,colors:()=>Qu,createStringInterpolator:()=>tA,skipAnimation:()=>BL,to:()=>FL,willAdvance:()=>nA});function fw(){}var MZ=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Ot={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function Rc(n,e){if(Ot.arr(n)){if(!Ot.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var ci=(n,e)=>n.forEach(e);function Hc(n,e,t){if(Ot.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var fo=n=>Ot.und(n)?[]:Ot.arr(n)?n:[n];function x0(n,e){if(n.size){const t=Array.from(n);n.clear(),ci(t,e)}}var a0=(n,...e)=>x0(n,t=>t(...e)),eA=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),tA,FL,Qu=null,BL=!1,nA=fw,EZ=n=>{n.to&&(FL=n.to),n.now&&(Sn.now=n.now),n.colors!==void 0&&(Qu=n.colors),n.skipAnimation!=null&&(BL=n.skipAnimation),n.createStringInterpolator&&(tA=n.createStringInterpolator),n.requestAnimationFrame&&Sn.use(n.requestAnimationFrame),n.batchedUpdates&&(Sn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(nA=n.willAdvance),n.frameLoop&&(Sn.frameLoop=n.frameLoop)},S0=new Set,co=[],aE=[],Lx=0,FS={get idle(){return!S0.size&&!co.length},start(n){Lx>n.priority?(S0.add(n),Sn.onStart(wZ)):(kL(n),Sn(dw))},advance:dw,sort(n){if(Lx)Sn.onFrame(()=>FS.sort(n));else{const e=co.indexOf(n);~e&&(co.splice(e,1),VL(n))}},clear(){co=[],S0.clear()}};function wZ(){S0.forEach(kL),S0.clear(),Sn(dw)}function kL(n){co.includes(n)||VL(n)}function VL(n){co.splice(TZ(co,e=>e.priority>n.priority),0,n)}function dw(n){const e=aE;for(let t=0;t<co.length;t++){const i=co[t];Lx=i.priority,i.idle||(nA(i),i.advance(n),i.idle||e.push(i))}return Lx=0,aE=co,aE.length=0,co=e,co.length>0}function TZ(n,e){const t=n.findIndex(e);return t<0?n.length:t}var AZ={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Wo="[-+]?\\d*\\.?\\d+",Ux=Wo+"%";function BS(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var CZ=new RegExp("rgb"+BS(Wo,Wo,Wo)),RZ=new RegExp("rgba"+BS(Wo,Wo,Wo,Wo)),DZ=new RegExp("hsl"+BS(Wo,Ux,Ux)),OZ=new RegExp("hsla"+BS(Wo,Ux,Ux,Wo)),IZ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,PZ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,NZ=/^#([0-9a-fA-F]{6})$/,LZ=/^#([0-9a-fA-F]{8})$/;function UZ(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=NZ.exec(n))?parseInt(e[1]+"ff",16)>>>0:Qu&&Qu[n]!==void 0?Qu[n]:(e=CZ.exec(n))?(Sp(e[1])<<24|Sp(e[2])<<16|Sp(e[3])<<8|255)>>>0:(e=RZ.exec(n))?(Sp(e[1])<<24|Sp(e[2])<<16|Sp(e[3])<<8|ND(e[4]))>>>0:(e=IZ.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=LZ.exec(n))?parseInt(e[1],16)>>>0:(e=PZ.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=DZ.exec(n))?(ID(PD(e[1]),db(e[2]),db(e[3]))|255)>>>0:(e=OZ.exec(n))?(ID(PD(e[1]),db(e[2]),db(e[3]))|ND(e[4]))>>>0:null}function oE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function ID(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,a=oE(r,i,n+1/3),l=oE(r,i,n),u=oE(r,i,n-1/3);return Math.round(a*255)<<24|Math.round(l*255)<<16|Math.round(u*255)<<8}function Sp(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function PD(n){return(parseFloat(n)%360+360)%360/360}function ND(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function db(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function LD(n){let e=UZ(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,a=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${a})`}var X0=(n,e,t)=>{if(Ot.fun(n))return n;if(Ot.arr(n))return X0({range:n,output:e,extrapolate:t});if(Ot.str(n.output[0]))return tA(n);const i=n,r=i.output,a=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",u=i.extrapolateRight||i.extrapolate||"extend",h=i.easing||(p=>p);return p=>{const g=FZ(p,a);return zZ(p,a[g],a[g+1],r[g],r[g+1],h,l,u,i.map)}};function zZ(n,e,t,i,r,a,l,u,h){let p=h?h(n):n;if(p<e){if(l==="identity")return p;l==="clamp"&&(p=e)}if(p>t){if(u==="identity")return p;u==="clamp"&&(p=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?p=-p:t===1/0?p=p-e:p=(p-e)/(t-e),p=a(p),i===-1/0?p=-p:r===1/0?p=p+i:p=p*(r-i)+i,p)}function FZ(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var BZ={linear:n=>n},q0=Symbol.for("FluidValue.get"),Qp=Symbol.for("FluidValue.observers"),Nl=n=>!!(n&&n[q0]),ao=n=>n&&n[q0]?n[q0]():n,UD=n=>n[Qp]||null;function kZ(n,e){n.eventObserved?n.eventObserved(e):n(e)}function zx(n,e){const t=n[Qp];t&&t.forEach(i=>{kZ(i,e)})}var VZ=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");HZ(this,n)}},HZ=(n,e)=>HL(n,q0,e);function Tv(n,e){if(n[q0]){let t=n[Qp];t||HL(n,Qp,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function Fx(n,e){const t=n[Qp];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[Qp]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var HL=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),xb=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,GZ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,zD=new RegExp(`(${xb.source})(%|[a-z]+)`,"i"),WZ=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,kS=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,GL=n=>{const[e,t]=$Z(n);if(!e||eA())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&kS.test(t))return GL(t);if(t)return t}return n},$Z=n=>{const e=kS.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},lE,jZ=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,WL=n=>{lE||(lE=Qu?new RegExp(`(${Object.keys(Qu).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(a=>ao(a).replace(kS,GL).replace(GZ,LD).replace(lE,LD)),t=e.map(a=>a.match(xb).map(Number)),r=t[0].map((a,l)=>t.map(u=>{if(!(l in u))throw Error('The arity of each "output" value must be equal');return u[l]})).map(a=>X0({...n,output:a}));return a=>{const l=!zD.test(e[0])&&e.find(h=>zD.test(h))?.replace(xb,"");let u=0;return e[0].replace(xb,()=>`${r[u++](a)}${l||""}`).replace(WZ,jZ)}},iA="react-spring: ",$L=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${iA}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},XZ=$L(console.warn);function qZ(){XZ(`${iA}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var YZ=$L(console.warn);function ZZ(){YZ(`${iA}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function VS(n){return Ot.str(n)&&(n[0]=="#"||/\d/.test(n)||!eA()&&kS.test(n)||n in(Qu||{}))}var rA=eA()?B.useEffect:B.useLayoutEffect,KZ=()=>{const n=B.useRef(!1);return rA(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function jL(){const n=B.useState()[1],e=KZ();return()=>{e.current&&n(Math.random())}}var XL=n=>B.useEffect(n,QZ),QZ=[];function FD(n){const e=B.useRef(void 0);return B.useEffect(()=>{e.current=n}),e.current}var Y0=Symbol.for("Animated:node"),JZ=n=>!!n&&n[Y0]===n,Pl=n=>n&&n[Y0],sA=(n,e)=>MZ(n,Y0,e),HS=n=>n&&n[Y0]&&n[Y0].getPayload(),qL=class{constructor(){sA(this,this)}getPayload(){return this.payload||[]}},GS=class YL extends qL{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Ot.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new YL(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Ot.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Ot.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Bx=class ZL extends GS{constructor(e){super(0),this._string=null,this._toString=X0({output:[e,e]})}static create(e){return new ZL(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Ot.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=X0({output:[this.getValue(),e]})),this._value=0,super.reset()}},kx={dependencies:null},aA=class extends qL{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return Hc(this.source,(t,i)=>{JZ(t)?e[i]=t.getValue(n):Nl(t)?e[i]=ao(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&ci(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return Hc(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){kx.dependencies&&Nl(n)&&kx.dependencies.add(n);const e=HS(n);e&&ci(e,t=>this.add(t))}},eK=class KL extends aA{constructor(e){super(e)}static create(e){return new KL(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(tK)),!0)}};function tK(n){return(VS(n)?Bx:GS).create(n)}function hw(n){const e=Pl(n);return e?e.constructor:Ot.arr(n)?eK:VS(n)?Bx:GS}var BD=(n,e)=>{const t=!Ot.fun(n)||n.prototype&&n.prototype.isReactComponent;return B.forwardRef((i,r)=>{const a=B.useRef(null),l=t&&B.useCallback(S=>{a.current=rK(r,S)},[r]),[u,h]=iK(i,e),p=jL(),g=()=>{const S=a.current;if(t&&!S)return;(S?e.applyAnimatedValues(S,u.getValue(!0)):!1)===!1&&p()},y=new nK(g,h),_=B.useRef(void 0);rA(()=>(_.current=y,ci(h,S=>Tv(S,y)),()=>{_.current&&(ci(_.current.deps,S=>Fx(S,_.current)),Sn.cancel(_.current.update))})),B.useEffect(g,[]),XL(()=>()=>{const S=_.current;ci(S.deps,A=>Fx(A,S))});const b=e.getComponentProps(u.getValue());return B.createElement(n,{...b,ref:l})})},nK=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&Sn.write(this.update)}};function iK(n,e){const t=new Set;return kx.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new aA(n),kx.dependencies=null,[n,t]}function rK(n,e){return n&&(Ot.fun(n)?n(e):n.current=e),e}var kD=Symbol.for("AnimatedComponent"),sK=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new aA(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},a=l=>{const u=VD(l)||"Anonymous";return Ot.str(l)?l=a[l]||(a[l]=BD(l,r)):l=l[kD]||(l[kD]=BD(l,r)),l.displayName=`Animated(${u})`,l};return Hc(n,(l,u)=>{Ot.arr(n)&&(u=VD(l)),a[u]=a(l)}),{animated:a}},VD=n=>Ot.str(n)?n:n&&Ot.str(n.displayName)?n.displayName:Ot.fun(n)&&n.name||null;function md(n,...e){return Ot.fun(n)?n(...e):n}var M0=(n,e)=>n===!0||!!(e&&n&&(Ot.fun(n)?n(e):fo(n).includes(e))),QL=(n,e)=>Ot.obj(n)?e&&n[e]:n,JL=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,aK=n=>n,oA=(n,e=aK)=>{let t=oK;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const a=e(n[r],r);Ot.und(a)||(i[r]=a)}return i},oK=["config","onProps","onStart","onChange","onPause","onResume","onRest"],lK={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function cK(n){const e={};let t=0;if(Hc(n,(i,r)=>{lK[r]||(e[r]=i,t++)}),t)return e}function eU(n){const e=cK(n);if(e){const t={to:e};return Hc(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function Z0(n){return n=ao(n),Ot.arr(n)?n.map(Z0):VS(n)?Zo.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function uK(n){for(const e in n)return!0;return!1}function pw(n){return Ot.fun(n)||Ot.arr(n)&&Ot.obj(n[0])}function fK(n,e){n.ref?.delete(n),e?.delete(n)}function dK(n,e){e&&n.ref!==e&&(n.ref?.delete(n),e.add(n),n.ref=e)}var hK={default:{tension:170,friction:26}},mw={...hK.default,mass:1,damping:1,easing:BZ.linear,clamp:!1},pK=class{constructor(){this.velocity=0,Object.assign(this,mw)}};function mK(n,e,t){t&&(t={...t},HD(t,e),e={...t,...e}),HD(n,e),Object.assign(n,e);for(const l in mw)n[l]==null&&(n[l]=mw[l]);let{frequency:i,damping:r}=n;const{mass:a}=n;return Ot.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*a,n.friction=4*Math.PI*r*a/i),n}function HD(n,e){if(!Ot.und(e.decay))n.duration=void 0;else{const t=!Ot.und(e.tension)||!Ot.und(e.friction);(t||!Ot.und(e.frequency)||!Ot.und(e.damping)||!Ot.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var GD=[],gK=class{constructor(){this.changed=!1,this.values=GD,this.toValues=null,this.fromValues=GD,this.config=new pK,this.immediate=!1}};function tU(n,{key:e,props:t,defaultProps:i,state:r,actions:a}){return new Promise((l,u)=>{let h,p,g=M0(t.cancel??i?.cancel,e);if(g)b();else{Ot.und(t.pause)||(r.paused=M0(t.pause,e));let S=i?.pause;S!==!0&&(S=r.paused||M0(S,e)),h=md(t.delay||0,e),S?(r.resumeQueue.add(_),a.pause()):(a.resume(),_())}function y(){r.resumeQueue.add(_),r.timeouts.delete(p),p.cancel(),h=p.time-Sn.now()}function _(){h>0&&!Zo.skipAnimation?(r.delayed=!0,p=Sn.setTimeout(b,h),r.pauseQueue.add(y),r.timeouts.add(p)):b()}function b(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(y),r.timeouts.delete(p),n<=(r.cancelId||0)&&(g=!0);try{a.start({...t,callId:n,cancel:g},l)}catch(S){u(S)}}})}var lA=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?Np(n.get()):e.every(t=>t.noop)?nU(n.get()):ko(n.get(),e.every(t=>t.finished)),nU=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),ko=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),Np=n=>({value:n,cancelled:!0,finished:!1});function iU(n,e,t,i){const{callId:r,parentId:a,onRest:l}=e,{asyncTo:u,promise:h}=t;return!a&&n===u&&!e.reset?h:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const p=oA(e,(w,E)=>E==="onRest"?void 0:w);let g,y;const _=new Promise((w,E)=>(g=w,y=E)),b=w=>{const E=r<=(t.cancelId||0)&&Np(i)||r!==t.asyncId&&ko(i,!1);if(E)throw w.result=E,y(w),w},S=(w,E)=>{const R=new WD,D=new $D;return(async()=>{if(Zo.skipAnimation)throw K0(t),D.result=ko(i,!1),y(D),D;b(R);const I=Ot.obj(w)?{...w}:{...E,to:w};I.parentId=r,Hc(p,(N,F)=>{Ot.und(I[F])&&(I[F]=N)});const L=await i.start(I);return b(R),t.paused&&await new Promise(N=>{t.resumeQueue.add(N)}),L})()};let A;if(Zo.skipAnimation)return K0(t),ko(i,!1);try{let w;Ot.arr(n)?w=(async E=>{for(const R of E)await S(R)})(n):w=Promise.resolve(n(S,i.stop.bind(i))),await Promise.all([w.then(g),_]),A=ko(i.get(),!0,!1)}catch(w){if(w instanceof WD)A=w.result;else if(w instanceof $D)A=w.result;else throw w}finally{r==t.asyncId&&(t.asyncId=a,t.asyncTo=a?u:void 0,t.promise=a?h:void 0)}return Ot.fun(l)&&Sn.batchedUpdates(()=>{l(A,i,i.item)}),A})()}function K0(n,e){x0(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var WD=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},$D=class extends Error{constructor(){super("SkipAnimationSignal")}},gw=n=>n instanceof cA,vK=1,cA=class extends VZ{constructor(){super(...arguments),this.id=vK++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=Pl(this);return n&&n.getValue()}to(...n){return Zo.to(this,n)}interpolate(...n){return qZ(),Zo.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){zx(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||FS.sort(this),zx(this,{type:"priority",parent:this,priority:n})}},Ld=Symbol.for("SpringPhase"),rU=1,vw=2,yw=4,cE=n=>(n[Ld]&rU)>0,Wu=n=>(n[Ld]&vw)>0,Jg=n=>(n[Ld]&yw)>0,jD=(n,e)=>e?n[Ld]|=vw|rU:n[Ld]&=~vw,XD=(n,e)=>e?n[Ld]|=yw:n[Ld]&=~yw,yK=class extends cA{constructor(n,e){if(super(),this.animation=new gK,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Ot.und(n)||!Ot.und(e)){const t=Ot.obj(n)?{...n}:{...e,from:n};Ot.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(Wu(this)||this._state.asyncTo)||Jg(this)}get goal(){return ao(this.animation.to)}get velocity(){const n=Pl(this);return n instanceof GS?n.lastVelocity||0:n.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return cE(this)}get isAnimating(){return Wu(this)}get isPaused(){return Jg(this)}get isDelayed(){return this._state.delayed}advance(n){let e=!0,t=!1;const i=this.animation;let{toValues:r}=i;const{config:a}=i,l=HS(i.to);!l&&Nl(i.to)&&(r=fo(ao(i.to))),i.values.forEach((p,g)=>{if(p.done)return;const y=p.constructor==Bx?1:l?l[g].lastPosition:r[g];let _=i.immediate,b=y;if(!_){if(b=p.lastPosition,a.tension<=0){p.done=!0;return}let S=p.elapsedTime+=n;const A=i.fromValues[g],w=p.v0!=null?p.v0:p.v0=Ot.arr(a.velocity)?a.velocity[g]:a.velocity;let E;const R=a.precision||(A==y?.005:Math.min(1,Math.abs(y-A)*.001));if(Ot.und(a.duration))if(a.decay){const D=a.decay===!0?.998:a.decay,I=Math.exp(-(1-D)*S);b=A+w/(1-D)*(1-I),_=Math.abs(p.lastPosition-b)<=R,E=w*I}else{E=p.lastVelocity==null?w:p.lastVelocity;const D=a.restVelocity||R/10,I=a.clamp?0:a.bounce,L=!Ot.und(I),N=A==y?p.v0>0:A<y;let F,V=!1;const P=1,U=Math.ceil(n/P);for(let W=0;W<U&&(F=Math.abs(E)>D,!(!F&&(_=Math.abs(y-b)<=R,_)));++W){L&&(V=b==y||b>y==N,V&&(E=-E*I,b=y));const Q=-a.tension*1e-6*(b-y),K=-a.friction*.001*E,ne=(Q+K)/a.mass;E=E+ne*P,b=b+E*P}}else{let D=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,p.durationProgress>0&&(p.elapsedTime=a.duration*p.durationProgress,S=p.elapsedTime+=n)),D=(a.progress||0)+S/this._memoizedDuration,D=D>1?1:D<0?0:D,p.durationProgress=D),b=A+a.easing(D)*(y-A),E=(b-p.lastPosition)/n,_=D==1}p.lastVelocity=E,Number.isNaN(b)&&(console.warn("Got NaN while animating:",this),_=!0)}l&&!l[g].done&&(_=!1),_?p.done=!0:e=!1,p.setValue(b,a.round)&&(t=!0)});const u=Pl(this),h=u.getValue();if(e){const p=ao(i.to);(h!==p||t)&&!a.decay?(u.setValue(p),this._onChange(p)):t&&a.decay&&this._onChange(h),this._stop()}else t&&this._onChange(h)}set(n){return Sn.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Wu(this)){const{to:n,config:e}=this.animation;Sn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,e){let t;return Ot.und(n)?(t=this.queue||[],this.queue=[]):t=[Ot.obj(n)?n:{...e,to:n}],Promise.all(t.map(i=>this._update(i))).then(i=>lA(this,i))}stop(n){const{to:e}=this.animation;return this._focus(this.get()),K0(this._state,n&&this._lastCallId),Sn.batchedUpdates(()=>this._stop(e,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const e=this.key||"";let{to:t,from:i}=n;t=Ot.obj(t)?t[e]:t,(t==null||pw(t))&&(t=void 0),i=Ot.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:t,from:i};return cE(this)||(n.reverse&&([t,i]=[i,t]),i=ao(i),Ot.und(i)?Pl(this)||this._set(t):this._set(i)),r}_update({...n},e){const{key:t,defaultProps:i}=this;n.default&&Object.assign(i,oA(n,(l,u)=>/^on/.test(u)?QL(l,t):l)),YD(this,n,"onProps"),t0(this,"onProps",n,this);const r=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return tU(++this._lastCallId,{key:t,props:n,defaultProps:i,state:a,actions:{pause:()=>{Jg(this)||(XD(this,!0),a0(a.pauseQueue),t0(this,"onPause",ko(this,e0(this,this.animation.to)),this))},resume:()=>{Jg(this)&&(XD(this,!1),Wu(this)&&this._resume(),a0(a.resumeQueue),t0(this,"onResume",ko(this,e0(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(l=>{if(n.loop&&l.finished&&!(e&&l.noop)){const u=sU(n);if(u)return this._update(u,!0)}return l})}_merge(n,e,t){if(e.cancel)return this.stop(!0),t(Np(this));const i=!Ot.und(n.to),r=!Ot.und(n.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(Np(this));const{key:a,defaultProps:l,animation:u}=this,{to:h,from:p}=u;let{to:g=h,from:y=p}=n;r&&!i&&(!e.default||Ot.und(g))&&(g=y),e.reverse&&([g,y]=[y,g]);const _=!Rc(y,p);_&&(u.from=y),y=ao(y);const b=!Rc(g,h);b&&this._focus(g);const S=pw(e.to),{config:A}=u,{decay:w,velocity:E}=A;(i||r)&&(A.velocity=0),e.config&&!S&&mK(A,md(e.config,a),e.config!==l.config?md(l.config,a):void 0);let R=Pl(this);if(!R||Ot.und(g))return t(ko(this,!0));const D=Ot.und(e.reset)?r&&!e.default:!Ot.und(y)&&M0(e.reset,a),I=D?y:this.get(),L=Z0(g),N=Ot.num(L)||Ot.arr(L)||VS(L),F=!S&&(!N||M0(l.immediate||e.immediate,a));if(b){const W=hw(g);if(W!==R.constructor)if(F)R=this._set(L);else throw Error(`Cannot animate between ${R.constructor.name} and ${W.name}, as the "to" prop suggests`)}const V=R.constructor;let P=Nl(g),U=!1;if(!P){const W=D||!cE(this)&&_;(b||W)&&(U=Rc(Z0(I),L),P=!U),(!Rc(u.immediate,F)&&!F||!Rc(A.decay,w)||!Rc(A.velocity,E))&&(P=!0)}if(U&&Wu(this)&&(u.changed&&!D?P=!0:P||this._stop(h)),!S&&((P||Nl(h))&&(u.values=R.getPayload(),u.toValues=Nl(g)?null:V==Bx?[1]:fo(L)),u.immediate!=F&&(u.immediate=F,!F&&!D&&this._set(h)),P)){const{onRest:W}=u;ci(bK,K=>YD(this,e,K));const Q=ko(this,e0(this,h));a0(this._pendingCalls,Q),this._pendingCalls.add(t),u.changed&&Sn.batchedUpdates(()=>{u.changed=!D,W?.(Q,this),D?md(l.onRest,Q):u.onStart?.(Q,this)})}D&&this._set(I),S?t(iU(e.to,e,this._state,this)):P?this._start():Wu(this)&&!b?this._pendingCalls.add(t):t(nU(I))}_focus(n){const e=this.animation;n!==e.to&&(UD(this)&&this._detach(),e.to=n,UD(this)&&this._attach())}_attach(){let n=0;const{to:e}=this.animation;Nl(e)&&(Tv(e,this),gw(e)&&(n=e.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;Nl(n)&&Fx(n,this)}_set(n,e=!0){const t=ao(n);if(!Ot.und(t)){const i=Pl(this);if(!i||!Rc(t,i.getValue())){const r=hw(t);!i||i.constructor!=r?sA(this,r.create(t)):i.setValue(t),i&&Sn.batchedUpdates(()=>{this._onChange(t,e)})}}return Pl(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,t0(this,"onStart",ko(this,e0(this,n.to)),this))}_onChange(n,e){e||(this._onStart(),md(this.animation.onChange,n,this)),md(this.defaultProps.onChange,n,this),super._onChange(n,e)}_start(){const n=this.animation;Pl(this).reset(ao(n.to)),n.immediate||(n.fromValues=n.values.map(e=>e.lastPosition)),Wu(this)||(jD(this,!0),Jg(this)||this._resume())}_resume(){Zo.skipAnimation?this.finish():FS.start(this)}_stop(n,e){if(Wu(this)){jD(this,!1);const t=this.animation;ci(t.values,r=>{r.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),zx(this,{type:"idle",parent:this});const i=e?Np(this.get()):ko(this.get(),e0(this,n??t.to));a0(this._pendingCalls,i),t.changed&&(t.changed=!1,t0(this,"onRest",i,this))}}};function e0(n,e){const t=Z0(e),i=Z0(n.get());return Rc(i,t)}function sU(n,e=n.loop,t=n.to){const i=md(e);if(i){const r=i!==!0&&eU(i),a=(r||n).reverse,l=!r||r.reset;return Q0({...n,loop:e,default:!1,pause:void 0,to:!a||pw(t)?t:void 0,from:l?n.from:void 0,reset:l,...r})}}function Q0(n){const{to:e,from:t}=n=eU(n),i=new Set;return Ot.obj(e)&&qD(e,i),Ot.obj(t)&&qD(t,i),n.keys=i.size?Array.from(i):null,n}function _K(n){const e=Q0(n);return Ot.und(e.default)&&(e.default=oA(e)),e}function qD(n,e){Hc(n,(t,i)=>t!=null&&e.add(i))}var bK=["onStart","onRest","onChange","onPause","onResume"];function YD(n,e,t){n.animation[t]=e[t]!==JL(e,t)?QL(e[t],n.key):void 0}function t0(n,e,...t){n.animation[e]?.(...t),n.defaultProps[e]?.(...t)}var xK=["onStart","onChange","onRest"],SK=1,MK=class{constructor(n,e){this.id=SK++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),n&&this.start({default:!0,...n})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(n=>n.idle&&!n.isDelayed&&!n.isPaused)}get item(){return this._item}set item(n){this._item=n}get(){const n={};return this.each((e,t)=>n[t]=e.get()),n}set(n){for(const e in n){const t=n[e];Ot.und(t)||this.springs[e].set(t)}}update(n){return n&&this.queue.push(Q0(n)),this}start(n){let{queue:e}=this;return n?e=fo(n).map(Q0):this.queue=[],this._flush?this._flush(this,e):(uU(this,e),_w(this,e))}stop(n,e){if(n!==!!n&&(e=n),e){const t=this.springs;ci(fo(e),i=>t[i].stop(!!n))}else K0(this._state,this._lastAsyncId),this.each(t=>t.stop(!!n));return this}pause(n){if(Ot.und(n))this.start({pause:!0});else{const e=this.springs;ci(fo(n),t=>e[t].pause())}return this}resume(n){if(Ot.und(n))this.start({pause:!1});else{const e=this.springs;ci(fo(n),t=>e[t].resume())}return this}each(n){Hc(this.springs,n)}_onFrame(){const{onStart:n,onChange:e,onRest:t}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,x0(n,([u,h])=>{h.value=this.get(),u(h,this,this._item)}));const a=!i&&this._started,l=r||a&&t.size?this.get():null;r&&e.size&&x0(e,([u,h])=>{h.value=l,u(h,this,this._item)}),a&&(this._started=!1,x0(t,([u,h])=>{h.value=l,u(h,this,this._item)}))}eventObserved(n){if(n.type=="change")this._changed.add(n.parent),n.idle||this._active.add(n.parent);else if(n.type=="idle")this._active.delete(n.parent);else return;Sn.onFrame(this._onFrame)}};function _w(n,e){return Promise.all(e.map(t=>aU(n,t))).then(t=>lA(n,t))}async function aU(n,e,t){const{keys:i,to:r,from:a,loop:l,onRest:u,onResolve:h}=e,p=Ot.obj(e.default)&&e.default;l&&(e.loop=!1),r===!1&&(e.to=null),a===!1&&(e.from=null);const g=Ot.arr(r)||Ot.fun(r)?r:void 0;g?(e.to=void 0,e.onRest=void 0,p&&(p.onRest=void 0)):ci(xK,A=>{const w=e[A];if(Ot.fun(w)){const E=n._events[A];e[A]=({finished:R,cancelled:D})=>{const I=E.get(w);I?(R||(I.finished=!1),D&&(I.cancelled=!0)):E.set(w,{value:null,finished:R||!1,cancelled:D||!1})},p&&(p[A]=e[A])}});const y=n._state;e.pause===!y.paused?(y.paused=e.pause,a0(e.pause?y.pauseQueue:y.resumeQueue)):y.paused&&(e.pause=!0);const _=(i||Object.keys(n.springs)).map(A=>n.springs[A].start(e)),b=e.cancel===!0||JL(e,"cancel")===!0;(g||b&&y.asyncId)&&_.push(tU(++n._lastAsyncId,{props:e,state:y,actions:{pause:fw,resume:fw,start(A,w){b?(K0(y,n._lastAsyncId),w(Np(n))):(A.onRest=u,w(iU(g,A,y,n)))}}})),y.paused&&await new Promise(A=>{y.resumeQueue.add(A)});const S=lA(n,await Promise.all(_));if(l&&S.finished&&!(t&&S.noop)){const A=sU(e,l,r);if(A)return uU(n,[A]),aU(n,A,!0)}return h&&Sn.batchedUpdates(()=>h(S,n,n.item)),S}function ZD(n,e){const t={...n.springs};return e&&ci(fo(e),i=>{Ot.und(i.keys)&&(i=Q0(i)),Ot.obj(i.to)||(i={...i,to:void 0}),cU(t,i,r=>lU(r))}),oU(n,t),t}function oU(n,e){Hc(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,Tv(t,n))})}function lU(n,e){const t=new yK;return t.key=n,e&&Tv(t,e),t}function cU(n,e,t){e.keys&&ci(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function uU(n,e){ci(e,t=>{cU(n.springs,t,i=>lU(i,n))})}var EK=B.createContext({pause:!1,immediate:!1}),wK=()=>{const n=[],e=function(i){ZZ();const r=[];return ci(n,(a,l)=>{if(Ot.und(i))r.push(a.start());else{const u=t(i,a,l);u&&r.push(a.start(u))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return ci(n,i=>i.pause(...arguments)),this},e.resume=function(){return ci(n,i=>i.resume(...arguments)),this},e.set=function(i){ci(n,(r,a)=>{const l=Ot.fun(i)?i(a,r):i;l&&r.set(l)})},e.start=function(i){const r=[];return ci(n,(a,l)=>{if(Ot.und(i))r.push(a.start());else{const u=this._getProps(i,a,l);u&&r.push(a.start(u))}}),r},e.stop=function(){return ci(n,i=>i.stop(...arguments)),this},e.update=function(i){return ci(n,(r,a)=>r.update(this._getProps(i,r,a))),this};const t=function(i,r,a){return Ot.fun(i)?i(a,r):i};return e._getProps=t,e};function TK(n,e,t){const i=Ot.fun(e)&&e;i&&!t&&(t=[]);const r=B.useMemo(()=>i||arguments.length==3?wK():void 0,[]),a=B.useRef(0),l=jL(),u=B.useMemo(()=>({ctrls:[],queue:[],flush(E,R){const D=ZD(E,R);return a.current>0&&!u.queue.length&&!Object.keys(D).some(L=>!E.springs[L])?_w(E,R):new Promise(L=>{oU(E,D),u.queue.push(()=>{L(_w(E,R))}),l()})}}),[]),h=B.useRef([...u.ctrls]),p=B.useRef([]),g=FD(n)||0;B.useMemo(()=>{ci(h.current.slice(n,g),E=>{fK(E,r),E.stop(!0)}),h.current.length=n,y(g,n)},[n]),B.useMemo(()=>{y(0,Math.min(g,n))},t);function y(E,R){for(let D=E;D<R;D++){const I=h.current[D]||(h.current[D]=new MK(null,u.flush)),L=i?i(D,I):e[D];L&&(p.current[D]=_K(L))}}const _=h.current.map((E,R)=>ZD(E,p.current[R])),b=B.useContext(EK),S=FD(b),A=b!==S&&uK(b);rA(()=>{a.current++,u.ctrls=h.current;const{queue:E}=u;E.length&&(u.queue=[],ci(E,R=>R())),ci(h.current,(R,D)=>{r?.add(R),A&&R.start({default:b});const I=p.current[D];I&&(dK(R,I.ref),R.ref?R.queue.push(I):R.start(I))})}),XL(()=>()=>{ci(u.ctrls,E=>E.stop(!0))});const w=_.map(E=>({...E}));return r?[w,r]:w}function hb(n,e){const t=Ot.fun(n),[[i],r]=TK(1,t?n:[n],t?[]:e);return t||arguments.length==2?[i,r]:i}var AK=class extends cA{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=X0(...e);const t=this._get(),i=hw(t);sA(this,i.create(t))}advance(n){const e=this._get(),t=this.get();Rc(e,t)||(Pl(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&KD(this._active)&&uE(this)}_get(){const n=Ot.arr(this.source)?this.source.map(ao):fo(ao(this.source));return this.calc(...n)}_start(){this.idle&&!KD(this._active)&&(this.idle=!1,ci(HS(this),n=>{n.done=!1}),Zo.skipAnimation?(Sn.batchedUpdates(()=>this.advance()),uE(this)):FS.start(this))}_attach(){let n=1;ci(fo(this.source),e=>{Nl(e)&&Tv(e,this),gw(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){ci(fo(this.source),n=>{Nl(n)&&Fx(n,this)}),this._active.clear(),uE(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=fo(this.source).reduce((e,t)=>Math.max(e,(gw(t)?t.priority:0)+1),0))}};function CK(n){return n.idle!==!1}function KD(n){return!n.size||Array.from(n).every(CK)}function uE(n){n.idle||(n.idle=!0,ci(HS(n),e=>{e.done=!0}),zx(n,{type:"idle",parent:n}))}Zo.assign({createStringInterpolator:WL,to:(n,e)=>new AK(n,e)});var RK=["primitive"].concat(Object.keys(jI).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Zo.assign({createStringInterpolator:WL,colors:AZ,frameLoop:"demand"});BH(()=>{Sn.advance()});var DK=sK(RK,{applyAnimatedValues:Ho}),pb=DK.animated;const Ol={frontWidth:160,frontHeight:220,backWidth:160,backHeight:220,flapHeight:60,flapWidth:80,beltWidth:50,beltHeight:30,slotWidth:20,spineDepth:15},QD={white:"#ffffff","pristine-white":"#fafafa","bright-white":"#f5f5f5",natural:"#f5f1e6",smoke:"#b5b5b5","pale-grey":"#d9d9d9","cool-grey":"#8c8c8c","dark-grey":"#4a4a4a",ebony:"#1a1a1a","factory-yellow":"#f7d917",citrine:"#e8b00f",mandarin:"#f58220",rust:"#c1440e",vermilion:"#e34234",scarlet:"#cf142b","candy-pink":"#e75480","fuchsia-pink":"#ff00ff",purple:"#6b3fa0",lavender:"#b57edc","azure-blue":"#4a90d9",turquoise:"#30d5c8","marrs-green":"#009473","racing-green":"#004225",forest:"#228b22","mid-green":"#4cbb17","sorbet-yellow":"#fff44f","tabriz-blue":"#1c3f6e"},fE={text:"SIT WITH THAT",fontFamily:"Inter",fontSize:12,letterSpacing:.5,lineHeight:1.2,textCase:"uppercase",alignment:"center"},Qn={viewMode:"closed",openAngle:90,paperColor:"ebony",customPaperColor:"#1a1a1a",useCustomColor:!1,paperTexture:!0,textureIntensity:.5,foilType:"silver",foilColor:"#c0c0c0",debossDepth:.3,debossEnabled:!0,frontTypography:{...fE},backTypography:{...fE,text:`An exhibition about chairs
and the people who sit in them`,fontSize:8},spineTypography:{...fE,text:"SIT WITH THAT",fontSize:6},animationSpeed:1},dE=["Inter","Roboto","Open Sans","Montserrat","Playfair Display","Lora","Source Serif Pro","Oswald","Raleway","Merriweather","PT Serif","Noto Serif","Libre Baskerville","Crimson Text","EB Garamond","Cormorant Garamond","Bitter","Arvo","Vollkorn","Spectral"],Il=.01,pn={frontW:Ol.frontWidth*Il,frontH:Ol.frontHeight*Il,backW:Ol.backWidth*Il,backH:Ol.backHeight*Il,flapH:Ol.flapHeight*Il,flapW:Ol.flapWidth*Il,beltW:Ol.beltWidth*Il,beltH:Ol.beltHeight*Il,slotW:Ol.slotWidth*Il,spine:Ol.spineDepth*Il,thickness:.015};function OK({viewMode:n,openAngle:e,animationSpeed:t,paperColor:i,paperTexture:r,textureIntensity:a,foilType:l,foilColor:u,debossEnabled:h,debossDepth:p,frontTypography:g,backTypography:y,spineTypography:_}){const b=B.useMemo(()=>{if(!r)return null;const Q=document.createElement("canvas");Q.width=512,Q.height=512;const K=Q.getContext("2d");if(!K)return null;K.fillStyle="#888888",K.fillRect(0,0,512,512);const ne=K.getImageData(0,0,512,512),re=ne.data;for(let X=0;X<re.length;X+=4){const J=(Math.random()-.5)*30*a;re[X]=Math.max(0,Math.min(255,re[X]+J)),re[X+1]=Math.max(0,Math.min(255,re[X+1]+J)),re[X+2]=Math.max(0,Math.min(255,re[X+2]+J))}return K.putImageData(ne,0,0),Q},[r,a]),S=B.useMemo(()=>{if(!b)return null;const Q=new kw(b);return Q.wrapS=Q.wrapT=Up,Q.repeat.set(4,4),Q},[b]),w=(()=>{switch(n){case"closed":return{frontRot:0,backRot:0,frontFlapRot:Math.PI*.5,backFlapRot:-Math.PI*.5};case"open":const Q=e*Math.PI/180;return{frontRot:-Q/2,backRot:Q/2,frontFlapRot:Math.PI*.5,backFlapRot:-Math.PI*.5};case"flat":return{frontRot:-Math.PI/2,backRot:Math.PI/2,frontFlapRot:0,backFlapRot:0};default:return{frontRot:0,backRot:0,frontFlapRot:Math.PI*.5,backFlapRot:-Math.PI*.5}}})(),E=hb({rotation:[0,w.frontRot,0],config:{mass:1,tension:170*t,friction:26}}),R=hb({rotation:[0,w.backRot,0],config:{mass:1,tension:170*t,friction:26}}),D=hb({rotation:[0,w.frontFlapRot,0],config:{mass:1,tension:170*t,friction:26}}),I=hb({rotation:[0,w.backFlapRot,0],config:{mass:1,tension:170*t,friction:26}}),L=()=>({color:i,roughness:.85,metalness:0,bumpMap:S,bumpScale:a*.005}),N=()=>{switch(l){case"gloss":return{color:u,roughness:.1,metalness:.1,envMapIntensity:2};case"matte":return{color:u,roughness:.6,metalness:0,envMapIntensity:.5};case"silver":return{color:"#c0c0c0",roughness:.15,metalness:.9,envMapIntensity:3};case"gold":return{color:"#d4af37",roughness:.2,metalness:.85,envMapIntensity:2.5};case"copper":return{color:"#b87333",roughness:.25,metalness:.8,envMapIntensity:2};case"holographic":return{color:"#ffffff",roughness:.05,metalness:.95,envMapIntensity:4};default:return null}},F=L(),V=N(),P=hE(g,pn.frontW,pn.frontH,V?.color||"#ffffff"),U=hE(y,pn.backW,pn.backH,V?.color||"#ffffff"),W=hE(_,pn.spine,pn.frontH,V?.color||"#ffffff",!0);return je.jsxs("group",{children:[je.jsxs("mesh",{position:[0,0,0],castShadow:!0,receiveShadow:!0,children:[je.jsx("boxGeometry",{args:[pn.spine,pn.frontH,pn.thickness]}),je.jsx("meshStandardMaterial",{...F})]}),W&&V&&je.jsxs("mesh",{position:[0,0,pn.thickness/2+.001],children:[je.jsx("planeGeometry",{args:[pn.spine,pn.frontH]}),je.jsx("meshStandardMaterial",{map:W,transparent:!0,...V,depthWrite:!1})]}),je.jsxs(pb.group,{position:[pn.spine/2,0,0],rotation:E.rotation,children:[je.jsxs("mesh",{position:[pn.frontW/2,0,0],castShadow:!0,receiveShadow:!0,children:[je.jsx("boxGeometry",{args:[pn.frontW,pn.frontH,pn.thickness]}),je.jsx("meshStandardMaterial",{...F})]}),P&&V&&je.jsxs("mesh",{position:[pn.frontW/2,0,pn.thickness/2+.001],children:[je.jsx("planeGeometry",{args:[pn.frontW,pn.frontH]}),je.jsx("meshStandardMaterial",{map:P,transparent:!0,...V,depthWrite:!1})]}),je.jsxs(pb.group,{position:[pn.frontW,0,0],rotation:D.rotation,children:[je.jsxs("mesh",{position:[pn.flapW/2,0,0],castShadow:!0,receiveShadow:!0,children:[je.jsx("boxGeometry",{args:[pn.flapW,pn.flapH,pn.thickness]}),je.jsx("meshStandardMaterial",{...F})]}),je.jsxs("mesh",{position:[pn.flapW/2,-.6/2-pn.beltH/2,0],castShadow:!0,children:[je.jsx("boxGeometry",{args:[pn.beltW,pn.beltH,pn.thickness]}),je.jsx("meshStandardMaterial",{...F})]})]})]}),je.jsxs(pb.group,{position:[-.15/2,0,0],rotation:R.rotation,children:[je.jsxs("mesh",{position:[-1.6/2,0,0],castShadow:!0,receiveShadow:!0,children:[je.jsx("boxGeometry",{args:[pn.backW,pn.backH,pn.thickness]}),je.jsx("meshStandardMaterial",{...F})]}),U&&V&&je.jsxs("mesh",{position:[-1.6/2,0,-.015/2-.001],rotation:[0,Math.PI,0],children:[je.jsx("planeGeometry",{args:[pn.backW,pn.backH]}),je.jsx("meshStandardMaterial",{map:U,transparent:!0,...V,depthWrite:!1})]}),je.jsxs(pb.group,{position:[-1.6,0,0],rotation:I.rotation,children:[je.jsxs("mesh",{position:[-.8/2,0,0],castShadow:!0,receiveShadow:!0,children:[je.jsx("boxGeometry",{args:[pn.flapW,pn.flapH,pn.thickness]}),je.jsx("meshStandardMaterial",{...F})]}),je.jsxs("mesh",{position:[-.8/2,-.6/2+pn.slotW/2,pn.thickness/2+.001],children:[je.jsx("planeGeometry",{args:[pn.beltW+.02,pn.slotW]}),je.jsx("meshBasicMaterial",{color:"#000000",transparent:!0,opacity:.3})]})]})]}),n==="open"&&je.jsxs("mesh",{position:[0,0,-.15/2],castShadow:!0,children:[je.jsx("boxGeometry",{args:[pn.frontW*.9,pn.frontH*.9,pn.spine*.8]}),je.jsx("meshStandardMaterial",{color:"#f5f5f5",roughness:.9})]})]})}function hE(n,e,t,i,r=!1){const a=B.useRef(null),l=B.useMemo(()=>{const u=document.createElement("canvas"),h=4,p=r?t*100*h:e*100*h,g=r?e*100*h:t*100*h;u.width=p,u.height=g;const y=u.getContext("2d");if(!y)return null;y.clearRect(0,0,p,g);let _=n.text;switch(n.textCase){case"uppercase":_=_.toUpperCase();break;case"lowercase":_=_.toLowerCase();break;case"capitalize":_=_.replace(/\b\w/g,I=>I.toUpperCase());break}const b=n.fontSize*4*h;y.font=`${b}px ${n.fontFamily}, sans-serif`,y.fillStyle=i,y.textAlign=n.alignment,y.textBaseline="middle";let S=p/2;n.alignment==="left"&&(S=p*.1),n.alignment==="right"&&(S=p*.9);const A=_.split(`
`),w=b*n.lineHeight,E=A.length*w,R=(g-E)/2+w/2;A.forEach((I,L)=>{const N=R+L*w;if(n.letterSpacing>.1){const F=n.letterSpacing*4*h;let V=S;if(n.alignment==="center"){const P=(I.length-1)*F+y.measureText(I).width;V=(p-P)/2}else if(n.alignment==="right"){const P=(I.length-1)*F+y.measureText(I).width;V=p*.9-P}for(let P=0;P<I.length;P++)y.fillText(I[P],V,N),V+=y.measureText(I[P]).width+F}else y.fillText(I,S,N)});const D=new kw(u);return D.needsUpdate=!0,D.colorSpace=Wr,r&&(D.rotation=Math.PI/2,D.center.set(.5,.5)),D},[n,e,t,i,r]);return B.useEffect(()=>{const u=`https://fonts.googleapis.com/css2?family=${n.fontFamily.replace(/ /g,"+")}&display=swap`;if(!document.querySelector(`link[href="${u}"]`)){const p=document.createElement("link");p.href=u,p.rel="stylesheet",document.head.appendChild(p),p.onload=()=>{a.current&&(a.current.needsUpdate=!0)}}},[n.fontFamily]),a.current=l,l}function IK({viewMode:n,openAngle:e,animationSpeed:t,paperColorHex:i,paperTexture:r,textureIntensity:a,foilType:l,foilColor:u,debossEnabled:h,debossDepth:p,frontTypography:g,backTypography:y,spineTypography:_}){return je.jsxs(je.Fragment,{children:[je.jsx("ambientLight",{intensity:.4}),je.jsx("directionalLight",{position:[5,10,5],intensity:1,castShadow:!0,"shadow-mapSize":[2048,2048]}),je.jsx("directionalLight",{position:[-5,5,-5],intensity:.3}),je.jsx("pointLight",{position:[0,5,0],intensity:.5}),je.jsx(yZ,{preset:"studio"}),je.jsx(tZ,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:2,maxDistance:15,autoRotate:!1}),je.jsx(_Z,{position:[0,-2,0],opacity:.4,scale:10,blur:2,far:4}),je.jsx(OK,{viewMode:n,openAngle:e,animationSpeed:t,paperColor:i,paperTexture:r,textureIntensity:a,foilType:l,foilColor:u,debossEnabled:h,debossDepth:p,frontTypography:g,backTypography:y,spineTypography:_})]})}function PK(){const n=ud("View",{viewMode:{value:Qn.viewMode,options:["closed","open","flat"]},openAngle:{value:Qn.openAngle,min:0,max:180,step:1,render:p=>p("View.viewMode")==="open"},animationSpeed:{value:Qn.animationSpeed,min:.1,max:3,step:.1}}),e=ud("Paper",{paperColor:{value:Qn.paperColor,options:Object.keys(QD)},useCustomColor:Qn.useCustomColor,customPaperColor:{value:Qn.customPaperColor,render:p=>p("Paper.useCustomColor")},paperTexture:Qn.paperTexture,textureIntensity:{value:Qn.textureIntensity,min:0,max:1,step:.05,render:p=>p("Paper.paperTexture")}}),t=ud("Foil",{foilType:{value:Qn.foilType,options:["none","gloss","matte","silver","gold","copper","holographic"]},foilColor:{value:Qn.foilColor,render:p=>p("Foil.foilType")!=="none"}}),i=ud("Deboss",{debossEnabled:Qn.debossEnabled,debossDepth:{value:Qn.debossDepth,min:0,max:1,step:.05,render:p=>p("Deboss.debossEnabled")}}),r=ud("Front Typography",{text:{value:Qn.frontTypography.text,rows:!0},fontFamily:{value:Qn.frontTypography.fontFamily,options:dE},fontSize:{value:Qn.frontTypography.fontSize,min:4,max:48,step:.5},letterSpacing:{value:Qn.frontTypography.letterSpacing,min:-2,max:10,step:.1},lineHeight:{value:Qn.frontTypography.lineHeight,min:.8,max:3,step:.05},textCase:{value:Qn.frontTypography.textCase,options:["none","uppercase","lowercase","capitalize"]},alignment:{value:Qn.frontTypography.alignment,options:["left","center","right"]}}),a=ud("Back Typography",{text:{value:Qn.backTypography.text,rows:!0},fontFamily:{value:Qn.backTypography.fontFamily,options:dE},fontSize:{value:Qn.backTypography.fontSize,min:4,max:48,step:.5},letterSpacing:{value:Qn.backTypography.letterSpacing,min:-2,max:10,step:.1},lineHeight:{value:Qn.backTypography.lineHeight,min:.8,max:3,step:.05},textCase:{value:Qn.backTypography.textCase,options:["none","uppercase","lowercase","capitalize"]},alignment:{value:Qn.backTypography.alignment,options:["left","center","right"]}}),l=ud("Spine Typography",{text:{value:Qn.spineTypography.text,rows:!0},fontFamily:{value:Qn.spineTypography.fontFamily,options:dE},fontSize:{value:Qn.spineTypography.fontSize,min:4,max:24,step:.5},letterSpacing:{value:Qn.spineTypography.letterSpacing,min:-2,max:10,step:.1}}),u={viewMode:n.viewMode,openAngle:n.openAngle,animationSpeed:n.animationSpeed,paperColor:e.paperColor,useCustomColor:e.useCustomColor,customPaperColor:e.customPaperColor,paperTexture:e.paperTexture,textureIntensity:e.textureIntensity,foilType:t.foilType,foilColor:t.foilColor,debossEnabled:i.debossEnabled,debossDepth:i.debossDepth,frontTypography:{text:r.text,fontFamily:r.fontFamily,fontSize:r.fontSize,letterSpacing:r.letterSpacing,lineHeight:r.lineHeight,textCase:r.textCase,alignment:r.alignment},backTypography:{text:a.text,fontFamily:a.fontFamily,fontSize:a.fontSize,letterSpacing:a.letterSpacing,lineHeight:a.lineHeight,textCase:a.textCase,alignment:a.alignment},spineTypography:{text:l.text,fontFamily:l.fontFamily,fontSize:l.fontSize,letterSpacing:l.letterSpacing,lineHeight:Qn.spineTypography.lineHeight,textCase:Qn.spineTypography.textCase,alignment:Qn.spineTypography.alignment}},h=u.useCustomColor?u.customPaperColor:QD[u.paperColor];return je.jsxs("div",{className:"app",children:[je.jsx(_L,{collapsed:!1}),je.jsx(XH,{shadows:!0,camera:{position:[0,0,5],fov:50},gl:{antialias:!0,alpha:!0},children:je.jsx(IK,{...u,paperColorHex:h})})]})}tO.createRoot(document.getElementById("root")).render(je.jsx(B.StrictMode,{children:je.jsx(PK,{})}));
